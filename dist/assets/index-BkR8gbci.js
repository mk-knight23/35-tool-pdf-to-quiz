var dP=Object.defineProperty;var $x=o=>{throw TypeError(o)};var fP=(o,t,e)=>t in o?dP(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var wt=(o,t,e)=>fP(o,typeof t!="symbol"?t+"":t,e),Wy=(o,t,e)=>t.has(o)||$x("Cannot "+e);var c=(o,t,e)=>(Wy(o,t,"read from private field"),e?e.call(o):t.get(o)),_=(o,t,e)=>t.has(o)?$x("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(o):t.set(o,e),x=(o,t,e,n)=>(Wy(o,t,"write to private field"),n?n.call(o,e):t.set(o,e),e),C=(o,t,e)=>(Wy(o,t,"access private method"),e);var vn=(o,t,e,n)=>({set _(i){x(o,t,i,e)},get _(){return c(o,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();function zb(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var qy={exports:{}},Bc={},Xy={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx;function pP(){if(Gx)return Dt;Gx=1;var o=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=g&&F[g]||F["@@iterator"],typeof F=="function"?F:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function T(F,$,ft){this.props=F,this.context=$,this.refs=b,this.updater=ft||A}T.prototype.isReactComponent={},T.prototype.setState=function(F,$){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,$,"setState")},T.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function k(){}k.prototype=T.prototype;function M(F,$,ft){this.props=F,this.context=$,this.refs=b,this.updater=ft||A}var L=M.prototype=new k;L.constructor=M,S(L,T.prototype),L.isPureReactComponent=!0;var R=Array.isArray,I=Object.prototype.hasOwnProperty,z={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function U(F,$,ft){var Ct,Lt={},St=null,vt=null;if($!=null)for(Ct in $.ref!==void 0&&(vt=$.ref),$.key!==void 0&&(St=""+$.key),$)I.call($,Ct)&&!B.hasOwnProperty(Ct)&&(Lt[Ct]=$[Ct]);var Ot=arguments.length-2;if(Ot===1)Lt.children=ft;else if(1<Ot){for(var Yt=Array(Ot),mn=0;mn<Ot;mn++)Yt[mn]=arguments[mn+2];Lt.children=Yt}if(F&&F.defaultProps)for(Ct in Ot=F.defaultProps,Ot)Lt[Ct]===void 0&&(Lt[Ct]=Ot[Ct]);return{$$typeof:o,type:F,key:St,ref:vt,props:Lt,_owner:z.current}}function Q(F,$){return{$$typeof:o,type:F.type,key:$,ref:F.ref,props:F.props,_owner:F._owner}}function ct(F){return typeof F=="object"&&F!==null&&F.$$typeof===o}function ot(F){var $={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ft){return $[ft]})}var Rt=/\/+/g;function Ft(F,$){return typeof F=="object"&&F!==null&&F.key!=null?ot(""+F.key):$.toString(36)}function _t(F,$,ft,Ct,Lt){var St=typeof F;(St==="undefined"||St==="boolean")&&(F=null);var vt=!1;if(F===null)vt=!0;else switch(St){case"string":case"number":vt=!0;break;case"object":switch(F.$$typeof){case o:case t:vt=!0}}if(vt)return vt=F,Lt=Lt(vt),F=Ct===""?"."+Ft(vt,0):Ct,R(Lt)?(ft="",F!=null&&(ft=F.replace(Rt,"$&/")+"/"),_t(Lt,$,ft,"",function(mn){return mn})):Lt!=null&&(ct(Lt)&&(Lt=Q(Lt,ft+(!Lt.key||vt&&vt.key===Lt.key?"":(""+Lt.key).replace(Rt,"$&/")+"/")+F)),$.push(Lt)),1;if(vt=0,Ct=Ct===""?".":Ct+":",R(F))for(var Ot=0;Ot<F.length;Ot++){St=F[Ot];var Yt=Ct+Ft(St,Ot);vt+=_t(St,$,ft,Yt,Lt)}else if(Yt=v(F),typeof Yt=="function")for(F=Yt.call(F),Ot=0;!(St=F.next()).done;)St=St.value,Yt=Ct+Ft(St,Ot++),vt+=_t(St,$,ft,Yt,Lt);else if(St==="object")throw $=String(F),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return vt}function Kt(F,$,ft){if(F==null)return F;var Ct=[],Lt=0;return _t(F,Ct,"","",function(St){return $.call(ft,St,Lt++)}),Ct}function Z(F){if(F._status===-1){var $=F._result;$=$(),$.then(function(ft){(F._status===0||F._status===-1)&&(F._status=1,F._result=ft)},function(ft){(F._status===0||F._status===-1)&&(F._status=2,F._result=ft)}),F._status===-1&&(F._status=0,F._result=$)}if(F._status===1)return F._result.default;throw F._result}var K={current:null},q={transition:null},lt={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:q,ReactCurrentOwner:z};function J(){throw Error("act(...) is not supported in production builds of React.")}return Dt.Children={map:Kt,forEach:function(F,$,ft){Kt(F,function(){$.apply(this,arguments)},ft)},count:function(F){var $=0;return Kt(F,function(){$++}),$},toArray:function(F){return Kt(F,function($){return $})||[]},only:function(F){if(!ct(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Dt.Component=T,Dt.Fragment=e,Dt.Profiler=i,Dt.PureComponent=M,Dt.StrictMode=n,Dt.Suspense=d,Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lt,Dt.act=J,Dt.cloneElement=function(F,$,ft){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ct=S({},F.props),Lt=F.key,St=F.ref,vt=F._owner;if($!=null){if($.ref!==void 0&&(St=$.ref,vt=z.current),$.key!==void 0&&(Lt=""+$.key),F.type&&F.type.defaultProps)var Ot=F.type.defaultProps;for(Yt in $)I.call($,Yt)&&!B.hasOwnProperty(Yt)&&(Ct[Yt]=$[Yt]===void 0&&Ot!==void 0?Ot[Yt]:$[Yt])}var Yt=arguments.length-2;if(Yt===1)Ct.children=ft;else if(1<Yt){Ot=Array(Yt);for(var mn=0;mn<Yt;mn++)Ot[mn]=arguments[mn+2];Ct.children=Ot}return{$$typeof:o,type:F.type,key:Lt,ref:St,props:Ct,_owner:vt}},Dt.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},Dt.createElement=U,Dt.createFactory=function(F){var $=U.bind(null,F);return $.type=F,$},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(F){return{$$typeof:u,render:F}},Dt.isValidElement=ct,Dt.lazy=function(F){return{$$typeof:m,_payload:{_status:-1,_result:F},_init:Z}},Dt.memo=function(F,$){return{$$typeof:f,type:F,compare:$===void 0?null:$}},Dt.startTransition=function(F){var $=q.transition;q.transition={};try{F()}finally{q.transition=$}},Dt.unstable_act=J,Dt.useCallback=function(F,$){return K.current.useCallback(F,$)},Dt.useContext=function(F){return K.current.useContext(F)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(F){return K.current.useDeferredValue(F)},Dt.useEffect=function(F,$){return K.current.useEffect(F,$)},Dt.useId=function(){return K.current.useId()},Dt.useImperativeHandle=function(F,$,ft){return K.current.useImperativeHandle(F,$,ft)},Dt.useInsertionEffect=function(F,$){return K.current.useInsertionEffect(F,$)},Dt.useLayoutEffect=function(F,$){return K.current.useLayoutEffect(F,$)},Dt.useMemo=function(F,$){return K.current.useMemo(F,$)},Dt.useReducer=function(F,$,ft){return K.current.useReducer(F,$,ft)},Dt.useRef=function(F){return K.current.useRef(F)},Dt.useState=function(F){return K.current.useState(F)},Dt.useSyncExternalStore=function(F,$,ft){return K.current.useSyncExternalStore(F,$,ft)},Dt.useTransition=function(){return K.current.useTransition()},Dt.version="18.3.1",Dt}var Wx;function Yv(){return Wx||(Wx=1,Xy.exports=pP()),Xy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx;function mP(){if(qx)return Bc;qx=1;var o=Yv(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,f){var m,g={},v=null,A=null;f!==void 0&&(v=""+f),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(A=d.ref);for(m in d)n.call(d,m)&&!a.hasOwnProperty(m)&&(g[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:t,type:u,key:v,ref:A,props:g,_owner:i.current}}return Bc.Fragment=e,Bc.jsx=l,Bc.jsxs=l,Bc}var Xx;function gP(){return Xx||(Xx=1,qy.exports=mP()),qy.exports}var O=gP(),et=Yv();const qc=zb(et);var gp={},Ky={exports:{}},Ln={},Yy={exports:{}},Qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kx;function yP(){return Kx||(Kx=1,(function(o){function t(q,lt){var J=q.length;q.push(lt);t:for(;0<J;){var F=J-1>>>1,$=q[F];if(0<i($,lt))q[F]=lt,q[J]=$,J=F;else break t}}function e(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var lt=q[0],J=q.pop();if(J!==lt){q[0]=J;t:for(var F=0,$=q.length,ft=$>>>1;F<ft;){var Ct=2*(F+1)-1,Lt=q[Ct],St=Ct+1,vt=q[St];if(0>i(Lt,J))St<$&&0>i(vt,Lt)?(q[F]=vt,q[St]=J,F=St):(q[F]=Lt,q[Ct]=J,F=Ct);else if(St<$&&0>i(vt,J))q[F]=vt,q[St]=J,F=St;else break t}}return lt}function i(q,lt){var J=q.sortIndex-lt.sortIndex;return J!==0?J:q.id-lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;o.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();o.unstable_now=function(){return l.now()-u}}var d=[],f=[],m=1,g=null,v=3,A=!1,S=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(q){for(var lt=e(f);lt!==null;){if(lt.callback===null)n(f);else if(lt.startTime<=q)n(f),lt.sortIndex=lt.expirationTime,t(d,lt);else break;lt=e(f)}}function R(q){if(b=!1,L(q),!S)if(e(d)!==null)S=!0,Z(I);else{var lt=e(f);lt!==null&&K(R,lt.startTime-q)}}function I(q,lt){S=!1,b&&(b=!1,k(U),U=-1),A=!0;var J=v;try{for(L(lt),g=e(d);g!==null&&(!(g.expirationTime>lt)||q&&!ot());){var F=g.callback;if(typeof F=="function"){g.callback=null,v=g.priorityLevel;var $=F(g.expirationTime<=lt);lt=o.unstable_now(),typeof $=="function"?g.callback=$:g===e(d)&&n(d),L(lt)}else n(d);g=e(d)}if(g!==null)var ft=!0;else{var Ct=e(f);Ct!==null&&K(R,Ct.startTime-lt),ft=!1}return ft}finally{g=null,v=J,A=!1}}var z=!1,B=null,U=-1,Q=5,ct=-1;function ot(){return!(o.unstable_now()-ct<Q)}function Rt(){if(B!==null){var q=o.unstable_now();ct=q;var lt=!0;try{lt=B(!0,q)}finally{lt?Ft():(z=!1,B=null)}}else z=!1}var Ft;if(typeof M=="function")Ft=function(){M(Rt)};else if(typeof MessageChannel<"u"){var _t=new MessageChannel,Kt=_t.port2;_t.port1.onmessage=Rt,Ft=function(){Kt.postMessage(null)}}else Ft=function(){T(Rt,0)};function Z(q){B=q,z||(z=!0,Ft())}function K(q,lt){U=T(function(){q(o.unstable_now())},lt)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(q){q.callback=null},o.unstable_continueExecution=function(){S||A||(S=!0,Z(I))},o.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<q?Math.floor(1e3/q):5},o.unstable_getCurrentPriorityLevel=function(){return v},o.unstable_getFirstCallbackNode=function(){return e(d)},o.unstable_next=function(q){switch(v){case 1:case 2:case 3:var lt=3;break;default:lt=v}var J=v;v=lt;try{return q()}finally{v=J}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(q,lt){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var J=v;v=q;try{return lt()}finally{v=J}},o.unstable_scheduleCallback=function(q,lt,J){var F=o.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?F+J:F):J=F,q){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=J+$,q={id:m++,callback:lt,priorityLevel:q,startTime:J,expirationTime:$,sortIndex:-1},J>F?(q.sortIndex=J,t(f,q),e(d)===null&&q===e(f)&&(b?(k(U),U=-1):b=!0,K(R,J-F))):(q.sortIndex=$,t(d,q),S||A||(S=!0,Z(I))),q},o.unstable_shouldYield=ot,o.unstable_wrapCallback=function(q){var lt=v;return function(){var J=v;v=lt;try{return q.apply(this,arguments)}finally{v=J}}}})(Qy)),Qy}var Yx;function vP(){return Yx||(Yx=1,Yy.exports=yP()),Yy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qx;function wP(){if(Qx)return Ln;Qx=1;var o=Yv(),t=vP();function e(s){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)r+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,r){l(s,r),l(s+"Capture",r)}function l(s,r){for(i[s]=r,s=0;s<r.length;s++)n.add(r[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(s){return d.call(g,s)?!0:d.call(m,s)?!1:f.test(s)?g[s]=!0:(m[s]=!0,!1)}function A(s,r,h,p){if(h!==null&&h.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,r,h,p){if(r===null||typeof r>"u"||A(s,r,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function b(s,r,h,p,y,w,E){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=h,this.propertyName=s,this.type=r,this.sanitizeURL=w,this.removeEmptyString=E}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){T[s]=new b(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var r=s[0];T[r]=new b(r,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){T[s]=new b(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){T[s]=new b(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){T[s]=new b(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){T[s]=new b(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){T[s]=new b(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){T[s]=new b(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){T[s]=new b(s,5,!1,s.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function M(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var r=s.replace(k,M);T[r]=new b(r,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var r=s.replace(k,M);T[r]=new b(r,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var r=s.replace(k,M);T[r]=new b(r,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){T[s]=new b(s,1,!1,s.toLowerCase(),null,!1,!1)}),T.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){T[s]=new b(s,1,!1,s.toLowerCase(),null,!0,!0)});function L(s,r,h,p){var y=T.hasOwnProperty(r)?T[r]:null;(y!==null?y.type!==0:p||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,h,y,p)&&(h=null),p||y===null?v(r)&&(h===null?s.removeAttribute(r):s.setAttribute(r,""+h)):y.mustUseProperty?s[y.propertyName]=h===null?y.type===3?!1:"":h:(r=y.attributeName,p=y.attributeNamespace,h===null?s.removeAttribute(r):(y=y.type,h=y===3||y===4&&h===!0?"":""+h,p?s.setAttributeNS(p,r,h):s.setAttribute(r,h))))}var R=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),z=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ct=Symbol.for("react.provider"),ot=Symbol.for("react.context"),Rt=Symbol.for("react.forward_ref"),Ft=Symbol.for("react.suspense"),_t=Symbol.for("react.suspense_list"),Kt=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),q=Symbol.iterator;function lt(s){return s===null||typeof s!="object"?null:(s=q&&s[q]||s["@@iterator"],typeof s=="function"?s:null)}var J=Object.assign,F;function $(s){if(F===void 0)try{throw Error()}catch(h){var r=h.stack.trim().match(/\n( *(at )?)/);F=r&&r[1]||""}return`
`+F+s}var ft=!1;function Ct(s,r){if(!s||ft)return"";ft=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(H){var p=H}Reflect.construct(s,[],r)}else{try{r.call()}catch(H){p=H}s.call(r.prototype)}else{try{throw Error()}catch(H){p=H}s()}}catch(H){if(H&&p&&typeof H.stack=="string"){for(var y=H.stack.split(`
`),w=p.stack.split(`
`),E=y.length-1,P=w.length-1;1<=E&&0<=P&&y[E]!==w[P];)P--;for(;1<=E&&0<=P;E--,P--)if(y[E]!==w[P]){if(E!==1||P!==1)do if(E--,P--,0>P||y[E]!==w[P]){var D=`
`+y[E].replace(" at new "," at ");return s.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",s.displayName)),D}while(1<=E&&0<=P);break}}}finally{ft=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?$(s):""}function Lt(s){switch(s.tag){case 5:return $(s.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return s=Ct(s.type,!1),s;case 11:return s=Ct(s.type.render,!1),s;case 1:return s=Ct(s.type,!0),s;default:return""}}function St(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case B:return"Fragment";case z:return"Portal";case Q:return"Profiler";case U:return"StrictMode";case Ft:return"Suspense";case _t:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case ot:return(s.displayName||"Context")+".Consumer";case ct:return(s._context.displayName||"Context")+".Provider";case Rt:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Kt:return r=s.displayName||null,r!==null?r:St(s.type)||"Memo";case Z:r=s._payload,s=s._init;try{return St(s(r))}catch{}}return null}function vt(s){var r=s.type;switch(s.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=r.render,s=s.displayName||s.name||"",r.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return St(r);case 8:return r===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ot(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Yt(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function mn(s){var r=Yt(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),p=""+s[r];if(!s.hasOwnProperty(r)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,w=h.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(E){p=""+E,w.call(this,E)}}),Object.defineProperty(s,r,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(E){p=""+E},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function of(s){s._valueTracker||(s._valueTracker=mn(s))}function Yw(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var h=r.getValue(),p="";return s&&(p=Yt(s)?s.checked?"true":"false":s.value),s=p,s!==h?(r.setValue(s),!0):!1}function af(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Jm(s,r){var h=r.checked;return J({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function Qw(s,r){var h=r.defaultValue==null?"":r.defaultValue,p=r.checked!=null?r.checked:r.defaultChecked;h=Ot(r.value!=null?r.value:h),s._wrapperState={initialChecked:p,initialValue:h,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Zw(s,r){r=r.checked,r!=null&&L(s,"checked",r,!1)}function tg(s,r){Zw(s,r);var h=Ot(r.value),p=r.type;if(h!=null)p==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}r.hasOwnProperty("value")?eg(s,r.type,h):r.hasOwnProperty("defaultValue")&&eg(s,r.type,Ot(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(s.defaultChecked=!!r.defaultChecked)}function Jw(s,r,h){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var p=r.type;if(!(p!=="submit"&&p!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+s._wrapperState.initialValue,h||r===s.value||(s.value=r),s.defaultValue=r}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function eg(s,r,h){(r!=="number"||af(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var nc=Array.isArray;function il(s,r,h,p){if(s=s.options,r){r={};for(var y=0;y<h.length;y++)r["$"+h[y]]=!0;for(h=0;h<s.length;h++)y=r.hasOwnProperty("$"+s[h].value),s[h].selected!==y&&(s[h].selected=y),y&&p&&(s[h].defaultSelected=!0)}else{for(h=""+Ot(h),r=null,y=0;y<s.length;y++){if(s[y].value===h){s[y].selected=!0,p&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function ng(s,r){if(r.dangerouslySetInnerHTML!=null)throw Error(e(91));return J({},r,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function tA(s,r){var h=r.value;if(h==null){if(h=r.children,r=r.defaultValue,h!=null){if(r!=null)throw Error(e(92));if(nc(h)){if(1<h.length)throw Error(e(93));h=h[0]}r=h}r==null&&(r=""),h=r}s._wrapperState={initialValue:Ot(h)}}function eA(s,r){var h=Ot(r.value),p=Ot(r.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),r.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),p!=null&&(s.defaultValue=""+p)}function nA(s){var r=s.textContent;r===s._wrapperState.initialValue&&r!==""&&r!==null&&(s.value=r)}function sA(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sg(s,r){return s==null||s==="http://www.w3.org/1999/xhtml"?sA(r):s==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var lf,iA=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,h,p,y){MSApp.execUnsafeLocalFunction(function(){return s(r,h,p,y)})}:s})(function(s,r){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=r;else{for(lf=lf||document.createElement("div"),lf.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=lf.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;r.firstChild;)s.appendChild(r.firstChild)}});function sc(s,r){if(r){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=r;return}}s.textContent=r}var ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gT=["Webkit","ms","Moz","O"];Object.keys(ic).forEach(function(s){gT.forEach(function(r){r=r+s.charAt(0).toUpperCase()+s.substring(1),ic[r]=ic[s]})});function rA(s,r,h){return r==null||typeof r=="boolean"||r===""?"":h||typeof r!="number"||r===0||ic.hasOwnProperty(s)&&ic[s]?(""+r).trim():r+"px"}function oA(s,r){s=s.style;for(var h in r)if(r.hasOwnProperty(h)){var p=h.indexOf("--")===0,y=rA(h,r[h],p);h==="float"&&(h="cssFloat"),p?s.setProperty(h,y):s[h]=y}}var yT=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ig(s,r){if(r){if(yT[s]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(e(137,s));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(e(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(e(61))}if(r.style!=null&&typeof r.style!="object")throw Error(e(62))}}function rg(s,r){if(s.indexOf("-")===-1)return typeof r.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var og=null;function ag(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var lg=null,rl=null,ol=null;function aA(s){if(s=Cc(s)){if(typeof lg!="function")throw Error(e(280));var r=s.stateNode;r&&(r=Rf(r),lg(s.stateNode,s.type,r))}}function lA(s){rl?ol?ol.push(s):ol=[s]:rl=s}function uA(){if(rl){var s=rl,r=ol;if(ol=rl=null,aA(s),r)for(s=0;s<r.length;s++)aA(r[s])}}function cA(s,r){return s(r)}function hA(){}var ug=!1;function dA(s,r,h){if(ug)return s(r,h);ug=!0;try{return cA(s,r,h)}finally{ug=!1,(rl!==null||ol!==null)&&(hA(),uA())}}function rc(s,r){var h=s.stateNode;if(h===null)return null;var p=Rf(h);if(p===null)return null;h=p[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break t;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(e(231,r,typeof h));return h}var cg=!1;if(u)try{var oc={};Object.defineProperty(oc,"passive",{get:function(){cg=!0}}),window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{cg=!1}function vT(s,r,h,p,y,w,E,P,D){var H=Array.prototype.slice.call(arguments,3);try{r.apply(h,H)}catch(W){this.onError(W)}}var ac=!1,uf=null,cf=!1,hg=null,wT={onError:function(s){ac=!0,uf=s}};function AT(s,r,h,p,y,w,E,P,D){ac=!1,uf=null,vT.apply(wT,arguments)}function xT(s,r,h,p,y,w,E,P,D){if(AT.apply(this,arguments),ac){if(ac){var H=uf;ac=!1,uf=null}else throw Error(e(198));cf||(cf=!0,hg=H)}}function _o(s){var r=s,h=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(h=r.return),s=r.return;while(s)}return r.tag===3?h:null}function fA(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function pA(s){if(_o(s)!==s)throw Error(e(188))}function ST(s){var r=s.alternate;if(!r){if(r=_o(s),r===null)throw Error(e(188));return r!==s?null:s}for(var h=s,p=r;;){var y=h.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){h=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===h)return pA(y),s;if(w===p)return pA(y),r;w=w.sibling}throw Error(e(188))}if(h.return!==p.return)h=y,p=w;else{for(var E=!1,P=y.child;P;){if(P===h){E=!0,h=y,p=w;break}if(P===p){E=!0,p=y,h=w;break}P=P.sibling}if(!E){for(P=w.child;P;){if(P===h){E=!0,h=w,p=y;break}if(P===p){E=!0,p=w,h=y;break}P=P.sibling}if(!E)throw Error(e(189))}}if(h.alternate!==p)throw Error(e(190))}if(h.tag!==3)throw Error(e(188));return h.stateNode.current===h?s:r}function mA(s){return s=ST(s),s!==null?gA(s):null}function gA(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var r=gA(s);if(r!==null)return r;s=s.sibling}return null}var yA=t.unstable_scheduleCallback,vA=t.unstable_cancelCallback,bT=t.unstable_shouldYield,ET=t.unstable_requestPaint,ye=t.unstable_now,_T=t.unstable_getCurrentPriorityLevel,dg=t.unstable_ImmediatePriority,wA=t.unstable_UserBlockingPriority,hf=t.unstable_NormalPriority,CT=t.unstable_LowPriority,AA=t.unstable_IdlePriority,df=null,Zs=null;function TT(s){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(df,s,void 0,(s.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:MT,kT=Math.log,PT=Math.LN2;function MT(s){return s>>>=0,s===0?32:31-(kT(s)/PT|0)|0}var ff=64,pf=4194304;function lc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function mf(s,r){var h=s.pendingLanes;if(h===0)return 0;var p=0,y=s.suspendedLanes,w=s.pingedLanes,E=h&268435455;if(E!==0){var P=E&~y;P!==0?p=lc(P):(w&=E,w!==0&&(p=lc(w)))}else E=h&~y,E!==0?p=lc(E):w!==0&&(p=lc(w));if(p===0)return 0;if(r!==0&&r!==p&&(r&y)===0&&(y=p&-p,w=r&-r,y>=w||y===16&&(w&4194240)!==0))return r;if((p&4)!==0&&(p|=h&16),r=s.entangledLanes,r!==0)for(s=s.entanglements,r&=p;0<r;)h=31-Ts(r),y=1<<h,p|=s[h],r&=~y;return p}function RT(s,r){switch(s){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LT(s,r){for(var h=s.suspendedLanes,p=s.pingedLanes,y=s.expirationTimes,w=s.pendingLanes;0<w;){var E=31-Ts(w),P=1<<E,D=y[E];D===-1?((P&h)===0||(P&p)!==0)&&(y[E]=RT(P,r)):D<=r&&(s.expiredLanes|=P),w&=~P}}function fg(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function xA(){var s=ff;return ff<<=1,(ff&4194240)===0&&(ff=64),s}function pg(s){for(var r=[],h=0;31>h;h++)r.push(s);return r}function uc(s,r,h){s.pendingLanes|=r,r!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,r=31-Ts(r),s[r]=h}function DT(s,r){var h=s.pendingLanes&~r;s.pendingLanes=r,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=r,s.mutableReadLanes&=r,s.entangledLanes&=r,r=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<h;){var y=31-Ts(h),w=1<<y;r[y]=0,p[y]=-1,s[y]=-1,h&=~w}}function mg(s,r){var h=s.entangledLanes|=r;for(s=s.entanglements;h;){var p=31-Ts(h),y=1<<p;y&r|s[p]&r&&(s[p]|=r),h&=~y}}var $t=0;function SA(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var bA,gg,EA,_A,CA,yg=!1,gf=[],vr=null,wr=null,Ar=null,cc=new Map,hc=new Map,xr=[],IT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TA(s,r){switch(s){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":cc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(r.pointerId)}}function dc(s,r,h,p,y,w){return s===null||s.nativeEvent!==w?(s={blockedOn:r,domEventName:h,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},r!==null&&(r=Cc(r),r!==null&&gg(r)),s):(s.eventSystemFlags|=p,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function NT(s,r,h,p,y){switch(r){case"focusin":return vr=dc(vr,s,r,h,p,y),!0;case"dragenter":return wr=dc(wr,s,r,h,p,y),!0;case"mouseover":return Ar=dc(Ar,s,r,h,p,y),!0;case"pointerover":var w=y.pointerId;return cc.set(w,dc(cc.get(w)||null,s,r,h,p,y)),!0;case"gotpointercapture":return w=y.pointerId,hc.set(w,dc(hc.get(w)||null,s,r,h,p,y)),!0}return!1}function kA(s){var r=Co(s.target);if(r!==null){var h=_o(r);if(h!==null){if(r=h.tag,r===13){if(r=fA(h),r!==null){s.blockedOn=r,CA(s.priority,function(){EA(h)});return}}else if(r===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function yf(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var h=wg(s.domEventName,s.eventSystemFlags,r[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var p=new h.constructor(h.type,h);og=p,h.target.dispatchEvent(p),og=null}else return r=Cc(h),r!==null&&gg(r),s.blockedOn=h,!1;r.shift()}return!0}function PA(s,r,h){yf(s)&&h.delete(r)}function FT(){yg=!1,vr!==null&&yf(vr)&&(vr=null),wr!==null&&yf(wr)&&(wr=null),Ar!==null&&yf(Ar)&&(Ar=null),cc.forEach(PA),hc.forEach(PA)}function fc(s,r){s.blockedOn===r&&(s.blockedOn=null,yg||(yg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,FT)))}function pc(s){function r(y){return fc(y,s)}if(0<gf.length){fc(gf[0],s);for(var h=1;h<gf.length;h++){var p=gf[h];p.blockedOn===s&&(p.blockedOn=null)}}for(vr!==null&&fc(vr,s),wr!==null&&fc(wr,s),Ar!==null&&fc(Ar,s),cc.forEach(r),hc.forEach(r),h=0;h<xr.length;h++)p=xr[h],p.blockedOn===s&&(p.blockedOn=null);for(;0<xr.length&&(h=xr[0],h.blockedOn===null);)kA(h),h.blockedOn===null&&xr.shift()}var al=R.ReactCurrentBatchConfig,vf=!0;function OT(s,r,h,p){var y=$t,w=al.transition;al.transition=null;try{$t=1,vg(s,r,h,p)}finally{$t=y,al.transition=w}}function jT(s,r,h,p){var y=$t,w=al.transition;al.transition=null;try{$t=4,vg(s,r,h,p)}finally{$t=y,al.transition=w}}function vg(s,r,h,p){if(vf){var y=wg(s,r,h,p);if(y===null)Fg(s,r,p,wf,h),TA(s,p);else if(NT(y,s,r,h,p))p.stopPropagation();else if(TA(s,p),r&4&&-1<IT.indexOf(s)){for(;y!==null;){var w=Cc(y);if(w!==null&&bA(w),w=wg(s,r,h,p),w===null&&Fg(s,r,p,wf,h),w===y)break;y=w}y!==null&&p.stopPropagation()}else Fg(s,r,p,null,h)}}var wf=null;function wg(s,r,h,p){if(wf=null,s=ag(p),s=Co(s),s!==null)if(r=_o(s),r===null)s=null;else if(h=r.tag,h===13){if(s=fA(r),s!==null)return s;s=null}else if(h===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null);return wf=s,null}function MA(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_T()){case dg:return 1;case wA:return 4;case hf:case CT:return 16;case AA:return 536870912;default:return 16}default:return 16}}var Sr=null,Ag=null,Af=null;function RA(){if(Af)return Af;var s,r=Ag,h=r.length,p,y="value"in Sr?Sr.value:Sr.textContent,w=y.length;for(s=0;s<h&&r[s]===y[s];s++);var E=h-s;for(p=1;p<=E&&r[h-p]===y[w-p];p++);return Af=y.slice(s,1<p?1-p:void 0)}function xf(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Sf(){return!0}function LA(){return!1}function Vn(s){function r(h,p,y,w,E){this._reactName=h,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=E,this.currentTarget=null;for(var P in s)s.hasOwnProperty(P)&&(h=s[P],this[P]=h?h(w):w[P]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Sf:LA,this.isPropagationStopped=LA,this}return J(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Sf)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Sf)},persist:function(){},isPersistent:Sf}),r}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xg=Vn(ll),mc=J({},ll,{view:0,detail:0}),zT=Vn(mc),Sg,bg,gc,bf=J({},mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_g,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gc&&(gc&&s.type==="mousemove"?(Sg=s.screenX-gc.screenX,bg=s.screenY-gc.screenY):bg=Sg=0,gc=s),Sg)},movementY:function(s){return"movementY"in s?s.movementY:bg}}),DA=Vn(bf),VT=J({},bf,{dataTransfer:0}),BT=Vn(VT),HT=J({},mc,{relatedTarget:0}),Eg=Vn(HT),UT=J({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),$T=Vn(UT),GT=J({},ll,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),WT=Vn(GT),qT=J({},ll,{data:0}),IA=Vn(qT),XT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QT(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=YT[s])?!!r[s]:!1}function _g(){return QT}var ZT=J({},mc,{key:function(s){if(s.key){var r=XT[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=xf(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?KT[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_g,charCode:function(s){return s.type==="keypress"?xf(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?xf(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),JT=Vn(ZT),tk=J({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NA=Vn(tk),ek=J({},mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_g}),nk=Vn(ek),sk=J({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),ik=Vn(sk),rk=J({},bf,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ok=Vn(rk),ak=[9,13,27,32],Cg=u&&"CompositionEvent"in window,yc=null;u&&"documentMode"in document&&(yc=document.documentMode);var lk=u&&"TextEvent"in window&&!yc,FA=u&&(!Cg||yc&&8<yc&&11>=yc),OA=" ",jA=!1;function zA(s,r){switch(s){case"keyup":return ak.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VA(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ul=!1;function uk(s,r){switch(s){case"compositionend":return VA(r);case"keypress":return r.which!==32?null:(jA=!0,OA);case"textInput":return s=r.data,s===OA&&jA?null:s;default:return null}}function ck(s,r){if(ul)return s==="compositionend"||!Cg&&zA(s,r)?(s=RA(),Af=Ag=Sr=null,ul=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return FA&&r.locale!=="ko"?null:r.data;default:return null}}var hk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BA(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!hk[s.type]:r==="textarea"}function HA(s,r,h,p){lA(p),r=kf(r,"onChange"),0<r.length&&(h=new xg("onChange","change",null,h,p),s.push({event:h,listeners:r}))}var vc=null,wc=null;function dk(s){o1(s,0)}function Ef(s){var r=pl(s);if(Yw(r))return s}function fk(s,r){if(s==="change")return r}var UA=!1;if(u){var Tg;if(u){var kg="oninput"in document;if(!kg){var $A=document.createElement("div");$A.setAttribute("oninput","return;"),kg=typeof $A.oninput=="function"}Tg=kg}else Tg=!1;UA=Tg&&(!document.documentMode||9<document.documentMode)}function GA(){vc&&(vc.detachEvent("onpropertychange",WA),wc=vc=null)}function WA(s){if(s.propertyName==="value"&&Ef(wc)){var r=[];HA(r,wc,s,ag(s)),dA(dk,r)}}function pk(s,r,h){s==="focusin"?(GA(),vc=r,wc=h,vc.attachEvent("onpropertychange",WA)):s==="focusout"&&GA()}function mk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ef(wc)}function gk(s,r){if(s==="click")return Ef(r)}function yk(s,r){if(s==="input"||s==="change")return Ef(r)}function vk(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var ks=typeof Object.is=="function"?Object.is:vk;function Ac(s,r){if(ks(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var h=Object.keys(s),p=Object.keys(r);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var y=h[p];if(!d.call(r,y)||!ks(s[y],r[y]))return!1}return!0}function qA(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function XA(s,r){var h=qA(s);s=0;for(var p;h;){if(h.nodeType===3){if(p=s+h.textContent.length,s<=r&&p>=r)return{node:h,offset:r-s};s=p}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=qA(h)}}function KA(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?KA(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function YA(){for(var s=window,r=af();r instanceof s.HTMLIFrameElement;){try{var h=typeof r.contentWindow.location.href=="string"}catch{h=!1}if(h)s=r.contentWindow;else break;r=af(s.document)}return r}function Pg(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}function wk(s){var r=YA(),h=s.focusedElem,p=s.selectionRange;if(r!==h&&h&&h.ownerDocument&&KA(h.ownerDocument.documentElement,h)){if(p!==null&&Pg(h)){if(r=p.start,s=p.end,s===void 0&&(s=r),"selectionStart"in h)h.selectionStart=r,h.selectionEnd=Math.min(s,h.value.length);else if(s=(r=h.ownerDocument||document)&&r.defaultView||window,s.getSelection){s=s.getSelection();var y=h.textContent.length,w=Math.min(p.start,y);p=p.end===void 0?w:Math.min(p.end,y),!s.extend&&w>p&&(y=p,p=w,w=y),y=XA(h,w);var E=XA(h,p);y&&E&&(s.rangeCount!==1||s.anchorNode!==y.node||s.anchorOffset!==y.offset||s.focusNode!==E.node||s.focusOffset!==E.offset)&&(r=r.createRange(),r.setStart(y.node,y.offset),s.removeAllRanges(),w>p?(s.addRange(r),s.extend(E.node,E.offset)):(r.setEnd(E.node,E.offset),s.addRange(r)))}}for(r=[],s=h;s=s.parentNode;)s.nodeType===1&&r.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<r.length;h++)s=r[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Ak=u&&"documentMode"in document&&11>=document.documentMode,cl=null,Mg=null,xc=null,Rg=!1;function QA(s,r,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Rg||cl==null||cl!==af(p)||(p=cl,"selectionStart"in p&&Pg(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),xc&&Ac(xc,p)||(xc=p,p=kf(Mg,"onSelect"),0<p.length&&(r=new xg("onSelect","select",null,r,h),s.push({event:r,listeners:p}),r.target=cl)))}function _f(s,r){var h={};return h[s.toLowerCase()]=r.toLowerCase(),h["Webkit"+s]="webkit"+r,h["Moz"+s]="moz"+r,h}var hl={animationend:_f("Animation","AnimationEnd"),animationiteration:_f("Animation","AnimationIteration"),animationstart:_f("Animation","AnimationStart"),transitionend:_f("Transition","TransitionEnd")},Lg={},ZA={};u&&(ZA=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function Cf(s){if(Lg[s])return Lg[s];if(!hl[s])return s;var r=hl[s],h;for(h in r)if(r.hasOwnProperty(h)&&h in ZA)return Lg[s]=r[h];return s}var JA=Cf("animationend"),t1=Cf("animationiteration"),e1=Cf("animationstart"),n1=Cf("transitionend"),s1=new Map,i1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(s,r){s1.set(s,r),a(r,[s])}for(var Dg=0;Dg<i1.length;Dg++){var Ig=i1[Dg],xk=Ig.toLowerCase(),Sk=Ig[0].toUpperCase()+Ig.slice(1);br(xk,"on"+Sk)}br(JA,"onAnimationEnd"),br(t1,"onAnimationIteration"),br(e1,"onAnimationStart"),br("dblclick","onDoubleClick"),br("focusin","onFocus"),br("focusout","onBlur"),br(n1,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sc));function r1(s,r,h){var p=s.type||"unknown-event";s.currentTarget=h,xT(p,r,void 0,s),s.currentTarget=null}function o1(s,r){r=(r&4)!==0;for(var h=0;h<s.length;h++){var p=s[h],y=p.event;p=p.listeners;t:{var w=void 0;if(r)for(var E=p.length-1;0<=E;E--){var P=p[E],D=P.instance,H=P.currentTarget;if(P=P.listener,D!==w&&y.isPropagationStopped())break t;r1(y,P,H),w=D}else for(E=0;E<p.length;E++){if(P=p[E],D=P.instance,H=P.currentTarget,P=P.listener,D!==w&&y.isPropagationStopped())break t;r1(y,P,H),w=D}}}if(cf)throw s=hg,cf=!1,hg=null,s}function te(s,r){var h=r[Hg];h===void 0&&(h=r[Hg]=new Set);var p=s+"__bubble";h.has(p)||(a1(r,s,2,!1),h.add(p))}function Ng(s,r,h){var p=0;r&&(p|=4),a1(h,s,p,r)}var Tf="_reactListening"+Math.random().toString(36).slice(2);function bc(s){if(!s[Tf]){s[Tf]=!0,n.forEach(function(h){h!=="selectionchange"&&(bk.has(h)||Ng(h,!1,s),Ng(h,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Tf]||(r[Tf]=!0,Ng("selectionchange",!1,r))}}function a1(s,r,h,p){switch(MA(r)){case 1:var y=OT;break;case 4:y=jT;break;default:y=vg}h=y.bind(null,r,h,s),y=void 0,!cg||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),p?y!==void 0?s.addEventListener(r,h,{capture:!0,passive:y}):s.addEventListener(r,h,!0):y!==void 0?s.addEventListener(r,h,{passive:y}):s.addEventListener(r,h,!1)}function Fg(s,r,h,p,y){var w=p;if((r&1)===0&&(r&2)===0&&p!==null)t:for(;;){if(p===null)return;var E=p.tag;if(E===3||E===4){var P=p.stateNode.containerInfo;if(P===y||P.nodeType===8&&P.parentNode===y)break;if(E===4)for(E=p.return;E!==null;){var D=E.tag;if((D===3||D===4)&&(D=E.stateNode.containerInfo,D===y||D.nodeType===8&&D.parentNode===y))return;E=E.return}for(;P!==null;){if(E=Co(P),E===null)return;if(D=E.tag,D===5||D===6){p=w=E;continue t}P=P.parentNode}}p=p.return}dA(function(){var H=w,W=ag(h),X=[];t:{var G=s1.get(s);if(G!==void 0){var nt=xg,ut=s;switch(s){case"keypress":if(xf(h)===0)break t;case"keydown":case"keyup":nt=JT;break;case"focusin":ut="focus",nt=Eg;break;case"focusout":ut="blur",nt=Eg;break;case"beforeblur":case"afterblur":nt=Eg;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=DA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=BT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=nk;break;case JA:case t1:case e1:nt=$T;break;case n1:nt=ik;break;case"scroll":nt=zT;break;case"wheel":nt=ok;break;case"copy":case"cut":case"paste":nt=WT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=NA}var ht=(r&4)!==0,ve=!ht&&s==="scroll",j=ht?G!==null?G+"Capture":null:G;ht=[];for(var N=H,V;N!==null;){V=N;var Y=V.stateNode;if(V.tag===5&&Y!==null&&(V=Y,j!==null&&(Y=rc(N,j),Y!=null&&ht.push(Ec(N,Y,V)))),ve)break;N=N.return}0<ht.length&&(G=new nt(G,ut,null,h,W),X.push({event:G,listeners:ht}))}}if((r&7)===0){t:{if(G=s==="mouseover"||s==="pointerover",nt=s==="mouseout"||s==="pointerout",G&&h!==og&&(ut=h.relatedTarget||h.fromElement)&&(Co(ut)||ut[Ci]))break t;if((nt||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,nt?(ut=h.relatedTarget||h.toElement,nt=H,ut=ut?Co(ut):null,ut!==null&&(ve=_o(ut),ut!==ve||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(nt=null,ut=H),nt!==ut)){if(ht=DA,Y="onMouseLeave",j="onMouseEnter",N="mouse",(s==="pointerout"||s==="pointerover")&&(ht=NA,Y="onPointerLeave",j="onPointerEnter",N="pointer"),ve=nt==null?G:pl(nt),V=ut==null?G:pl(ut),G=new ht(Y,N+"leave",nt,h,W),G.target=ve,G.relatedTarget=V,Y=null,Co(W)===H&&(ht=new ht(j,N+"enter",ut,h,W),ht.target=V,ht.relatedTarget=ve,Y=ht),ve=Y,nt&&ut)e:{for(ht=nt,j=ut,N=0,V=ht;V;V=dl(V))N++;for(V=0,Y=j;Y;Y=dl(Y))V++;for(;0<N-V;)ht=dl(ht),N--;for(;0<V-N;)j=dl(j),V--;for(;N--;){if(ht===j||j!==null&&ht===j.alternate)break e;ht=dl(ht),j=dl(j)}ht=null}else ht=null;nt!==null&&l1(X,G,nt,ht,!1),ut!==null&&ve!==null&&l1(X,ve,ut,ht,!0)}}t:{if(G=H?pl(H):window,nt=G.nodeName&&G.nodeName.toLowerCase(),nt==="select"||nt==="input"&&G.type==="file")var dt=fk;else if(BA(G))if(UA)dt=yk;else{dt=mk;var gt=pk}else(nt=G.nodeName)&&nt.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(dt=gk);if(dt&&(dt=dt(s,H))){HA(X,dt,h,W);break t}gt&&gt(s,G,H),s==="focusout"&&(gt=G._wrapperState)&&gt.controlled&&G.type==="number"&&eg(G,"number",G.value)}switch(gt=H?pl(H):window,s){case"focusin":(BA(gt)||gt.contentEditable==="true")&&(cl=gt,Mg=H,xc=null);break;case"focusout":xc=Mg=cl=null;break;case"mousedown":Rg=!0;break;case"contextmenu":case"mouseup":case"dragend":Rg=!1,QA(X,h,W);break;case"selectionchange":if(Ak)break;case"keydown":case"keyup":QA(X,h,W)}var yt;if(Cg)t:{switch(s){case"compositionstart":var bt="onCompositionStart";break t;case"compositionend":bt="onCompositionEnd";break t;case"compositionupdate":bt="onCompositionUpdate";break t}bt=void 0}else ul?zA(s,h)&&(bt="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(bt="onCompositionStart");bt&&(FA&&h.locale!=="ko"&&(ul||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&ul&&(yt=RA()):(Sr=W,Ag="value"in Sr?Sr.value:Sr.textContent,ul=!0)),gt=kf(H,bt),0<gt.length&&(bt=new IA(bt,s,null,h,W),X.push({event:bt,listeners:gt}),yt?bt.data=yt:(yt=VA(h),yt!==null&&(bt.data=yt)))),(yt=lk?uk(s,h):ck(s,h))&&(H=kf(H,"onBeforeInput"),0<H.length&&(W=new IA("onBeforeInput","beforeinput",null,h,W),X.push({event:W,listeners:H}),W.data=yt))}o1(X,r)})}function Ec(s,r,h){return{instance:s,listener:r,currentTarget:h}}function kf(s,r){for(var h=r+"Capture",p=[];s!==null;){var y=s,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=rc(s,h),w!=null&&p.unshift(Ec(s,w,y)),w=rc(s,r),w!=null&&p.push(Ec(s,w,y))),s=s.return}return p}function dl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function l1(s,r,h,p,y){for(var w=r._reactName,E=[];h!==null&&h!==p;){var P=h,D=P.alternate,H=P.stateNode;if(D!==null&&D===p)break;P.tag===5&&H!==null&&(P=H,y?(D=rc(h,w),D!=null&&E.unshift(Ec(h,D,P))):y||(D=rc(h,w),D!=null&&E.push(Ec(h,D,P)))),h=h.return}E.length!==0&&s.push({event:r,listeners:E})}var Ek=/\r\n?/g,_k=/\u0000|\uFFFD/g;function u1(s){return(typeof s=="string"?s:""+s).replace(Ek,`
`).replace(_k,"")}function Pf(s,r,h){if(r=u1(r),u1(s)!==r&&h)throw Error(e(425))}function Mf(){}var Og=null,jg=null;function zg(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Vg=typeof setTimeout=="function"?setTimeout:void 0,Ck=typeof clearTimeout=="function"?clearTimeout:void 0,c1=typeof Promise=="function"?Promise:void 0,Tk=typeof queueMicrotask=="function"?queueMicrotask:typeof c1<"u"?function(s){return c1.resolve(null).then(s).catch(kk)}:Vg;function kk(s){setTimeout(function(){throw s})}function Bg(s,r){var h=r,p=0;do{var y=h.nextSibling;if(s.removeChild(h),y&&y.nodeType===8)if(h=y.data,h==="/$"){if(p===0){s.removeChild(y),pc(r);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=y}while(h);pc(r)}function Er(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return s}function h1(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(r===0)return s;r--}else h==="/$"&&r++}s=s.previousSibling}return null}var fl=Math.random().toString(36).slice(2),Js="__reactFiber$"+fl,_c="__reactProps$"+fl,Ci="__reactContainer$"+fl,Hg="__reactEvents$"+fl,Pk="__reactListeners$"+fl,Mk="__reactHandles$"+fl;function Co(s){var r=s[Js];if(r)return r;for(var h=s.parentNode;h;){if(r=h[Ci]||h[Js]){if(h=r.alternate,r.child!==null||h!==null&&h.child!==null)for(s=h1(s);s!==null;){if(h=s[Js])return h;s=h1(s)}return r}s=h,h=s.parentNode}return null}function Cc(s){return s=s[Js]||s[Ci],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function pl(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(e(33))}function Rf(s){return s[_c]||null}var Ug=[],ml=-1;function _r(s){return{current:s}}function ee(s){0>ml||(s.current=Ug[ml],Ug[ml]=null,ml--)}function Zt(s,r){ml++,Ug[ml]=s.current,s.current=r}var Cr={},Je=_r(Cr),Tn=_r(!1),To=Cr;function gl(s,r){var h=s.type.contextTypes;if(!h)return Cr;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===r)return p.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in h)y[w]=r[w];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=r,s.__reactInternalMemoizedMaskedChildContext=y),y}function kn(s){return s=s.childContextTypes,s!=null}function Lf(){ee(Tn),ee(Je)}function d1(s,r,h){if(Je.current!==Cr)throw Error(e(168));Zt(Je,r),Zt(Tn,h)}function f1(s,r,h){var p=s.stateNode;if(r=r.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var y in p)if(!(y in r))throw Error(e(108,vt(s)||"Unknown",y));return J({},h,p)}function Df(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Cr,To=Je.current,Zt(Je,s),Zt(Tn,Tn.current),!0}function p1(s,r,h){var p=s.stateNode;if(!p)throw Error(e(169));h?(s=f1(s,r,To),p.__reactInternalMemoizedMergedChildContext=s,ee(Tn),ee(Je),Zt(Je,s)):ee(Tn),Zt(Tn,h)}var Ti=null,If=!1,$g=!1;function m1(s){Ti===null?Ti=[s]:Ti.push(s)}function Rk(s){If=!0,m1(s)}function Tr(){if(!$g&&Ti!==null){$g=!0;var s=0,r=$t;try{var h=Ti;for($t=1;s<h.length;s++){var p=h[s];do p=p(!0);while(p!==null)}Ti=null,If=!1}catch(y){throw Ti!==null&&(Ti=Ti.slice(s+1)),yA(dg,Tr),y}finally{$t=r,$g=!1}}return null}var yl=[],vl=0,Nf=null,Ff=0,ls=[],us=0,ko=null,ki=1,Pi="";function Po(s,r){yl[vl++]=Ff,yl[vl++]=Nf,Nf=s,Ff=r}function g1(s,r,h){ls[us++]=ki,ls[us++]=Pi,ls[us++]=ko,ko=s;var p=ki;s=Pi;var y=32-Ts(p)-1;p&=~(1<<y),h+=1;var w=32-Ts(r)+y;if(30<w){var E=y-y%5;w=(p&(1<<E)-1).toString(32),p>>=E,y-=E,ki=1<<32-Ts(r)+y|h<<y|p,Pi=w+s}else ki=1<<w|h<<y|p,Pi=s}function Gg(s){s.return!==null&&(Po(s,1),g1(s,1,0))}function Wg(s){for(;s===Nf;)Nf=yl[--vl],yl[vl]=null,Ff=yl[--vl],yl[vl]=null;for(;s===ko;)ko=ls[--us],ls[us]=null,Pi=ls[--us],ls[us]=null,ki=ls[--us],ls[us]=null}var Bn=null,Hn=null,ie=!1,Ps=null;function y1(s,r){var h=fs(5,null,null,0);h.elementType="DELETED",h.stateNode=r,h.return=s,r=s.deletions,r===null?(s.deletions=[h],s.flags|=16):r.push(h)}function v1(s,r){switch(s.tag){case 5:var h=s.type;return r=r.nodeType!==1||h.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(s.stateNode=r,Bn=s,Hn=Er(r.firstChild),!0):!1;case 6:return r=s.pendingProps===""||r.nodeType!==3?null:r,r!==null?(s.stateNode=r,Bn=s,Hn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(h=ko!==null?{id:ki,overflow:Pi}:null,s.memoizedState={dehydrated:r,treeContext:h,retryLane:1073741824},h=fs(18,null,null,0),h.stateNode=r,h.return=s,s.child=h,Bn=s,Hn=null,!0):!1;default:return!1}}function qg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Xg(s){if(ie){var r=Hn;if(r){var h=r;if(!v1(s,r)){if(qg(s))throw Error(e(418));r=Er(h.nextSibling);var p=Bn;r&&v1(s,r)?y1(p,h):(s.flags=s.flags&-4097|2,ie=!1,Bn=s)}}else{if(qg(s))throw Error(e(418));s.flags=s.flags&-4097|2,ie=!1,Bn=s}}}function w1(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Bn=s}function Of(s){if(s!==Bn)return!1;if(!ie)return w1(s),ie=!0,!1;var r;if((r=s.tag!==3)&&!(r=s.tag!==5)&&(r=s.type,r=r!=="head"&&r!=="body"&&!zg(s.type,s.memoizedProps)),r&&(r=Hn)){if(qg(s))throw A1(),Error(e(418));for(;r;)y1(s,r),r=Er(r.nextSibling)}if(w1(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(e(317));t:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(r===0){Hn=Er(s.nextSibling);break t}r--}else h!=="$"&&h!=="$!"&&h!=="$?"||r++}s=s.nextSibling}Hn=null}}else Hn=Bn?Er(s.stateNode.nextSibling):null;return!0}function A1(){for(var s=Hn;s;)s=Er(s.nextSibling)}function wl(){Hn=Bn=null,ie=!1}function Kg(s){Ps===null?Ps=[s]:Ps.push(s)}var Lk=R.ReactCurrentBatchConfig;function Tc(s,r,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(e(309));var p=h.stateNode}if(!p)throw Error(e(147,s));var y=p,w=""+s;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===w?r.ref:(r=function(E){var P=y.refs;E===null?delete P[w]:P[w]=E},r._stringRef=w,r)}if(typeof s!="string")throw Error(e(284));if(!h._owner)throw Error(e(290,s))}return s}function jf(s,r){throw s=Object.prototype.toString.call(r),Error(e(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s))}function x1(s){var r=s._init;return r(s._payload)}function S1(s){function r(j,N){if(s){var V=j.deletions;V===null?(j.deletions=[N],j.flags|=16):V.push(N)}}function h(j,N){if(!s)return null;for(;N!==null;)r(j,N),N=N.sibling;return null}function p(j,N){for(j=new Map;N!==null;)N.key!==null?j.set(N.key,N):j.set(N.index,N),N=N.sibling;return j}function y(j,N){return j=Nr(j,N),j.index=0,j.sibling=null,j}function w(j,N,V){return j.index=V,s?(V=j.alternate,V!==null?(V=V.index,V<N?(j.flags|=2,N):V):(j.flags|=2,N)):(j.flags|=1048576,N)}function E(j){return s&&j.alternate===null&&(j.flags|=2),j}function P(j,N,V,Y){return N===null||N.tag!==6?(N=Vy(V,j.mode,Y),N.return=j,N):(N=y(N,V),N.return=j,N)}function D(j,N,V,Y){var dt=V.type;return dt===B?W(j,N,V.props.children,Y,V.key):N!==null&&(N.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===Z&&x1(dt)===N.type)?(Y=y(N,V.props),Y.ref=Tc(j,N,V),Y.return=j,Y):(Y=lp(V.type,V.key,V.props,null,j.mode,Y),Y.ref=Tc(j,N,V),Y.return=j,Y)}function H(j,N,V,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==V.containerInfo||N.stateNode.implementation!==V.implementation?(N=By(V,j.mode,Y),N.return=j,N):(N=y(N,V.children||[]),N.return=j,N)}function W(j,N,V,Y,dt){return N===null||N.tag!==7?(N=Oo(V,j.mode,Y,dt),N.return=j,N):(N=y(N,V),N.return=j,N)}function X(j,N,V){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Vy(""+N,j.mode,V),N.return=j,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case I:return V=lp(N.type,N.key,N.props,null,j.mode,V),V.ref=Tc(j,null,N),V.return=j,V;case z:return N=By(N,j.mode,V),N.return=j,N;case Z:var Y=N._init;return X(j,Y(N._payload),V)}if(nc(N)||lt(N))return N=Oo(N,j.mode,V,null),N.return=j,N;jf(j,N)}return null}function G(j,N,V,Y){var dt=N!==null?N.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return dt!==null?null:P(j,N,""+V,Y);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case I:return V.key===dt?D(j,N,V,Y):null;case z:return V.key===dt?H(j,N,V,Y):null;case Z:return dt=V._init,G(j,N,dt(V._payload),Y)}if(nc(V)||lt(V))return dt!==null?null:W(j,N,V,Y,null);jf(j,V)}return null}function nt(j,N,V,Y,dt){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return j=j.get(V)||null,P(N,j,""+Y,dt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:return j=j.get(Y.key===null?V:Y.key)||null,D(N,j,Y,dt);case z:return j=j.get(Y.key===null?V:Y.key)||null,H(N,j,Y,dt);case Z:var gt=Y._init;return nt(j,N,V,gt(Y._payload),dt)}if(nc(Y)||lt(Y))return j=j.get(V)||null,W(N,j,Y,dt,null);jf(N,Y)}return null}function ut(j,N,V,Y){for(var dt=null,gt=null,yt=N,bt=N=0,Oe=null;yt!==null&&bt<V.length;bt++){yt.index>bt?(Oe=yt,yt=null):Oe=yt.sibling;var Bt=G(j,yt,V[bt],Y);if(Bt===null){yt===null&&(yt=Oe);break}s&&yt&&Bt.alternate===null&&r(j,yt),N=w(Bt,N,bt),gt===null?dt=Bt:gt.sibling=Bt,gt=Bt,yt=Oe}if(bt===V.length)return h(j,yt),ie&&Po(j,bt),dt;if(yt===null){for(;bt<V.length;bt++)yt=X(j,V[bt],Y),yt!==null&&(N=w(yt,N,bt),gt===null?dt=yt:gt.sibling=yt,gt=yt);return ie&&Po(j,bt),dt}for(yt=p(j,yt);bt<V.length;bt++)Oe=nt(yt,j,bt,V[bt],Y),Oe!==null&&(s&&Oe.alternate!==null&&yt.delete(Oe.key===null?bt:Oe.key),N=w(Oe,N,bt),gt===null?dt=Oe:gt.sibling=Oe,gt=Oe);return s&&yt.forEach(function(Fr){return r(j,Fr)}),ie&&Po(j,bt),dt}function ht(j,N,V,Y){var dt=lt(V);if(typeof dt!="function")throw Error(e(150));if(V=dt.call(V),V==null)throw Error(e(151));for(var gt=dt=null,yt=N,bt=N=0,Oe=null,Bt=V.next();yt!==null&&!Bt.done;bt++,Bt=V.next()){yt.index>bt?(Oe=yt,yt=null):Oe=yt.sibling;var Fr=G(j,yt,Bt.value,Y);if(Fr===null){yt===null&&(yt=Oe);break}s&&yt&&Fr.alternate===null&&r(j,yt),N=w(Fr,N,bt),gt===null?dt=Fr:gt.sibling=Fr,gt=Fr,yt=Oe}if(Bt.done)return h(j,yt),ie&&Po(j,bt),dt;if(yt===null){for(;!Bt.done;bt++,Bt=V.next())Bt=X(j,Bt.value,Y),Bt!==null&&(N=w(Bt,N,bt),gt===null?dt=Bt:gt.sibling=Bt,gt=Bt);return ie&&Po(j,bt),dt}for(yt=p(j,yt);!Bt.done;bt++,Bt=V.next())Bt=nt(yt,j,bt,Bt.value,Y),Bt!==null&&(s&&Bt.alternate!==null&&yt.delete(Bt.key===null?bt:Bt.key),N=w(Bt,N,bt),gt===null?dt=Bt:gt.sibling=Bt,gt=Bt);return s&&yt.forEach(function(hP){return r(j,hP)}),ie&&Po(j,bt),dt}function ve(j,N,V,Y){if(typeof V=="object"&&V!==null&&V.type===B&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case I:t:{for(var dt=V.key,gt=N;gt!==null;){if(gt.key===dt){if(dt=V.type,dt===B){if(gt.tag===7){h(j,gt.sibling),N=y(gt,V.props.children),N.return=j,j=N;break t}}else if(gt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===Z&&x1(dt)===gt.type){h(j,gt.sibling),N=y(gt,V.props),N.ref=Tc(j,gt,V),N.return=j,j=N;break t}h(j,gt);break}else r(j,gt);gt=gt.sibling}V.type===B?(N=Oo(V.props.children,j.mode,Y,V.key),N.return=j,j=N):(Y=lp(V.type,V.key,V.props,null,j.mode,Y),Y.ref=Tc(j,N,V),Y.return=j,j=Y)}return E(j);case z:t:{for(gt=V.key;N!==null;){if(N.key===gt)if(N.tag===4&&N.stateNode.containerInfo===V.containerInfo&&N.stateNode.implementation===V.implementation){h(j,N.sibling),N=y(N,V.children||[]),N.return=j,j=N;break t}else{h(j,N);break}else r(j,N);N=N.sibling}N=By(V,j.mode,Y),N.return=j,j=N}return E(j);case Z:return gt=V._init,ve(j,N,gt(V._payload),Y)}if(nc(V))return ut(j,N,V,Y);if(lt(V))return ht(j,N,V,Y);jf(j,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,N!==null&&N.tag===6?(h(j,N.sibling),N=y(N,V),N.return=j,j=N):(h(j,N),N=Vy(V,j.mode,Y),N.return=j,j=N),E(j)):h(j,N)}return ve}var Al=S1(!0),b1=S1(!1),zf=_r(null),Vf=null,xl=null,Yg=null;function Qg(){Yg=xl=Vf=null}function Zg(s){var r=zf.current;ee(zf),s._currentValue=r}function Jg(s,r,h){for(;s!==null;){var p=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),s===h)break;s=s.return}}function Sl(s,r){Vf=s,Yg=xl=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&r)!==0&&(Pn=!0),s.firstContext=null)}function cs(s){var r=s._currentValue;if(Yg!==s)if(s={context:s,memoizedValue:r,next:null},xl===null){if(Vf===null)throw Error(e(308));xl=s,Vf.dependencies={lanes:0,firstContext:s}}else xl=xl.next=s;return r}var Mo=null;function ty(s){Mo===null?Mo=[s]:Mo.push(s)}function E1(s,r,h,p){var y=r.interleaved;return y===null?(h.next=h,ty(r)):(h.next=y.next,y.next=h),r.interleaved=h,Mi(s,p)}function Mi(s,r){s.lanes|=r;var h=s.alternate;for(h!==null&&(h.lanes|=r),h=s,s=s.return;s!==null;)s.childLanes|=r,h=s.alternate,h!==null&&(h.childLanes|=r),h=s,s=s.return;return h.tag===3?h.stateNode:null}var kr=!1;function ey(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _1(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ri(s,r){return{eventTime:s,lane:r,tag:0,payload:null,callback:null,next:null}}function Pr(s,r,h){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(zt&2)!==0){var y=p.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),p.pending=r,Mi(s,h)}return y=p.interleaved,y===null?(r.next=r,ty(p)):(r.next=y.next,y.next=r),p.interleaved=r,Mi(s,h)}function Bf(s,r,h){if(r=r.updateQueue,r!==null&&(r=r.shared,(h&4194240)!==0)){var p=r.lanes;p&=s.pendingLanes,h|=p,r.lanes=h,mg(s,h)}}function C1(s,r){var h=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var y=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var E={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};w===null?y=w=E:w=w.next=E,h=h.next}while(h!==null);w===null?y=w=r:w=w.next=r}else y=w=r;h={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,effects:p.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=r:s.next=r,h.lastBaseUpdate=r}function Hf(s,r,h,p){var y=s.updateQueue;kr=!1;var w=y.firstBaseUpdate,E=y.lastBaseUpdate,P=y.shared.pending;if(P!==null){y.shared.pending=null;var D=P,H=D.next;D.next=null,E===null?w=H:E.next=H,E=D;var W=s.alternate;W!==null&&(W=W.updateQueue,P=W.lastBaseUpdate,P!==E&&(P===null?W.firstBaseUpdate=H:P.next=H,W.lastBaseUpdate=D))}if(w!==null){var X=y.baseState;E=0,W=H=D=null,P=w;do{var G=P.lane,nt=P.eventTime;if((p&G)===G){W!==null&&(W=W.next={eventTime:nt,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});t:{var ut=s,ht=P;switch(G=r,nt=h,ht.tag){case 1:if(ut=ht.payload,typeof ut=="function"){X=ut.call(nt,X,G);break t}X=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ht.payload,G=typeof ut=="function"?ut.call(nt,X,G):ut,G==null)break t;X=J({},X,G);break t;case 2:kr=!0}}P.callback!==null&&P.lane!==0&&(s.flags|=64,G=y.effects,G===null?y.effects=[P]:G.push(P))}else nt={eventTime:nt,lane:G,tag:P.tag,payload:P.payload,callback:P.callback,next:null},W===null?(H=W=nt,D=X):W=W.next=nt,E|=G;if(P=P.next,P===null){if(P=y.shared.pending,P===null)break;G=P,P=G.next,G.next=null,y.lastBaseUpdate=G,y.shared.pending=null}}while(!0);if(W===null&&(D=X),y.baseState=D,y.firstBaseUpdate=H,y.lastBaseUpdate=W,r=y.shared.interleaved,r!==null){y=r;do E|=y.lane,y=y.next;while(y!==r)}else w===null&&(y.shared.lanes=0);Do|=E,s.lanes=E,s.memoizedState=X}}function T1(s,r,h){if(s=r.effects,r.effects=null,s!==null)for(r=0;r<s.length;r++){var p=s[r],y=p.callback;if(y!==null){if(p.callback=null,p=h,typeof y!="function")throw Error(e(191,y));y.call(p)}}}var kc={},ti=_r(kc),Pc=_r(kc),Mc=_r(kc);function Ro(s){if(s===kc)throw Error(e(174));return s}function ny(s,r){switch(Zt(Mc,r),Zt(Pc,s),Zt(ti,kc),s=r.nodeType,s){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:sg(null,"");break;default:s=s===8?r.parentNode:r,r=s.namespaceURI||null,s=s.tagName,r=sg(r,s)}ee(ti),Zt(ti,r)}function bl(){ee(ti),ee(Pc),ee(Mc)}function k1(s){Ro(Mc.current);var r=Ro(ti.current),h=sg(r,s.type);r!==h&&(Zt(Pc,s),Zt(ti,h))}function sy(s){Pc.current===s&&(ee(ti),ee(Pc))}var le=_r(0);function Uf(s){for(var r=s;r!==null;){if(r.tag===13){var h=r.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var iy=[];function ry(){for(var s=0;s<iy.length;s++)iy[s]._workInProgressVersionPrimary=null;iy.length=0}var $f=R.ReactCurrentDispatcher,oy=R.ReactCurrentBatchConfig,Lo=0,ue=null,Te=null,Ne=null,Gf=!1,Rc=!1,Lc=0,Dk=0;function tn(){throw Error(e(321))}function ay(s,r){if(r===null)return!1;for(var h=0;h<r.length&&h<s.length;h++)if(!ks(s[h],r[h]))return!1;return!0}function ly(s,r,h,p,y,w){if(Lo=w,ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$f.current=s===null||s.memoizedState===null?Ok:jk,s=h(p,y),Rc){w=0;do{if(Rc=!1,Lc=0,25<=w)throw Error(e(301));w+=1,Ne=Te=null,r.updateQueue=null,$f.current=zk,s=h(p,y)}while(Rc)}if($f.current=Xf,r=Te!==null&&Te.next!==null,Lo=0,Ne=Te=ue=null,Gf=!1,r)throw Error(e(300));return s}function uy(){var s=Lc!==0;return Lc=0,s}function ei(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?ue.memoizedState=Ne=s:Ne=Ne.next=s,Ne}function hs(){if(Te===null){var s=ue.alternate;s=s!==null?s.memoizedState:null}else s=Te.next;var r=Ne===null?ue.memoizedState:Ne.next;if(r!==null)Ne=r,Te=s;else{if(s===null)throw Error(e(310));Te=s,s={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ne===null?ue.memoizedState=Ne=s:Ne=Ne.next=s}return Ne}function Dc(s,r){return typeof r=="function"?r(s):r}function cy(s){var r=hs(),h=r.queue;if(h===null)throw Error(e(311));h.lastRenderedReducer=s;var p=Te,y=p.baseQueue,w=h.pending;if(w!==null){if(y!==null){var E=y.next;y.next=w.next,w.next=E}p.baseQueue=y=w,h.pending=null}if(y!==null){w=y.next,p=p.baseState;var P=E=null,D=null,H=w;do{var W=H.lane;if((Lo&W)===W)D!==null&&(D=D.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),p=H.hasEagerState?H.eagerState:s(p,H.action);else{var X={lane:W,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};D===null?(P=D=X,E=p):D=D.next=X,ue.lanes|=W,Do|=W}H=H.next}while(H!==null&&H!==w);D===null?E=p:D.next=P,ks(p,r.memoizedState)||(Pn=!0),r.memoizedState=p,r.baseState=E,r.baseQueue=D,h.lastRenderedState=p}if(s=h.interleaved,s!==null){y=s;do w=y.lane,ue.lanes|=w,Do|=w,y=y.next;while(y!==s)}else y===null&&(h.lanes=0);return[r.memoizedState,h.dispatch]}function hy(s){var r=hs(),h=r.queue;if(h===null)throw Error(e(311));h.lastRenderedReducer=s;var p=h.dispatch,y=h.pending,w=r.memoizedState;if(y!==null){h.pending=null;var E=y=y.next;do w=s(w,E.action),E=E.next;while(E!==y);ks(w,r.memoizedState)||(Pn=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),h.lastRenderedState=w}return[w,p]}function P1(){}function M1(s,r){var h=ue,p=hs(),y=r(),w=!ks(p.memoizedState,y);if(w&&(p.memoizedState=y,Pn=!0),p=p.queue,dy(D1.bind(null,h,p,s),[s]),p.getSnapshot!==r||w||Ne!==null&&Ne.memoizedState.tag&1){if(h.flags|=2048,Ic(9,L1.bind(null,h,p,y,r),void 0,null),Fe===null)throw Error(e(349));(Lo&30)!==0||R1(h,r,y)}return y}function R1(s,r,h){s.flags|=16384,s={getSnapshot:r,value:h},r=ue.updateQueue,r===null?(r={lastEffect:null,stores:null},ue.updateQueue=r,r.stores=[s]):(h=r.stores,h===null?r.stores=[s]:h.push(s))}function L1(s,r,h,p){r.value=h,r.getSnapshot=p,I1(r)&&N1(s)}function D1(s,r,h){return h(function(){I1(r)&&N1(s)})}function I1(s){var r=s.getSnapshot;s=s.value;try{var h=r();return!ks(s,h)}catch{return!0}}function N1(s){var r=Mi(s,1);r!==null&&Ds(r,s,1,-1)}function F1(s){var r=ei();return typeof s=="function"&&(s=s()),r.memoizedState=r.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dc,lastRenderedState:s},r.queue=s,s=s.dispatch=Fk.bind(null,ue,s),[r.memoizedState,s]}function Ic(s,r,h,p){return s={tag:s,create:r,destroy:h,deps:p,next:null},r=ue.updateQueue,r===null?(r={lastEffect:null,stores:null},ue.updateQueue=r,r.lastEffect=s.next=s):(h=r.lastEffect,h===null?r.lastEffect=s.next=s:(p=h.next,h.next=s,s.next=p,r.lastEffect=s)),s}function O1(){return hs().memoizedState}function Wf(s,r,h,p){var y=ei();ue.flags|=s,y.memoizedState=Ic(1|r,h,void 0,p===void 0?null:p)}function qf(s,r,h,p){var y=hs();p=p===void 0?null:p;var w=void 0;if(Te!==null){var E=Te.memoizedState;if(w=E.destroy,p!==null&&ay(p,E.deps)){y.memoizedState=Ic(r,h,w,p);return}}ue.flags|=s,y.memoizedState=Ic(1|r,h,w,p)}function j1(s,r){return Wf(8390656,8,s,r)}function dy(s,r){return qf(2048,8,s,r)}function z1(s,r){return qf(4,2,s,r)}function V1(s,r){return qf(4,4,s,r)}function B1(s,r){if(typeof r=="function")return s=s(),r(s),function(){r(null)};if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function H1(s,r,h){return h=h!=null?h.concat([s]):null,qf(4,4,B1.bind(null,r,s),h)}function fy(){}function U1(s,r){var h=hs();r=r===void 0?null:r;var p=h.memoizedState;return p!==null&&r!==null&&ay(r,p[1])?p[0]:(h.memoizedState=[s,r],s)}function $1(s,r){var h=hs();r=r===void 0?null:r;var p=h.memoizedState;return p!==null&&r!==null&&ay(r,p[1])?p[0]:(s=s(),h.memoizedState=[s,r],s)}function G1(s,r,h){return(Lo&21)===0?(s.baseState&&(s.baseState=!1,Pn=!0),s.memoizedState=h):(ks(h,r)||(h=xA(),ue.lanes|=h,Do|=h,s.baseState=!0),r)}function Ik(s,r){var h=$t;$t=h!==0&&4>h?h:4,s(!0);var p=oy.transition;oy.transition={};try{s(!1),r()}finally{$t=h,oy.transition=p}}function W1(){return hs().memoizedState}function Nk(s,r,h){var p=Dr(s);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},q1(s))X1(r,h);else if(h=E1(s,r,h,p),h!==null){var y=yn();Ds(h,s,p,y),K1(h,r,p)}}function Fk(s,r,h){var p=Dr(s),y={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(q1(s))X1(r,y);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var E=r.lastRenderedState,P=w(E,h);if(y.hasEagerState=!0,y.eagerState=P,ks(P,E)){var D=r.interleaved;D===null?(y.next=y,ty(r)):(y.next=D.next,D.next=y),r.interleaved=y;return}}catch{}finally{}h=E1(s,r,y,p),h!==null&&(y=yn(),Ds(h,s,p,y),K1(h,r,p))}}function q1(s){var r=s.alternate;return s===ue||r!==null&&r===ue}function X1(s,r){Rc=Gf=!0;var h=s.pending;h===null?r.next=r:(r.next=h.next,h.next=r),s.pending=r}function K1(s,r,h){if((h&4194240)!==0){var p=r.lanes;p&=s.pendingLanes,h|=p,r.lanes=h,mg(s,h)}}var Xf={readContext:cs,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},Ok={readContext:cs,useCallback:function(s,r){return ei().memoizedState=[s,r===void 0?null:r],s},useContext:cs,useEffect:j1,useImperativeHandle:function(s,r,h){return h=h!=null?h.concat([s]):null,Wf(4194308,4,B1.bind(null,r,s),h)},useLayoutEffect:function(s,r){return Wf(4194308,4,s,r)},useInsertionEffect:function(s,r){return Wf(4,2,s,r)},useMemo:function(s,r){var h=ei();return r=r===void 0?null:r,s=s(),h.memoizedState=[s,r],s},useReducer:function(s,r,h){var p=ei();return r=h!==void 0?h(r):r,p.memoizedState=p.baseState=r,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:r},p.queue=s,s=s.dispatch=Nk.bind(null,ue,s),[p.memoizedState,s]},useRef:function(s){var r=ei();return s={current:s},r.memoizedState=s},useState:F1,useDebugValue:fy,useDeferredValue:function(s){return ei().memoizedState=s},useTransition:function(){var s=F1(!1),r=s[0];return s=Ik.bind(null,s[1]),ei().memoizedState=s,[r,s]},useMutableSource:function(){},useSyncExternalStore:function(s,r,h){var p=ue,y=ei();if(ie){if(h===void 0)throw Error(e(407));h=h()}else{if(h=r(),Fe===null)throw Error(e(349));(Lo&30)!==0||R1(p,r,h)}y.memoizedState=h;var w={value:h,getSnapshot:r};return y.queue=w,j1(D1.bind(null,p,w,s),[s]),p.flags|=2048,Ic(9,L1.bind(null,p,w,h,r),void 0,null),h},useId:function(){var s=ei(),r=Fe.identifierPrefix;if(ie){var h=Pi,p=ki;h=(p&~(1<<32-Ts(p)-1)).toString(32)+h,r=":"+r+"R"+h,h=Lc++,0<h&&(r+="H"+h.toString(32)),r+=":"}else h=Dk++,r=":"+r+"r"+h.toString(32)+":";return s.memoizedState=r},unstable_isNewReconciler:!1},jk={readContext:cs,useCallback:U1,useContext:cs,useEffect:dy,useImperativeHandle:H1,useInsertionEffect:z1,useLayoutEffect:V1,useMemo:$1,useReducer:cy,useRef:O1,useState:function(){return cy(Dc)},useDebugValue:fy,useDeferredValue:function(s){var r=hs();return G1(r,Te.memoizedState,s)},useTransition:function(){var s=cy(Dc)[0],r=hs().memoizedState;return[s,r]},useMutableSource:P1,useSyncExternalStore:M1,useId:W1,unstable_isNewReconciler:!1},zk={readContext:cs,useCallback:U1,useContext:cs,useEffect:dy,useImperativeHandle:H1,useInsertionEffect:z1,useLayoutEffect:V1,useMemo:$1,useReducer:hy,useRef:O1,useState:function(){return hy(Dc)},useDebugValue:fy,useDeferredValue:function(s){var r=hs();return Te===null?r.memoizedState=s:G1(r,Te.memoizedState,s)},useTransition:function(){var s=hy(Dc)[0],r=hs().memoizedState;return[s,r]},useMutableSource:P1,useSyncExternalStore:M1,useId:W1,unstable_isNewReconciler:!1};function Ms(s,r){if(s&&s.defaultProps){r=J({},r),s=s.defaultProps;for(var h in s)r[h]===void 0&&(r[h]=s[h]);return r}return r}function py(s,r,h,p){r=s.memoizedState,h=h(p,r),h=h==null?r:J({},r,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Kf={isMounted:function(s){return(s=s._reactInternals)?_o(s)===s:!1},enqueueSetState:function(s,r,h){s=s._reactInternals;var p=yn(),y=Dr(s),w=Ri(p,y);w.payload=r,h!=null&&(w.callback=h),r=Pr(s,w,y),r!==null&&(Ds(r,s,y,p),Bf(r,s,y))},enqueueReplaceState:function(s,r,h){s=s._reactInternals;var p=yn(),y=Dr(s),w=Ri(p,y);w.tag=1,w.payload=r,h!=null&&(w.callback=h),r=Pr(s,w,y),r!==null&&(Ds(r,s,y,p),Bf(r,s,y))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var h=yn(),p=Dr(s),y=Ri(h,p);y.tag=2,r!=null&&(y.callback=r),r=Pr(s,y,p),r!==null&&(Ds(r,s,p,h),Bf(r,s,p))}};function Y1(s,r,h,p,y,w,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,w,E):r.prototype&&r.prototype.isPureReactComponent?!Ac(h,p)||!Ac(y,w):!0}function Q1(s,r,h){var p=!1,y=Cr,w=r.contextType;return typeof w=="object"&&w!==null?w=cs(w):(y=kn(r)?To:Je.current,p=r.contextTypes,w=(p=p!=null)?gl(s,y):Cr),r=new r(h,w),s.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Kf,s.stateNode=r,r._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=y,s.__reactInternalMemoizedMaskedChildContext=w),r}function Z1(s,r,h,p){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(h,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(h,p),r.state!==s&&Kf.enqueueReplaceState(r,r.state,null)}function my(s,r,h,p){var y=s.stateNode;y.props=h,y.state=s.memoizedState,y.refs={},ey(s);var w=r.contextType;typeof w=="object"&&w!==null?y.context=cs(w):(w=kn(r)?To:Je.current,y.context=gl(s,w)),y.state=s.memoizedState,w=r.getDerivedStateFromProps,typeof w=="function"&&(py(s,r,w,h),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(r=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),r!==y.state&&Kf.enqueueReplaceState(y,y.state,null),Hf(s,h,y,p),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308)}function El(s,r){try{var h="",p=r;do h+=Lt(p),p=p.return;while(p);var y=h}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:s,source:r,stack:y,digest:null}}function gy(s,r,h){return{value:s,source:null,stack:h??null,digest:r??null}}function yy(s,r){try{console.error(r.value)}catch(h){setTimeout(function(){throw h})}}var Vk=typeof WeakMap=="function"?WeakMap:Map;function J1(s,r,h){h=Ri(-1,h),h.tag=3,h.payload={element:null};var p=r.value;return h.callback=function(){np||(np=!0,Ly=p),yy(s,r)},h}function tx(s,r,h){h=Ri(-1,h),h.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var y=r.value;h.payload=function(){return p(y)},h.callback=function(){yy(s,r)}}var w=s.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(h.callback=function(){yy(s,r),typeof p!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var E=r.stack;this.componentDidCatch(r.value,{componentStack:E!==null?E:""})}),h}function ex(s,r,h){var p=s.pingCache;if(p===null){p=s.pingCache=new Vk;var y=new Set;p.set(r,y)}else y=p.get(r),y===void 0&&(y=new Set,p.set(r,y));y.has(h)||(y.add(h),s=tP.bind(null,s,r,h),r.then(s,s))}function nx(s){do{var r;if((r=s.tag===13)&&(r=s.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return s;s=s.return}while(s!==null);return null}function sx(s,r,h,p,y){return(s.mode&1)===0?(s===r?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(r=Ri(-1,1),r.tag=2,Pr(h,r,1))),h.lanes|=1),s):(s.flags|=65536,s.lanes=y,s)}var Bk=R.ReactCurrentOwner,Pn=!1;function gn(s,r,h,p){r.child=s===null?b1(r,null,h,p):Al(r,s.child,h,p)}function ix(s,r,h,p,y){h=h.render;var w=r.ref;return Sl(r,y),p=ly(s,r,h,p,w,y),h=uy(),s!==null&&!Pn?(r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~y,Li(s,r,y)):(ie&&h&&Gg(r),r.flags|=1,gn(s,r,p,y),r.child)}function rx(s,r,h,p,y){if(s===null){var w=h.type;return typeof w=="function"&&!zy(w)&&w.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(r.tag=15,r.type=w,ox(s,r,w,p,y)):(s=lp(h.type,null,p,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(w=s.child,(s.lanes&y)===0){var E=w.memoizedProps;if(h=h.compare,h=h!==null?h:Ac,h(E,p)&&s.ref===r.ref)return Li(s,r,y)}return r.flags|=1,s=Nr(w,p),s.ref=r.ref,s.return=r,r.child=s}function ox(s,r,h,p,y){if(s!==null){var w=s.memoizedProps;if(Ac(w,p)&&s.ref===r.ref)if(Pn=!1,r.pendingProps=p=w,(s.lanes&y)!==0)(s.flags&131072)!==0&&(Pn=!0);else return r.lanes=s.lanes,Li(s,r,y)}return vy(s,r,h,p,y)}function ax(s,r,h){var p=r.pendingProps,y=p.children,w=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(Cl,Un),Un|=h;else{if((h&1073741824)===0)return s=w!==null?w.baseLanes|h:h,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:s,cachePool:null,transitions:null},r.updateQueue=null,Zt(Cl,Un),Un|=s,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:h,Zt(Cl,Un),Un|=p}else w!==null?(p=w.baseLanes|h,r.memoizedState=null):p=h,Zt(Cl,Un),Un|=p;return gn(s,r,y,h),r.child}function lx(s,r){var h=r.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(r.flags|=512,r.flags|=2097152)}function vy(s,r,h,p,y){var w=kn(h)?To:Je.current;return w=gl(r,w),Sl(r,y),h=ly(s,r,h,p,w,y),p=uy(),s!==null&&!Pn?(r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~y,Li(s,r,y)):(ie&&p&&Gg(r),r.flags|=1,gn(s,r,h,y),r.child)}function ux(s,r,h,p,y){if(kn(h)){var w=!0;Df(r)}else w=!1;if(Sl(r,y),r.stateNode===null)Qf(s,r),Q1(r,h,p),my(r,h,p,y),p=!0;else if(s===null){var E=r.stateNode,P=r.memoizedProps;E.props=P;var D=E.context,H=h.contextType;typeof H=="object"&&H!==null?H=cs(H):(H=kn(h)?To:Je.current,H=gl(r,H));var W=h.getDerivedStateFromProps,X=typeof W=="function"||typeof E.getSnapshotBeforeUpdate=="function";X||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==p||D!==H)&&Z1(r,E,p,H),kr=!1;var G=r.memoizedState;E.state=G,Hf(r,p,E,y),D=r.memoizedState,P!==p||G!==D||Tn.current||kr?(typeof W=="function"&&(py(r,h,W,p),D=r.memoizedState),(P=kr||Y1(r,h,P,p,G,D,H))?(X||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(r.flags|=4194308)):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=D),E.props=p,E.state=D,E.context=H,p=P):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{E=r.stateNode,_1(s,r),P=r.memoizedProps,H=r.type===r.elementType?P:Ms(r.type,P),E.props=H,X=r.pendingProps,G=E.context,D=h.contextType,typeof D=="object"&&D!==null?D=cs(D):(D=kn(h)?To:Je.current,D=gl(r,D));var nt=h.getDerivedStateFromProps;(W=typeof nt=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==X||G!==D)&&Z1(r,E,p,D),kr=!1,G=r.memoizedState,E.state=G,Hf(r,p,E,y);var ut=r.memoizedState;P!==X||G!==ut||Tn.current||kr?(typeof nt=="function"&&(py(r,h,nt,p),ut=r.memoizedState),(H=kr||Y1(r,h,H,p,G,ut,D)||!1)?(W||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,ut,D),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,ut,D)),typeof E.componentDidUpdate=="function"&&(r.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof E.componentDidUpdate!="function"||P===s.memoizedProps&&G===s.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&G===s.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=ut),E.props=p,E.state=ut,E.context=D,p=H):(typeof E.componentDidUpdate!="function"||P===s.memoizedProps&&G===s.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&G===s.memoizedState||(r.flags|=1024),p=!1)}return wy(s,r,h,p,w,y)}function wy(s,r,h,p,y,w){lx(s,r);var E=(r.flags&128)!==0;if(!p&&!E)return y&&p1(r,h,!1),Li(s,r,w);p=r.stateNode,Bk.current=r;var P=E&&typeof h.getDerivedStateFromError!="function"?null:p.render();return r.flags|=1,s!==null&&E?(r.child=Al(r,s.child,null,w),r.child=Al(r,null,P,w)):gn(s,r,P,w),r.memoizedState=p.state,y&&p1(r,h,!0),r.child}function cx(s){var r=s.stateNode;r.pendingContext?d1(s,r.pendingContext,r.pendingContext!==r.context):r.context&&d1(s,r.context,!1),ny(s,r.containerInfo)}function hx(s,r,h,p,y){return wl(),Kg(y),r.flags|=256,gn(s,r,h,p),r.child}var Ay={dehydrated:null,treeContext:null,retryLane:0};function xy(s){return{baseLanes:s,cachePool:null,transitions:null}}function dx(s,r,h){var p=r.pendingProps,y=le.current,w=!1,E=(r.flags&128)!==0,P;if((P=E)||(P=s!==null&&s.memoizedState===null?!1:(y&2)!==0),P?(w=!0,r.flags&=-129):(s===null||s.memoizedState!==null)&&(y|=1),Zt(le,y&1),s===null)return Xg(r),s=r.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((r.mode&1)===0?r.lanes=1:s.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(E=p.children,s=p.fallback,w?(p=r.mode,w=r.child,E={mode:"hidden",children:E},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=E):w=up(E,p,0,null),s=Oo(s,p,h,null),w.return=r,s.return=r,w.sibling=s,r.child=w,r.child.memoizedState=xy(h),r.memoizedState=Ay,s):Sy(r,E));if(y=s.memoizedState,y!==null&&(P=y.dehydrated,P!==null))return Hk(s,r,E,p,P,y,h);if(w){w=p.fallback,E=r.mode,y=s.child,P=y.sibling;var D={mode:"hidden",children:p.children};return(E&1)===0&&r.child!==y?(p=r.child,p.childLanes=0,p.pendingProps=D,r.deletions=null):(p=Nr(y,D),p.subtreeFlags=y.subtreeFlags&14680064),P!==null?w=Nr(P,w):(w=Oo(w,E,h,null),w.flags|=2),w.return=r,p.return=r,p.sibling=w,r.child=p,p=w,w=r.child,E=s.child.memoizedState,E=E===null?xy(h):{baseLanes:E.baseLanes|h,cachePool:null,transitions:E.transitions},w.memoizedState=E,w.childLanes=s.childLanes&~h,r.memoizedState=Ay,p}return w=s.child,s=w.sibling,p=Nr(w,{mode:"visible",children:p.children}),(r.mode&1)===0&&(p.lanes=h),p.return=r,p.sibling=null,s!==null&&(h=r.deletions,h===null?(r.deletions=[s],r.flags|=16):h.push(s)),r.child=p,r.memoizedState=null,p}function Sy(s,r){return r=up({mode:"visible",children:r},s.mode,0,null),r.return=s,s.child=r}function Yf(s,r,h,p){return p!==null&&Kg(p),Al(r,s.child,null,h),s=Sy(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function Hk(s,r,h,p,y,w,E){if(h)return r.flags&256?(r.flags&=-257,p=gy(Error(e(422))),Yf(s,r,E,p)):r.memoizedState!==null?(r.child=s.child,r.flags|=128,null):(w=p.fallback,y=r.mode,p=up({mode:"visible",children:p.children},y,0,null),w=Oo(w,y,E,null),w.flags|=2,p.return=r,w.return=r,p.sibling=w,r.child=p,(r.mode&1)!==0&&Al(r,s.child,null,E),r.child.memoizedState=xy(E),r.memoizedState=Ay,w);if((r.mode&1)===0)return Yf(s,r,E,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var P=p.dgst;return p=P,w=Error(e(419)),p=gy(w,p,void 0),Yf(s,r,E,p)}if(P=(E&s.childLanes)!==0,Pn||P){if(p=Fe,p!==null){switch(E&-E){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|E))!==0?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,Mi(s,y),Ds(p,s,y,-1))}return jy(),p=gy(Error(e(421))),Yf(s,r,E,p)}return y.data==="$?"?(r.flags|=128,r.child=s.child,r=eP.bind(null,s),y._reactRetry=r,null):(s=w.treeContext,Hn=Er(y.nextSibling),Bn=r,ie=!0,Ps=null,s!==null&&(ls[us++]=ki,ls[us++]=Pi,ls[us++]=ko,ki=s.id,Pi=s.overflow,ko=r),r=Sy(r,p.children),r.flags|=4096,r)}function fx(s,r,h){s.lanes|=r;var p=s.alternate;p!==null&&(p.lanes|=r),Jg(s.return,r,h)}function by(s,r,h,p,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:y}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=h,w.tailMode=y)}function px(s,r,h){var p=r.pendingProps,y=p.revealOrder,w=p.tail;if(gn(s,r,p.children,h),p=le.current,(p&2)!==0)p=p&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&fx(s,h,r);else if(s.tag===19)fx(s,h,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(Zt(le,p),(r.mode&1)===0)r.memoizedState=null;else switch(y){case"forwards":for(h=r.child,y=null;h!==null;)s=h.alternate,s!==null&&Uf(s)===null&&(y=h),h=h.sibling;h=y,h===null?(y=r.child,r.child=null):(y=h.sibling,h.sibling=null),by(r,!1,y,h,w);break;case"backwards":for(h=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&Uf(s)===null){r.child=y;break}s=y.sibling,y.sibling=h,h=y,y=s}by(r,!0,h,null,w);break;case"together":by(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Qf(s,r){(r.mode&1)===0&&s!==null&&(s.alternate=null,r.alternate=null,r.flags|=2)}function Li(s,r,h){if(s!==null&&(r.dependencies=s.dependencies),Do|=r.lanes,(h&r.childLanes)===0)return null;if(s!==null&&r.child!==s.child)throw Error(e(153));if(r.child!==null){for(s=r.child,h=Nr(s,s.pendingProps),r.child=h,h.return=r;s.sibling!==null;)s=s.sibling,h=h.sibling=Nr(s,s.pendingProps),h.return=r;h.sibling=null}return r.child}function Uk(s,r,h){switch(r.tag){case 3:cx(r),wl();break;case 5:k1(r);break;case 1:kn(r.type)&&Df(r);break;case 4:ny(r,r.stateNode.containerInfo);break;case 10:var p=r.type._context,y=r.memoizedProps.value;Zt(zf,p._currentValue),p._currentValue=y;break;case 13:if(p=r.memoizedState,p!==null)return p.dehydrated!==null?(Zt(le,le.current&1),r.flags|=128,null):(h&r.child.childLanes)!==0?dx(s,r,h):(Zt(le,le.current&1),s=Li(s,r,h),s!==null?s.sibling:null);Zt(le,le.current&1);break;case 19:if(p=(h&r.childLanes)!==0,(s.flags&128)!==0){if(p)return px(s,r,h);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Zt(le,le.current),p)break;return null;case 22:case 23:return r.lanes=0,ax(s,r,h)}return Li(s,r,h)}var mx,Ey,gx,yx;mx=function(s,r){for(var h=r.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break;for(;h.sibling===null;){if(h.return===null||h.return===r)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Ey=function(){},gx=function(s,r,h,p){var y=s.memoizedProps;if(y!==p){s=r.stateNode,Ro(ti.current);var w=null;switch(h){case"input":y=Jm(s,y),p=Jm(s,p),w=[];break;case"select":y=J({},y,{value:void 0}),p=J({},p,{value:void 0}),w=[];break;case"textarea":y=ng(s,y),p=ng(s,p),w=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=Mf)}ig(h,p);var E;h=null;for(H in y)if(!p.hasOwnProperty(H)&&y.hasOwnProperty(H)&&y[H]!=null)if(H==="style"){var P=y[H];for(E in P)P.hasOwnProperty(E)&&(h||(h={}),h[E]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(i.hasOwnProperty(H)?w||(w=[]):(w=w||[]).push(H,null));for(H in p){var D=p[H];if(P=y!=null?y[H]:void 0,p.hasOwnProperty(H)&&D!==P&&(D!=null||P!=null))if(H==="style")if(P){for(E in P)!P.hasOwnProperty(E)||D&&D.hasOwnProperty(E)||(h||(h={}),h[E]="");for(E in D)D.hasOwnProperty(E)&&P[E]!==D[E]&&(h||(h={}),h[E]=D[E])}else h||(w||(w=[]),w.push(H,h)),h=D;else H==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,P=P?P.__html:void 0,D!=null&&P!==D&&(w=w||[]).push(H,D)):H==="children"?typeof D!="string"&&typeof D!="number"||(w=w||[]).push(H,""+D):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(i.hasOwnProperty(H)?(D!=null&&H==="onScroll"&&te("scroll",s),w||P===D||(w=[])):(w=w||[]).push(H,D))}h&&(w=w||[]).push("style",h);var H=w;(r.updateQueue=H)&&(r.flags|=4)}},yx=function(s,r,h,p){h!==p&&(r.flags|=4)};function Nc(s,r){if(!ie)switch(s.tailMode){case"hidden":r=s.tail;for(var h=null;r!==null;)r.alternate!==null&&(h=r),r=r.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function en(s){var r=s.alternate!==null&&s.alternate.child===s.child,h=0,p=0;if(r)for(var y=s.child;y!==null;)h|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)h|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=p,s.childLanes=h,r}function $k(s,r,h){var p=r.pendingProps;switch(Wg(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(r),null;case 1:return kn(r.type)&&Lf(),en(r),null;case 3:return p=r.stateNode,bl(),ee(Tn),ee(Je),ry(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Of(r)?r.flags|=4:s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ps!==null&&(Ny(Ps),Ps=null))),Ey(s,r),en(r),null;case 5:sy(r);var y=Ro(Mc.current);if(h=r.type,s!==null&&r.stateNode!=null)gx(s,r,h,p,y),s.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!p){if(r.stateNode===null)throw Error(e(166));return en(r),null}if(s=Ro(ti.current),Of(r)){p=r.stateNode,h=r.type;var w=r.memoizedProps;switch(p[Js]=r,p[_c]=w,s=(r.mode&1)!==0,h){case"dialog":te("cancel",p),te("close",p);break;case"iframe":case"object":case"embed":te("load",p);break;case"video":case"audio":for(y=0;y<Sc.length;y++)te(Sc[y],p);break;case"source":te("error",p);break;case"img":case"image":case"link":te("error",p),te("load",p);break;case"details":te("toggle",p);break;case"input":Qw(p,w),te("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},te("invalid",p);break;case"textarea":tA(p,w),te("invalid",p)}ig(h,w),y=null;for(var E in w)if(w.hasOwnProperty(E)){var P=w[E];E==="children"?typeof P=="string"?p.textContent!==P&&(w.suppressHydrationWarning!==!0&&Pf(p.textContent,P,s),y=["children",P]):typeof P=="number"&&p.textContent!==""+P&&(w.suppressHydrationWarning!==!0&&Pf(p.textContent,P,s),y=["children",""+P]):i.hasOwnProperty(E)&&P!=null&&E==="onScroll"&&te("scroll",p)}switch(h){case"input":of(p),Jw(p,w,!0);break;case"textarea":of(p),nA(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=Mf)}p=y,r.updateQueue=p,p!==null&&(r.flags|=4)}else{E=y.nodeType===9?y:y.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=sA(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=E.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=E.createElement(h,{is:p.is}):(s=E.createElement(h),h==="select"&&(E=s,p.multiple?E.multiple=!0:p.size&&(E.size=p.size))):s=E.createElementNS(s,h),s[Js]=r,s[_c]=p,mx(s,r,!1,!1),r.stateNode=s;t:{switch(E=rg(h,p),h){case"dialog":te("cancel",s),te("close",s),y=p;break;case"iframe":case"object":case"embed":te("load",s),y=p;break;case"video":case"audio":for(y=0;y<Sc.length;y++)te(Sc[y],s);y=p;break;case"source":te("error",s),y=p;break;case"img":case"image":case"link":te("error",s),te("load",s),y=p;break;case"details":te("toggle",s),y=p;break;case"input":Qw(s,p),y=Jm(s,p),te("invalid",s);break;case"option":y=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},y=J({},p,{value:void 0}),te("invalid",s);break;case"textarea":tA(s,p),y=ng(s,p),te("invalid",s);break;default:y=p}ig(h,y),P=y;for(w in P)if(P.hasOwnProperty(w)){var D=P[w];w==="style"?oA(s,D):w==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&iA(s,D)):w==="children"?typeof D=="string"?(h!=="textarea"||D!=="")&&sc(s,D):typeof D=="number"&&sc(s,""+D):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?D!=null&&w==="onScroll"&&te("scroll",s):D!=null&&L(s,w,D,E))}switch(h){case"input":of(s),Jw(s,p,!1);break;case"textarea":of(s),nA(s);break;case"option":p.value!=null&&s.setAttribute("value",""+Ot(p.value));break;case"select":s.multiple=!!p.multiple,w=p.value,w!=null?il(s,!!p.multiple,w,!1):p.defaultValue!=null&&il(s,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(s.onclick=Mf)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break t;case"img":p=!0;break t;default:p=!1}}p&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return en(r),null;case 6:if(s&&r.stateNode!=null)yx(s,r,s.memoizedProps,p);else{if(typeof p!="string"&&r.stateNode===null)throw Error(e(166));if(h=Ro(Mc.current),Ro(ti.current),Of(r)){if(p=r.stateNode,h=r.memoizedProps,p[Js]=r,(w=p.nodeValue!==h)&&(s=Bn,s!==null))switch(s.tag){case 3:Pf(p.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Pf(p.nodeValue,h,(s.mode&1)!==0)}w&&(r.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[Js]=r,r.stateNode=p}return en(r),null;case 13:if(ee(le),p=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ie&&Hn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)A1(),wl(),r.flags|=98560,w=!1;else if(w=Of(r),p!==null&&p.dehydrated!==null){if(s===null){if(!w)throw Error(e(318));if(w=r.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(e(317));w[Js]=r}else wl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;en(r),w=!1}else Ps!==null&&(Ny(Ps),Ps=null),w=!0;if(!w)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=h,r):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(r.child.flags|=8192,(r.mode&1)!==0&&(s===null||(le.current&1)!==0?ke===0&&(ke=3):jy())),r.updateQueue!==null&&(r.flags|=4),en(r),null);case 4:return bl(),Ey(s,r),s===null&&bc(r.stateNode.containerInfo),en(r),null;case 10:return Zg(r.type._context),en(r),null;case 17:return kn(r.type)&&Lf(),en(r),null;case 19:if(ee(le),w=r.memoizedState,w===null)return en(r),null;if(p=(r.flags&128)!==0,E=w.rendering,E===null)if(p)Nc(w,!1);else{if(ke!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(E=Uf(s),E!==null){for(r.flags|=128,Nc(w,!1),p=E.updateQueue,p!==null&&(r.updateQueue=p,r.flags|=4),r.subtreeFlags=0,p=h,h=r.child;h!==null;)w=h,s=p,w.flags&=14680066,E=w.alternate,E===null?(w.childLanes=0,w.lanes=s,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=E.childLanes,w.lanes=E.lanes,w.child=E.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=E.memoizedProps,w.memoizedState=E.memoizedState,w.updateQueue=E.updateQueue,w.type=E.type,s=E.dependencies,w.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return Zt(le,le.current&1|2),r.child}s=s.sibling}w.tail!==null&&ye()>Tl&&(r.flags|=128,p=!0,Nc(w,!1),r.lanes=4194304)}else{if(!p)if(s=Uf(E),s!==null){if(r.flags|=128,p=!0,h=s.updateQueue,h!==null&&(r.updateQueue=h,r.flags|=4),Nc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!E.alternate&&!ie)return en(r),null}else 2*ye()-w.renderingStartTime>Tl&&h!==1073741824&&(r.flags|=128,p=!0,Nc(w,!1),r.lanes=4194304);w.isBackwards?(E.sibling=r.child,r.child=E):(h=w.last,h!==null?h.sibling=E:r.child=E,w.last=E)}return w.tail!==null?(r=w.tail,w.rendering=r,w.tail=r.sibling,w.renderingStartTime=ye(),r.sibling=null,h=le.current,Zt(le,p?h&1|2:h&1),r):(en(r),null);case 22:case 23:return Oy(),p=r.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(r.flags|=8192),p&&(r.mode&1)!==0?(Un&1073741824)!==0&&(en(r),r.subtreeFlags&6&&(r.flags|=8192)):en(r),null;case 24:return null;case 25:return null}throw Error(e(156,r.tag))}function Gk(s,r){switch(Wg(r),r.tag){case 1:return kn(r.type)&&Lf(),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return bl(),ee(Tn),ee(Je),ry(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 5:return sy(r),null;case 13:if(ee(le),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(e(340));wl()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ee(le),null;case 4:return bl(),null;case 10:return Zg(r.type._context),null;case 22:case 23:return Oy(),null;case 24:return null;default:return null}}var Zf=!1,nn=!1,Wk=typeof WeakSet=="function"?WeakSet:Set,it=null;function _l(s,r){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){pe(s,r,p)}else h.current=null}function _y(s,r,h){try{h()}catch(p){pe(s,r,p)}}var vx=!1;function qk(s,r){if(Og=vf,s=YA(),Pg(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else t:{h=(h=s.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{h.nodeType,w.nodeType}catch{h=null;break t}var E=0,P=-1,D=-1,H=0,W=0,X=s,G=null;e:for(;;){for(var nt;X!==h||y!==0&&X.nodeType!==3||(P=E+y),X!==w||p!==0&&X.nodeType!==3||(D=E+p),X.nodeType===3&&(E+=X.nodeValue.length),(nt=X.firstChild)!==null;)G=X,X=nt;for(;;){if(X===s)break e;if(G===h&&++H===y&&(P=E),G===w&&++W===p&&(D=E),(nt=X.nextSibling)!==null)break;X=G,G=X.parentNode}X=nt}h=P===-1||D===-1?null:{start:P,end:D}}else h=null}h=h||{start:0,end:0}}else h=null;for(jg={focusedElem:s,selectionRange:h},vf=!1,it=r;it!==null;)if(r=it,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,it=s;else for(;it!==null;){r=it;try{var ut=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var ht=ut.memoizedProps,ve=ut.memoizedState,j=r.stateNode,N=j.getSnapshotBeforeUpdate(r.elementType===r.type?ht:Ms(r.type,ht),ve);j.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var V=r.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(Y){pe(r,r.return,Y)}if(s=r.sibling,s!==null){s.return=r.return,it=s;break}it=r.return}return ut=vx,vx=!1,ut}function Fc(s,r,h){var p=r.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&s)===s){var w=y.destroy;y.destroy=void 0,w!==void 0&&_y(r,h,w)}y=y.next}while(y!==p)}}function Jf(s,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var h=r=r.next;do{if((h.tag&s)===s){var p=h.create;h.destroy=p()}h=h.next}while(h!==r)}}function Cy(s){var r=s.ref;if(r!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof r=="function"?r(s):r.current=s}}function wx(s){var r=s.alternate;r!==null&&(s.alternate=null,wx(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&(delete r[Js],delete r[_c],delete r[Hg],delete r[Pk],delete r[Mk])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Ax(s){return s.tag===5||s.tag===3||s.tag===4}function xx(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Ax(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ty(s,r,h){var p=s.tag;if(p===5||p===6)s=s.stateNode,r?h.nodeType===8?h.parentNode.insertBefore(s,r):h.insertBefore(s,r):(h.nodeType===8?(r=h.parentNode,r.insertBefore(s,h)):(r=h,r.appendChild(s)),h=h._reactRootContainer,h!=null||r.onclick!==null||(r.onclick=Mf));else if(p!==4&&(s=s.child,s!==null))for(Ty(s,r,h),s=s.sibling;s!==null;)Ty(s,r,h),s=s.sibling}function ky(s,r,h){var p=s.tag;if(p===5||p===6)s=s.stateNode,r?h.insertBefore(s,r):h.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(ky(s,r,h),s=s.sibling;s!==null;)ky(s,r,h),s=s.sibling}var $e=null,Rs=!1;function Mr(s,r,h){for(h=h.child;h!==null;)Sx(s,r,h),h=h.sibling}function Sx(s,r,h){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(df,h)}catch{}switch(h.tag){case 5:nn||_l(h,r);case 6:var p=$e,y=Rs;$e=null,Mr(s,r,h),$e=p,Rs=y,$e!==null&&(Rs?(s=$e,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):$e.removeChild(h.stateNode));break;case 18:$e!==null&&(Rs?(s=$e,h=h.stateNode,s.nodeType===8?Bg(s.parentNode,h):s.nodeType===1&&Bg(s,h),pc(s)):Bg($e,h.stateNode));break;case 4:p=$e,y=Rs,$e=h.stateNode.containerInfo,Rs=!0,Mr(s,r,h),$e=p,Rs=y;break;case 0:case 11:case 14:case 15:if(!nn&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var w=y,E=w.destroy;w=w.tag,E!==void 0&&((w&2)!==0||(w&4)!==0)&&_y(h,r,E),y=y.next}while(y!==p)}Mr(s,r,h);break;case 1:if(!nn&&(_l(h,r),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(P){pe(h,r,P)}Mr(s,r,h);break;case 21:Mr(s,r,h);break;case 22:h.mode&1?(nn=(p=nn)||h.memoizedState!==null,Mr(s,r,h),nn=p):Mr(s,r,h);break;default:Mr(s,r,h)}}function bx(s){var r=s.updateQueue;if(r!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new Wk),r.forEach(function(p){var y=nP.bind(null,s,p);h.has(p)||(h.add(p),p.then(y,y))})}}function Ls(s,r){var h=r.deletions;if(h!==null)for(var p=0;p<h.length;p++){var y=h[p];try{var w=s,E=r,P=E;t:for(;P!==null;){switch(P.tag){case 5:$e=P.stateNode,Rs=!1;break t;case 3:$e=P.stateNode.containerInfo,Rs=!0;break t;case 4:$e=P.stateNode.containerInfo,Rs=!0;break t}P=P.return}if($e===null)throw Error(e(160));Sx(w,E,y),$e=null,Rs=!1;var D=y.alternate;D!==null&&(D.return=null),y.return=null}catch(H){pe(y,r,H)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Ex(r,s),r=r.sibling}function Ex(s,r){var h=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Ls(r,s),ni(s),p&4){try{Fc(3,s,s.return),Jf(3,s)}catch(ht){pe(s,s.return,ht)}try{Fc(5,s,s.return)}catch(ht){pe(s,s.return,ht)}}break;case 1:Ls(r,s),ni(s),p&512&&h!==null&&_l(h,h.return);break;case 5:if(Ls(r,s),ni(s),p&512&&h!==null&&_l(h,h.return),s.flags&32){var y=s.stateNode;try{sc(y,"")}catch(ht){pe(s,s.return,ht)}}if(p&4&&(y=s.stateNode,y!=null)){var w=s.memoizedProps,E=h!==null?h.memoizedProps:w,P=s.type,D=s.updateQueue;if(s.updateQueue=null,D!==null)try{P==="input"&&w.type==="radio"&&w.name!=null&&Zw(y,w),rg(P,E);var H=rg(P,w);for(E=0;E<D.length;E+=2){var W=D[E],X=D[E+1];W==="style"?oA(y,X):W==="dangerouslySetInnerHTML"?iA(y,X):W==="children"?sc(y,X):L(y,W,X,H)}switch(P){case"input":tg(y,w);break;case"textarea":eA(y,w);break;case"select":var G=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var nt=w.value;nt!=null?il(y,!!w.multiple,nt,!1):G!==!!w.multiple&&(w.defaultValue!=null?il(y,!!w.multiple,w.defaultValue,!0):il(y,!!w.multiple,w.multiple?[]:"",!1))}y[_c]=w}catch(ht){pe(s,s.return,ht)}}break;case 6:if(Ls(r,s),ni(s),p&4){if(s.stateNode===null)throw Error(e(162));y=s.stateNode,w=s.memoizedProps;try{y.nodeValue=w}catch(ht){pe(s,s.return,ht)}}break;case 3:if(Ls(r,s),ni(s),p&4&&h!==null&&h.memoizedState.isDehydrated)try{pc(r.containerInfo)}catch(ht){pe(s,s.return,ht)}break;case 4:Ls(r,s),ni(s);break;case 13:Ls(r,s),ni(s),y=s.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(Ry=ye())),p&4&&bx(s);break;case 22:if(W=h!==null&&h.memoizedState!==null,s.mode&1?(nn=(H=nn)||W,Ls(r,s),nn=H):Ls(r,s),ni(s),p&8192){if(H=s.memoizedState!==null,(s.stateNode.isHidden=H)&&!W&&(s.mode&1)!==0)for(it=s,W=s.child;W!==null;){for(X=it=W;it!==null;){switch(G=it,nt=G.child,G.tag){case 0:case 11:case 14:case 15:Fc(4,G,G.return);break;case 1:_l(G,G.return);var ut=G.stateNode;if(typeof ut.componentWillUnmount=="function"){p=G,h=G.return;try{r=p,ut.props=r.memoizedProps,ut.state=r.memoizedState,ut.componentWillUnmount()}catch(ht){pe(p,h,ht)}}break;case 5:_l(G,G.return);break;case 22:if(G.memoizedState!==null){Tx(X);continue}}nt!==null?(nt.return=G,it=nt):Tx(X)}W=W.sibling}t:for(W=null,X=s;;){if(X.tag===5){if(W===null){W=X;try{y=X.stateNode,H?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(P=X.stateNode,D=X.memoizedProps.style,E=D!=null&&D.hasOwnProperty("display")?D.display:null,P.style.display=rA("display",E))}catch(ht){pe(s,s.return,ht)}}}else if(X.tag===6){if(W===null)try{X.stateNode.nodeValue=H?"":X.memoizedProps}catch(ht){pe(s,s.return,ht)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===s)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===s)break t;for(;X.sibling===null;){if(X.return===null||X.return===s)break t;W===X&&(W=null),X=X.return}W===X&&(W=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Ls(r,s),ni(s),p&4&&bx(s);break;case 21:break;default:Ls(r,s),ni(s)}}function ni(s){var r=s.flags;if(r&2){try{t:{for(var h=s.return;h!==null;){if(Ax(h)){var p=h;break t}h=h.return}throw Error(e(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(sc(y,""),p.flags&=-33);var w=xx(s);ky(s,w,y);break;case 3:case 4:var E=p.stateNode.containerInfo,P=xx(s);Ty(s,P,E);break;default:throw Error(e(161))}}catch(D){pe(s,s.return,D)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Xk(s,r,h){it=s,_x(s)}function _x(s,r,h){for(var p=(s.mode&1)!==0;it!==null;){var y=it,w=y.child;if(y.tag===22&&p){var E=y.memoizedState!==null||Zf;if(!E){var P=y.alternate,D=P!==null&&P.memoizedState!==null||nn;P=Zf;var H=nn;if(Zf=E,(nn=D)&&!H)for(it=y;it!==null;)E=it,D=E.child,E.tag===22&&E.memoizedState!==null?kx(y):D!==null?(D.return=E,it=D):kx(y);for(;w!==null;)it=w,_x(w),w=w.sibling;it=y,Zf=P,nn=H}Cx(s)}else(y.subtreeFlags&8772)!==0&&w!==null?(w.return=y,it=w):Cx(s)}}function Cx(s){for(;it!==null;){var r=it;if((r.flags&8772)!==0){var h=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:nn||Jf(5,r);break;case 1:var p=r.stateNode;if(r.flags&4&&!nn)if(h===null)p.componentDidMount();else{var y=r.elementType===r.type?h.memoizedProps:Ms(r.type,h.memoizedProps);p.componentDidUpdate(y,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=r.updateQueue;w!==null&&T1(r,w,p);break;case 3:var E=r.updateQueue;if(E!==null){if(h=null,r.child!==null)switch(r.child.tag){case 5:h=r.child.stateNode;break;case 1:h=r.child.stateNode}T1(r,E,h)}break;case 5:var P=r.stateNode;if(h===null&&r.flags&4){h=P;var D=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&h.focus();break;case"img":D.src&&(h.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var H=r.alternate;if(H!==null){var W=H.memoizedState;if(W!==null){var X=W.dehydrated;X!==null&&pc(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}nn||r.flags&512&&Cy(r)}catch(G){pe(r,r.return,G)}}if(r===s){it=null;break}if(h=r.sibling,h!==null){h.return=r.return,it=h;break}it=r.return}}function Tx(s){for(;it!==null;){var r=it;if(r===s){it=null;break}var h=r.sibling;if(h!==null){h.return=r.return,it=h;break}it=r.return}}function kx(s){for(;it!==null;){var r=it;try{switch(r.tag){case 0:case 11:case 15:var h=r.return;try{Jf(4,r)}catch(D){pe(r,h,D)}break;case 1:var p=r.stateNode;if(typeof p.componentDidMount=="function"){var y=r.return;try{p.componentDidMount()}catch(D){pe(r,y,D)}}var w=r.return;try{Cy(r)}catch(D){pe(r,w,D)}break;case 5:var E=r.return;try{Cy(r)}catch(D){pe(r,E,D)}}}catch(D){pe(r,r.return,D)}if(r===s){it=null;break}var P=r.sibling;if(P!==null){P.return=r.return,it=P;break}it=r.return}}var Kk=Math.ceil,tp=R.ReactCurrentDispatcher,Py=R.ReactCurrentOwner,ds=R.ReactCurrentBatchConfig,zt=0,Fe=null,be=null,Ge=0,Un=0,Cl=_r(0),ke=0,Oc=null,Do=0,ep=0,My=0,jc=null,Mn=null,Ry=0,Tl=1/0,Di=null,np=!1,Ly=null,Rr=null,sp=!1,Lr=null,ip=0,zc=0,Dy=null,rp=-1,op=0;function yn(){return(zt&6)!==0?ye():rp!==-1?rp:rp=ye()}function Dr(s){return(s.mode&1)===0?1:(zt&2)!==0&&Ge!==0?Ge&-Ge:Lk.transition!==null?(op===0&&(op=xA()),op):(s=$t,s!==0||(s=window.event,s=s===void 0?16:MA(s.type)),s)}function Ds(s,r,h,p){if(50<zc)throw zc=0,Dy=null,Error(e(185));uc(s,h,p),((zt&2)===0||s!==Fe)&&(s===Fe&&((zt&2)===0&&(ep|=h),ke===4&&Ir(s,Ge)),Rn(s,p),h===1&&zt===0&&(r.mode&1)===0&&(Tl=ye()+500,If&&Tr()))}function Rn(s,r){var h=s.callbackNode;LT(s,r);var p=mf(s,s===Fe?Ge:0);if(p===0)h!==null&&vA(h),s.callbackNode=null,s.callbackPriority=0;else if(r=p&-p,s.callbackPriority!==r){if(h!=null&&vA(h),r===1)s.tag===0?Rk(Mx.bind(null,s)):m1(Mx.bind(null,s)),Tk(function(){(zt&6)===0&&Tr()}),h=null;else{switch(SA(p)){case 1:h=dg;break;case 4:h=wA;break;case 16:h=hf;break;case 536870912:h=AA;break;default:h=hf}h=jx(h,Px.bind(null,s))}s.callbackPriority=r,s.callbackNode=h}}function Px(s,r){if(rp=-1,op=0,(zt&6)!==0)throw Error(e(327));var h=s.callbackNode;if(kl()&&s.callbackNode!==h)return null;var p=mf(s,s===Fe?Ge:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||r)r=ap(s,p);else{r=p;var y=zt;zt|=2;var w=Lx();(Fe!==s||Ge!==r)&&(Di=null,Tl=ye()+500,No(s,r));do try{Zk();break}catch(P){Rx(s,P)}while(!0);Qg(),tp.current=w,zt=y,be!==null?r=0:(Fe=null,Ge=0,r=ke)}if(r!==0){if(r===2&&(y=fg(s),y!==0&&(p=y,r=Iy(s,y))),r===1)throw h=Oc,No(s,0),Ir(s,p),Rn(s,ye()),h;if(r===6)Ir(s,p);else{if(y=s.current.alternate,(p&30)===0&&!Yk(y)&&(r=ap(s,p),r===2&&(w=fg(s),w!==0&&(p=w,r=Iy(s,w))),r===1))throw h=Oc,No(s,0),Ir(s,p),Rn(s,ye()),h;switch(s.finishedWork=y,s.finishedLanes=p,r){case 0:case 1:throw Error(e(345));case 2:Fo(s,Mn,Di);break;case 3:if(Ir(s,p),(p&130023424)===p&&(r=Ry+500-ye(),10<r)){if(mf(s,0)!==0)break;if(y=s.suspendedLanes,(y&p)!==p){yn(),s.pingedLanes|=s.suspendedLanes&y;break}s.timeoutHandle=Vg(Fo.bind(null,s,Mn,Di),r);break}Fo(s,Mn,Di);break;case 4:if(Ir(s,p),(p&4194240)===p)break;for(r=s.eventTimes,y=-1;0<p;){var E=31-Ts(p);w=1<<E,E=r[E],E>y&&(y=E),p&=~w}if(p=y,p=ye()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Kk(p/1960))-p,10<p){s.timeoutHandle=Vg(Fo.bind(null,s,Mn,Di),p);break}Fo(s,Mn,Di);break;case 5:Fo(s,Mn,Di);break;default:throw Error(e(329))}}}return Rn(s,ye()),s.callbackNode===h?Px.bind(null,s):null}function Iy(s,r){var h=jc;return s.current.memoizedState.isDehydrated&&(No(s,r).flags|=256),s=ap(s,r),s!==2&&(r=Mn,Mn=h,r!==null&&Ny(r)),s}function Ny(s){Mn===null?Mn=s:Mn.push.apply(Mn,s)}function Yk(s){for(var r=s;;){if(r.flags&16384){var h=r.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var y=h[p],w=y.getSnapshot;y=y.value;try{if(!ks(w(),y))return!1}catch{return!1}}}if(h=r.child,r.subtreeFlags&16384&&h!==null)h.return=r,r=h;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ir(s,r){for(r&=~My,r&=~ep,s.suspendedLanes|=r,s.pingedLanes&=~r,s=s.expirationTimes;0<r;){var h=31-Ts(r),p=1<<h;s[h]=-1,r&=~p}}function Mx(s){if((zt&6)!==0)throw Error(e(327));kl();var r=mf(s,0);if((r&1)===0)return Rn(s,ye()),null;var h=ap(s,r);if(s.tag!==0&&h===2){var p=fg(s);p!==0&&(r=p,h=Iy(s,p))}if(h===1)throw h=Oc,No(s,0),Ir(s,r),Rn(s,ye()),h;if(h===6)throw Error(e(345));return s.finishedWork=s.current.alternate,s.finishedLanes=r,Fo(s,Mn,Di),Rn(s,ye()),null}function Fy(s,r){var h=zt;zt|=1;try{return s(r)}finally{zt=h,zt===0&&(Tl=ye()+500,If&&Tr())}}function Io(s){Lr!==null&&Lr.tag===0&&(zt&6)===0&&kl();var r=zt;zt|=1;var h=ds.transition,p=$t;try{if(ds.transition=null,$t=1,s)return s()}finally{$t=p,ds.transition=h,zt=r,(zt&6)===0&&Tr()}}function Oy(){Un=Cl.current,ee(Cl)}function No(s,r){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,Ck(h)),be!==null)for(h=be.return;h!==null;){var p=h;switch(Wg(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Lf();break;case 3:bl(),ee(Tn),ee(Je),ry();break;case 5:sy(p);break;case 4:bl();break;case 13:ee(le);break;case 19:ee(le);break;case 10:Zg(p.type._context);break;case 22:case 23:Oy()}h=h.return}if(Fe=s,be=s=Nr(s.current,null),Ge=Un=r,ke=0,Oc=null,My=ep=Do=0,Mn=jc=null,Mo!==null){for(r=0;r<Mo.length;r++)if(h=Mo[r],p=h.interleaved,p!==null){h.interleaved=null;var y=p.next,w=h.pending;if(w!==null){var E=w.next;w.next=y,p.next=E}h.pending=p}Mo=null}return s}function Rx(s,r){do{var h=be;try{if(Qg(),$f.current=Xf,Gf){for(var p=ue.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Gf=!1}if(Lo=0,Ne=Te=ue=null,Rc=!1,Lc=0,Py.current=null,h===null||h.return===null){ke=1,Oc=r,be=null;break}t:{var w=s,E=h.return,P=h,D=r;if(r=Ge,P.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var H=D,W=P,X=W.tag;if((W.mode&1)===0&&(X===0||X===11||X===15)){var G=W.alternate;G?(W.updateQueue=G.updateQueue,W.memoizedState=G.memoizedState,W.lanes=G.lanes):(W.updateQueue=null,W.memoizedState=null)}var nt=nx(E);if(nt!==null){nt.flags&=-257,sx(nt,E,P,w,r),nt.mode&1&&ex(w,H,r),r=nt,D=H;var ut=r.updateQueue;if(ut===null){var ht=new Set;ht.add(D),r.updateQueue=ht}else ut.add(D);break t}else{if((r&1)===0){ex(w,H,r),jy();break t}D=Error(e(426))}}else if(ie&&P.mode&1){var ve=nx(E);if(ve!==null){(ve.flags&65536)===0&&(ve.flags|=256),sx(ve,E,P,w,r),Kg(El(D,P));break t}}w=D=El(D,P),ke!==4&&(ke=2),jc===null?jc=[w]:jc.push(w),w=E;do{switch(w.tag){case 3:w.flags|=65536,r&=-r,w.lanes|=r;var j=J1(w,D,r);C1(w,j);break t;case 1:P=D;var N=w.type,V=w.stateNode;if((w.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Rr===null||!Rr.has(V)))){w.flags|=65536,r&=-r,w.lanes|=r;var Y=tx(w,P,r);C1(w,Y);break t}}w=w.return}while(w!==null)}Ix(h)}catch(dt){r=dt,be===h&&h!==null&&(be=h=h.return);continue}break}while(!0)}function Lx(){var s=tp.current;return tp.current=Xf,s===null?Xf:s}function jy(){(ke===0||ke===3||ke===2)&&(ke=4),Fe===null||(Do&268435455)===0&&(ep&268435455)===0||Ir(Fe,Ge)}function ap(s,r){var h=zt;zt|=2;var p=Lx();(Fe!==s||Ge!==r)&&(Di=null,No(s,r));do try{Qk();break}catch(y){Rx(s,y)}while(!0);if(Qg(),zt=h,tp.current=p,be!==null)throw Error(e(261));return Fe=null,Ge=0,ke}function Qk(){for(;be!==null;)Dx(be)}function Zk(){for(;be!==null&&!bT();)Dx(be)}function Dx(s){var r=Ox(s.alternate,s,Un);s.memoizedProps=s.pendingProps,r===null?Ix(s):be=r,Py.current=null}function Ix(s){var r=s;do{var h=r.alternate;if(s=r.return,(r.flags&32768)===0){if(h=$k(h,r,Un),h!==null){be=h;return}}else{if(h=Gk(h,r),h!==null){h.flags&=32767,be=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ke=6,be=null;return}}if(r=r.sibling,r!==null){be=r;return}be=r=s}while(r!==null);ke===0&&(ke=5)}function Fo(s,r,h){var p=$t,y=ds.transition;try{ds.transition=null,$t=1,Jk(s,r,h,p)}finally{ds.transition=y,$t=p}return null}function Jk(s,r,h,p){do kl();while(Lr!==null);if((zt&6)!==0)throw Error(e(327));h=s.finishedWork;var y=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(e(177));s.callbackNode=null,s.callbackPriority=0;var w=h.lanes|h.childLanes;if(DT(s,w),s===Fe&&(be=Fe=null,Ge=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||sp||(sp=!0,jx(hf,function(){return kl(),null})),w=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||w){w=ds.transition,ds.transition=null;var E=$t;$t=1;var P=zt;zt|=4,Py.current=null,qk(s,h),Ex(h,s),wk(jg),vf=!!Og,jg=Og=null,s.current=h,Xk(h),ET(),zt=P,$t=E,ds.transition=w}else s.current=h;if(sp&&(sp=!1,Lr=s,ip=y),w=s.pendingLanes,w===0&&(Rr=null),TT(h.stateNode),Rn(s,ye()),r!==null)for(p=s.onRecoverableError,h=0;h<r.length;h++)y=r[h],p(y.value,{componentStack:y.stack,digest:y.digest});if(np)throw np=!1,s=Ly,Ly=null,s;return(ip&1)!==0&&s.tag!==0&&kl(),w=s.pendingLanes,(w&1)!==0?s===Dy?zc++:(zc=0,Dy=s):zc=0,Tr(),null}function kl(){if(Lr!==null){var s=SA(ip),r=ds.transition,h=$t;try{if(ds.transition=null,$t=16>s?16:s,Lr===null)var p=!1;else{if(s=Lr,Lr=null,ip=0,(zt&6)!==0)throw Error(e(331));var y=zt;for(zt|=4,it=s.current;it!==null;){var w=it,E=w.child;if((it.flags&16)!==0){var P=w.deletions;if(P!==null){for(var D=0;D<P.length;D++){var H=P[D];for(it=H;it!==null;){var W=it;switch(W.tag){case 0:case 11:case 15:Fc(8,W,w)}var X=W.child;if(X!==null)X.return=W,it=X;else for(;it!==null;){W=it;var G=W.sibling,nt=W.return;if(wx(W),W===H){it=null;break}if(G!==null){G.return=nt,it=G;break}it=nt}}}var ut=w.alternate;if(ut!==null){var ht=ut.child;if(ht!==null){ut.child=null;do{var ve=ht.sibling;ht.sibling=null,ht=ve}while(ht!==null)}}it=w}}if((w.subtreeFlags&2064)!==0&&E!==null)E.return=w,it=E;else t:for(;it!==null;){if(w=it,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Fc(9,w,w.return)}var j=w.sibling;if(j!==null){j.return=w.return,it=j;break t}it=w.return}}var N=s.current;for(it=N;it!==null;){E=it;var V=E.child;if((E.subtreeFlags&2064)!==0&&V!==null)V.return=E,it=V;else t:for(E=N;it!==null;){if(P=it,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Jf(9,P)}}catch(dt){pe(P,P.return,dt)}if(P===E){it=null;break t}var Y=P.sibling;if(Y!==null){Y.return=P.return,it=Y;break t}it=P.return}}if(zt=y,Tr(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(df,s)}catch{}p=!0}return p}finally{$t=h,ds.transition=r}}return!1}function Nx(s,r,h){r=El(h,r),r=J1(s,r,1),s=Pr(s,r,1),r=yn(),s!==null&&(uc(s,1,r),Rn(s,r))}function pe(s,r,h){if(s.tag===3)Nx(s,s,h);else for(;r!==null;){if(r.tag===3){Nx(r,s,h);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Rr===null||!Rr.has(p))){s=El(h,s),s=tx(r,s,1),r=Pr(r,s,1),s=yn(),r!==null&&(uc(r,1,s),Rn(r,s));break}}r=r.return}}function tP(s,r,h){var p=s.pingCache;p!==null&&p.delete(r),r=yn(),s.pingedLanes|=s.suspendedLanes&h,Fe===s&&(Ge&h)===h&&(ke===4||ke===3&&(Ge&130023424)===Ge&&500>ye()-Ry?No(s,0):My|=h),Rn(s,r)}function Fx(s,r){r===0&&((s.mode&1)===0?r=1:(r=pf,pf<<=1,(pf&130023424)===0&&(pf=4194304)));var h=yn();s=Mi(s,r),s!==null&&(uc(s,r,h),Rn(s,h))}function eP(s){var r=s.memoizedState,h=0;r!==null&&(h=r.retryLane),Fx(s,h)}function nP(s,r){var h=0;switch(s.tag){case 13:var p=s.stateNode,y=s.memoizedState;y!==null&&(h=y.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(e(314))}p!==null&&p.delete(r),Fx(s,h)}var Ox;Ox=function(s,r,h){if(s!==null)if(s.memoizedProps!==r.pendingProps||Tn.current)Pn=!0;else{if((s.lanes&h)===0&&(r.flags&128)===0)return Pn=!1,Uk(s,r,h);Pn=(s.flags&131072)!==0}else Pn=!1,ie&&(r.flags&1048576)!==0&&g1(r,Ff,r.index);switch(r.lanes=0,r.tag){case 2:var p=r.type;Qf(s,r),s=r.pendingProps;var y=gl(r,Je.current);Sl(r,h),y=ly(null,r,p,s,y,h);var w=uy();return r.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,kn(p)?(w=!0,Df(r)):w=!1,r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,ey(r),y.updater=Kf,r.stateNode=y,y._reactInternals=r,my(r,p,s,h),r=wy(null,r,p,!0,w,h)):(r.tag=0,ie&&w&&Gg(r),gn(null,r,y,h),r=r.child),r;case 16:p=r.elementType;t:{switch(Qf(s,r),s=r.pendingProps,y=p._init,p=y(p._payload),r.type=p,y=r.tag=iP(p),s=Ms(p,s),y){case 0:r=vy(null,r,p,s,h);break t;case 1:r=ux(null,r,p,s,h);break t;case 11:r=ix(null,r,p,s,h);break t;case 14:r=rx(null,r,p,Ms(p.type,s),h);break t}throw Error(e(306,p,""))}return r;case 0:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Ms(p,y),vy(s,r,p,y,h);case 1:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Ms(p,y),ux(s,r,p,y,h);case 3:t:{if(cx(r),s===null)throw Error(e(387));p=r.pendingProps,w=r.memoizedState,y=w.element,_1(s,r),Hf(r,p,null,h);var E=r.memoizedState;if(p=E.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){y=El(Error(e(423)),r),r=hx(s,r,p,h,y);break t}else if(p!==y){y=El(Error(e(424)),r),r=hx(s,r,p,h,y);break t}else for(Hn=Er(r.stateNode.containerInfo.firstChild),Bn=r,ie=!0,Ps=null,h=b1(r,null,p,h),r.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(wl(),p===y){r=Li(s,r,h);break t}gn(s,r,p,h)}r=r.child}return r;case 5:return k1(r),s===null&&Xg(r),p=r.type,y=r.pendingProps,w=s!==null?s.memoizedProps:null,E=y.children,zg(p,y)?E=null:w!==null&&zg(p,w)&&(r.flags|=32),lx(s,r),gn(s,r,E,h),r.child;case 6:return s===null&&Xg(r),null;case 13:return dx(s,r,h);case 4:return ny(r,r.stateNode.containerInfo),p=r.pendingProps,s===null?r.child=Al(r,null,p,h):gn(s,r,p,h),r.child;case 11:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Ms(p,y),ix(s,r,p,y,h);case 7:return gn(s,r,r.pendingProps,h),r.child;case 8:return gn(s,r,r.pendingProps.children,h),r.child;case 12:return gn(s,r,r.pendingProps.children,h),r.child;case 10:t:{if(p=r.type._context,y=r.pendingProps,w=r.memoizedProps,E=y.value,Zt(zf,p._currentValue),p._currentValue=E,w!==null)if(ks(w.value,E)){if(w.children===y.children&&!Tn.current){r=Li(s,r,h);break t}}else for(w=r.child,w!==null&&(w.return=r);w!==null;){var P=w.dependencies;if(P!==null){E=w.child;for(var D=P.firstContext;D!==null;){if(D.context===p){if(w.tag===1){D=Ri(-1,h&-h),D.tag=2;var H=w.updateQueue;if(H!==null){H=H.shared;var W=H.pending;W===null?D.next=D:(D.next=W.next,W.next=D),H.pending=D}}w.lanes|=h,D=w.alternate,D!==null&&(D.lanes|=h),Jg(w.return,h,r),P.lanes|=h;break}D=D.next}}else if(w.tag===10)E=w.type===r.type?null:w.child;else if(w.tag===18){if(E=w.return,E===null)throw Error(e(341));E.lanes|=h,P=E.alternate,P!==null&&(P.lanes|=h),Jg(E,h,r),E=w.sibling}else E=w.child;if(E!==null)E.return=w;else for(E=w;E!==null;){if(E===r){E=null;break}if(w=E.sibling,w!==null){w.return=E.return,E=w;break}E=E.return}w=E}gn(s,r,y.children,h),r=r.child}return r;case 9:return y=r.type,p=r.pendingProps.children,Sl(r,h),y=cs(y),p=p(y),r.flags|=1,gn(s,r,p,h),r.child;case 14:return p=r.type,y=Ms(p,r.pendingProps),y=Ms(p.type,y),rx(s,r,p,y,h);case 15:return ox(s,r,r.type,r.pendingProps,h);case 17:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Ms(p,y),Qf(s,r),r.tag=1,kn(p)?(s=!0,Df(r)):s=!1,Sl(r,h),Q1(r,p,y),my(r,p,y,h),wy(null,r,p,!0,s,h);case 19:return px(s,r,h);case 22:return ax(s,r,h)}throw Error(e(156,r.tag))};function jx(s,r){return yA(s,r)}function sP(s,r,h,p){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(s,r,h,p){return new sP(s,r,h,p)}function zy(s){return s=s.prototype,!(!s||!s.isReactComponent)}function iP(s){if(typeof s=="function")return zy(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Rt)return 11;if(s===Kt)return 14}return 2}function Nr(s,r){var h=s.alternate;return h===null?(h=fs(s.tag,r,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=r,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,r=s.dependencies,h.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function lp(s,r,h,p,y,w){var E=2;if(p=s,typeof s=="function")zy(s)&&(E=1);else if(typeof s=="string")E=5;else t:switch(s){case B:return Oo(h.children,y,w,r);case U:E=8,y|=8;break;case Q:return s=fs(12,h,r,y|2),s.elementType=Q,s.lanes=w,s;case Ft:return s=fs(13,h,r,y),s.elementType=Ft,s.lanes=w,s;case _t:return s=fs(19,h,r,y),s.elementType=_t,s.lanes=w,s;case K:return up(h,y,w,r);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ct:E=10;break t;case ot:E=9;break t;case Rt:E=11;break t;case Kt:E=14;break t;case Z:E=16,p=null;break t}throw Error(e(130,s==null?s:typeof s,""))}return r=fs(E,h,r,y),r.elementType=s,r.type=p,r.lanes=w,r}function Oo(s,r,h,p){return s=fs(7,s,p,r),s.lanes=h,s}function up(s,r,h,p){return s=fs(22,s,p,r),s.elementType=K,s.lanes=h,s.stateNode={isHidden:!1},s}function Vy(s,r,h){return s=fs(6,s,null,r),s.lanes=h,s}function By(s,r,h){return r=fs(4,s.children!==null?s.children:[],s.key,r),r.lanes=h,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}function rP(s,r,h,p,y){this.tag=r,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pg(0),this.expirationTimes=pg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pg(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Hy(s,r,h,p,y,w,E,P,D){return s=new rP(s,r,h,P,D),r===1?(r=1,w===!0&&(r|=8)):r=0,w=fs(3,null,null,r),s.current=w,w.stateNode=s,w.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},ey(w),s}function oP(s,r,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:p==null?null:""+p,children:s,containerInfo:r,implementation:h}}function zx(s){if(!s)return Cr;s=s._reactInternals;t:{if(_o(s)!==s||s.tag!==1)throw Error(e(170));var r=s;do{switch(r.tag){case 3:r=r.stateNode.context;break t;case 1:if(kn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break t}}r=r.return}while(r!==null);throw Error(e(171))}if(s.tag===1){var h=s.type;if(kn(h))return f1(s,h,r)}return r}function Vx(s,r,h,p,y,w,E,P,D){return s=Hy(h,p,!0,s,y,w,E,P,D),s.context=zx(null),h=s.current,p=yn(),y=Dr(h),w=Ri(p,y),w.callback=r??null,Pr(h,w,y),s.current.lanes=y,uc(s,y,p),Rn(s,p),s}function cp(s,r,h,p){var y=r.current,w=yn(),E=Dr(y);return h=zx(h),r.context===null?r.context=h:r.pendingContext=h,r=Ri(w,E),r.payload={element:s},p=p===void 0?null:p,p!==null&&(r.callback=p),s=Pr(y,r,E),s!==null&&(Ds(s,y,E,w),Bf(s,y,E)),E}function hp(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Bx(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<r?h:r}}function Uy(s,r){Bx(s,r),(s=s.alternate)&&Bx(s,r)}function aP(){return null}var Hx=typeof reportError=="function"?reportError:function(s){console.error(s)};function $y(s){this._internalRoot=s}dp.prototype.render=$y.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(e(409));cp(s,r,null,null)},dp.prototype.unmount=$y.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Io(function(){cp(null,s,null,null)}),r[Ci]=null}};function dp(s){this._internalRoot=s}dp.prototype.unstable_scheduleHydration=function(s){if(s){var r=_A();s={blockedOn:null,target:s,priority:r};for(var h=0;h<xr.length&&r!==0&&r<xr[h].priority;h++);xr.splice(h,0,s),h===0&&kA(s)}};function Gy(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function fp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Ux(){}function lP(s,r,h,p,y){if(y){if(typeof p=="function"){var w=p;p=function(){var H=hp(E);w.call(H)}}var E=Vx(r,p,s,0,null,!1,!1,"",Ux);return s._reactRootContainer=E,s[Ci]=E.current,bc(s.nodeType===8?s.parentNode:s),Io(),E}for(;y=s.lastChild;)s.removeChild(y);if(typeof p=="function"){var P=p;p=function(){var H=hp(D);P.call(H)}}var D=Hy(s,0,!1,null,null,!1,!1,"",Ux);return s._reactRootContainer=D,s[Ci]=D.current,bc(s.nodeType===8?s.parentNode:s),Io(function(){cp(r,D,h,p)}),D}function pp(s,r,h,p,y){var w=h._reactRootContainer;if(w){var E=w;if(typeof y=="function"){var P=y;y=function(){var D=hp(E);P.call(D)}}cp(r,E,s,y)}else E=lP(h,r,s,y,p);return hp(E)}bA=function(s){switch(s.tag){case 3:var r=s.stateNode;if(r.current.memoizedState.isDehydrated){var h=lc(r.pendingLanes);h!==0&&(mg(r,h|1),Rn(r,ye()),(zt&6)===0&&(Tl=ye()+500,Tr()))}break;case 13:Io(function(){var p=Mi(s,1);if(p!==null){var y=yn();Ds(p,s,1,y)}}),Uy(s,1)}},gg=function(s){if(s.tag===13){var r=Mi(s,134217728);if(r!==null){var h=yn();Ds(r,s,134217728,h)}Uy(s,134217728)}},EA=function(s){if(s.tag===13){var r=Dr(s),h=Mi(s,r);if(h!==null){var p=yn();Ds(h,s,r,p)}Uy(s,r)}},_A=function(){return $t},CA=function(s,r){var h=$t;try{return $t=s,r()}finally{$t=h}},lg=function(s,r,h){switch(r){case"input":if(tg(s,h),r=h.name,h.type==="radio"&&r!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<h.length;r++){var p=h[r];if(p!==s&&p.form===s.form){var y=Rf(p);if(!y)throw Error(e(90));Yw(p),tg(p,y)}}}break;case"textarea":eA(s,h);break;case"select":r=h.value,r!=null&&il(s,!!h.multiple,r,!1)}},cA=Fy,hA=Io;var uP={usingClientEntryPoint:!1,Events:[Cc,pl,Rf,lA,uA,Fy]},Vc={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cP={bundleType:Vc.bundleType,version:Vc.version,rendererPackageName:Vc.rendererPackageName,rendererConfig:Vc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=mA(s),s===null?null:s.stateNode},findFiberByHostInstance:Vc.findFiberByHostInstance||aP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mp.isDisabled&&mp.supportsFiber)try{df=mp.inject(cP),Zs=mp}catch{}}return Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uP,Ln.createPortal=function(s,r){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gy(r))throw Error(e(200));return oP(s,r,null,h)},Ln.createRoot=function(s,r){if(!Gy(s))throw Error(e(299));var h=!1,p="",y=Hx;return r!=null&&(r.unstable_strictMode===!0&&(h=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),r=Hy(s,1,!1,null,null,h,!1,p,y),s[Ci]=r.current,bc(s.nodeType===8?s.parentNode:s),new $y(r)},Ln.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(e(188)):(s=Object.keys(s).join(","),Error(e(268,s)));return s=mA(r),s=s===null?null:s.stateNode,s},Ln.flushSync=function(s){return Io(s)},Ln.hydrate=function(s,r,h){if(!fp(r))throw Error(e(200));return pp(null,s,r,!0,h)},Ln.hydrateRoot=function(s,r,h){if(!Gy(s))throw Error(e(405));var p=h!=null&&h.hydratedSources||null,y=!1,w="",E=Hx;if(h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(E=h.onRecoverableError)),r=Vx(r,null,s,1,h??null,y,!1,w,E),s[Ci]=r.current,bc(s),p)for(s=0;s<p.length;s++)h=p[s],y=h._getVersion,y=y(h._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[h,y]:r.mutableSourceEagerHydrationData.push(h,y);return new dp(r)},Ln.render=function(s,r,h){if(!fp(r))throw Error(e(200));return pp(null,s,r,!1,h)},Ln.unmountComponentAtNode=function(s){if(!fp(s))throw Error(e(40));return s._reactRootContainer?(Io(function(){pp(null,null,s,!1,function(){s._reactRootContainer=null,s[Ci]=null})}),!0):!1},Ln.unstable_batchedUpdates=Fy,Ln.unstable_renderSubtreeIntoContainer=function(s,r,h,p){if(!fp(h))throw Error(e(200));if(s==null||s._reactInternals===void 0)throw Error(e(38));return pp(s,r,h,!1,p)},Ln.version="18.3.1-next-f1338f8080-20240426",Ln}var Zx;function AP(){if(Zx)return Ky.exports;Zx=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),Ky.exports=wP(),Ky.exports}var Jx;function xP(){if(Jx)return gp;Jx=1;var o=AP();return gp.createRoot=o.createRoot,gp.hydrateRoot=o.hydrateRoot,gp}var SP=xP();const bP=zb(SP),Qv=et.createContext({});function Zv(o){const t=et.useRef(null);return t.current===null&&(t.current=o()),t.current}const jm=et.createContext(null),Jv=et.createContext({transformPagePoint:o=>o,isStatic:!1,reducedMotion:"never"});class EP extends et.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function _P({children:o,isPresent:t}){const e=et.useId(),n=et.useRef(null),i=et.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=et.useContext(Jv);return et.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:f}=i.current;if(t||!n.current||!l||!u)return;n.current.dataset.motionPopId=e;const m=document.createElement("style");return a&&(m.nonce=a),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            top: ${d}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[t]),O.jsx(EP,{isPresent:t,childRef:n,sizeRef:i,children:et.cloneElement(o,{ref:n})})}const CP=({children:o,initial:t,isPresent:e,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:l})=>{const u=Zv(TP),d=et.useId(),f=et.useCallback(g=>{u.set(g,!0);for(const v of u.values())if(!v)return;n&&n()},[u,n]),m=et.useMemo(()=>({id:d,initial:t,isPresent:e,custom:i,onExitComplete:f,register:g=>(u.set(g,!1),()=>u.delete(g))}),a?[Math.random(),f]:[e,f]);return et.useMemo(()=>{u.forEach((g,v)=>u.set(v,!1))},[e]),et.useEffect(()=>{!e&&!u.size&&n&&n()},[e]),l==="popLayout"&&(o=O.jsx(_P,{isPresent:e,children:o})),O.jsx(jm.Provider,{value:m,children:o})};function TP(){return new Map}function Vb(o=!0){const t=et.useContext(jm);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,a=et.useId();et.useEffect(()=>{o&&i(a)},[o]);const l=et.useCallback(()=>o&&n&&n(a),[a,n,o]);return!e&&n?[!1,l]:[!0]}const yp=o=>o.key||"";function tS(o){const t=[];return et.Children.forEach(o,e=>{et.isValidElement(e)&&t.push(e)}),t}const tw=typeof window<"u",Bb=tw?et.useLayoutEffect:et.useEffect,kP=({children:o,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1})=>{const[u,d]=Vb(l),f=et.useMemo(()=>tS(o),[o]),m=l&&!u?[]:f.map(yp),g=et.useRef(!0),v=et.useRef(f),A=Zv(()=>new Map),[S,b]=et.useState(f),[T,k]=et.useState(f);Bb(()=>{g.current=!1,v.current=f;for(let R=0;R<T.length;R++){const I=yp(T[R]);m.includes(I)?A.delete(I):A.get(I)!==!0&&A.set(I,!1)}},[T,m.length,m.join("-")]);const M=[];if(f!==S){let R=[...f];for(let I=0;I<T.length;I++){const z=T[I],B=yp(z);m.includes(B)||(R.splice(I,0,z),M.push(z))}a==="wait"&&M.length&&(R=M),k(tS(R)),b(f);return}const{forceRender:L}=et.useContext(Qv);return O.jsx(O.Fragment,{children:T.map(R=>{const I=yp(R),z=l&&!u?!1:f===T||m.includes(I),B=()=>{if(A.has(I))A.set(I,!0);else return;let U=!0;A.forEach(Q=>{Q||(U=!1)}),U&&(L==null||L(),k(v.current),l&&(d==null||d()),n&&n())};return O.jsx(CP,{isPresent:z,initial:!g.current||e?void 0:!1,custom:z?void 0:t,presenceAffectsLayout:i,mode:a,onExitComplete:z?void 0:B,children:R},I)})})},rs=o=>o;let Hb=rs;function ew(o){let t;return()=>(t===void 0&&(t=o()),t)}const Qu=(o,t,e)=>{const n=t-o;return n===0?1:(e-o)/n},hr=o=>o*1e3,dr=o=>o/1e3,PP={useManualTiming:!1};function MP(o){let t=new Set,e=new Set,n=!1,i=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(f){a.has(f)&&(d.schedule(f),o()),f(l)}const d={schedule:(f,m=!1,g=!1)=>{const A=g&&n?t:e;return m&&a.add(f),A.has(f)||A.add(f),f},cancel:f=>{e.delete(f),a.delete(f)},process:f=>{if(l=f,n){i=!0;return}n=!0,[t,e]=[e,t],t.forEach(u),t.clear(),n=!1,i&&(i=!1,d.process(f))}};return d}const vp=["read","resolveKeyframes","update","preRender","render","postRender"],RP=40;function Ub(o,t){let e=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,l=vp.reduce((k,M)=>(k[M]=MP(a),k),{}),{read:u,resolveKeyframes:d,update:f,preRender:m,render:g,postRender:v}=l,A=()=>{const k=performance.now();e=!1,i.delta=n?1e3/60:Math.max(Math.min(k-i.timestamp,RP),1),i.timestamp=k,i.isProcessing=!0,u.process(i),d.process(i),f.process(i),m.process(i),g.process(i),v.process(i),i.isProcessing=!1,e&&t&&(n=!1,o(A))},S=()=>{e=!0,n=!0,i.isProcessing||o(A)};return{schedule:vp.reduce((k,M)=>{const L=l[M];return k[M]=(R,I=!1,z=!1)=>(e||S(),L.schedule(R,I,z)),k},{}),cancel:k=>{for(let M=0;M<vp.length;M++)l[vp[M]].cancel(k)},state:i,steps:l}}const{schedule:se,cancel:vo,state:Qe,steps:Zy}=Ub(typeof requestAnimationFrame<"u"?requestAnimationFrame:rs,!0),$b=et.createContext({strict:!1}),eS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zu={};for(const o in eS)Zu[o]={isEnabled:t=>eS[o].some(e=>!!t[e])};function LP(o){for(const t in o)Zu[t]={...Zu[t],...o[t]}}const DP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function im(o){return o.startsWith("while")||o.startsWith("drag")&&o!=="draggable"||o.startsWith("layout")||o.startsWith("onTap")||o.startsWith("onPan")||o.startsWith("onLayout")||DP.has(o)}let Gb=o=>!im(o);function IP(o){o&&(Gb=t=>t.startsWith("on")?!im(t):o(t))}try{IP(require("@emotion/is-prop-valid").default)}catch{}function NP(o,t,e){const n={};for(const i in o)i==="values"&&typeof o.values=="object"||(Gb(i)||e===!0&&im(i)||!t&&!im(i)||o.draggable&&i.startsWith("onDrag"))&&(n[i]=o[i]);return n}function FP(o){if(typeof Proxy>"u")return o;const t=new Map,e=(...n)=>o(...n);return new Proxy(e,{get:(n,i)=>i==="create"?o:(t.has(i)||t.set(i,o(i)),t.get(i))})}const zm=et.createContext({});function wh(o){return typeof o=="string"||Array.isArray(o)}function Vm(o){return o!==null&&typeof o=="object"&&typeof o.start=="function"}const nw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sw=["initial",...nw];function Bm(o){return Vm(o.animate)||sw.some(t=>wh(o[t]))}function Wb(o){return!!(Bm(o)||o.variants)}function OP(o,t){if(Bm(o)){const{initial:e,animate:n}=o;return{initial:e===!1||wh(e)?e:void 0,animate:wh(n)?n:void 0}}return o.inherit!==!1?t:{}}function jP(o){const{initial:t,animate:e}=OP(o,et.useContext(zm));return et.useMemo(()=>({initial:t,animate:e}),[nS(t),nS(e)])}function nS(o){return Array.isArray(o)?o.join(" "):o}const zP=Symbol.for("motionComponentSymbol");function Fl(o){return o&&typeof o=="object"&&Object.prototype.hasOwnProperty.call(o,"current")}function VP(o,t,e){return et.useCallback(n=>{n&&o.onMount&&o.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):Fl(e)&&(e.current=n))},[t])}const iw=o=>o.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BP="framerAppearId",qb="data-"+iw(BP),{schedule:rw}=Ub(queueMicrotask,!1),Xb=et.createContext({});function HP(o,t,e,n,i){var a,l;const{visualElement:u}=et.useContext(zm),d=et.useContext($b),f=et.useContext(jm),m=et.useContext(Jv).reducedMotion,g=et.useRef(null);n=n||d.renderer,!g.current&&n&&(g.current=n(o,{visualState:t,parent:u,props:e,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m}));const v=g.current,A=et.useContext(Xb);v&&!v.projection&&i&&(v.type==="html"||v.type==="svg")&&UP(g.current,e,i,A);const S=et.useRef(!1);et.useInsertionEffect(()=>{v&&S.current&&v.update(e,f)});const b=e[qb],T=et.useRef(!!b&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,b))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,b)));return Bb(()=>{v&&(S.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),rw.render(v.render),T.current&&v.animationState&&v.animationState.animateChanges())}),et.useEffect(()=>{v&&(!T.current&&v.animationState&&v.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)===null||k===void 0||k.call(window,b)}),T.current=!1))}),v}function UP(o,t,e,n){const{layoutId:i,layout:a,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f}=t;o.projection=new e(o.latestValues,t["data-framer-portal-id"]?void 0:Kb(o.parent)),o.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||u&&Fl(u),visualElement:o,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,layoutScroll:d,layoutRoot:f})}function Kb(o){if(o)return o.options.allowProjection!==!1?o.projection:Kb(o.parent)}function $P({preloadedFeatures:o,createVisualElement:t,useRender:e,useVisualState:n,Component:i}){var a,l;o&&LP(o);function u(f,m){let g;const v={...et.useContext(Jv),...f,layoutId:GP(f)},{isStatic:A}=v,S=jP(f),b=n(f,A);if(!A&&tw){WP();const T=qP(v);g=T.MeasureLayout,S.visualElement=HP(i,b,v,t,T.ProjectionNode)}return O.jsxs(zm.Provider,{value:S,children:[g&&S.visualElement?O.jsx(g,{visualElement:S.visualElement,...v}):null,e(i,f,VP(b,S.visualElement,m),b,A,S.visualElement)]})}u.displayName=`motion.${typeof i=="string"?i:`create(${(l=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&l!==void 0?l:""})`}`;const d=et.forwardRef(u);return d[zP]=i,d}function GP({layoutId:o}){const t=et.useContext(Qv).id;return t&&o!==void 0?t+"-"+o:o}function WP(o,t){et.useContext($b).strict}function qP(o){const{drag:t,layout:e}=Zu;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(o)||e!=null&&e.isEnabled(o)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const XP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ow(o){return typeof o!="string"||o.includes("-")?!1:!!(XP.indexOf(o)>-1||/[A-Z]/u.test(o))}function sS(o){const t=[{},{}];return o==null||o.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function aw(o,t,e,n){if(typeof t=="function"){const[i,a]=sS(n);t=t(e!==void 0?e:o.custom,i,a)}if(typeof t=="string"&&(t=o.variants&&o.variants[t]),typeof t=="function"){const[i,a]=sS(n);t=t(e!==void 0?e:o.custom,i,a)}return t}const v0=o=>Array.isArray(o),KP=o=>!!(o&&typeof o=="object"&&o.mix&&o.toValue),YP=o=>v0(o)?o[o.length-1]||0:o,pn=o=>!!(o&&o.getVelocity);function _p(o){const t=pn(o)?o.get():o;return KP(t)?t.toValue():t}function QP({scrapeMotionValuesFromProps:o,createRenderState:t,onUpdate:e},n,i,a){const l={latestValues:ZP(n,i,a,o),renderState:t()};return e&&(l.onMount=u=>e({props:n,current:u,...l}),l.onUpdate=u=>e(u)),l}const Yb=o=>(t,e)=>{const n=et.useContext(zm),i=et.useContext(jm),a=()=>QP(o,t,n,i);return e?a():Zv(a)};function ZP(o,t,e,n){const i={},a=n(o,{});for(const v in a)i[v]=_p(a[v]);let{initial:l,animate:u}=o;const d=Bm(o),f=Wb(o);t&&f&&!d&&o.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let m=e?e.initial===!1:!1;m=m||l===!1;const g=m?u:l;if(g&&typeof g!="boolean"&&!Vm(g)){const v=Array.isArray(g)?g:[g];for(let A=0;A<v.length;A++){const S=aw(o,v[A]);if(S){const{transitionEnd:b,transition:T,...k}=S;for(const M in k){let L=k[M];if(Array.isArray(L)){const R=m?L.length-1:0;L=L[R]}L!==null&&(i[M]=L)}for(const M in b)i[M]=b[M]}}}return i}const tc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nl=new Set(tc),Qb=o=>t=>typeof t=="string"&&t.startsWith(o),Zb=Qb("--"),JP=Qb("var(--"),lw=o=>JP(o)?tM.test(o.split("/*")[0].trim()):!1,tM=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Jb=(o,t)=>t&&typeof o=="number"?t.transform(o):o,mr=(o,t,e)=>e>t?t:e<o?o:e,ec={test:o=>typeof o=="number",parse:parseFloat,transform:o=>o},Ah={...ec,transform:o=>mr(0,1,o)},wp={...ec,default:1},Zd=o=>({test:t=>typeof t=="string"&&t.endsWith(o)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${o}`}),Or=Zd("deg"),bi=Zd("%"),xt=Zd("px"),eM=Zd("vh"),nM=Zd("vw"),iS={...bi,parse:o=>bi.parse(o)/100,transform:o=>bi.transform(o*100)},sM={borderWidth:xt,borderTopWidth:xt,borderRightWidth:xt,borderBottomWidth:xt,borderLeftWidth:xt,borderRadius:xt,radius:xt,borderTopLeftRadius:xt,borderTopRightRadius:xt,borderBottomRightRadius:xt,borderBottomLeftRadius:xt,width:xt,maxWidth:xt,height:xt,maxHeight:xt,top:xt,right:xt,bottom:xt,left:xt,padding:xt,paddingTop:xt,paddingRight:xt,paddingBottom:xt,paddingLeft:xt,margin:xt,marginTop:xt,marginRight:xt,marginBottom:xt,marginLeft:xt,backgroundPositionX:xt,backgroundPositionY:xt},iM={rotate:Or,rotateX:Or,rotateY:Or,rotateZ:Or,scale:wp,scaleX:wp,scaleY:wp,scaleZ:wp,skew:Or,skewX:Or,skewY:Or,distance:xt,translateX:xt,translateY:xt,translateZ:xt,x:xt,y:xt,z:xt,perspective:xt,transformPerspective:xt,opacity:Ah,originX:iS,originY:iS,originZ:xt},rS={...ec,transform:Math.round},uw={...sM,...iM,zIndex:rS,size:xt,fillOpacity:Ah,strokeOpacity:Ah,numOctaves:rS},rM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oM=tc.length;function aM(o,t,e){let n="",i=!0;for(let a=0;a<oM;a++){const l=tc[a],u=o[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||e){const f=Jb(u,uw[l]);if(!d){i=!1;const m=rM[l]||l;n+=`${m}(${f}) `}e&&(t[l]=f)}}return n=n.trim(),e?n=e(t,i?"":n):i&&(n="none"),n}function cw(o,t,e){const{style:n,vars:i,transformOrigin:a}=o;let l=!1,u=!1;for(const d in t){const f=t[d];if(nl.has(d)){l=!0;continue}else if(Zb(d)){i[d]=f;continue}else{const m=Jb(f,uw[d]);d.startsWith("origin")?(u=!0,a[d]=m):n[d]=m}}if(t.transform||(l||e?n.transform=aM(t,o.transform,e):n.transform&&(n.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:m=0}=a;n.transformOrigin=`${d} ${f} ${m}`}}const lM={offset:"stroke-dashoffset",array:"stroke-dasharray"},uM={offset:"strokeDashoffset",array:"strokeDasharray"};function cM(o,t,e=1,n=0,i=!0){o.pathLength=1;const a=i?lM:uM;o[a.offset]=xt.transform(-n);const l=xt.transform(t),u=xt.transform(e);o[a.array]=`${l} ${u}`}function oS(o,t,e){return typeof o=="string"?o:xt.transform(t+e*o)}function hM(o,t,e){const n=oS(t,o.x,o.width),i=oS(e,o.y,o.height);return`${n} ${i}`}function hw(o,{attrX:t,attrY:e,attrScale:n,originX:i,originY:a,pathLength:l,pathSpacing:u=1,pathOffset:d=0,...f},m,g){if(cw(o,f,g),m){o.style.viewBox&&(o.attrs.viewBox=o.style.viewBox);return}o.attrs=o.style,o.style={};const{attrs:v,style:A,dimensions:S}=o;v.transform&&(S&&(A.transform=v.transform),delete v.transform),S&&(i!==void 0||a!==void 0||A.transform)&&(A.transformOrigin=hM(S,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(v.x=t),e!==void 0&&(v.y=e),n!==void 0&&(v.scale=n),l!==void 0&&cM(v,l,u,d,!1)}const dw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),tE=()=>({...dw(),attrs:{}}),fw=o=>typeof o=="string"&&o.toLowerCase()==="svg";function eE(o,{style:t,vars:e},n,i){Object.assign(o.style,t,i&&i.getProjectionStyles(n));for(const a in e)o.style.setProperty(a,e[a])}const nE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sE(o,t,e,n){eE(o,t,void 0,n);for(const i in t.attrs)o.setAttribute(nE.has(i)?i:iw(i),t.attrs[i])}const rm={};function dM(o){Object.assign(rm,o)}function iE(o,{layout:t,layoutId:e}){return nl.has(o)||o.startsWith("origin")||(t||e!==void 0)&&(!!rm[o]||o==="opacity")}function pw(o,t,e){var n;const{style:i}=o,a={};for(const l in i)(pn(i[l])||t.style&&pn(t.style[l])||iE(l,o)||((n=e==null?void 0:e.getValue(l))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(a[l]=i[l]);return a}function rE(o,t,e){const n=pw(o,t,e);for(const i in o)if(pn(o[i])||pn(t[i])){const a=tc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=o[i]}return n}function fM(o,t){try{t.dimensions=typeof o.getBBox=="function"?o.getBBox():o.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const aS=["x","y","width","height","cx","cy","r"],pM={useVisualState:Yb({scrapeMotionValuesFromProps:rE,createRenderState:tE,onUpdate:({props:o,prevProps:t,current:e,renderState:n,latestValues:i})=>{if(!e)return;let a=!!o.drag;if(!a){for(const u in i)if(nl.has(u)){a=!0;break}}if(!a)return;let l=!t;if(t)for(let u=0;u<aS.length;u++){const d=aS[u];o[d]!==t[d]&&(l=!0)}l&&se.read(()=>{fM(e,n),se.render(()=>{hw(n,i,fw(e.tagName),o.transformTemplate),sE(e,n)})})}})},mM={useVisualState:Yb({scrapeMotionValuesFromProps:pw,createRenderState:dw})};function oE(o,t,e){for(const n in t)!pn(t[n])&&!iE(n,e)&&(o[n]=t[n])}function gM({transformTemplate:o},t){return et.useMemo(()=>{const e=dw();return cw(e,t,o),Object.assign({},e.vars,e.style)},[t])}function yM(o,t){const e=o.style||{},n={};return oE(n,e,o),Object.assign(n,gM(o,t)),n}function vM(o,t){const e={},n=yM(o,t);return o.drag&&o.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=o.drag===!0?"none":`pan-${o.drag==="x"?"y":"x"}`),o.tabIndex===void 0&&(o.onTap||o.onTapStart||o.whileTap)&&(e.tabIndex=0),e.style=n,e}function wM(o,t,e,n){const i=et.useMemo(()=>{const a=tE();return hw(a,t,fw(n),o.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(o.style){const a={};oE(a,o.style,o),i.style={...a,...i.style}}return i}function AM(o=!1){return(e,n,i,{latestValues:a},l)=>{const d=(ow(e)?wM:vM)(n,a,l,e),f=NP(n,typeof e=="string",o),m=e!==et.Fragment?{...f,...d,ref:i}:{},{children:g}=n,v=et.useMemo(()=>pn(g)?g.get():g,[g]);return et.createElement(e,{...m,children:v})}}function xM(o,t){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...ow(n)?pM:mM,preloadedFeatures:o,useRender:AM(i),createVisualElement:t,Component:n};return $P(l)}}function aE(o,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==o.length)return!1;for(let n=0;n<e;n++)if(t[n]!==o[n])return!1;return!0}function Hm(o,t,e){const n=o.getProps();return aw(n,t,e!==void 0?e:n.custom,o)}const SM=ew(()=>window.ScrollTimeline!==void 0);class bM{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t,e){const n=this.animations.map(i=>{if(SM()&&i.attachTimeline)return i.attachTimeline(t);if(typeof e=="function")return e(i)});return()=>{n.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class EM extends bM{then(t,e){return Promise.all(this.animations).then(t).catch(e)}}function mw(o,t){return o?o[t]||o.default||o:void 0}const w0=2e4;function lE(o){let t=0;const e=50;let n=o.next(t);for(;!n.done&&t<w0;)t+=e,n=o.next(t);return t>=w0?1/0:t}function gw(o){return typeof o=="function"}function lS(o,t){o.timeline=t,o.onfinish=null}const yw=o=>Array.isArray(o)&&typeof o[0]=="number",_M={linearEasing:void 0};function CM(o,t){const e=ew(o);return()=>{var n;return(n=_M[t])!==null&&n!==void 0?n:e()}}const om=CM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),uE=(o,t,e=10)=>{let n="";const i=Math.max(Math.round(t/e),2);for(let a=0;a<i;a++)n+=o(Qu(0,i-1,a))+", ";return`linear(${n.substring(0,n.length-2)})`};function cE(o){return!!(typeof o=="function"&&om()||!o||typeof o=="string"&&(o in A0||om())||yw(o)||Array.isArray(o)&&o.every(cE))}const Xc=([o,t,e,n])=>`cubic-bezier(${o}, ${t}, ${e}, ${n})`,A0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xc([0,.65,.55,1]),circOut:Xc([.55,0,1,.45]),backIn:Xc([.31,.01,.66,-.59]),backOut:Xc([.33,1.53,.69,.99])};function hE(o,t){if(o)return typeof o=="function"&&om()?uE(o,t):yw(o)?Xc(o):Array.isArray(o)?o.map(e=>hE(e,t)||A0.easeOut):A0[o]}const Is={x:!1,y:!1};function dE(){return Is.x||Is.y}function TM(o,t,e){var n;if(o instanceof Element)return[o];if(typeof o=="string"){let i=document;const a=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(o);return a?Array.from(a):[]}return Array.from(o)}function fE(o,t){const e=TM(o),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[e,i,()=>n.abort()]}function uS(o){return t=>{t.pointerType==="touch"||dE()||o(t)}}function kM(o,t,e={}){const[n,i,a]=fE(o,e),l=uS(u=>{const{target:d}=u,f=t(u);if(typeof f!="function"||!d)return;const m=uS(g=>{f(g),d.removeEventListener("pointerleave",m)});d.addEventListener("pointerleave",m,i)});return n.forEach(u=>{u.addEventListener("pointerenter",l,i)}),a}const pE=(o,t)=>t?o===t?!0:pE(o,t.parentElement):!1,vw=o=>o.pointerType==="mouse"?typeof o.button!="number"||o.button<=0:o.isPrimary!==!1,PM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function MM(o){return PM.has(o.tagName)||o.tabIndex!==-1}const Kc=new WeakSet;function cS(o){return t=>{t.key==="Enter"&&o(t)}}function Jy(o,t){o.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const RM=(o,t)=>{const e=o.currentTarget;if(!e)return;const n=cS(()=>{if(Kc.has(e))return;Jy(e,"down");const i=cS(()=>{Jy(e,"up")}),a=()=>Jy(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function hS(o){return vw(o)&&!dE()}function LM(o,t,e={}){const[n,i,a]=fE(o,e),l=u=>{const d=u.currentTarget;if(!hS(u)||Kc.has(d))return;Kc.add(d);const f=t(u),m=(A,S)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),!(!hS(A)||!Kc.has(d))&&(Kc.delete(d),typeof f=="function"&&f(A,{success:S}))},g=A=>{m(A,e.useGlobalTarget||pE(d,A.target))},v=A=>{m(A,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",v,i)};return n.forEach(u=>{!MM(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(e.useGlobalTarget?window:u).addEventListener("pointerdown",l,i),u.addEventListener("focus",f=>RM(f,i),i)}),a}function DM(o){return o==="x"||o==="y"?Is[o]?null:(Is[o]=!0,()=>{Is[o]=!1}):Is.x||Is.y?null:(Is.x=Is.y=!0,()=>{Is.x=Is.y=!1})}const mE=new Set(["width","height","top","left","right","bottom",...tc]);let Cp;function IM(){Cp=void 0}const Ei={now:()=>(Cp===void 0&&Ei.set(Qe.isProcessing||PP.useManualTiming?Qe.timestamp:performance.now()),Cp),set:o=>{Cp=o,queueMicrotask(IM)}};function ww(o,t){o.indexOf(t)===-1&&o.push(t)}function Aw(o,t){const e=o.indexOf(t);e>-1&&o.splice(e,1)}class xw{constructor(){this.subscriptions=[]}add(t){return ww(this.subscriptions,t),()=>Aw(this.subscriptions,t)}notify(t,e,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,n);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function gE(o,t){return t?o*(1e3/t):0}const dS=30,NM=o=>!isNaN(parseFloat(o));class FM{constructor(t,e={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const a=Ei.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Ei.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=NM(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new xw);const n=this.events[t].add(e);return t==="change"?()=>{n(),se.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ei.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>dS)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,dS);return gE(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xh(o,t){return new FM(o,t)}function OM(o,t,e){o.hasValue(t)?o.getValue(t).set(e):o.addValue(t,xh(e))}function jM(o,t){const e=Hm(o,t);let{transitionEnd:n={},transition:i={},...a}=e||{};a={...a,...n};for(const l in a){const u=YP(a[l]);OM(o,l,u)}}function zM(o){return!!(pn(o)&&o.add)}function x0(o,t){const e=o.getValue("willChange");if(zM(e))return e.add(t)}function yE(o){return o.props[qb]}const vE=(o,t,e)=>(((1-3*e+3*t)*o+(3*e-6*t))*o+3*t)*o,VM=1e-7,BM=12;function HM(o,t,e,n,i){let a,l,u=0;do l=t+(e-t)/2,a=vE(l,n,i)-o,a>0?e=l:t=l;while(Math.abs(a)>VM&&++u<BM);return l}function Jd(o,t,e,n){if(o===t&&e===n)return rs;const i=a=>HM(a,0,1,o,e);return a=>a===0||a===1?a:vE(i(a),t,n)}const wE=o=>t=>t<=.5?o(2*t)/2:(2-o(2*(1-t)))/2,AE=o=>t=>1-o(1-t),xE=Jd(.33,1.53,.69,.99),Sw=AE(xE),SE=wE(Sw),bE=o=>(o*=2)<1?.5*Sw(o):.5*(2-Math.pow(2,-10*(o-1))),bw=o=>1-Math.sin(Math.acos(o)),EE=AE(bw),_E=wE(bw),CE=o=>/^0[^.\s]+$/u.test(o);function UM(o){return typeof o=="number"?o===0:o!==null?o==="none"||o==="0"||CE(o):!0}const fh=o=>Math.round(o*1e5)/1e5,Ew=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $M(o){return o==null}const GM=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_w=(o,t)=>e=>!!(typeof e=="string"&&GM.test(e)&&e.startsWith(o)||t&&!$M(e)&&Object.prototype.hasOwnProperty.call(e,t)),TE=(o,t,e)=>n=>{if(typeof n!="string")return n;const[i,a,l,u]=n.match(Ew);return{[o]:parseFloat(i),[t]:parseFloat(a),[e]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},WM=o=>mr(0,255,o),t0={...ec,transform:o=>Math.round(WM(o))},Wo={test:_w("rgb","red"),parse:TE("red","green","blue"),transform:({red:o,green:t,blue:e,alpha:n=1})=>"rgba("+t0.transform(o)+", "+t0.transform(t)+", "+t0.transform(e)+", "+fh(Ah.transform(n))+")"};function qM(o){let t="",e="",n="",i="";return o.length>5?(t=o.substring(1,3),e=o.substring(3,5),n=o.substring(5,7),i=o.substring(7,9)):(t=o.substring(1,2),e=o.substring(2,3),n=o.substring(3,4),i=o.substring(4,5),t+=t,e+=e,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const S0={test:_w("#"),parse:qM,transform:Wo.transform},Ol={test:_w("hsl","hue"),parse:TE("hue","saturation","lightness"),transform:({hue:o,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(o)+", "+bi.transform(fh(t))+", "+bi.transform(fh(e))+", "+fh(Ah.transform(n))+")"},hn={test:o=>Wo.test(o)||S0.test(o)||Ol.test(o),parse:o=>Wo.test(o)?Wo.parse(o):Ol.test(o)?Ol.parse(o):S0.parse(o),transform:o=>typeof o=="string"?o:o.hasOwnProperty("red")?Wo.transform(o):Ol.transform(o)},XM=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function KM(o){var t,e;return isNaN(o)&&typeof o=="string"&&(((t=o.match(Ew))===null||t===void 0?void 0:t.length)||0)+(((e=o.match(XM))===null||e===void 0?void 0:e.length)||0)>0}const kE="number",PE="color",YM="var",QM="var(",fS="${}",ZM=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sh(o){const t=o.toString(),e=[],n={color:[],number:[],var:[]},i=[];let a=0;const u=t.replace(ZM,d=>(hn.test(d)?(n.color.push(a),i.push(PE),e.push(hn.parse(d))):d.startsWith(QM)?(n.var.push(a),i.push(YM),e.push(d)):(n.number.push(a),i.push(kE),e.push(parseFloat(d))),++a,fS)).split(fS);return{values:e,split:u,indexes:n,types:i}}function ME(o){return Sh(o).values}function RE(o){const{split:t,types:e}=Sh(o),n=t.length;return i=>{let a="";for(let l=0;l<n;l++)if(a+=t[l],i[l]!==void 0){const u=e[l];u===kE?a+=fh(i[l]):u===PE?a+=hn.transform(i[l]):a+=i[l]}return a}}const JM=o=>typeof o=="number"?0:o;function tR(o){const t=ME(o);return RE(o)(t.map(JM))}const wo={test:KM,parse:ME,createTransformer:RE,getAnimatableNone:tR},eR=new Set(["brightness","contrast","saturate","opacity"]);function nR(o){const[t,e]=o.slice(0,-1).split("(");if(t==="drop-shadow")return o;const[n]=e.match(Ew)||[];if(!n)return o;const i=e.replace(n,"");let a=eR.has(t)?1:0;return n!==e&&(a*=100),t+"("+a+i+")"}const sR=/\b([a-z-]*)\(.*?\)/gu,b0={...wo,getAnimatableNone:o=>{const t=o.match(sR);return t?t.map(nR).join(" "):o}},iR={...uw,color:hn,backgroundColor:hn,outlineColor:hn,fill:hn,stroke:hn,borderColor:hn,borderTopColor:hn,borderRightColor:hn,borderBottomColor:hn,borderLeftColor:hn,filter:b0,WebkitFilter:b0},Cw=o=>iR[o];function LE(o,t){let e=Cw(o);return e!==b0&&(e=wo),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const rR=new Set(["auto","none","0"]);function oR(o,t,e){let n=0,i;for(;n<o.length&&!i;){const a=o[n];typeof a=="string"&&!rR.has(a)&&Sh(a).values.length&&(i=o[n]),n++}if(i&&e)for(const a of t)o[a]=LE(e,i)}const pS=o=>o===ec||o===xt,mS=(o,t)=>parseFloat(o.split(", ")[t]),gS=(o,t)=>(e,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return mS(i[1],t);{const a=n.match(/^matrix\((.+)\)$/u);return a?mS(a[1],o):0}},aR=new Set(["x","y","z"]),lR=tc.filter(o=>!aR.has(o));function uR(o){const t=[];return lR.forEach(e=>{const n=o.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const Ju={width:({x:o},{paddingLeft:t="0",paddingRight:e="0"})=>o.max-o.min-parseFloat(t)-parseFloat(e),height:({y:o},{paddingTop:t="0",paddingBottom:e="0"})=>o.max-o.min-parseFloat(t)-parseFloat(e),top:(o,{top:t})=>parseFloat(t),left:(o,{left:t})=>parseFloat(t),bottom:({y:o},{top:t})=>parseFloat(t)+(o.max-o.min),right:({x:o},{left:t})=>parseFloat(t)+(o.max-o.min),x:gS(4,13),y:gS(5,14)};Ju.translateX=Ju.x;Ju.translateY=Ju.y;const Qa=new Set;let E0=!1,_0=!1;function DE(){if(_0){const o=Array.from(Qa).filter(n=>n.needsMeasurement),t=new Set(o.map(n=>n.element)),e=new Map;t.forEach(n=>{const i=uR(n);i.length&&(e.set(n,i),n.render())}),o.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=e.get(n);i&&i.forEach(([a,l])=>{var u;(u=n.getValue(a))===null||u===void 0||u.set(l)})}),o.forEach(n=>n.measureEndState()),o.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}_0=!1,E0=!1,Qa.forEach(o=>o.complete()),Qa.clear()}function IE(){Qa.forEach(o=>{o.readKeyframes(),o.needsMeasurement&&(_0=!0)})}function cR(){IE(),DE()}class Tw{constructor(t,e,n,i,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Qa.add(this),E0||(E0=!0,se.read(IE),se.resolveKeyframes(DE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:i}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const l=i==null?void 0:i.get(),u=t[t.length-1];if(l!==void 0)t[0]=l;else if(n&&e){const d=n.readValue(e,u);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=u),i&&l===void 0&&i.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Qa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Qa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const NE=o=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(o),hR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function dR(o){const t=hR.exec(o);if(!t)return[,];const[,e,n,i]=t;return[`--${e??n}`,i]}function FE(o,t,e=1){const[n,i]=dR(o);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const l=a.trim();return NE(l)?parseFloat(l):l}return lw(i)?FE(i,t,e+1):i}const OE=o=>t=>t.test(o),fR={test:o=>o==="auto",parse:o=>o},jE=[ec,xt,bi,Or,nM,eM,fR],yS=o=>jE.find(OE(o));class zE extends Tw{constructor(t,e,n,i,a){super(t,e,n,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let f=t[d];if(typeof f=="string"&&(f=f.trim(),lw(f))){const m=FE(f,e.current);m!==void 0&&(t[d]=m),d===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!mE.has(n)||t.length!==2)return;const[i,a]=t,l=yS(i),u=yS(a);if(l!==u)if(pS(l)&&pS(u))for(let d=0;d<t.length;d++){const f=t[d];typeof f=="string"&&(t[d]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let i=0;i<t.length;i++)UM(t[i])&&n.push(i);n.length&&oR(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ju[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){var t;const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const a=e.getValue(n);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,u=i[l];i[l]=Ju[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([d,f])=>{e.getValue(d).set(f)}),this.resolveNoneKeyframes()}}const vS=(o,t)=>t==="zIndex"?!1:!!(typeof o=="number"||Array.isArray(o)||typeof o=="string"&&(wo.test(o)||o==="0")&&!o.startsWith("url("));function pR(o){const t=o[0];if(o.length===1)return!0;for(let e=0;e<o.length;e++)if(o[e]!==t)return!0}function mR(o,t,e,n){const i=o[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=o[o.length-1],l=vS(i,t),u=vS(a,t);return!l||!u?!1:pR(o)||(e==="spring"||gw(e))&&n}const gR=o=>o!==null;function Um(o,{repeat:t,repeatType:e="loop"},n){const i=o.filter(gR),a=t&&e!=="loop"&&t%2===1?0:i.length-1;return!a||n===void 0?i[a]:n}const yR=40;class VE{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ei.now(),this.options={autoplay:t,delay:e,type:n,repeat:i,repeatDelay:a,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>yR?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&cR(),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=Ei.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:a,delay:l,onComplete:u,onUpdate:d,isGenerator:f}=this.options;if(!f&&!mR(t,n,i,a))if(l)this.options.duration=0;else{d&&d(Um(t,this.options,e)),u&&u(),this.resolveFinishedPromise();return}const m=this.initPlayback(t,e);m!==!1&&(this._resolved={keyframes:t,finalKeyframe:e,...m},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const de=(o,t,e)=>o+(t-o)*e;function e0(o,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?o+(t-o)*6*e:e<1/2?t:e<2/3?o+(t-o)*(2/3-e)*6:o}function vR({hue:o,saturation:t,lightness:e,alpha:n}){o/=360,t/=100,e/=100;let i=0,a=0,l=0;if(!t)i=a=l=e;else{const u=e<.5?e*(1+t):e+t-e*t,d=2*e-u;i=e0(d,u,o+1/3),a=e0(d,u,o),l=e0(d,u,o-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:n}}function am(o,t){return e=>e>0?t:o}const n0=(o,t,e)=>{const n=o*o,i=e*(t*t-n)+n;return i<0?0:Math.sqrt(i)},wR=[S0,Wo,Ol],AR=o=>wR.find(t=>t.test(o));function wS(o){const t=AR(o);if(!t)return!1;let e=t.parse(o);return t===Ol&&(e=vR(e)),e}const AS=(o,t)=>{const e=wS(o),n=wS(t);if(!e||!n)return am(o,t);const i={...e};return a=>(i.red=n0(e.red,n.red,a),i.green=n0(e.green,n.green,a),i.blue=n0(e.blue,n.blue,a),i.alpha=de(e.alpha,n.alpha,a),Wo.transform(i))},xR=(o,t)=>e=>t(o(e)),tf=(...o)=>o.reduce(xR),C0=new Set(["none","hidden"]);function SR(o,t){return C0.has(o)?e=>e<=0?o:t:e=>e>=1?t:o}function bR(o,t){return e=>de(o,t,e)}function kw(o){return typeof o=="number"?bR:typeof o=="string"?lw(o)?am:hn.test(o)?AS:CR:Array.isArray(o)?BE:typeof o=="object"?hn.test(o)?AS:ER:am}function BE(o,t){const e=[...o],n=e.length,i=o.map((a,l)=>kw(a)(a,t[l]));return a=>{for(let l=0;l<n;l++)e[l]=i[l](a);return e}}function ER(o,t){const e={...o,...t},n={};for(const i in e)o[i]!==void 0&&t[i]!==void 0&&(n[i]=kw(o[i])(o[i],t[i]));return i=>{for(const a in n)e[a]=n[a](i);return e}}function _R(o,t){var e;const n=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const l=t.types[a],u=o.indexes[l][i[l]],d=(e=o.values[u])!==null&&e!==void 0?e:0;n[a]=d,i[l]++}return n}const CR=(o,t)=>{const e=wo.createTransformer(t),n=Sh(o),i=Sh(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?C0.has(o)&&!i.values.length||C0.has(t)&&!n.values.length?SR(o,t):tf(BE(_R(n,i),i.values),e):am(o,t)};function HE(o,t,e){return typeof o=="number"&&typeof t=="number"&&typeof e=="number"?de(o,t,e):kw(o)(o,t)}const TR=5;function UE(o,t,e){const n=Math.max(t-TR,0);return gE(e-o(n),t-n)}const ge={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},s0=.001;function kR({duration:o=ge.duration,bounce:t=ge.bounce,velocity:e=ge.velocity,mass:n=ge.mass}){let i,a,l=1-t;l=mr(ge.minDamping,ge.maxDamping,l),o=mr(ge.minDuration,ge.maxDuration,dr(o)),l<1?(i=f=>{const m=f*l,g=m*o,v=m-e,A=T0(f,l),S=Math.exp(-g);return s0-v/A*S},a=f=>{const g=f*l*o,v=g*e+e,A=Math.pow(l,2)*Math.pow(f,2)*o,S=Math.exp(-g),b=T0(Math.pow(f,2),l);return(-i(f)+s0>0?-1:1)*((v-A)*S)/b}):(i=f=>{const m=Math.exp(-f*o),g=(f-e)*o+1;return-s0+m*g},a=f=>{const m=Math.exp(-f*o),g=(e-f)*(o*o);return m*g});const u=5/o,d=MR(i,a,u);if(o=hr(o),isNaN(d))return{stiffness:ge.stiffness,damping:ge.damping,duration:o};{const f=Math.pow(d,2)*n;return{stiffness:f,damping:l*2*Math.sqrt(n*f),duration:o}}}const PR=12;function MR(o,t,e){let n=e;for(let i=1;i<PR;i++)n=n-o(n)/t(n);return n}function T0(o,t){return o*Math.sqrt(1-t*t)}const RR=["duration","bounce"],LR=["stiffness","damping","mass"];function xS(o,t){return t.some(e=>o[e]!==void 0)}function DR(o){let t={velocity:ge.velocity,stiffness:ge.stiffness,damping:ge.damping,mass:ge.mass,isResolvedFromDuration:!1,...o};if(!xS(o,LR)&&xS(o,RR))if(o.visualDuration){const e=o.visualDuration,n=2*Math.PI/(e*1.2),i=n*n,a=2*mr(.05,1,1-(o.bounce||0))*Math.sqrt(i);t={...t,mass:ge.mass,stiffness:i,damping:a}}else{const e=kR(o);t={...t,...e,mass:ge.mass},t.isResolvedFromDuration=!0}return t}function $E(o=ge.visualDuration,t=ge.bounce){const e=typeof o!="object"?{visualDuration:o,keyframes:[0,1],bounce:t}:o;let{restSpeed:n,restDelta:i}=e;const a=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:m,duration:g,velocity:v,isResolvedFromDuration:A}=DR({...e,velocity:-dr(e.velocity||0)}),S=v||0,b=f/(2*Math.sqrt(d*m)),T=l-a,k=dr(Math.sqrt(d/m)),M=Math.abs(T)<5;n||(n=M?ge.restSpeed.granular:ge.restSpeed.default),i||(i=M?ge.restDelta.granular:ge.restDelta.default);let L;if(b<1){const I=T0(k,b);L=z=>{const B=Math.exp(-b*k*z);return l-B*((S+b*k*T)/I*Math.sin(I*z)+T*Math.cos(I*z))}}else if(b===1)L=I=>l-Math.exp(-k*I)*(T+(S+k*T)*I);else{const I=k*Math.sqrt(b*b-1);L=z=>{const B=Math.exp(-b*k*z),U=Math.min(I*z,300);return l-B*((S+b*k*T)*Math.sinh(U)+I*T*Math.cosh(U))/I}}const R={calculatedDuration:A&&g||null,next:I=>{const z=L(I);if(A)u.done=I>=g;else{let B=0;b<1&&(B=I===0?hr(S):UE(L,I,z));const U=Math.abs(B)<=n,Q=Math.abs(l-z)<=i;u.done=U&&Q}return u.value=u.done?l:z,u},toString:()=>{const I=Math.min(lE(R),w0),z=uE(B=>R.next(I*B).value,I,30);return I+"ms "+z}};return R}function SS({keyframes:o,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:m}){const g=o[0],v={done:!1,value:g},A=U=>u!==void 0&&U<u||d!==void 0&&U>d,S=U=>u===void 0?d:d===void 0||Math.abs(u-U)<Math.abs(d-U)?u:d;let b=e*t;const T=g+b,k=l===void 0?T:l(T);k!==T&&(b=k-g);const M=U=>-b*Math.exp(-U/n),L=U=>k+M(U),R=U=>{const Q=M(U),ct=L(U);v.done=Math.abs(Q)<=f,v.value=v.done?k:ct};let I,z;const B=U=>{A(v.value)&&(I=U,z=$E({keyframes:[v.value,S(v.value)],velocity:UE(L,U,v.value),damping:i,stiffness:a,restDelta:f,restSpeed:m}))};return B(0),{calculatedDuration:null,next:U=>{let Q=!1;return!z&&I===void 0&&(Q=!0,R(U),B(U)),I!==void 0&&U>=I?z.next(U-I):(!Q&&R(U),v)}}}const IR=Jd(.42,0,1,1),NR=Jd(0,0,.58,1),GE=Jd(.42,0,.58,1),FR=o=>Array.isArray(o)&&typeof o[0]!="number",OR={linear:rs,easeIn:IR,easeInOut:GE,easeOut:NR,circIn:bw,circInOut:_E,circOut:EE,backIn:Sw,backInOut:SE,backOut:xE,anticipate:bE},bS=o=>{if(yw(o)){Hb(o.length===4);const[t,e,n,i]=o;return Jd(t,e,n,i)}else if(typeof o=="string")return OR[o];return o};function jR(o,t,e){const n=[],i=e||HE,a=o.length-1;for(let l=0;l<a;l++){let u=i(o[l],o[l+1]);if(t){const d=Array.isArray(t)?t[l]||rs:t;u=tf(d,u)}n.push(u)}return n}function zR(o,t,{clamp:e=!0,ease:n,mixer:i}={}){const a=o.length;if(Hb(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=o[0]===o[1];o[0]>o[a-1]&&(o=[...o].reverse(),t=[...t].reverse());const u=jR(t,n,i),d=u.length,f=m=>{if(l&&m<o[0])return t[0];let g=0;if(d>1)for(;g<o.length-2&&!(m<o[g+1]);g++);const v=Qu(o[g],o[g+1],m);return u[g](v)};return e?m=>f(mr(o[0],o[a-1],m)):f}function VR(o,t){const e=o[o.length-1];for(let n=1;n<=t;n++){const i=Qu(0,t,n);o.push(de(e,1,i))}}function BR(o){const t=[0];return VR(t,o.length-1),t}function HR(o,t){return o.map(e=>e*t)}function UR(o,t){return o.map(()=>t||GE).splice(0,o.length-1)}function lm({duration:o=300,keyframes:t,times:e,ease:n="easeInOut"}){const i=FR(n)?n.map(bS):bS(n),a={done:!1,value:t[0]},l=HR(e&&e.length===t.length?e:BR(t),o),u=zR(l,t,{ease:Array.isArray(i)?i:UR(t,i)});return{calculatedDuration:o,next:d=>(a.value=u(d),a.done=d>=o,a)}}const $R=o=>{const t=({timestamp:e})=>o(e);return{start:()=>se.update(t,!0),stop:()=>vo(t),now:()=>Qe.isProcessing?Qe.timestamp:Ei.now()}},GR={decay:SS,inertia:SS,tween:lm,keyframes:lm,spring:$E},WR=o=>o/100;class Pw extends VE{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:e,motionValue:n,element:i,keyframes:a}=this.options,l=(i==null?void 0:i.KeyframeResolver)||Tw,u=(d,f)=>this.onKeyframesResolved(d,f);this.resolver=new l(a,u,e,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=this.options,u=gw(e)?e:GR[e]||lm;let d,f;u!==lm&&typeof t[0]!="number"&&(d=tf(WR,HE(t[0],t[1])),t=[0,100]);const m=u({...this.options,keyframes:t});a==="mirror"&&(f=u({...this.options,keyframes:[...t].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=lE(m));const{calculatedDuration:g}=m,v=g+i,A=v*(n+1)-i;return{generator:m,mirroredGenerator:f,mapPercentToKeyframes:d,calculatedDuration:g,resolvedDuration:v,totalDuration:A}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,e=!1){const{resolved:n}=this;if(!n){const{keyframes:U}=this.options;return{done:!0,value:U[U.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:d,calculatedDuration:f,totalDuration:m,resolvedDuration:g}=n;if(this.startTime===null)return a.next(0);const{delay:v,repeat:A,repeatType:S,repeatDelay:b,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-m/this.speed,this.startTime)),e?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const k=this.currentTime-v*(this.speed>=0?1:-1),M=this.speed>=0?k<0:k>m;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let L=this.currentTime,R=a;if(A){const U=Math.min(this.currentTime,m)/g;let Q=Math.floor(U),ct=U%1;!ct&&U>=1&&(ct=1),ct===1&&Q--,Q=Math.min(Q,A+1),!!(Q%2)&&(S==="reverse"?(ct=1-ct,b&&(ct-=b/g)):S==="mirror"&&(R=l)),L=mr(0,1,ct)*g}const I=M?{done:!1,value:d[0]}:R.next(L);u&&(I.value=u(I.value));let{done:z}=I;!M&&f!==null&&(z=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return B&&i!==void 0&&(I.value=Um(d,this.options,i)),T&&T(I.value),B&&this.finish(),I}get duration(){const{resolved:t}=this;return t?dr(t.calculatedDuration):0}get time(){return dr(this.currentTime)}set time(t){t=hr(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=dr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=$R,onPlay:e,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),e&&e();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const qR=new Set(["opacity","clipPath","filter","transform"]);function XR(o,t,e,{delay:n=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:u="easeInOut",times:d}={}){const f={[t]:e};d&&(f.offset=d);const m=hE(u,i);return Array.isArray(m)&&(f.easing=m),o.animate(f,{delay:n,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const KR=ew(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),um=10,YR=2e4;function QR(o){return gw(o.type)||o.type==="spring"||!cE(o.ease)}function ZR(o,t){const e=new Pw({...t,keyframes:o,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:o[0]};const i=[];let a=0;for(;!n.done&&a<YR;)n=e.sample(a),i.push(n.value),a+=um;return{times:void 0,keyframes:i,duration:a-um,ease:"linear"}}const WE={anticipate:bE,backInOut:SE,circInOut:_E};function JR(o){return o in WE}class ES extends VE{constructor(t){super(t);const{name:e,motionValue:n,element:i,keyframes:a}=this.options;this.resolver=new zE(a,(l,u)=>this.onKeyframesResolved(l,u),e,n,i),this.resolver.scheduleResolve()}initPlayback(t,e){let{duration:n=300,times:i,ease:a,type:l,motionValue:u,name:d,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof a=="string"&&om()&&JR(a)&&(a=WE[a]),QR(this.options)){const{onComplete:g,onUpdate:v,motionValue:A,element:S,...b}=this.options,T=ZR(t,b);t=T.keyframes,t.length===1&&(t[1]=t[0]),n=T.duration,i=T.times,a=T.ease,l="keyframes"}const m=XR(u.owner.current,d,t,{...this.options,duration:n,times:i,ease:a});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(lS(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;u.set(Um(t,this.options,e)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:n,times:i,type:l,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return dr(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return dr(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.currentTime=hr(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:e}=this;if(!e)return rs;const{animation:n}=e;lS(n,t)}return rs}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.playState==="finished"&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:n,duration:i,type:a,ease:l,times:u}=t;if(e.playState==="idle"||e.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:m,onComplete:g,element:v,...A}=this.options,S=new Pw({...A,keyframes:n,duration:i,type:a,ease:l,times:u,isGenerator:!0}),b=hr(this.time);f.setWithVelocity(S.sample(b-um).value,S.sample(b).value,um)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:a,damping:l,type:u}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return KR()&&n&&qR.has(n)&&!d&&!f&&!i&&a!=="mirror"&&l!==0&&u!=="inertia"}}const t2={type:"spring",stiffness:500,damping:25,restSpeed:10},e2=o=>({type:"spring",stiffness:550,damping:o===0?2*Math.sqrt(550):30,restSpeed:10}),n2={type:"keyframes",duration:.8},s2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},i2=(o,{keyframes:t})=>t.length>2?n2:nl.has(o)?o.startsWith("scale")?e2(t[1]):t2:s2;function r2({when:o,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:u,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const Mw=(o,t,e,n={},i,a)=>l=>{const u=mw(n,o)||{},d=u.delay||n.delay||0;let{elapsed:f=0}=n;f=f-hr(d);let m={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:v=>{t.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:o,motionValue:t,element:a?void 0:i};r2(u)||(m={...m,...i2(o,m)}),m.duration&&(m.duration=hr(m.duration)),m.repeatDelay&&(m.repeatDelay=hr(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!a&&t.get()!==void 0){const v=Um(m.keyframes,u);if(v!==void 0)return se.update(()=>{m.onUpdate(v),m.onComplete()}),new EM([])}return!a&&ES.supports(m)?new ES(m):new Pw(m)};function o2({protectedKeys:o,needsAnimating:t},e){const n=o.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function qE(o,t,{delay:e=0,transitionOverride:n,type:i}={}){var a;let{transition:l=o.getDefaultTransition(),transitionEnd:u,...d}=t;n&&(l=n);const f=[],m=i&&o.animationState&&o.animationState.getState()[i];for(const g in d){const v=o.getValue(g,(a=o.latestValues[g])!==null&&a!==void 0?a:null),A=d[g];if(A===void 0||m&&o2(m,g))continue;const S={delay:e,...mw(l||{},g)};let b=!1;if(window.MotionHandoffAnimation){const k=yE(o);if(k){const M=window.MotionHandoffAnimation(k,g,se);M!==null&&(S.startTime=M,b=!0)}}x0(o,g),v.start(Mw(g,v,A,o.shouldReduceMotion&&mE.has(g)?{type:!1}:S,o,b));const T=v.animation;T&&f.push(T)}return u&&Promise.all(f).then(()=>{se.update(()=>{u&&jM(o,u)})}),f}function k0(o,t,e={}){var n;const i=Hm(o,t,e.type==="exit"?(n=o.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:a=o.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(a=e.transitionOverride);const l=i?()=>Promise.all(qE(o,i,e)):()=>Promise.resolve(),u=o.variantChildren&&o.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:v}=a;return a2(o,t,m+f,g,v,e)}:()=>Promise.resolve(),{when:d}=a;if(d){const[f,m]=d==="beforeChildren"?[l,u]:[u,l];return f().then(()=>m())}else return Promise.all([l(),u(e.delay)])}function a2(o,t,e=0,n=0,i=1,a){const l=[],u=(o.variantChildren.size-1)*n,d=i===1?(f=0)=>f*n:(f=0)=>u-f*n;return Array.from(o.variantChildren).sort(l2).forEach((f,m)=>{f.notify("AnimationStart",t),l.push(k0(f,t,{...a,delay:e+d(m)}).then(()=>f.notify("AnimationComplete",t)))}),Promise.all(l)}function l2(o,t){return o.sortNodePosition(t)}function u2(o,t,e={}){o.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(a=>k0(o,a,e));n=Promise.all(i)}else if(typeof t=="string")n=k0(o,t,e);else{const i=typeof t=="function"?Hm(o,t,e.custom):t;n=Promise.all(qE(o,i,e))}return n.then(()=>{o.notify("AnimationComplete",t)})}const c2=sw.length;function XE(o){if(!o)return;if(!o.isControllingVariants){const e=o.parent?XE(o.parent)||{}:{};return o.props.initial!==void 0&&(e.initial=o.props.initial),e}const t={};for(let e=0;e<c2;e++){const n=sw[e],i=o.props[n];(wh(i)||i===!1)&&(t[n]=i)}return t}const h2=[...nw].reverse(),d2=nw.length;function f2(o){return t=>Promise.all(t.map(({animation:e,options:n})=>u2(o,e,n)))}function p2(o){let t=f2(o),e=_S(),n=!0;const i=d=>(f,m)=>{var g;const v=Hm(o,m,d==="exit"?(g=o.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(v){const{transition:A,transitionEnd:S,...b}=v;f={...f,...b,...S}}return f};function a(d){t=d(o)}function l(d){const{props:f}=o,m=XE(o.parent)||{},g=[],v=new Set;let A={},S=1/0;for(let T=0;T<d2;T++){const k=h2[T],M=e[k],L=f[k]!==void 0?f[k]:m[k],R=wh(L),I=k===d?M.isActive:null;I===!1&&(S=T);let z=L===m[k]&&L!==f[k]&&R;if(z&&n&&o.manuallyAnimateOnMount&&(z=!1),M.protectedKeys={...A},!M.isActive&&I===null||!L&&!M.prevProp||Vm(L)||typeof L=="boolean")continue;const B=m2(M.prevProp,L);let U=B||k===d&&M.isActive&&!z&&R||T>S&&R,Q=!1;const ct=Array.isArray(L)?L:[L];let ot=ct.reduce(i(k),{});I===!1&&(ot={});const{prevResolvedValues:Rt={}}=M,Ft={...Rt,...ot},_t=K=>{U=!0,v.has(K)&&(Q=!0,v.delete(K)),M.needsAnimating[K]=!0;const q=o.getValue(K);q&&(q.liveStyle=!1)};for(const K in Ft){const q=ot[K],lt=Rt[K];if(A.hasOwnProperty(K))continue;let J=!1;v0(q)&&v0(lt)?J=!aE(q,lt):J=q!==lt,J?q!=null?_t(K):v.add(K):q!==void 0&&v.has(K)?_t(K):M.protectedKeys[K]=!0}M.prevProp=L,M.prevResolvedValues=ot,M.isActive&&(A={...A,...ot}),n&&o.blockInitialAnimation&&(U=!1),U&&(!(z&&B)||Q)&&g.push(...ct.map(K=>({animation:K,options:{type:k}})))}if(v.size){const T={};v.forEach(k=>{const M=o.getBaseTarget(k),L=o.getValue(k);L&&(L.liveStyle=!0),T[k]=M??null}),g.push({animation:T})}let b=!!g.length;return n&&(f.initial===!1||f.initial===f.animate)&&!o.manuallyAnimateOnMount&&(b=!1),n=!1,b?t(g):Promise.resolve()}function u(d,f){var m;if(e[d].isActive===f)return Promise.resolve();(m=o.variantChildren)===null||m===void 0||m.forEach(v=>{var A;return(A=v.animationState)===null||A===void 0?void 0:A.setActive(d,f)}),e[d].isActive=f;const g=l(d);for(const v in e)e[v].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>e,reset:()=>{e=_S(),n=!0}}}function m2(o,t){return typeof t=="string"?t!==o:Array.isArray(t)?!aE(t,o):!1}function jo(o=!1){return{isActive:o,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _S(){return{animate:jo(!0),whileInView:jo(),whileHover:jo(),whileTap:jo(),whileDrag:jo(),whileFocus:jo(),exit:jo()}}class bo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class g2 extends bo{constructor(t){super(t),t.animationState||(t.animationState=p2(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Vm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let y2=0;class v2 extends bo{constructor(){super(...arguments),this.id=y2++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const w2={animation:{Feature:g2},exit:{Feature:v2}};function bh(o,t,e,n={passive:!0}){return o.addEventListener(t,e,n),()=>o.removeEventListener(t,e)}function ef(o){return{point:{x:o.pageX,y:o.pageY}}}const A2=o=>t=>vw(t)&&o(t,ef(t));function ph(o,t,e,n){return bh(o,t,A2(e),n)}const CS=(o,t)=>Math.abs(o-t);function x2(o,t){const e=CS(o.x,t.x),n=CS(o.y,t.y);return Math.sqrt(e**2+n**2)}class KE{constructor(t,e,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=r0(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,A=x2(g.offset,{x:0,y:0})>=3;if(!v&&!A)return;const{point:S}=g,{timestamp:b}=Qe;this.history.push({...S,timestamp:b});const{onStart:T,onMove:k}=this.handlers;v||(T&&T(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=i0(v,this.transformPagePoint),se.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:A,onSessionEnd:S,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=r0(g.type==="pointercancel"?this.lastMoveEventInfo:i0(v,this.transformPagePoint),this.history);this.startEvent&&A&&A(g,T),S&&S(g,T)},!vw(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=n,this.contextWindow=i||window;const l=ef(t),u=i0(l,this.transformPagePoint),{point:d}=u,{timestamp:f}=Qe;this.history=[{...d,timestamp:f}];const{onSessionStart:m}=e;m&&m(t,r0(u,this.history)),this.removeListeners=tf(ph(this.contextWindow,"pointermove",this.handlePointerMove),ph(this.contextWindow,"pointerup",this.handlePointerUp),ph(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),vo(this.updatePoint)}}function i0(o,t){return t?{point:t(o.point)}:o}function TS(o,t){return{x:o.x-t.x,y:o.y-t.y}}function r0({point:o},t){return{point:o,delta:TS(o,YE(t)),offset:TS(o,S2(t)),velocity:b2(t,.1)}}function S2(o){return o[0]}function YE(o){return o[o.length-1]}function b2(o,t){if(o.length<2)return{x:0,y:0};let e=o.length-1,n=null;const i=YE(o);for(;e>=0&&(n=o[e],!(i.timestamp-n.timestamp>hr(t)));)e--;if(!n)return{x:0,y:0};const a=dr(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const QE=1e-4,E2=1-QE,_2=1+QE,ZE=.01,C2=0-ZE,T2=0+ZE;function as(o){return o.max-o.min}function k2(o,t,e){return Math.abs(o-t)<=e}function kS(o,t,e,n=.5){o.origin=n,o.originPoint=de(t.min,t.max,o.origin),o.scale=as(e)/as(t),o.translate=de(e.min,e.max,o.origin)-o.originPoint,(o.scale>=E2&&o.scale<=_2||isNaN(o.scale))&&(o.scale=1),(o.translate>=C2&&o.translate<=T2||isNaN(o.translate))&&(o.translate=0)}function mh(o,t,e,n){kS(o.x,t.x,e.x,n?n.originX:void 0),kS(o.y,t.y,e.y,n?n.originY:void 0)}function PS(o,t,e){o.min=e.min+t.min,o.max=o.min+as(t)}function P2(o,t,e){PS(o.x,t.x,e.x),PS(o.y,t.y,e.y)}function MS(o,t,e){o.min=t.min-e.min,o.max=o.min+as(t)}function gh(o,t,e){MS(o.x,t.x,e.x),MS(o.y,t.y,e.y)}function M2(o,{min:t,max:e},n){return t!==void 0&&o<t?o=n?de(t,o,n.min):Math.max(o,t):e!==void 0&&o>e&&(o=n?de(e,o,n.max):Math.min(o,e)),o}function RS(o,t,e){return{min:t!==void 0?o.min+t:void 0,max:e!==void 0?o.max+e-(o.max-o.min):void 0}}function R2(o,{top:t,left:e,bottom:n,right:i}){return{x:RS(o.x,e,i),y:RS(o.y,t,n)}}function LS(o,t){let e=t.min-o.min,n=t.max-o.max;return t.max-t.min<o.max-o.min&&([e,n]=[n,e]),{min:e,max:n}}function L2(o,t){return{x:LS(o.x,t.x),y:LS(o.y,t.y)}}function D2(o,t){let e=.5;const n=as(o),i=as(t);return i>n?e=Qu(t.min,t.max-n,o.min):n>i&&(e=Qu(o.min,o.max-i,t.min)),mr(0,1,e)}function I2(o,t){const e={};return t.min!==void 0&&(e.min=t.min-o.min),t.max!==void 0&&(e.max=t.max-o.min),e}const P0=.35;function N2(o=P0){return o===!1?o=0:o===!0&&(o=P0),{x:DS(o,"left","right"),y:DS(o,"top","bottom")}}function DS(o,t,e){return{min:IS(o,t),max:IS(o,e)}}function IS(o,t){return typeof o=="number"?o:o[t]||0}const NS=()=>({translate:0,scale:1,origin:0,originPoint:0}),jl=()=>({x:NS(),y:NS()}),FS=()=>({min:0,max:0}),xe=()=>({x:FS(),y:FS()});function gs(o){return[o("x"),o("y")]}function JE({top:o,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:o,max:n}}}function F2({x:o,y:t}){return{top:t.min,right:o.max,bottom:t.max,left:o.min}}function O2(o,t){if(!t)return o;const e=t({x:o.left,y:o.top}),n=t({x:o.right,y:o.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function o0(o){return o===void 0||o===1}function M0({scale:o,scaleX:t,scaleY:e}){return!o0(o)||!o0(t)||!o0(e)}function zo(o){return M0(o)||t_(o)||o.z||o.rotate||o.rotateX||o.rotateY||o.skewX||o.skewY}function t_(o){return OS(o.x)||OS(o.y)}function OS(o){return o&&o!=="0%"}function cm(o,t,e){const n=o-e,i=t*n;return e+i}function jS(o,t,e,n,i){return i!==void 0&&(o=cm(o,i,n)),cm(o,e,n)+t}function R0(o,t=0,e=1,n,i){o.min=jS(o.min,t,e,n,i),o.max=jS(o.max,t,e,n,i)}function e_(o,{x:t,y:e}){R0(o.x,t.translate,t.scale,t.originPoint),R0(o.y,e.translate,e.scale,e.originPoint)}const zS=.999999999999,VS=1.0000000000001;function j2(o,t,e,n=!1){const i=e.length;if(!i)return;t.x=t.y=1;let a,l;for(let u=0;u<i;u++){a=e[u],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Vl(o,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,e_(o,l)),n&&zo(a.latestValues)&&Vl(o,a.latestValues))}t.x<VS&&t.x>zS&&(t.x=1),t.y<VS&&t.y>zS&&(t.y=1)}function zl(o,t){o.min=o.min+t,o.max=o.max+t}function BS(o,t,e,n,i=.5){const a=de(o.min,o.max,i);R0(o,t,e,a,n)}function Vl(o,t){BS(o.x,t.x,t.scaleX,t.scale,t.originX),BS(o.y,t.y,t.scaleY,t.scale,t.originY)}function n_(o,t){return JE(O2(o.getBoundingClientRect(),t))}function z2(o,t,e){const n=n_(o,e),{scroll:i}=t;return i&&(zl(n.x,i.offset.x),zl(n.y,i.offset.y)),n}const s_=({current:o})=>o?o.ownerDocument.defaultView:null,V2=new WeakMap;class B2{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xe(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(ef(m).point)},a=(m,g)=>{const{drag:v,dragPropagation:A,onDragStart:S}=this.getProps();if(v&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=DM(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gs(T=>{let k=this.getAxisMotionValue(T).get()||0;if(bi.test(k)){const{projection:M}=this.visualElement;if(M&&M.layout){const L=M.layout.layoutBox[T];L&&(k=as(L)*(parseFloat(k)/100))}}this.originPoint[T]=k}),S&&se.postRender(()=>S(m,g)),x0(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(m,g)=>{const{dragPropagation:v,dragDirectionLock:A,onDirectionLock:S,onDrag:b}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:T}=g;if(A&&this.currentDirection===null){this.currentDirection=H2(T),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,T),this.updateAxis("y",g.point,T),this.visualElement.render(),b&&b(m,g)},u=(m,g)=>this.stop(m,g),d=()=>gs(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new KE(t,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:s_(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=e;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&se.postRender(()=>a(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:i}=this.getProps();if(!n||!Ap(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=M2(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;e&&Fl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=R2(i.layoutBox,e):this.constraints=!1,this.elastic=N2(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&gs(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=I2(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Fl(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=z2(n,i.root,this.visualElement.getTransformPagePoint());let l=L2(i.layout.layoutBox,a);if(e){const u=e(F2(l));this.hasMutatedConstraints=!!u,u&&(l=JE(u))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=gs(m=>{if(!Ap(m,e,this.currentDirection))return;let g=d&&d[m]||{};l&&(g={min:0,max:0});const v=i?200:1e6,A=i?40:1e7,S={type:"inertia",velocity:n?t[m]:0,bounceStiffness:v,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(m,S)});return Promise.all(f).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return x0(this.visualElement,t),n.start(Mw(t,n,0,e,this.visualElement,!1))}stopAnimation(){gs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gs(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[e];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){gs(e=>{const{drag:n}=this.getProps();if(!Ap(e,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(e);if(i&&i.layout){const{min:l,max:u}=i.layout.layoutBox[e];a.set(t[e]-de(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Fl(e)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};gs(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();i[l]=D2({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),gs(l=>{if(!Ap(l,t,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(de(d,f,i[l]))})}addListeners(){if(!this.visualElement.current)return;V2.set(this.visualElement,this);const t=this.visualElement.current,e=ph(t,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Fl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),se.read(n);const l=bh(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(gs(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())}));return()=>{l(),e(),a(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=P0,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function Ap(o,t,e){return(t===!0||t===o)&&(e===null||e===o)}function H2(o,t=10){let e=null;return Math.abs(o.y)>t?e="y":Math.abs(o.x)>t&&(e="x"),e}class U2 extends bo{constructor(t){super(t),this.removeGroupControls=rs,this.removeListeners=rs,this.controls=new B2(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rs}unmount(){this.removeGroupControls(),this.removeListeners()}}const HS=o=>(t,e)=>{o&&se.postRender(()=>o(t,e))};class $2 extends bo{constructor(){super(...arguments),this.removePointerDownListener=rs}onPointerDown(t){this.session=new KE(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:s_(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:HS(t),onStart:HS(e),onMove:n,onEnd:(a,l)=>{delete this.session,i&&se.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=ph(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function US(o,t){return t.max===t.min?0:o/(t.max-t.min)*100}const Hc={correct:(o,t)=>{if(!t.target)return o;if(typeof o=="string")if(xt.test(o))o=parseFloat(o);else return o;const e=US(o,t.target.x),n=US(o,t.target.y);return`${e}% ${n}%`}},G2={correct:(o,{treeScale:t,projectionDelta:e})=>{const n=o,i=wo.parse(o);if(i.length>5)return n;const a=wo.createTransformer(o),l=typeof i[0]!="number"?1:0,u=e.x.scale*t.x,d=e.y.scale*t.y;i[0+l]/=u,i[1+l]/=d;const f=de(u,d,.5);return typeof i[2+l]=="number"&&(i[2+l]/=f),typeof i[3+l]=="number"&&(i[3+l]/=f),a(i)}};class W2 extends et.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=t;dM(q2),a&&(e.group&&e.group.add(a),n&&n.register&&i&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Tp.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:i,isPresent:a}=this.props,l=n.projection;return l&&(l.isPresent=a,i||t.layoutDependency!==e||e===void 0?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||se.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),rw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function i_(o){const[t,e]=Vb(),n=et.useContext(Qv);return O.jsx(W2,{...o,layoutGroup:n,switchLayoutGroup:et.useContext(Xb),isPresent:t,safeToRemove:e})}const q2={borderRadius:{...Hc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hc,borderTopRightRadius:Hc,borderBottomLeftRadius:Hc,borderBottomRightRadius:Hc,boxShadow:G2};function X2(o,t,e){const n=pn(o)?o:xh(o);return n.start(Mw("",n,t,e)),n.animation}function K2(o){return o instanceof SVGElement&&o.tagName!=="svg"}const Y2=(o,t)=>o.depth-t.depth;class Q2{constructor(){this.children=[],this.isDirty=!1}add(t){ww(this.children,t),this.isDirty=!0}remove(t){Aw(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Y2),this.isDirty=!1,this.children.forEach(t)}}function Z2(o,t){const e=Ei.now(),n=({timestamp:i})=>{const a=i-e;a>=t&&(vo(n),o(a-t))};return se.read(n,!0),()=>vo(n)}const r_=["TopLeft","TopRight","BottomLeft","BottomRight"],J2=r_.length,$S=o=>typeof o=="string"?parseFloat(o):o,GS=o=>typeof o=="number"||xt.test(o);function tL(o,t,e,n,i,a){i?(o.opacity=de(0,e.opacity!==void 0?e.opacity:1,eL(n)),o.opacityExit=de(t.opacity!==void 0?t.opacity:1,0,nL(n))):a&&(o.opacity=de(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,n));for(let l=0;l<J2;l++){const u=`border${r_[l]}Radius`;let d=WS(t,u),f=WS(e,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||GS(d)===GS(f)?(o[u]=Math.max(de($S(d),$S(f),n),0),(bi.test(f)||bi.test(d))&&(o[u]+="%")):o[u]=f}(t.rotate||e.rotate)&&(o.rotate=de(t.rotate||0,e.rotate||0,n))}function WS(o,t){return o[t]!==void 0?o[t]:o.borderRadius}const eL=o_(0,.5,EE),nL=o_(.5,.95,rs);function o_(o,t,e){return n=>n<o?0:n>t?1:e(Qu(o,t,n))}function qS(o,t){o.min=t.min,o.max=t.max}function ps(o,t){qS(o.x,t.x),qS(o.y,t.y)}function XS(o,t){o.translate=t.translate,o.scale=t.scale,o.originPoint=t.originPoint,o.origin=t.origin}function KS(o,t,e,n,i){return o-=t,o=cm(o,1/e,n),i!==void 0&&(o=cm(o,1/i,n)),o}function sL(o,t=0,e=1,n=.5,i,a=o,l=o){if(bi.test(t)&&(t=parseFloat(t),t=de(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=de(a.min,a.max,n);o===a&&(u-=t),o.min=KS(o.min,t,e,u,i),o.max=KS(o.max,t,e,u,i)}function YS(o,t,[e,n,i],a,l){sL(o,t[e],t[n],t[i],t.scale,a,l)}const iL=["x","scaleX","originX"],rL=["y","scaleY","originY"];function QS(o,t,e,n){YS(o.x,t,iL,e?e.x:void 0,n?n.x:void 0),YS(o.y,t,rL,e?e.y:void 0,n?n.y:void 0)}function ZS(o){return o.translate===0&&o.scale===1}function a_(o){return ZS(o.x)&&ZS(o.y)}function JS(o,t){return o.min===t.min&&o.max===t.max}function oL(o,t){return JS(o.x,t.x)&&JS(o.y,t.y)}function tb(o,t){return Math.round(o.min)===Math.round(t.min)&&Math.round(o.max)===Math.round(t.max)}function l_(o,t){return tb(o.x,t.x)&&tb(o.y,t.y)}function eb(o){return as(o.x)/as(o.y)}function nb(o,t){return o.translate===t.translate&&o.scale===t.scale&&o.originPoint===t.originPoint}class aL{constructor(){this.members=[]}add(t){ww(this.members,t),t.scheduleRender()}remove(t){if(Aw(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let n;for(let i=e;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lL(o,t,e){let n="";const i=o.x.translate/t.x,a=o.y.translate/t.y,l=(e==null?void 0:e.z)||0;if((i||a||l)&&(n=`translate3d(${i}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:m,rotateX:g,rotateY:v,skewX:A,skewY:S}=e;f&&(n=`perspective(${f}px) ${n}`),m&&(n+=`rotate(${m}deg) `),g&&(n+=`rotateX(${g}deg) `),v&&(n+=`rotateY(${v}deg) `),A&&(n+=`skewX(${A}deg) `),S&&(n+=`skewY(${S}deg) `)}const u=o.x.scale*t.x,d=o.y.scale*t.y;return(u!==1||d!==1)&&(n+=`scale(${u}, ${d})`),n||"none"}const Vo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Yc=typeof window<"u"&&window.MotionDebug!==void 0,a0=["","X","Y","Z"],uL={visibility:"hidden"},sb=1e3;let cL=0;function l0(o,t,e,n){const{latestValues:i}=t;i[o]&&(e[o]=i[o],t.setStaticValue(o,0),n&&(n[o]=0))}function u_(o){if(o.hasCheckedOptimisedAppear=!0,o.root===o)return;const{visualElement:t}=o.options;if(!t)return;const e=yE(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:a}=o.options;window.MotionCancelOptimisedAnimation(e,"transform",se,!(i||a))}const{parent:n}=o;n&&!n.hasCheckedOptimisedAppear&&u_(n)}function c_({attachResizeListener:o,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(l={},u=t==null?void 0:t()){this.id=cL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yc&&(Vo.totalNodes=Vo.resolvedTargetDeltas=Vo.recalculatedProjection=0),this.nodes.forEach(fL),this.nodes.forEach(vL),this.nodes.forEach(wL),this.nodes.forEach(pL),Yc&&window.MotionDebug.record(Vo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Q2)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new xw),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=K2(l),this.instance=l;const{layoutId:d,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||d)&&(this.isLayoutDirty=!0),o){let g;const v=()=>this.root.updateBlockedByResize=!1;o(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=Z2(v,250),Tp.hasAnimatedSinceResize&&(Tp.hasAnimatedSinceResize=!1,this.nodes.forEach(rb))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:A,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||EL,{onLayoutAnimationStart:T,onLayoutAnimationComplete:k}=m.getProps(),M=!this.targetLayout||!l_(this.targetLayout,S)||A,L=!v&&A;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||L||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,L);const R={...mw(b,"layout"),onPlay:T,onComplete:k};(m.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else v||rb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(AL),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&u_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ib);return}this.isUpdating||this.nodes.forEach(gL),this.isUpdating=!1,this.nodes.forEach(yL),this.nodes.forEach(hL),this.nodes.forEach(dL),this.clearAllSnapshots();const u=Ei.now();Qe.delta=mr(0,1e3/60,u-Qe.timestamp),Qe.timestamp=u,Qe.isProcessing=!0,Zy.update.process(Qe),Zy.preRender.process(Qe),Zy.render.process(Qe),Qe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mL),this.sharedNodes.forEach(xL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!a_(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;l&&(u||zo(this.latestValues)||m)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),_L(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:u}=this.options;if(!u)return xe();const d=u.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(CL))){const{scroll:m}=this.root;m&&(zl(d.x,m.offset.x),zl(d.y,m.offset.y))}return d}removeElementScroll(l){var u;const d=xe();if(ps(d,l),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return d;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:g,options:v}=m;m!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&ps(d,l),zl(d.x,g.offset.x),zl(d.y,g.offset.y))}return d}applyTransform(l,u=!1){const d=xe();ps(d,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Vl(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),zo(m.latestValues)&&Vl(d,m.latestValues)}return zo(this.latestValues)&&Vl(d,this.latestValues),d}removeTransform(l){const u=xe();ps(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!zo(f.latestValues))continue;M0(f.latestValues)&&f.updateSnapshot();const m=xe(),g=f.measurePageBox();ps(m,g),QS(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return zo(this.latestValues)&&QS(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Qe.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xe(),this.relativeTargetOrigin=xe(),gh(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),ps(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xe(),this.targetWithTransforms=xe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),P2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ps(this.target,this.layout.layoutBox),e_(this.target,this.targetDelta)):ps(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xe(),this.relativeTargetOrigin=xe(),gh(this.relativeTargetOrigin,this.target,A.target),ps(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yc&&Vo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||M0(this.parent.latestValues)||t_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Qe.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;ps(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,A=this.treeScale.y;j2(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=xe());const{target:S}=u;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(XS(this.prevProjectionDelta.x,this.projectionDelta.x),XS(this.prevProjectionDelta.y,this.projectionDelta.y)),mh(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==A||!nb(this.projectionDelta.x,this.prevProjectionDelta.x)||!nb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),Yc&&Vo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jl(),this.projectionDelta=jl(),this.projectionDeltaWithTransform=jl()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},g=jl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=xe(),A=d?d.source:void 0,S=this.layout?this.layout.source:void 0,b=A!==S,T=this.getStack(),k=!T||T.members.length<=1,M=!!(b&&!k&&this.options.crossfade===!0&&!this.path.some(bL));this.animationProgress=0;let L;this.mixTargetDelta=R=>{const I=R/1e3;ob(g.x,l.x,I),ob(g.y,l.y,I),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gh(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SL(this.relativeTarget,this.relativeTargetOrigin,v,I),L&&oL(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=xe()),ps(L,this.relativeTarget)),b&&(this.animationValues=m,tL(m,f,this.latestValues,I,M,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=se.update(()=>{Tp.hasAnimatedSinceResize=!0,this.currentAnimation=X2(0,sb,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:m}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&h_(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||xe();const g=as(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+g;const v=as(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+v}ps(u,d),Vl(u,m),mh(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new aL),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:u}=this.options;return u?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:u}=this.options;return u?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&l0("z",l,f,this.animationValues);for(let m=0;m<a0.length;m++)l0(`rotate${a0[m]}`,l,f,this.animationValues),l0(`skew${a0[m]}`,l,f,this.animationValues);l.render();for(const m in f)l.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);l.scheduleRender()}getProjectionStyles(l){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return uL;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=_p(l==null?void 0:l.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=_p(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!zo(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=lL(this.projectionDeltaWithTransform,this.treeScale,v),m&&(f.transform=m(v,f.transform));const{x:A,y:S}=this.projectionDelta;f.transformOrigin=`${A.origin*100}% ${S.origin*100}% 0`,g.animationValues?f.opacity=g===this?(d=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const b in rm){if(v[b]===void 0)continue;const{correct:T,applyTo:k}=rm[b],M=f.transform==="none"?v[b]:T(v[b],g);if(k){const L=k.length;for(let R=0;R<L;R++)f[k[R]]=M}else f[b]=M}return this.options.layoutId&&(f.pointerEvents=g===this?_p(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(ib),this.root.sharedNodes.clear()}}}function hL(o){o.updateLayout()}function dL(o){var t;const e=((t=o.resumeFrom)===null||t===void 0?void 0:t.snapshot)||o.snapshot;if(o.isLead()&&o.layout&&e&&o.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=o.layout,{animationType:a}=o.options,l=e.source!==o.layout.source;a==="size"?gs(g=>{const v=l?e.measuredBox[g]:e.layoutBox[g],A=as(v);v.min=n[g].min,v.max=v.min+A}):h_(a,e.layoutBox,n)&&gs(g=>{const v=l?e.measuredBox[g]:e.layoutBox[g],A=as(n[g]);v.max=v.min+A,o.relativeTarget&&!o.currentAnimation&&(o.isProjectionDirty=!0,o.relativeTarget[g].max=o.relativeTarget[g].min+A)});const u=jl();mh(u,n,e.layoutBox);const d=jl();l?mh(d,o.applyTransform(i,!0),e.measuredBox):mh(d,n,e.layoutBox);const f=!a_(u);let m=!1;if(!o.resumeFrom){const g=o.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:A}=g;if(v&&A){const S=xe();gh(S,e.layoutBox,v.layoutBox);const b=xe();gh(b,n,A.layoutBox),l_(S,b)||(m=!0),g.options.layoutRoot&&(o.relativeTarget=b,o.relativeTargetOrigin=S,o.relativeParent=g)}}}o.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(o.isLead()){const{onExitComplete:n}=o.options;n&&n()}o.options.transition=void 0}function fL(o){Yc&&Vo.totalNodes++,o.parent&&(o.isProjecting()||(o.isProjectionDirty=o.parent.isProjectionDirty),o.isSharedProjectionDirty||(o.isSharedProjectionDirty=!!(o.isProjectionDirty||o.parent.isProjectionDirty||o.parent.isSharedProjectionDirty)),o.isTransformDirty||(o.isTransformDirty=o.parent.isTransformDirty))}function pL(o){o.isProjectionDirty=o.isSharedProjectionDirty=o.isTransformDirty=!1}function mL(o){o.clearSnapshot()}function ib(o){o.clearMeasurements()}function gL(o){o.isLayoutDirty=!1}function yL(o){const{visualElement:t}=o.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),o.resetTransform()}function rb(o){o.finishAnimation(),o.targetDelta=o.relativeTarget=o.target=void 0,o.isProjectionDirty=!0}function vL(o){o.resolveTargetDelta()}function wL(o){o.calcProjection()}function AL(o){o.resetSkewAndRotation()}function xL(o){o.removeLeadSnapshot()}function ob(o,t,e){o.translate=de(t.translate,0,e),o.scale=de(t.scale,1,e),o.origin=t.origin,o.originPoint=t.originPoint}function ab(o,t,e,n){o.min=de(t.min,e.min,n),o.max=de(t.max,e.max,n)}function SL(o,t,e,n){ab(o.x,t.x,e.x,n),ab(o.y,t.y,e.y,n)}function bL(o){return o.animationValues&&o.animationValues.opacityExit!==void 0}const EL={duration:.45,ease:[.4,0,.1,1]},lb=o=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(o),ub=lb("applewebkit/")&&!lb("chrome/")?Math.round:rs;function cb(o){o.min=ub(o.min),o.max=ub(o.max)}function _L(o){cb(o.x),cb(o.y)}function h_(o,t,e){return o==="position"||o==="preserve-aspect"&&!k2(eb(t),eb(e),.2)}function CL(o){var t;return o!==o.root&&((t=o.scroll)===null||t===void 0?void 0:t.wasRoot)}const TL=c_({attachResizeListener:(o,t)=>bh(o,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),u0={current:void 0},d_=c_({measureScroll:o=>({x:o.scrollLeft,y:o.scrollTop}),defaultParent:()=>{if(!u0.current){const o=new TL({});o.mount(window),o.setOptions({layoutScroll:!0}),u0.current=o}return u0.current},resetTransform:(o,t)=>{o.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:o=>window.getComputedStyle(o).position==="fixed"}),kL={pan:{Feature:$2},drag:{Feature:U2,ProjectionNode:d_,MeasureLayout:i_}};function hb(o,t,e){const{props:n}=o;o.animationState&&n.whileHover&&o.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,a=n[i];a&&se.postRender(()=>a(t,ef(t)))}class PL extends bo{mount(){const{current:t}=this.node;t&&(this.unmount=kM(t,e=>(hb(this.node,e,"Start"),n=>hb(this.node,n,"End"))))}unmount(){}}class ML extends bo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tf(bh(this.node.current,"focus",()=>this.onFocus()),bh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function db(o,t,e){const{props:n}=o;o.animationState&&n.whileTap&&o.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),a=n[i];a&&se.postRender(()=>a(t,ef(t)))}class RL extends bo{mount(){const{current:t}=this.node;t&&(this.unmount=LM(t,e=>(db(this.node,e,"Start"),(n,{success:i})=>db(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const L0=new WeakMap,c0=new WeakMap,LL=o=>{const t=L0.get(o.target);t&&t(o)},DL=o=>{o.forEach(LL)};function IL({root:o,...t}){const e=o||document;c0.has(e)||c0.set(e,{});const n=c0.get(e),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(DL,{root:o,...t})),n[i]}function NL(o,t,e){const n=IL(t);return L0.set(o,e),n.observe(o),()=>{L0.delete(o),n.unobserve(o)}}const FL={some:0,all:1};class OL extends bo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:i="some",once:a}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:FL[i]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=f?m:g;v&&v(d)};return NL(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(jL(t,e))&&this.startObserver()}unmount(){}}function jL({viewport:o={}},{viewport:t={}}={}){return e=>o[e]!==t[e]}const zL={inView:{Feature:OL},tap:{Feature:RL},focus:{Feature:ML},hover:{Feature:PL}},VL={layout:{ProjectionNode:d_,MeasureLayout:i_}},D0={current:null},f_={current:!1};function BL(){if(f_.current=!0,!!tw)if(window.matchMedia){const o=window.matchMedia("(prefers-reduced-motion)"),t=()=>D0.current=o.matches;o.addListener(t),t()}else D0.current=!1}const HL=[...jE,hn,wo],UL=o=>HL.find(OE(o)),fb=new WeakMap;function $L(o,t,e){for(const n in t){const i=t[n],a=e[n];if(pn(i))o.addValue(n,i);else if(pn(a))o.addValue(n,xh(i,{owner:o}));else if(a!==i)if(o.hasValue(n)){const l=o.getValue(n);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=o.getStaticValue(n);o.addValue(n,xh(l!==void 0?l:i,{owner:o}))}}for(const n in e)t[n]===void 0&&o.removeValue(n);return t}const pb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class GL{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Tw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=Ei.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,se.render(this.render,!1,!0))};const{latestValues:d,renderState:f,onUpdate:m}=l;this.onUpdate=m,this.latestValues=d,this.baseTarget={...d},this.initialValues=e.initial?{...d}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=Bm(e),this.isVariantNode=Wb(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(e,{},this);for(const A in v){const S=v[A];d[A]!==void 0&&pn(S)&&S.set(d[A],!1)}}mount(t){this.current=t,fb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),f_.current||BL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:D0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){fb.delete(this.current),this.projection&&this.projection.unmount(),vo(this.notifyUpdate),vo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=nl.has(t),i=e.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&se.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=e.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),a(),l&&l(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Zu){const e=Zu[t];if(!e)continue;const{isEnabled:n,Feature:i}=e;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<pb.length;n++){const i=pb[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=t[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=$L(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=xh(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){var n;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(NE(i)||CE(i))?i=parseFloat(i):!UL(i)&&wo.test(e)&&(i=LE(t,e)),this.setBaseTarget(t,pn(i)?i.get():i)),pn(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const l=aw(this.props,n,(e=this.presenceContext)===null||e===void 0?void 0:e.custom);l&&(i=l[t])}if(n&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!pn(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new xw),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class p_ extends GL{constructor(){super(...arguments),this.KeyframeResolver=zE}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;pn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function WL(o){return window.getComputedStyle(o)}class qL extends p_{constructor(){super(...arguments),this.type="html",this.renderInstance=eE}readValueFromInstance(t,e){if(nl.has(e)){const n=Cw(e);return n&&n.default||0}else{const n=WL(t),i=(Zb(e)?n.getPropertyValue(e):n[e])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:e}){return n_(t,e)}build(t,e,n){cw(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return pw(t,e,n)}}class XL extends p_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xe}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(nl.has(e)){const n=Cw(e);return n&&n.default||0}return e=nE.has(e)?e:iw(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return rE(t,e,n)}build(t,e,n){hw(t,e,this.isSVGTag,n.transformTemplate)}renderInstance(t,e,n,i){sE(t,e,n,i)}mount(t){this.isSVGTag=fw(t.tagName),super.mount(t)}}const KL=(o,t)=>ow(o)?new XL(t):new qL(t,{allowProjection:o!==et.Fragment}),YL=xM({...w2,...zL,...kL,...VL},KL),Ul=FP(YL),mb=o=>{let t;const e=new Set,n=(f,m)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const v=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(A=>A(t,v))}},i=()=>t,u={setState:n,getState:i,getInitialState:()=>d,subscribe:f=>(e.add(f),()=>e.delete(f))},d=t=o(n,i,u);return u},QL=(o=>o?mb(o):mb),ZL=o=>o;function JL(o,t=ZL){const e=qc.useSyncExternalStore(o.subscribe,qc.useCallback(()=>t(o.getState()),[o,t]),qc.useCallback(()=>t(o.getInitialState()),[o,t]));return qc.useDebugValue(e),e}const tD=o=>{const t=QL(o),e=n=>JL(t,n);return Object.assign(e,t),e},Rw=(o=>tD);function Lw(o,t){let e;try{e=o()}catch{return}return{getItem:i=>{var a;const l=d=>d===null?null:JSON.parse(d,void 0),u=(a=e.getItem(i))!=null?a:null;return u instanceof Promise?u.then(l):l(u)},setItem:(i,a)=>e.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>e.removeItem(i)}}const I0=o=>t=>{try{const e=o(t);return e instanceof Promise?e:{then(n){return I0(n)(e)},catch(n){return this}}}catch(e){return{then(n){return this},catch(n){return I0(n)(e)}}}},eD=(o,t)=>(e,n,i)=>{let a={storage:Lw(()=>localStorage),partialize:T=>T,version:0,merge:(T,k)=>({...k,...T}),...t},l=!1,u=0;const d=new Set,f=new Set;let m=a.storage;if(!m)return o((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),e(...T)},n,i);const g=()=>{const T=a.partialize({...n()});return m.setItem(a.name,{state:T,version:a.version})},v=i.setState;i.setState=(T,k)=>(v(T,k),g());const A=o((...T)=>(e(...T),g()),n,i);i.getInitialState=()=>A;let S;const b=()=>{var T,k;if(!m)return;const M=++u;l=!1,d.forEach(R=>{var I;return R((I=n())!=null?I:A)});const L=((k=a.onRehydrateStorage)==null?void 0:k.call(a,(T=n())!=null?T:A))||void 0;return I0(m.getItem.bind(m))(a.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==a.version){if(a.migrate){const I=a.migrate(R.state,R.version);return I instanceof Promise?I.then(z=>[!0,z]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var I;if(M!==u)return;const[z,B]=R;if(S=a.merge(B,(I=n())!=null?I:A),e(S,!0),z)return g()}).then(()=>{M===u&&(L==null||L(S,void 0),S=n(),l=!0,f.forEach(R=>R(S)))}).catch(R=>{M===u&&(L==null||L(void 0,R))})};return i.persist={setOptions:T=>{a={...a,...T},T.storage&&(m=T.storage)},clearStorage:()=>{m==null||m.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>l,onHydrate:T=>(d.add(T),()=>{d.delete(T)}),onFinishHydration:T=>(f.add(T),()=>{f.delete(T)})},a.skipHydration||b(),S||A},Dw=eD,$m=Rw()(Dw((o,t)=>({soundEnabled:!0,theme:"dark",showHelp:!1,reducedMotion:!1,autoSave:!0,highQualityExport:!1,isDarkMode:!0,toggleSound:()=>o(e=>({soundEnabled:!e.soundEnabled})),setTheme:e=>{o({theme:e}),t().applyTheme()},applyTheme:()=>{const{theme:e}=t(),n=e==="dark"||e==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;o({isDarkMode:n}),n?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"))},toggleHelp:()=>o(e=>({showHelp:!e.showHelp})),toggleDarkMode:()=>{const e=t().theme==="dark"?"light":"dark";o({theme:e,isDarkMode:e==="dark"}),t().applyTheme()},setReducedMotion:e=>o({reducedMotion:e}),setAutoSave:e=>o({autoSave:e}),setHighQualityExport:e=>o({highQualityExport:e})}),{name:"quizflow-settings",storage:Lw(()=>localStorage)}));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m_=(...o)=>o.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=et.forwardRef(({color:o="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:l,...u},d)=>et.createElement("svg",{ref:d,...sD,width:t,height:t,stroke:o,strokeWidth:n?Number(e)*24/Number(t):e,className:m_("lucide",i),...u},[...l.map(([f,m])=>et.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(o,t)=>{const e=et.forwardRef(({className:n,...i},a)=>et.createElement(iD,{ref:a,iconNode:t,className:m_(`lucide-${nD(o)}`,n),...i}));return e.displayName=`${o}`,e};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=Ie("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=Ie("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=Ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=Ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=Ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=Ie("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=Ie("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=Ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=Ie("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=Ie("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=Ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=Ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=Ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=Ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=Ie("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),wD=Rw()(Dw(o=>({quizzes:[],settings:{apiKey:"",model:"minimax/minimax-m2:free",numQuestions:5,difficulty:"medium"},isDarkMode:!0,addQuiz:t=>o(e=>({quizzes:[t,...e.quizzes]})),removeQuiz:t=>o(e=>({quizzes:e.quizzes.filter(n=>n.id!==t)})),updateSettings:t=>o(e=>({settings:{...e.settings,...t}})),toggleDarkMode:()=>o(t=>({isDarkMode:!t.isDarkMode}))}),{name:"quizflow-storage"}));var yh={};yh.d=(o,t)=>{for(var e in t)yh.o(t,e)&&!yh.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})};yh.o=(o,t)=>Object.prototype.hasOwnProperty.call(o,t);var Et=globalThis.pdfjsLib={};yh.d(Et,{AbortException:()=>Ao,AnnotationEditorLayer:()=>$v,AnnotationEditorParamsType:()=>jt,AnnotationEditorType:()=>kt,AnnotationEditorUIManager:()=>Ja,AnnotationLayer:()=>pN,AnnotationMode:()=>zr,ColorPicker:()=>gm,DOMSVGFactory:()=>Hw,DrawLayer:()=>qv,FeatureTest:()=>En,GlobalWorkerOptions:()=>cr,ImageKind:()=>kp,InvalidPDFException:()=>O0,MissingPDFException:()=>Eh,OPS:()=>Fs,OutputScale:()=>z0,PDFDataRangeTransport:()=>vC,PDFDateString:()=>jw,PDFWorker:()=>Gl,PasswordResponses:()=>bD,PermissionFlag:()=>SD,PixelsPerInch:()=>xo,RenderingCancelledException:()=>Fw,TextLayer:()=>_h,TouchManager:()=>pm,UnexpectedResponseException:()=>hm,Util:()=>mt,VerbosityLevel:()=>Gm,XfaLayer:()=>AC,build:()=>XI,createValidAbsoluteUrl:()=>TD,fetchData:()=>Km,getDocument:()=>zI,getFilenameFromUrl:()=>FD,getPdfFilenameFromUrl:()=>OD,getXfaPageViewport:()=>jD,isDataScheme:()=>Ym,isPdfFile:()=>Ow,noContextMenu:()=>Ys,normalizeUnicode:()=>DD,setLayerDimensions:()=>Za,shadow:()=>Nt,stopEvent:()=>is,version:()=>qI});const fn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),y_=[1,0,0,1,0,0],F0=[.001,0,0,.001,0,0],AD=1e7,h0=1.35,ns={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},zr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xD="pdfjs_internal_editor_",kt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},jt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},SD={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},sn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},kp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Pe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Uc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Gm={ERRORS:0,WARNINGS:1,INFOS:5},Fs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},bD={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Wm=Gm.WARNINGS;function ED(o){Number.isInteger(o)&&(Wm=o)}function _D(){return Wm}function qm(o){Wm>=Gm.INFOS&&console.log(`Info: ${o}`)}function Pt(o){Wm>=Gm.WARNINGS&&console.log(`Warning: ${o}`)}function Qt(o){throw new Error(o)}function _e(o,t){o||Qt(t)}function CD(o){switch(o==null?void 0:o.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function TD(o,t=null,e=null){if(!o)return null;try{if(e&&typeof o=="string"){if(e.addDefaultProtocol&&o.startsWith("www.")){const i=o.match(/\./g);(i==null?void 0:i.length)>=2&&(o=`http://${o}`)}if(e.tryConvertEncoding)try{o=LD(o)}catch{}}const n=t?new URL(o,t):new URL(o);if(CD(n))return n}catch{}return null}function Nt(o,t,e,n=!1){return Object.defineProperty(o,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Eo=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class wb extends Eo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class d0 extends Eo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class O0 extends Eo{constructor(t){super(t,"InvalidPDFException")}}class Eh extends Eo{constructor(t){super(t,"MissingPDFException")}}class hm extends Eo{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class kD extends Eo{constructor(t){super(t,"FormatError")}}class Ao extends Eo{constructor(t){super(t,"AbortException")}}function v_(o){(typeof o!="object"||(o==null?void 0:o.length)===void 0)&&Qt("Invalid argument for bytesToString");const t=o.length,e=8192;if(t<e)return String.fromCharCode.apply(null,o);const n=[];for(let i=0;i<t;i+=e){const a=Math.min(i+e,t),l=o.subarray(i,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Xm(o){typeof o!="string"&&Qt("Invalid argument for stringToBytes");const t=o.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=o.charCodeAt(n)&255;return e}function PD(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function Iw(o){const t=Object.create(null);for(const[e,n]of o)t[e]=n;return t}function MD(){const o=new Uint8Array(4);return o[0]=1,new Uint32Array(o.buffer,0,1)[0]===1}function RD(){try{return new Function(""),!0}catch{return!1}}class En{static get isLittleEndian(){return Nt(this,"isLittleEndian",MD())}static get isEvalSupported(){return Nt(this,"isEvalSupported",RD())}static get isOffscreenCanvasSupported(){return Nt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Nt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Nt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Nt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Nt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const f0=Array.from(Array(256).keys(),o=>o.toString(16).padStart(2,"0"));var fr,Pp,j0;class mt{static makeHexColor(t,e,n){return`#${f0[t]}${f0[e]}${f0[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[n,i]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,a=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[i,a]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),a=this.applyTransform([t[0],t[3]],e),l=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],a[0],l[0]),Math.min(n[1],i[1],a[1],l[1]),Math.max(n[0],i[0],a[0],l[0]),Math.max(n[1],i[1],a[1],l[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],l=t[2]*e[1]+t[3]*e[3],u=(n+l)/2,d=Math.sqrt((n+l)**2-4*(n*l-a*i))/2,f=u+d||1,m=u-d||1;return[Math.sqrt(f),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>l?null:[n,a,i,l]}static bezierBoundingBox(t,e,n,i,a,l,u,d,f){return f?(f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d)):f=[Math.min(t,u),Math.min(e,d),Math.max(t,u),Math.max(e,d)],C(this,fr,j0).call(this,t,n,a,u,e,i,l,d,3*(-t+3*(n-a)+u),6*(t-2*n+a),3*(n-t),f),C(this,fr,j0).call(this,t,n,a,u,e,i,l,d,3*(-e+3*(i-l)+d),6*(e-2*i+l),3*(i-e),f),f}}fr=new WeakSet,Pp=function(t,e,n,i,a,l,u,d,f,m){if(f<=0||f>=1)return;const g=1-f,v=f*f,A=v*f,S=g*(g*(g*t+3*f*e)+3*v*n)+A*i,b=g*(g*(g*a+3*f*l)+3*v*u)+A*d;m[0]=Math.min(m[0],S),m[1]=Math.min(m[1],b),m[2]=Math.max(m[2],S),m[3]=Math.max(m[3],b)},j0=function(t,e,n,i,a,l,u,d,f,m,g,v){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&C(this,fr,Pp).call(this,t,e,n,i,a,l,u,d,-g/m,v);return}const A=m**2-4*g*f;if(A<0)return;const S=Math.sqrt(A),b=2*f;C(this,fr,Pp).call(this,t,e,n,i,a,l,u,d,(-m+S)/b,v),C(this,fr,Pp).call(this,t,e,n,i,a,l,u,d,(-m-S)/b,v)},_(mt,fr);function LD(o){return decodeURIComponent(escape(o))}let p0=null,Ab=null;function DD(o){return p0||(p0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ab=new Map([["","t"]])),o.replaceAll(p0,(t,e,n)=>e?e.normalize("NFKC"):Ab.get(n))}function ID(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const o=new Uint8Array(32);return crypto.getRandomValues(o),v_(o)}const Nw="pdfjs_internal_id_";function ND(o){return Uint8Array.prototype.toBase64?o.toBase64():btoa(v_(o))}typeof Promise.try!="function"&&(Promise.try=function(o,...t){return new Promise(e=>{e(o(...t))})});const Ii="http://www.w3.org/2000/svg",$o=class $o{};wt($o,"CSS",96),wt($o,"PDF",72),wt($o,"PDF_TO_CSS_UNITS",$o.CSS/$o.PDF);let xo=$o;async function Km(o,t="text"){if(Qc(o,document.baseURI)){const e=await fetch(o);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",o,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class nf{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:a=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=l,n*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let m,g,v,A;switch(i%=360,i<0&&(i+=360),i){case 180:m=-1,g=0,v=0,A=1;break;case 90:m=0,g=1,v=1,A=0;break;case 270:m=0,g=-1,v=-1,A=0;break;case 0:m=1,g=0,v=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,A=-A);let S,b,T,k;m===0?(S=Math.abs(f-t[1])*n+a,b=Math.abs(d-t[0])*n+l,T=(t[3]-t[1])*n,k=(t[2]-t[0])*n):(S=Math.abs(d-t[0])*n+a,b=Math.abs(f-t[1])*n+l,T=(t[2]-t[0])*n,k=(t[3]-t[1])*n),this.transform=[m*n,g*n,v*n,A*n,S-m*n*d-v*n*f,b-g*n*d-A*n*f],this.width=T,this.height=k}get rawDims(){const{userUnit:t,viewBox:e}=this,n=e.map(i=>i*t);return Nt(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new nf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(t,e){return mt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=mt.applyTransform([t[0],t[1]],this.transform),n=mt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return mt.applyInverseTransform([t,e],this.transform)}}class Fw extends Eo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Ym(o){const t=o.length;let e=0;for(;e<t&&o[e].trim()==="";)e++;return o.substring(e,e+5).toLowerCase()==="data:"}function Ow(o){return typeof o=="string"&&/\.pdf$/i.test(o)}function FD(o){return[o]=o.split(/[#?]/,1),o.substring(o.lastIndexOf("/")+1)}function OD(o,t="document.pdf"){if(typeof o!="string")return t;if(Ym(o))return Pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(o);let a=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(a&&(a=a[0],a.includes("%")))try{a=n.exec(decodeURIComponent(a))[0]}catch{}return a||t}class xb{constructor(){wt(this,"started",Object.create(null));wt(this,"times",[])}time(t){t in this.started&&Pt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Pt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-i}ms
`);return t.join("")}}function Qc(o,t){try{const{protocol:e}=t?new URL(o,t):new URL(o);return e==="http:"||e==="https:"}catch{return!1}}function Ys(o){o.preventDefault()}function is(o){o.preventDefault(),o.stopPropagation()}var Th;class jw{static toDateObject(t){if(!t||typeof t!="string")return null;c(this,Th)||x(this,Th,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,Th).exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(l+=m,u+=g):f==="+"&&(l-=m,u-=g),new Date(Date.UTC(n,i,a,l,u,d))}}Th=new WeakMap,_(jw,Th);function jD(o,{scale:t=1,rotation:e=0}){const{width:n,height:i}=o.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new nf({viewBox:a,userUnit:1,scale:t,rotation:e})}function zw(o){if(o.startsWith("#")){const t=parseInt(o.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return o.startsWith("rgb(")?o.slice(4,-1).split(",").map(t=>parseInt(t)):o.startsWith("rgba(")?o.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Pt(`Not a valid color format: "${o}"`),[0,0,0])}function zD(o){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of o.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;o.set(e,zw(n))}t.remove()}function oe(o){const{a:t,b:e,c:n,d:i,e:a,f:l}=o.getTransform();return[t,e,n,i,a,l]}function si(o){const{a:t,b:e,c:n,d:i,e:a,f:l}=o.getTransform().invertSelf();return[t,e,n,i,a,l]}function Za(o,t,e=!1,n=!0){if(t instanceof nf){const{pageWidth:i,pageHeight:a}=t.rawDims,{style:l}=o,u=En.isCSSRoundSupported,d=`var(--scale-factor) * ${i}px`,f=`var(--scale-factor) * ${a}px`,m=u?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,g=u?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=m,l.height=g):(l.width=g,l.height=m)}n&&o.setAttribute("data-main-rotation",t.rotation)}class z0{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Vr,qo,Os,Xo,kh,Ph,wm,w_,_n,A_,x_,Mp,S_,B0;const Oi=class Oi{constructor(t){_(this,_n);_(this,Vr,null);_(this,qo,null);_(this,Os);_(this,Xo,null);_(this,kh,null);x(this,Os,t),c(Oi,Ph)||x(Oi,Ph,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=x(this,Vr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,Os)._uiManager._signal;t.addEventListener("contextmenu",Ys,{signal:e}),t.addEventListener("pointerdown",C(Oi,wm,w_),{signal:e});const n=x(this,Xo,document.createElement("div"));n.className="buttons",t.append(n);const i=c(this,Os).toolbarPosition;if(i){const{style:a}=t,l=c(this,Os)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return C(this,_n,S_).call(this),t}get div(){return c(this,Vr)}hide(){var t;c(this,Vr).classList.add("hidden"),(t=c(this,qo))==null||t.hideDropdown()}show(){var t;c(this,Vr).classList.remove("hidden"),(t=c(this,kh))==null||t.shown()}async addAltText(t){const e=await t.render();C(this,_n,Mp).call(this,e),c(this,Xo).prepend(e,c(this,_n,B0)),x(this,kh,t)}addColorPicker(t){x(this,qo,t);const e=t.renderButton();C(this,_n,Mp).call(this,e),c(this,Xo).prepend(e,c(this,_n,B0))}remove(){var t;c(this,Vr).remove(),(t=c(this,qo))==null||t.destroy(),x(this,qo,null)}};Vr=new WeakMap,qo=new WeakMap,Os=new WeakMap,Xo=new WeakMap,kh=new WeakMap,Ph=new WeakMap,wm=new WeakSet,w_=function(t){t.stopPropagation()},_n=new WeakSet,A_=function(t){c(this,Os)._focusEventsAllowed=!1,is(t)},x_=function(t){c(this,Os)._focusEventsAllowed=!0,is(t)},Mp=function(t){const e=c(this,Os)._uiManager._signal;t.addEventListener("focusin",C(this,_n,A_).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",C(this,_n,x_).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ys,{signal:e})},S_=function(){const{editorType:t,_uiManager:e}=c(this,Os),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",c(Oi,Ph)[t]),C(this,_n,Mp).call(this,n),n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),c(this,Xo).append(n)},B0=function(){const t=document.createElement("div");return t.className="divider",t},_(Oi,wm),_(Oi,Ph,null);let V0=Oi;var Mh,Ko,Yo,So,b_,E_,__;class VD{constructor(t){_(this,So);_(this,Mh,null);_(this,Ko,null);_(this,Yo);x(this,Yo,t)}show(t,e,n){const[i,a]=C(this,So,E_).call(this,e,n),{style:l}=c(this,Ko)||x(this,Ko,C(this,So,b_).call(this));t.append(c(this,Ko)),l.insetInlineEnd=`${100*i}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Ko).remove()}}Mh=new WeakMap,Ko=new WeakMap,Yo=new WeakMap,So=new WeakSet,b_=function(){const t=x(this,Ko,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ys,{signal:c(this,Yo)._signal});const e=x(this,Mh,document.createElement("div"));return e.className="buttons",t.append(e),C(this,So,__).call(this),t},E_=function(t,e){let n=0,i=0;for(const a of t){const l=a.y+a.height;if(l<n)continue;const u=a.x+(e?a.width:0);if(l>n){i=u,n=l;continue}e?u>i&&(i=u):u<i&&(i=u)}return[e?1-i:i,n]},__=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=c(this,Yo)._signal;t.addEventListener("contextmenu",Ys,{signal:n}),t.addEventListener("click",()=>{c(this,Yo).highlightSelection("floating_button")},{signal:n}),c(this,Mh).append(t)};function dm(o,t,e){for(const n of e)t.addEventListener(n,o[n].bind(o))}var Am;class BD{constructor(){_(this,Am,0)}get id(){return`${xD}${vn(this,Am)._++}`}}Am=new WeakMap;var Wl,Rh,an,ql,Rp;const $w=class $w{constructor(){_(this,ql);_(this,Wl,ID());_(this,Rh,0);_(this,an,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Nt(this,"_isSVGFittingCanvas",a)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:a}=t;return C(this,ql,Rp).call(this,`${e}_${n}_${i}_${a}`,t)}async getFromUrl(t){return C(this,ql,Rp).call(this,t,t)}async getFromBlob(t,e){const n=await e;return C(this,ql,Rp).call(this,t,n)}async getFromId(t){c(this,an)||x(this,an,new Map);const e=c(this,an).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,an)||x(this,an,new Map);let n=c(this,an).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${c(this,Wl)}_${vn(this,Rh)._++}`,refCounter:1,isSvg:!1},c(this,an).set(t,n),c(this,an).set(n.id,n),n}getSvgUrl(t){const e=c(this,an).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;c(this,an)||x(this,an,new Map);const e=c(this,an).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=a.convertToBlob()}(i=n.close)==null||i.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,Wl)}_`)}};Wl=new WeakMap,Rh=new WeakMap,an=new WeakMap,ql=new WeakSet,Rp=async function(t,e){c(this,an)||x(this,an,new Map);let n=c(this,an).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,Wl)}_${vn(this,Rh)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await Km(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const a=$w._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((f,m)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},l.onload=async()=>{const g=n.svgUrl=l.result;u.src=await a?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=l.onerror=m});l.readAsDataURL(i),await d}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Pt(i),n=null}return c(this,an).set(t,n),n&&c(this,an).set(n.id,n),n};let H0=$w;var we,Br,Lh,ce;class HD{constructor(t=128){_(this,we,[]);_(this,Br,!1);_(this,Lh);_(this,ce,-1);x(this,Lh,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(i&&t(),c(this,Br))return;const d={cmd:t,undo:e,post:n,type:a};if(c(this,ce)===-1){c(this,we).length>0&&(c(this,we).length=0),x(this,ce,0),c(this,we).push(d);return}if(l&&c(this,we)[c(this,ce)].type===a){u&&(d.undo=c(this,we)[c(this,ce)].undo),c(this,we)[c(this,ce)]=d;return}const f=c(this,ce)+1;f===c(this,Lh)?c(this,we).splice(0,1):(x(this,ce,f),f<c(this,we).length&&c(this,we).splice(f)),c(this,we).push(d)}undo(){if(c(this,ce)===-1)return;x(this,Br,!0);const{undo:t,post:e}=c(this,we)[c(this,ce)];t(),e==null||e(),x(this,Br,!1),x(this,ce,c(this,ce)-1)}redo(){if(c(this,ce)<c(this,we).length-1){x(this,ce,c(this,ce)+1),x(this,Br,!0);const{cmd:t,post:e}=c(this,we)[c(this,ce)];t(),e==null||e(),x(this,Br,!1)}}hasSomethingToUndo(){return c(this,ce)!==-1}hasSomethingToRedo(){return c(this,ce)<c(this,we).length-1}cleanType(t){if(c(this,ce)!==-1){for(let e=c(this,ce);e>=0;e--)if(c(this,we)[e].type!==t){c(this,we).splice(e+1,c(this,ce)-e),x(this,ce,e);return}c(this,we).length=0,x(this,ce,-1)}}destroy(){x(this,we,null)}}we=new WeakMap,Br=new WeakMap,Lh=new WeakMap,ce=new WeakMap;var xm,C_;class sf{constructor(t){_(this,xm);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=En.platform;for(const[n,i,a={}]of t)for(const l of n){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:i,options:a}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:i,options:a}),this.allKeys.add(l.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(C(this,xm,C_).call(this,e));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:l=[],checker:u=null}}=n;u&&!u(t,e)||(i.bind(t,...l,e)(),a||is(e))}}xm=new WeakSet,C_=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Sm=class Sm{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return zD(t),Nt(this,"_colors",t)}convert(t){const e=zw(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((a,l)=>a===e[l]))return Sm._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?mt.makeHexColor(...e):t}};wt(Sm,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let U0=Sm;var Xl,$n,Re,We,Kl,zi,Yl,ys,Hr,Qo,Ql,Zo,oi,js,Jo,Dh,Ih,Zl,Nh,ai,Ur,Jl,$r,li,bm,Gr,Fh,Wr,ta,Oh,jh,je,Gt,Vi,ea,zh,Vh,qr,ui,Bi,Bh,vs,tt,Lp,$0,T_,k_,Dp,P_,M_,R_,G0,L_,W0,q0,D_,wn,Ni,I_,N_,X0,F_,Zc,K0;const Bl=class Bl{constructor(t,e,n,i,a,l,u,d,f,m,g,v,A){_(this,tt);_(this,Xl,new AbortController);_(this,$n,null);_(this,Re,new Map);_(this,We,new Map);_(this,Kl,null);_(this,zi,null);_(this,Yl,null);_(this,ys,new HD);_(this,Hr,null);_(this,Qo,null);_(this,Ql,0);_(this,Zo,new Set);_(this,oi,null);_(this,js,null);_(this,Jo,new Set);wt(this,"_editorUndoBar",null);_(this,Dh,!1);_(this,Ih,!1);_(this,Zl,!1);_(this,Nh,null);_(this,ai,null);_(this,Ur,null);_(this,Jl,null);_(this,$r,!1);_(this,li,null);_(this,bm,new BD);_(this,Gr,!1);_(this,Fh,!1);_(this,Wr,null);_(this,ta,null);_(this,Oh,null);_(this,jh,null);_(this,je,kt.NONE);_(this,Gt,new Set);_(this,Vi,null);_(this,ea,null);_(this,zh,null);_(this,Vh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,qr,[0,0]);_(this,ui,null);_(this,Bi,null);_(this,Bh,null);_(this,vs,null);const S=this._signal=c(this,Xl).signal;x(this,Bi,t),x(this,Bh,e),x(this,Kl,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:S}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),i._on("setpreference",this.onSetPreference.bind(this),{signal:S}),i._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:S}),C(this,tt,P_).call(this),C(this,tt,D_).call(this),C(this,tt,G0).call(this),x(this,zi,a.annotationStorage),x(this,Nh,a.filterFactory),x(this,ea,l),x(this,Jl,u||null),x(this,Dh,d),x(this,Ih,f),x(this,Zl,m),x(this,jh,g||null),this.viewParameters={realScale:xo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=A!==!1}static get _keyboardManager(){const t=Bl.prototype,e=l=>c(l,Bi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Nt(this,"_keyboardManager",new sf([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&c(l,Bi).contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&c(l,Bi).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}destroy(){var t,e,n,i,a;(t=c(this,vs))==null||t.resolve(),x(this,vs,null),(e=c(this,Xl))==null||e.abort(),x(this,Xl,null),this._signal=null;for(const l of c(this,We).values())l.destroy();c(this,We).clear(),c(this,Re).clear(),c(this,Jo).clear(),x(this,$n,null),c(this,Gt).clear(),c(this,ys).destroy(),(n=c(this,Kl))==null||n.destroy(),(i=c(this,li))==null||i.hide(),x(this,li,null),c(this,ai)&&(clearTimeout(c(this,ai)),x(this,ai,null)),c(this,ui)&&(clearTimeout(c(this,ui)),x(this,ui,null)),(a=this._editorUndoBar)==null||a.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,jh)}get useNewAltTextFlow(){return c(this,Ih)}get useNewAltTextWhenAddingImage(){return c(this,Zl)}get hcmFilter(){return Nt(this,"hcmFilter",c(this,ea)?c(this,Nh).addHCMFilter(c(this,ea).foreground,c(this,ea).background):"none")}get direction(){return Nt(this,"direction",getComputedStyle(c(this,Bi)).direction)}get highlightColors(){return Nt(this,"highlightColors",c(this,Jl)?new Map(c(this,Jl).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Nt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,Qo,t)}setMainHighlightColorPicker(t){x(this,Oh,t)}editAltText(t,e=!1){var n;(n=c(this,Kl))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":x(this,Zl,e);break}}onPageChanging({pageNumber:t}){x(this,Ql,t-1)}focusMainContainer(){c(this,Bi).focus()}findParent(t,e){for(const n of c(this,We).values()){const{x:i,y:a,width:l,height:u}=n.div.getBoundingClientRect();if(t>=i&&t<=i+l&&e>=a&&e<=a+u)return n}return null}disableUserSelect(t=!1){c(this,Bh).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,Jo).add(t)}removeShouldRescale(t){c(this,Jo).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*xo.PDF_TO_CSS_UNITS;for(const n of c(this,Jo))n.onScaleChanging();(e=c(this,Qo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:l}=e,u=e.toString(),f=C(this,tt,Lp).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;e.empty();const g=C(this,tt,$0).call(this,f),v=c(this,je)===kt.NONE,A=()=>{g==null||g.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:l,text:u}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(kt.HIGHLIGHT,A);return}A()}addToAnnotationStorage(t){!t.isEmpty()&&c(this,zi)&&!c(this,zi).has(t.id)&&c(this,zi).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,c(this,$r)&&(x(this,$r,!1),C(this,tt,Dp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,Gt))if(e.div.contains(t)){x(this,ta,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,ta))return;const[t,e]=c(this,ta);x(this,ta,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){C(this,tt,G0).call(this),C(this,tt,W0).call(this)}removeEditListeners(){C(this,tt,L_).call(this),C(this,tt,q0).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of c(this,js))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of c(this,js))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=c(this,$n))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of c(this,Gt)){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const l of c(this,js))if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Pt(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const d of n){const f=await i.deserialize(d);if(!f)return;a.push(f)}const l=()=>{for(const d of a)C(this,tt,X0).call(this,d);C(this,tt,K0).call(this,a)},u=()=>{for(const d of a)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(a){Pt(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,je)!==kt.NONE&&!this.isEditorHandlingKeyboard&&Bl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,$r)&&(x(this,$r,!1),C(this,tt,Dp).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(C(this,tt,M_).call(this),C(this,tt,W0).call(this),C(this,tt,wn).call(this,{isEditing:c(this,je)!==kt.NONE,isEmpty:C(this,tt,Zc).call(this),hasSomethingToUndo:c(this,ys).hasSomethingToUndo(),hasSomethingToRedo:c(this,ys).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,tt,R_).call(this),C(this,tt,q0).call(this),C(this,tt,wn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,js)){x(this,js,t);for(const e of c(this,js))C(this,tt,Ni).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,bm).id}get currentLayer(){return c(this,We).get(c(this,Ql))}getLayer(t){return c(this,We).get(t)}get currentPageIndex(){return c(this,Ql)}addLayer(t){c(this,We).set(t.pageIndex,t),c(this,Gr)?t.enable():t.disable()}removeLayer(t){c(this,We).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var i;if(c(this,je)!==t&&!(c(this,vs)&&(await c(this,vs).promise,!c(this,vs)))){if(x(this,vs,Promise.withResolvers()),x(this,je,t),t===kt.NONE){this.setEditingState(!1),C(this,tt,N_).call(this),(i=this._editorUndoBar)==null||i.hide(),c(this,vs).resolve();return}this.setEditingState(!0),await C(this,tt,I_).call(this),this.unselectAll();for(const a of c(this,We).values())a.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),c(this,vs).resolve();return}for(const a of c(this,Re).values())a.annotationElementId===e?(this.setSelected(a),a.enterInEditMode()):a.unselect();c(this,vs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==c(this,je)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(c(this,js)){switch(t){case jt.CREATE:this.currentLayer.addNewEditor();return;case jt.HIGHLIGHT_DEFAULT_COLOR:(n=c(this,Oh))==null||n.updateColor(e);break;case jt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,zh)||x(this,zh,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of c(this,Gt))i.updateParams(t,e);for(const i of c(this,js))i.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var a;for(const l of c(this,Re).values())l.editorType===t&&l.show(e);(((a=c(this,zh))==null?void 0:a.get(jt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&C(this,tt,Ni).call(this,[[jt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,Fh)!==t){x(this,Fh,t);for(const e of c(this,We).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of c(this,Re).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return c(this,Re).get(t)}addEditor(t){c(this,Re).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(c(this,ai)&&clearTimeout(c(this,ai)),x(this,ai,setTimeout(()=>{this.focusMainContainer(),x(this,ai,null)},0))),c(this,Re).delete(t.id),this.unselect(t),(!t.annotationElementId||!c(this,Zo).has(t.annotationElementId))&&((e=c(this,zi))==null||e.remove(t.id))}addDeletedAnnotationElement(t){c(this,Zo).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,Zo).has(t)}removeDeletedAnnotationElement(t){c(this,Zo).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,$n)!==t&&(x(this,$n,t),t&&C(this,tt,Ni).call(this,t.propertiesToUpdate))}updateUI(t){c(this,tt,F_)===t&&C(this,tt,Ni).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){C(this,tt,Ni).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,Gt).has(t)){c(this,Gt).delete(t),t.unselect(),C(this,tt,wn).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Gt).add(t),t.select(),C(this,tt,Ni).call(this,t.propertiesToUpdate),C(this,tt,wn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=c(this,Qo))==null||e.commitOrRemove();for(const n of c(this,Gt))n!==t&&n.unselect();c(this,Gt).clear(),c(this,Gt).add(t),t.select(),C(this,tt,Ni).call(this,t.propertiesToUpdate),C(this,tt,wn).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,Gt).has(t)}get firstSelectedEditor(){return c(this,Gt).values().next().value}unselect(t){t.unselect(),c(this,Gt).delete(t),C(this,tt,wn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Gt).size!==0}get isEnterHandled(){return c(this,Gt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,ys).undo(),C(this,tt,wn).call(this,{hasSomethingToUndo:c(this,ys).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,tt,Zc).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,ys).redo(),C(this,tt,wn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,ys).hasSomethingToRedo(),isEmpty:C(this,tt,Zc).call(this)})}addCommands(t){c(this,ys).add(t),C(this,tt,wn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,tt,Zc).call(this)})}cleanUndoStack(t){c(this,ys).cleanType(t)}delete(){var a;this.commitOrRemove();const t=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...c(this,Gt)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(i,e.length===1?e[0].editorType:e.length);for(const u of e)u.remove()},i=()=>{for(const l of e)C(this,tt,X0).call(this,l)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=c(this,$n))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,$n)||this.hasSelection}selectAll(){for(const t of c(this,Gt))t.commit();C(this,tt,K0).call(this,c(this,Re).values())}unselectAll(){var t;if(!(c(this,$n)&&(c(this,$n).commitOrRemove(),c(this,je)!==kt.NONE))&&!((t=c(this,Qo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of c(this,Gt))e.unselect();c(this,Gt).clear(),C(this,tt,wn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,qr)[0]+=t,c(this,qr)[1]+=e;const[i,a]=c(this,qr),l=[...c(this,Gt)],u=1e3;c(this,ui)&&clearTimeout(c(this,ui)),x(this,ui,setTimeout(()=>{x(this,ui,null),c(this,qr)[0]=c(this,qr)[1]=0,this.addCommands({cmd:()=>{for(const d of l)c(this,Re).has(d.id)&&d.translateInPage(i,a)},undo:()=>{for(const d of l)c(this,Re).has(d.id)&&d.translateInPage(-i,-a)},mustExec:!1})},u));for(const d of l)d.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,oi,new Map);for(const t of c(this,Gt))c(this,oi).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,oi))return!1;this.disableUserSelect(!1);const t=c(this,oi);x(this,oi,null);let e=!1;for(const[{x:i,y:a,pageIndex:l},u]of t)u.newX=i,u.newY=a,u.newPageIndex=l,e||(e=i!==u.savedX||a!==u.savedY||l!==u.savedPageIndex);if(!e)return!1;const n=(i,a,l,u)=>{if(c(this,Re).has(i.id)){const d=c(this,We).get(u);d?i._setParentAndPosition(d,a,l):(i.pageIndex=u,i.x=a,i.y=l)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:l,newPageIndex:u}]of t)n(i,a,l,u)},undo:()=>{for(const[i,{savedX:a,savedY:l,savedPageIndex:u}]of t)n(i,a,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,oi))for(const n of c(this,oi).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,Gt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,$n)===t}getActive(){return c(this,$n)}getMode(){return c(this,je)}get imageManager(){return Nt(this,"imageManager",new H0)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,m,g,v)=>({x:(m-i)/l,y:1-(f+g-n)/a,width:v/l,height:g/a});break;case"180":u=(f,m,g,v)=>({x:1-(f+g-n)/a,y:1-(m+v-i)/l,width:g/a,height:v/l});break;case"270":u=(f,m,g,v)=>({x:1-(m+v-i)/l,y:(f-n)/a,width:v/l,height:g/a});break;default:u=(f,m,g,v)=>({x:(f-n)/a,y:(m-i)/l,width:g/a,height:v/l});break}const d=[];for(let f=0,m=e.rangeCount;f<m;f++){const g=e.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:A,width:S,height:b}of g.getClientRects())S===0||b===0||d.push(u(v,A,S,b))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,Yl)||x(this,Yl,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,Yl))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=c(this,Yl))==null?void 0:i.get(t.data.id);if(!e)return;const n=c(this,zi).getRawValue(e);n&&(c(this,je)===kt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};Xl=new WeakMap,$n=new WeakMap,Re=new WeakMap,We=new WeakMap,Kl=new WeakMap,zi=new WeakMap,Yl=new WeakMap,ys=new WeakMap,Hr=new WeakMap,Qo=new WeakMap,Ql=new WeakMap,Zo=new WeakMap,oi=new WeakMap,js=new WeakMap,Jo=new WeakMap,Dh=new WeakMap,Ih=new WeakMap,Zl=new WeakMap,Nh=new WeakMap,ai=new WeakMap,Ur=new WeakMap,Jl=new WeakMap,$r=new WeakMap,li=new WeakMap,bm=new WeakMap,Gr=new WeakMap,Fh=new WeakMap,Wr=new WeakMap,ta=new WeakMap,Oh=new WeakMap,jh=new WeakMap,je=new WeakMap,Gt=new WeakMap,Vi=new WeakMap,ea=new WeakMap,zh=new WeakMap,Vh=new WeakMap,qr=new WeakMap,ui=new WeakMap,Bi=new WeakMap,Bh=new WeakMap,vs=new WeakMap,tt=new WeakSet,Lp=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},$0=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of c(this,We).values())if(n.hasTextLayer(t))return n;return null},T_=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=C(this,tt,Lp).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(c(this,li)||x(this,li,new VD(this)),c(this,li).show(n,i,this.direction==="ltr"))},k_=function(){var a,l,u;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Vi)&&((a=c(this,li))==null||a.hide(),x(this,Vi,null),C(this,tt,wn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,Vi))return;const i=C(this,tt,Lp).call(this,t).closest(".textLayer");if(!i){c(this,Vi)&&((l=c(this,li))==null||l.hide(),x(this,Vi,null),C(this,tt,wn).call(this,{hasSelectedText:!1}));return}if((u=c(this,li))==null||u.hide(),x(this,Vi,e),C(this,tt,wn).call(this,{hasSelectedText:!0}),!(c(this,je)!==kt.HIGHLIGHT&&c(this,je)!==kt.NONE)&&(c(this,je)===kt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,$r,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=c(this,je)===kt.HIGHLIGHT?C(this,tt,$0).call(this,i):null;d==null||d.toggleDrawing();const f=new AbortController,m=this.combinedSignal(f),g=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),d==null||d.toggleDrawing(!0),v.type==="pointerup"&&C(this,tt,Dp).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("blur",g,{signal:m})}},Dp=function(t=""){c(this,je)===kt.HIGHLIGHT?this.highlightSelection(t):c(this,Dh)&&C(this,tt,T_).call(this)},P_=function(){document.addEventListener("selectionchange",C(this,tt,k_).bind(this),{signal:this._signal})},M_=function(){if(c(this,Ur))return;x(this,Ur,new AbortController);const t=this.combinedSignal(c(this,Ur));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},R_=function(){var t;(t=c(this,Ur))==null||t.abort(),x(this,Ur,null)},G0=function(){if(c(this,Wr))return;x(this,Wr,new AbortController);const t=this.combinedSignal(c(this,Wr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},L_=function(){var t;(t=c(this,Wr))==null||t.abort(),x(this,Wr,null)},W0=function(){if(c(this,Hr))return;x(this,Hr,new AbortController);const t=this.combinedSignal(c(this,Hr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},q0=function(){var t;(t=c(this,Hr))==null||t.abort(),x(this,Hr,null)},D_=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},wn=function(t){Object.entries(t).some(([n,i])=>c(this,Vh)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Vh),t)}),c(this,je)===kt.HIGHLIGHT&&t.hasSelectedEditor===!1&&C(this,tt,Ni).call(this,[[jt.HIGHLIGHT_FREE,!0]]))},Ni=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},I_=async function(){if(!c(this,Gr)){x(this,Gr,!0);const t=[];for(const e of c(this,We).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,Re).values())e.enable()}},N_=function(){if(this.unselectAll(),c(this,Gr)){x(this,Gr,!1);for(const t of c(this,We).values())t.disable();for(const t of c(this,Re).values())t.disable()}},X0=function(t){const e=c(this,We).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},F_=function(){let t=null;for(t of c(this,Gt));return t},Zc=function(){if(c(this,Re).size===0)return!0;if(c(this,Re).size===1)for(const t of c(this,Re).values())return t.isEmpty();return!1},K0=function(t){for(const e of c(this,Gt))e.unselect();c(this,Gt).clear();for(const e of t)e.isEmpty()||(c(this,Gt).add(e),e.select());C(this,tt,wn).call(this,{hasSelectedEditor:this.hasSelection})},wt(Bl,"TRANSLATE_SMALL",1),wt(Bl,"TRANSLATE_BIG",10);let Ja=Bl;var ze,ci,zs,tu,hi,Gn,eu,di,Fn,Hi,na,fi,Xr,Ks,Jc,Ip;const An=class An{constructor(t){_(this,Ks);_(this,ze,null);_(this,ci,!1);_(this,zs,null);_(this,tu,null);_(this,hi,null);_(this,Gn,null);_(this,eu,!1);_(this,di,null);_(this,Fn,null);_(this,Hi,null);_(this,na,null);_(this,fi,!1);x(this,Fn,t),x(this,fi,t._uiManager.useNewAltTextFlow),c(An,Xr)||x(An,Xr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){An._l10n??(An._l10n=t)}async render(){const t=x(this,zs,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=x(this,tu,document.createElement("span"));t.append(e),c(this,fi)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(An,Xr).missing),e.setAttribute("data-l10n-id",c(An,Xr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,Fn)._uiManager._signal;t.addEventListener("contextmenu",Ys,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),c(this,Fn)._uiManager.editAltText(c(this,Fn)),c(this,fi)&&c(this,Fn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Ks,Jc)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(x(this,eu,!0),i(a))},{signal:n}),await C(this,Ks,Ip).call(this),t}finish(){c(this,zs)&&(c(this,zs).focus({focusVisible:c(this,eu)}),x(this,eu,!1))}isEmpty(){return c(this,fi)?c(this,ze)===null:!c(this,ze)&&!c(this,ci)}hasData(){return c(this,fi)?c(this,ze)!==null||!!c(this,Hi):this.isEmpty()}get guessedText(){return c(this,Hi)}async setGuessedText(t){c(this,ze)===null&&(x(this,Hi,t),x(this,na,await An._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),C(this,Ks,Ip).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,fi)||c(this,ze)){(e=c(this,di))==null||e.remove(),x(this,di,null);return}if(!c(this,di)){const n=x(this,di,document.createElement("div"));n.className="noAltTextBadge",c(this,Fn).div.append(n)}c(this,di).classList.toggle("hidden",!t)}serialize(t){let e=c(this,ze);return!t&&c(this,Hi)===e&&(e=c(this,na)),{altText:e,decorative:c(this,ci),guessedText:c(this,Hi),textWithDisclaimer:c(this,na)}}get data(){return{altText:c(this,ze),decorative:c(this,ci)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(x(this,Hi,n),x(this,na,i)),!(c(this,ze)===t&&c(this,ci)===e)&&(a||(x(this,ze,t),x(this,ci,e)),C(this,Ks,Ip).call(this))}toggle(t=!1){c(this,zs)&&(!t&&c(this,Gn)&&(clearTimeout(c(this,Gn)),x(this,Gn,null)),c(this,zs).disabled=!t)}shown(){c(this,Fn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Ks,Jc)}})}destroy(){var t,e;(t=c(this,zs))==null||t.remove(),x(this,zs,null),x(this,tu,null),x(this,hi,null),(e=c(this,di))==null||e.remove(),x(this,di,null)}};ze=new WeakMap,ci=new WeakMap,zs=new WeakMap,tu=new WeakMap,hi=new WeakMap,Gn=new WeakMap,eu=new WeakMap,di=new WeakMap,Fn=new WeakMap,Hi=new WeakMap,na=new WeakMap,fi=new WeakMap,Xr=new WeakMap,Ks=new WeakSet,Jc=function(){return c(this,ze)&&"added"||c(this,ze)===null&&this.guessedText&&"review"||"missing"},Ip=async function(){var i,a,l;const t=c(this,zs);if(!t)return;if(c(this,fi)){if(t.classList.toggle("done",!!c(this,ze)),t.setAttribute("data-l10n-id",c(An,Xr)[c(this,Ks,Jc)]),(i=c(this,tu))==null||i.setAttribute("data-l10n-id",c(An,Xr)[`${c(this,Ks,Jc)}-label`]),!c(this,ze)){(a=c(this,hi))==null||a.remove();return}}else{if(!c(this,ze)&&!c(this,ci)){t.classList.remove("done"),(l=c(this,hi))==null||l.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,hi);if(!e){x(this,hi,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,Fn).id}`;const u=100,d=c(this,Fn)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(c(this,Gn)),x(this,Gn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,Gn,setTimeout(()=>{x(this,Gn,null),c(this,hi).classList.add("show"),c(this,Fn)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),t.addEventListener("mouseleave",()=>{var f;c(this,Gn)&&(clearTimeout(c(this,Gn)),x(this,Gn,null)),(f=c(this,hi))==null||f.classList.remove("show")},{signal:d})}c(this,ci)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,ze)),e.parentNode||t.append(e);const n=c(this,Fn).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},_(An,Xr,null),wt(An,"_l10n",null);let fm=An;var Hh,sa,Uh,$h,Gh,Wh,qh,nu,Ui,ia,Kr,gr,O_,j_,Y0;const Gw=class Gw{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:l=null,signal:u}){_(this,gr);_(this,Hh);_(this,sa,!1);_(this,Uh,null);_(this,$h);_(this,Gh);_(this,Wh);_(this,qh);_(this,nu);_(this,Ui,null);_(this,ia);_(this,Kr,null);x(this,Hh,t),x(this,Uh,n),x(this,$h,e),x(this,Gh,i),x(this,Wh,a),x(this,qh,l),x(this,ia,new AbortController),x(this,nu,AbortSignal.any([u,c(this,ia).signal])),t.addEventListener("touchstart",C(this,gr,O_).bind(this),{passive:!1,signal:c(this,nu)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Nt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=c(this,ia))==null||t.abort(),x(this,ia,null)}};Hh=new WeakMap,sa=new WeakMap,Uh=new WeakMap,$h=new WeakMap,Gh=new WeakMap,Wh=new WeakMap,qh=new WeakMap,nu=new WeakMap,Ui=new WeakMap,ia=new WeakMap,Kr=new WeakMap,gr=new WeakSet,O_=function(t){var i,a,l;if((i=c(this,$h))!=null&&i.call(this)||t.touches.length<2)return;if(!c(this,Kr)){x(this,Kr,new AbortController);const u=AbortSignal.any([c(this,nu),c(this,Kr).signal]),d=c(this,Hh),f={signal:u,passive:!1};d.addEventListener("touchmove",C(this,gr,j_).bind(this),f),d.addEventListener("touchend",C(this,gr,Y0).bind(this),f),d.addEventListener("touchcancel",C(this,gr,Y0).bind(this),f),(a=c(this,Gh))==null||a.call(this)}if(is(t),t.touches.length!==2||(l=c(this,Uh))!=null&&l.call(this)){x(this,Ui,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),x(this,Ui,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},j_=function(t){var R;if(!c(this,Ui)||t.touches.length!==2)return;let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:a}=e,{screenX:l,screenY:u}=n,d=c(this,Ui),{touch0X:f,touch0Y:m,touch1X:g,touch1Y:v}=d,A=g-f,S=v-m,b=l-i,T=u-a,k=Math.hypot(b,T)||1,M=Math.hypot(A,S)||1;if(!c(this,sa)&&Math.abs(M-k)<=Gw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=i,d.touch0Y=a,d.touch1X=l,d.touch1Y=u,t.preventDefault(),!c(this,sa)){x(this,sa,!0);return}const L=[(i+l)/2,(a+u)/2];(R=c(this,Wh))==null||R.call(this,L,M,k)},Y0=function(t){var e;c(this,Kr).abort(),x(this,Kr,null),(e=c(this,qh))==null||e.call(this),c(this,Ui)&&(t.preventDefault(),x(this,Ui,null),x(this,sa,!1))};let pm=Gw;var ra,Vs,ne,su,Yr,Xh,oa,qe,aa,$i,Qr,Kh,la,Wn,Yh,ua,Gi,pi,iu,ru,ws,ca,Qh,Em,At,Q0,Zh,Z0,Np,z_,V_,J0,Fp,tv,B_,H_,U_,ev,$_,nv,G_,W_,q_,sv,th;const Mt=class Mt{constructor(t){_(this,At);_(this,ra,null);_(this,Vs,null);_(this,ne,null);_(this,su,!1);_(this,Yr,null);_(this,Xh,"");_(this,oa,!1);_(this,qe,null);_(this,aa,null);_(this,$i,null);_(this,Qr,null);_(this,Kh,"");_(this,la,!1);_(this,Wn,null);_(this,Yh,!1);_(this,ua,!1);_(this,Gi,!1);_(this,pi,null);_(this,iu,0);_(this,ru,0);_(this,ws,null);_(this,ca,null);wt(this,"_editToolbar",null);wt(this,"_initialOptions",Object.create(null));wt(this,"_initialData",null);wt(this,"_isVisible",!0);wt(this,"_uiManager",null);wt(this,"_focusEventsAllowed",!0);_(this,Qh,!1);_(this,Em,Mt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Mt.prototype._resizeWithKeyboard,e=Ja.TRANSLATE_SMALL,n=Ja.TRANSLATE_BIG;return Nt(this,"_resizerKeyboardManager",new sf([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Mt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Nt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new UD({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Mt._l10n??(Mt._l10n=t),Mt._l10nResizer||(Mt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Mt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Mt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Qt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Qh)}set _isDraggable(t){var e;x(this,Qh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,Em)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):C(this,At,th).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,la)?x(this,la,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[a,l]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/a,this.y=(e+i)/l,this.fixAndSetPosition()}translate(t,e){C(this,At,Q0).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,Wn)||x(this,Wn,[this.x,this.y,this.width,this.height]),C(this,At,Q0).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){c(this,Wn)||x(this,Wn,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,a]}=this;if(this.x+=t/i,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,f]=this.getBaseTranslation();l+=d,u+=f;const{style:m}=n;m.left=`${(100*l).toFixed(2)}%`,m.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!c(this,Wn)&&(c(this,Wn)[0]!==this.x||c(this,Wn)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Wn)&&(c(this,Wn)[2]!==this.width||c(this,Wn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Mt,i=n/t,a=n/e;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:a,y:l,width:u,height:d}=this;if(u*=n,d*=i,a*=n,l*=i,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(n-u,a)),l=Math.max(0,Math.min(i-d,l));break;case 90:a=Math.max(0,Math.min(n-d,a)),l=Math.min(i,Math.max(u,l));break;case 180:a=Math.min(n,Math.max(u,a)),l=Math.min(i,Math.max(d,l));break;case 270:a=Math.min(n,Math.max(d,a)),l=Math.max(0,Math.min(i-u,l));break}this.x=a/=n,this.y=l/=i;const[f,m]=this.getBaseTranslation();a+=f,l+=m,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return C(n=Mt,Zh,Z0).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return C(n=Mt,Zh,Z0).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,i]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/n).toFixed(2)}%`,c(this,oa)||(a.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),a=!c(this,oa)&&e.endsWith("%");if(i&&a)return;const[l,u]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!c(this,oa)&&!a&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,ne))==null||t.finish()}async addEditToolbar(){return this._editToolbar||c(this,ua)?this._editToolbar:(this._editToolbar=new V0(this),this.div.append(this._editToolbar.render()),c(this,ne)&&await this._editToolbar.addAltText(c(this,ne)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=c(this,ne))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,ne)||(fm.initialize(Mt._l10n),x(this,ne,new fm(this)),c(this,ra)&&(c(this,ne).data=c(this,ra),x(this,ra,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=c(this,ne))==null?void 0:t.data}set altTextData(t){c(this,ne)&&(c(this,ne).data=t)}get guessedAltText(){var t;return(t=c(this,ne))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,ne))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,ne))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,ne)&&!c(this,ne).isEmpty()}hasAltTextData(){var t;return((t=c(this,ne))==null?void 0:t.hasData())??!1}render(){var a;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,su)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),C(this,At,nv).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),dm(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,ca)||x(this,ca,new pm({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,At,B_).bind(this),onPinching:C(this,At,H_).bind(this),onPinchEnd:C(this,At,U_).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),this.div}pointerdown(t){const{isMac:e}=En.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(x(this,la,!0),this._isDraggable){C(this,At,$_).call(this,t);return}C(this,At,ev).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,pi)&&clearTimeout(c(this,pi)),x(this,pi,setTimeout(()=>{var t;x(this,pi,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[a,l]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/i,m=e/i,g=this.x*a,v=this.y*l,A=this.width*a,S=this.height*l;switch(n){case 0:return[g+f+u,l-v-m-S+d,g+f+A+u,l-v-m+d];case 90:return[g+m+u,l-v+f+d,g+m+S+u,l-v+f+A+d];case 180:return[g-f-A+u,l-v+m+d,g-f+u,l-v+m+S+d];case 270:return[g-m-S+u,l-v-f-A+d,g-m+u,l-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,a,l]=t,u=a-n,d=l-i;switch(this.rotation){case 0:return[n,e-l,u,d];case 90:return[n,e-i,d,u];case 180:return[a,e-i,u,d];case 270:return[a,e-l,d,u];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){x(this,ua,!0)}disableEditMode(){x(this,ua,!1)}isInEditMode(){return c(this,ua)}shouldGetKeyboardEvents(){return c(this,Gi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return e<l&&i>0&&t<a&&n>0}rebuild(){C(this,At,nv).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Qt("An editor must be serializable")}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation,x(i,ra,t.accessibilityData);const[a,l]=i.pageDimensions,[u,d,f,m]=i.getRectInCurrentCoords(t.rect,l);return i.x=u/a,i.y=d/l,i.width=f/a,i.height=m/l,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=c(this,Qr))==null||t.abort(),x(this,Qr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,pi)&&(clearTimeout(c(this,pi)),x(this,pi,null)),C(this,At,th).call(this),this.removeEditToolbar(),c(this,ws)){for(const n of c(this,ws).values())clearTimeout(n);x(this,ws,null)}this.parent=null,(e=c(this,ca))==null||e.destroy(),x(this,ca,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,At,z_).call(this),c(this,qe).classList.remove("hidden"),dm(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,$i,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,qe).children;if(!c(this,Vs)){x(this,Vs,Array.from(e));const l=C(this,At,G_).bind(this),u=C(this,At,W_).bind(this),d=this._uiManager._signal;for(const f of c(this,Vs)){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",C(this,At,q_).bind(this,m),{signal:d}),f.setAttribute("data-l10n-id",Mt._l10nResizer[m])}}const n=c(this,Vs)[0];let i=0;for(const l of e){if(l===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(c(this,Vs).length/4);if(a!==i){if(a<i)for(let u=0;u<i-a;u++)c(this,qe).append(c(this,qe).firstChild);else if(a>i)for(let u=0;u<a-i;u++)c(this,qe).firstChild.before(c(this,qe).lastChild);let l=0;for(const u of e){const f=c(this,Vs)[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Mt._l10nResizer[f])}}C(this,At,sv).call(this,0),x(this,Gi,!0),c(this,qe).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,Gi)&&C(this,At,tv).call(this,c(this,Kh),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,At,th).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(e=this._editToolbar)==null||e.show(),(n=c(this,ne))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,i,a;(t=c(this,qe))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=c(this,ne))==null||a.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,Yh)}set isEditing(t){x(this,Yh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){x(this,oa,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,ws)||x(this,ws,new Map);const{action:n}=t;let i=c(this,ws).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),c(this,ws).delete(n),c(this,ws).size===0&&x(this,ws,null)},Mt._telemetryTimeout),c(this,ws).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,su,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,su,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};ra=new WeakMap,Vs=new WeakMap,ne=new WeakMap,su=new WeakMap,Yr=new WeakMap,Xh=new WeakMap,oa=new WeakMap,qe=new WeakMap,aa=new WeakMap,$i=new WeakMap,Qr=new WeakMap,Kh=new WeakMap,la=new WeakMap,Wn=new WeakMap,Yh=new WeakMap,ua=new WeakMap,Gi=new WeakMap,pi=new WeakMap,iu=new WeakMap,ru=new WeakMap,ws=new WeakMap,ca=new WeakMap,Qh=new WeakMap,Em=new WeakMap,At=new WeakSet,Q0=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Zh=new WeakSet,Z0=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Np=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},z_=function(){if(c(this,qe))return;x(this,qe,document.createElement("div")),c(this,qe).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");c(this,qe).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",C(this,At,V_).bind(this,n),{signal:e}),i.addEventListener("contextmenu",Ys,{signal:e}),i.tabIndex=-1}this.div.prepend(c(this,qe))},V_=function(t,e){var m;e.preventDefault();const{isMac:n}=En.platform;if(e.button!==0||e.ctrlKey&&n)return;(m=c(this,ne))==null||m.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,x(this,aa,[e.screenX,e.screenY]);const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,At,tv).bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",is,{passive:!1,signal:l}),window.addEventListener("contextmenu",Ys,{signal:l}),x(this,$i,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var g;a.abort(),this.parent.togglePointerEvents(!0),(g=c(this,ne))==null||g.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=u,this.div.style.cursor=d,C(this,At,Fp).call(this)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},J0=function(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e;const[a,l]=this.parentDimensions;this.setDims(a*n,l*i),this.fixAndSetPosition(),this._onResized()},Fp=function(){if(!c(this,$i))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=c(this,$i);x(this,$i,null);const a=this.x,l=this.y,u=this.width,d=this.height;a===t&&l===e&&u===n&&d===i||this.addCommands({cmd:C(this,At,J0).bind(this,a,l,u,d),undo:C(this,At,J0).bind(this,t,e,n,i),mustExec:!0})},tv=function(t,e){const[n,i]=this.parentDimensions,a=this.x,l=this.y,u=this.width,d=this.height,f=Mt.MIN_SIZE/n,m=Mt.MIN_SIZE/i,g=C(this,At,Np).call(this,this.rotation),v=(Z,K)=>[g[0]*Z+g[2]*K,g[1]*Z+g[3]*K],A=C(this,At,Np).call(this,360-this.rotation),S=(Z,K)=>[A[0]*Z+A[2]*K,A[1]*Z+A[3]*K];let b,T,k=!1,M=!1;switch(t){case"topLeft":k=!0,b=(Z,K)=>[0,0],T=(Z,K)=>[Z,K];break;case"topMiddle":b=(Z,K)=>[Z/2,0],T=(Z,K)=>[Z/2,K];break;case"topRight":k=!0,b=(Z,K)=>[Z,0],T=(Z,K)=>[0,K];break;case"middleRight":M=!0,b=(Z,K)=>[Z,K/2],T=(Z,K)=>[0,K/2];break;case"bottomRight":k=!0,b=(Z,K)=>[Z,K],T=(Z,K)=>[0,0];break;case"bottomMiddle":b=(Z,K)=>[Z/2,K],T=(Z,K)=>[Z/2,0];break;case"bottomLeft":k=!0,b=(Z,K)=>[0,K],T=(Z,K)=>[Z,0];break;case"middleLeft":M=!0,b=(Z,K)=>[0,K/2],T=(Z,K)=>[Z,K/2];break}const L=b(u,d),R=T(u,d);let I=v(...R);const z=Mt._round(a+I[0]),B=Mt._round(l+I[1]);let U=1,Q=1,ct,ot;if(e.fromKeyboard)({deltaX:ct,deltaY:ot}=e);else{const{screenX:Z,screenY:K}=e,[q,lt]=c(this,aa);[ct,ot]=this.screenToPageTranslation(Z-q,K-lt),c(this,aa)[0]=Z,c(this,aa)[1]=K}if([ct,ot]=S(ct/n,ot/i),k){const Z=Math.hypot(u,d);U=Q=Math.max(Math.min(Math.hypot(R[0]-L[0]-ct,R[1]-L[1]-ot)/Z,1/u,1/d),f/u,m/d)}else M?U=Math.max(f,Math.min(1,Math.abs(R[0]-L[0]-ct)))/u:Q=Math.max(m,Math.min(1,Math.abs(R[1]-L[1]-ot)))/d;const Rt=Mt._round(u*U),Ft=Mt._round(d*Q);I=v(...T(Rt,Ft));const _t=z-I[0],Kt=B-I[1];c(this,Wn)||x(this,Wn,[this.x,this.y,this.width,this.height]),this.width=Rt,this.height=Ft,this.x=_t,this.y=Kt,this.setDims(n*Rt,i*Ft),this.fixAndSetPosition(),this._onResizing()},B_=function(){var t;x(this,$i,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,ne))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},H_=function(t,e,n){let a=.7*(n/e)+1-.7;if(a===1)return;const l=C(this,At,Np).call(this,this.rotation),u=(z,B)=>[l[0]*z+l[2]*B,l[1]*z+l[3]*B],[d,f]=this.parentDimensions,m=this.x,g=this.y,v=this.width,A=this.height,S=Mt.MIN_SIZE/d,b=Mt.MIN_SIZE/f;a=Math.max(Math.min(a,1/v,1/A),S/v,b/A);const T=Mt._round(v*a),k=Mt._round(A*a);if(T===v&&k===A)return;c(this,Wn)||x(this,Wn,[m,g,v,A]);const M=u(v/2,A/2),L=Mt._round(m+M[0]),R=Mt._round(g+M[1]),I=u(T/2,k/2);this.x=L-I[0],this.y=R-I[1],this.width=T,this.height=k,this.setDims(d*T,f*k),this.fixAndSetPosition(),this._onResizing()},U_=function(){var t;(t=c(this,ne))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),C(this,At,Fp).call(this)},ev=function(t){const{isMac:e}=En.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},$_=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),l={capture:!0,passive:!1,signal:a},u=f=>{i.abort(),x(this,Yr,null),x(this,la,!1),this._uiManager.endDragSession()||C(this,At,ev).call(this,f),n&&this._onStopDragging()};e&&(x(this,iu,t.clientX),x(this,ru,t.clientY),x(this,Yr,t.pointerId),x(this,Xh,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._onStartDragging());const{clientX:m,clientY:g,pointerId:v}=f;if(v!==c(this,Yr)){is(f);return}const[A,S]=this.screenToPageTranslation(m-c(this,iu),g-c(this,ru));x(this,iu,m),x(this,ru,g),this._uiManager.dragSelectedEditors(A,S)},l),window.addEventListener("touchmove",is,l),window.addEventListener("pointerdown",f=>{f.pointerType===c(this,Xh)&&(c(this,ca)||f.isPrimary)&&u(f),is(f)},l));const d=f=>{if(!c(this,Yr)||c(this,Yr)===f.pointerId){u(f);return}is(f)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},nv=function(){if(c(this,Qr)||!this.div)return;x(this,Qr,new AbortController);const t=this._uiManager.combinedSignal(c(this,Qr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},G_=function(t){Mt._resizerKeyboardManager.exec(this,t)},W_=function(t){var e;c(this,Gi)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,qe)&&C(this,At,th).call(this)},q_=function(t){x(this,Kh,c(this,Gi)?t:"")},sv=function(t){if(c(this,Vs))for(const e of c(this,Vs))e.tabIndex=t},th=function(){x(this,Gi,!1),C(this,At,sv).call(this,-1),C(this,At,Fp).call(this)},_(Mt,Zh),wt(Mt,"_l10n",null),wt(Mt,"_l10nResizer",null),wt(Mt,"_borderLineWidth",-1),wt(Mt,"_colorManager",new U0),wt(Mt,"_zIndex",1),wt(Mt,"_telemetryTimeout",1e3);let fe=Mt;class UD extends fe{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Sb=3285377520,ms=4294901760,ii=65535;class X_{constructor(t){this.h1=t?t&4294967295:Sb,this.h2=t?t&4294967295:Sb}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let b=0,T=t.length;b<T;b++){const k=t.charCodeAt(b);k<=255?e[n++]=k:(e[n++]=k>>>8,e[n++]=k&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,l=new Uint32Array(e.buffer,0,i);let u=0,d=0,f=this.h1,m=this.h2;const g=3432918353,v=461845907,A=g&ii,S=v&ii;for(let b=0;b<i;b++)b&1?(u=l[b],u=u*g&ms|u*A&ii,u=u<<15|u>>>17,u=u*v&ms|u*S&ii,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[b],d=d*g&ms|d*A&ii,d=d<<15|d>>>17,d=d*v&ms|d*S&ii,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,a){case 3:u^=e[i*4+2]<<16;case 2:u^=e[i*4+1]<<8;case 1:u^=e[i*4],u=u*g&ms|u*A&ii,u=u<<15|u>>>17,u=u*v&ms|u*S&ii,i&1?f^=u:m^=u}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ms|t*36045&ii,e=e*4283543511&ms|((e<<16|t>>>16)*2950163797&ms)>>>16,t^=e>>>1,t=t*444984403&ms|t*60499&ii,e=e*3301882366&ms|((e<<16|t>>>16)*3120437893&ms)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const iv=Object.freeze({map:null,hash:"",transfer:void 0});var ha,da,Ve,_m,K_;class Vw{constructor(){_(this,_m);_(this,ha,!1);_(this,da,null);_(this,Ve,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=c(this,Ve).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return c(this,Ve).get(t)}remove(t){if(c(this,Ve).delete(t),c(this,Ve).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of c(this,Ve).values())if(e instanceof fe)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=c(this,Ve).get(t);let i=!1;if(n!==void 0)for(const[a,l]of Object.entries(e))n[a]!==l&&(i=!0,n[a]=l);else i=!0,c(this,Ve).set(t,e);i&&C(this,_m,K_).call(this),e instanceof fe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return c(this,Ve).has(t)}getAll(){return c(this,Ve).size>0?Iw(c(this,Ve)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return c(this,Ve).size}resetModified(){c(this,ha)&&(x(this,ha,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Y_(this)}get serializable(){if(c(this,Ve).size===0)return iv;const t=new Map,e=new X_,n=[],i=Object.create(null);let a=!1;for(const[l,u]of c(this,Ve)){const d=u instanceof fe?u.serialize(!1,i):u;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),a||(a=!!d.bitmap))}if(a)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:iv}get editorStats(){let t=null;const e=new Map;for(const n of c(this,Ve).values()){if(!(n instanceof fe))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:a}=i;e.has(a)||e.set(a,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const l=t[a]||(t[a]=new Map);for(const[u,d]of Object.entries(i)){if(u==="type")continue;let f=l.get(u);f||(f=new Map,l.set(u,f));const m=f.get(d)??0;f.set(d,m+1)}}for(const[n,i]of e)t[n]=i.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){x(this,da,null)}get modifiedIds(){if(c(this,da))return c(this,da);const t=[];for(const e of c(this,Ve).values())!(e instanceof fe)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return x(this,da,{ids:new Set(t),hash:t.join(",")})}}ha=new WeakMap,da=new WeakMap,Ve=new WeakMap,_m=new WeakSet,K_=function(){c(this,ha)||(x(this,ha,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Jh;class Y_ extends Vw{constructor(e){super();_(this,Jh);const{map:n,hash:i,transfer:a}=e.serializable,l=structuredClone(n,a?{transfer:a}:null);x(this,Jh,{map:l,hash:i,transfer:a})}get print(){Qt("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Jh)}get modifiedIds(){return Nt(this,"modifiedIds",{ids:new Set,hash:""})}}Jh=new WeakMap;var ou;class $D{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){_(this,ou,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,ou).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||c(this,ou).has(t.loadedName))){if(_e(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:a}=t,l=new FontFace(n,i,a);this.addNativeFontFace(l);try{await l.load(),c(this,ou).add(n),e==null||e(t)}catch{Pt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Qt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Pt(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Nt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(fn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Nt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(_e(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Nt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(R,I){return R.charCodeAt(I)<<24|R.charCodeAt(I+1)<<16|R.charCodeAt(I+2)<<8|R.charCodeAt(I+3)&255}function i(R,I,z,B){const U=R.substring(0,I),Q=R.substring(I+z);return U+B+Q}let a,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function m(R,I){if(++f>30){Pt("Load test font never loaded."),I();return}if(d.font="30px "+R,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(m.bind(null,R,I))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=i(v,976,g.length,g);const S=16,b=1482184792;let T=n(v,S);for(a=0,l=g.length-3;a<l;a+=4)T=T-b+n(g,a)|0;a<g.length&&(T=T-b+n(g+"XXX",a)|0),v=i(v,S,4,PD(T));const k=`url(data:font/opentype;base64,${btoa(v)});`,M=`@font-face {font-family:"${g}";src:${k}}`;this.insertRule(M);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const R of[t.loadedName,g]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=R,L.append(I)}this._document.body.append(L),m(g,()=>{L.remove(),e.complete()})}}ou=new WeakMap;class GD{constructor(t,{disableFontFace:e=!1,fontExtraProperties:n=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.disableFontFace=e===!0,this.fontExtraProperties=n===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${ND(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(l){Pt(`getPathGenerator - ignoring character: "${l}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=a}}const xp={DATA:1,ERROR:2},Ee={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function bb(){}function In(o){if(o instanceof Ao||o instanceof O0||o instanceof Eh||o instanceof wb||o instanceof hm||o instanceof d0)return o;switch(o instanceof Error||typeof o=="object"&&o!==null||Qt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new Ao(o.message);case"InvalidPDFException":return new O0(o.message);case"MissingPDFException":return new Eh(o.message);case"PasswordException":return new wb(o.message,o.code);case"UnexpectedResponseException":return new hm(o.message,o.status);case"UnknownErrorException":return new d0(o.message,o.details)}return new d0(o.message,o.toString())}var au,Cs,Q_,Z_,J_,Op;class eh{constructor(t,e,n){_(this,Cs);_(this,au,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",C(this,Cs,Q_).bind(this),{signal:c(this,au).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(t,e,n,i){const a=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:a,data:e,desiredSize:f.desiredSize},i),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[a].pullCall=m,d.postMessage({sourceName:l,targetName:u,stream:Ee.PULL,streamId:a,desiredSize:f.desiredSize}),m.promise},cancel:f=>{_e(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[a].cancelCall=m,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:Ee.CANCEL,streamId:a,reason:In(f)}),m.promise}},n)}destroy(){var t;(t=c(this,au))==null||t.abort(),x(this,au,null)}}au=new WeakMap,Cs=new WeakSet,Q_=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){C(this,Cs,J_).call(this,t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===xp.DATA)i.resolve(t.data);else if(t.callback===xp.ERROR)i.reject(In(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(l){a.postMessage({sourceName:n,targetName:i,callback:xp.DATA,callbackId:t.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:i,callback:xp.ERROR,callbackId:t.callbackId,reason:In(l)})});return}if(t.streamId){C(this,Cs,Z_).call(this,t);return}e(t.data)},Z_=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(f,m=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:Ee.ENQUEUE,streamId:e,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Ee.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){_e(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Ee.ERROR,streamId:e,reason:In(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Ee.START_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:Ee.START_COMPLETE,streamId:e,reason:In(f)})})},J_=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case Ee.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(In(t.reason));break;case Ee.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(In(t.reason));break;case Ee.PULL:if(!u){a.postMessage({sourceName:n,targetName:i,stream:Ee.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||bb).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Ee.PULL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:Ee.PULL_COMPLETE,streamId:e,reason:In(f)})});break;case Ee.ENQUEUE:if(_e(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case Ee.CLOSE:if(_e(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),C(this,Cs,Op).call(this,l,e);break;case Ee.ERROR:_e(l,"error should have stream controller"),l.controller.error(In(t.reason)),C(this,Cs,Op).call(this,l,e);break;case Ee.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(In(t.reason)),C(this,Cs,Op).call(this,l,e);break;case Ee.CANCEL:if(!u)break;const d=In(t.reason);Promise.try(u.onCancel||bb,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Ee.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:Ee.CANCEL_COMPLETE,streamId:e,reason:In(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Op=async function(t,e){var n,i,a;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(a=t.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[e]};var td;class tC{constructor({enableHWA:t=!1}){_(this,td,!1);x(this,td,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,td)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Qt("Abstract method `_createCanvas` called.")}}td=new WeakMap;class WD extends tC{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class eC{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class nC extends eC{async _fetch(t){const e=await Km(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Xm(e)}}class sC{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,a){return"none"}destroy(t=!1){}}var fa,lu,Wi,qi,ln,pa,ma,st,rn,nh,Pl,jp,Ml,iC,rv,Rl,sh,ih,ov,rh;class qD extends sC{constructor({docId:e,ownerDocument:n=globalThis.document}){super();_(this,st);_(this,fa);_(this,lu);_(this,Wi);_(this,qi);_(this,ln);_(this,pa);_(this,ma,0);x(this,qi,e),x(this,ln,n)}addFilter(e){if(!e)return"none";let n=c(this,st,rn).get(e);if(n)return n;const[i,a,l]=C(this,st,jp).call(this,e),u=e.length===1?i:`${i}${a}${l}`;if(n=c(this,st,rn).get(u),n)return c(this,st,rn).set(e,n),n;const d=`g_${c(this,qi)}_transfer_map_${vn(this,ma)._++}`,f=C(this,st,Ml).call(this,d);c(this,st,rn).set(e,f),c(this,st,rn).set(u,f);const m=C(this,st,Rl).call(this,d);return C(this,st,ih).call(this,i,a,l,m),f}addHCMFilter(e,n){var S;const i=`${e}-${n}`,a="base";let l=c(this,st,nh).get(a);if((l==null?void 0:l.key)===i||(l?((S=l.filter)==null||S.remove(),l.key=i,l.url="none",l.filter=null):(l={key:i,url:"none",filter:null},c(this,st,nh).set(a,l)),!e||!n))return l.url;const u=C(this,st,rh).call(this,e);e=mt.makeHexColor(...u);const d=C(this,st,rh).call(this,n);if(n=mt.makeHexColor(...d),c(this,st,Pl).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return l.url;const f=new Array(256);for(let b=0;b<=255;b++){const T=b/255;f[b]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const m=f.join(","),g=`g_${c(this,qi)}_hcm_filter`,v=l.filter=C(this,st,Rl).call(this,g);C(this,st,ih).call(this,m,m,m,v),C(this,st,rv).call(this,v);const A=(b,T)=>{const k=u[b]/255,M=d[b]/255,L=new Array(T+1);for(let R=0;R<=T;R++)L[R]=k+R/T*(M-k);return L.join(",")};return C(this,st,ih).call(this,A(0,5),A(1,5),A(2,5),v),l.url=C(this,st,Ml).call(this,g),l.url}addAlphaFilter(e){let n=c(this,st,rn).get(e);if(n)return n;const[i]=C(this,st,jp).call(this,[e]),a=`alpha_${i}`;if(n=c(this,st,rn).get(a),n)return c(this,st,rn).set(e,n),n;const l=`g_${c(this,qi)}_alpha_map_${vn(this,ma)._++}`,u=C(this,st,Ml).call(this,l);c(this,st,rn).set(e,u),c(this,st,rn).set(a,u);const d=C(this,st,Rl).call(this,l);return C(this,st,ov).call(this,i,d),u}addLuminosityFilter(e){let n=c(this,st,rn).get(e||"luminosity");if(n)return n;let i,a;if(e?([i]=C(this,st,jp).call(this,[e]),a=`luminosity_${i}`):a="luminosity",n=c(this,st,rn).get(a),n)return c(this,st,rn).set(e,n),n;const l=`g_${c(this,qi)}_luminosity_map_${vn(this,ma)._++}`,u=C(this,st,Ml).call(this,l);c(this,st,rn).set(e,u),c(this,st,rn).set(a,u);const d=C(this,st,Rl).call(this,l);return C(this,st,iC).call(this,d),e&&C(this,st,ov).call(this,i,d),u}addHighlightHCMFilter(e,n,i,a,l){var M;const u=`${n}-${i}-${a}-${l}`;let d=c(this,st,nh).get(e);if((d==null?void 0:d.key)===u||(d?((M=d.filter)==null||M.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},c(this,st,nh).set(e,d)),!n||!i))return d.url;const[f,m]=[n,i].map(C(this,st,rh).bind(this));let g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[A,S]=[a,l].map(C(this,st,rh).bind(this));v<g&&([g,v,A,S]=[v,g,S,A]),c(this,st,Pl).style.color="";const b=(L,R,I)=>{const z=new Array(256),B=(v-g)/I,U=L/255,Q=(R-L)/(255*I);let ct=0;for(let ot=0;ot<=I;ot++){const Rt=Math.round(g+ot*B),Ft=U+ot*Q;for(let _t=ct;_t<=Rt;_t++)z[_t]=Ft;ct=Rt+1}for(let ot=ct;ot<256;ot++)z[ot]=z[ct-1];return z.join(",")},T=`g_${c(this,qi)}_hcm_${e}_filter`,k=d.filter=C(this,st,Rl).call(this,T);return C(this,st,rv).call(this,k),C(this,st,ih).call(this,b(A[0],S[0],5),b(A[1],S[1],5),b(A[2],S[2],5),k),d.url=C(this,st,Ml).call(this,T),d.url}destroy(e=!1){var n,i,a,l;e&&((n=c(this,pa))!=null&&n.size)||((i=c(this,Wi))==null||i.parentNode.parentNode.remove(),x(this,Wi,null),(a=c(this,lu))==null||a.clear(),x(this,lu,null),(l=c(this,pa))==null||l.clear(),x(this,pa,null),x(this,ma,0))}}fa=new WeakMap,lu=new WeakMap,Wi=new WeakMap,qi=new WeakMap,ln=new WeakMap,pa=new WeakMap,ma=new WeakMap,st=new WeakSet,rn=function(){return c(this,lu)||x(this,lu,new Map)},nh=function(){return c(this,pa)||x(this,pa,new Map)},Pl=function(){if(!c(this,Wi)){const e=c(this,ln).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=c(this,ln).createElementNS(Ii,"svg");i.setAttribute("width",0),i.setAttribute("height",0),x(this,Wi,c(this,ln).createElementNS(Ii,"defs")),e.append(i),i.append(c(this,Wi)),c(this,ln).body.append(e)}return c(this,Wi)},jp=function(e){if(e.length===1){const f=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=f[v]/255;const g=m.join(",");return[g,g,g]}const[n,i,a]=e,l=new Array(256),u=new Array(256),d=new Array(256);for(let f=0;f<256;f++)l[f]=n[f]/255,u[f]=i[f]/255,d[f]=a[f]/255;return[l.join(","),u.join(","),d.join(",")]},Ml=function(e){if(c(this,fa)===void 0){x(this,fa,"");const n=c(this,ln).URL;n!==c(this,ln).baseURI&&(Ym(n)?Pt('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,fa,n.split("#",1)[0]))}return`url(${c(this,fa)}#${e})`},iC=function(e){const n=c(this,ln).createElementNS(Ii,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},rv=function(e){const n=c(this,ln).createElementNS(Ii,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Rl=function(e){const n=c(this,ln).createElementNS(Ii,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),c(this,st,Pl).append(n),n},sh=function(e,n,i){const a=c(this,ln).createElementNS(Ii,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),e.append(a)},ih=function(e,n,i,a){const l=c(this,ln).createElementNS(Ii,"feComponentTransfer");a.append(l),C(this,st,sh).call(this,l,"feFuncR",e),C(this,st,sh).call(this,l,"feFuncG",n),C(this,st,sh).call(this,l,"feFuncB",i)},ov=function(e,n){const i=c(this,ln).createElementNS(Ii,"feComponentTransfer");n.append(i),C(this,st,sh).call(this,i,"feFuncA",e)},rh=function(e){return c(this,st,Pl).style.color=e,zw(getComputedStyle(c(this,st,Pl)).getPropertyValue("color"))};class rC{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class oC extends rC{async _fetch(t){const e=await Km(t,"arraybuffer");return new Uint8Array(e)}}fn&&Pt("Please use the `legacy` build in Node.js environments.");async function aC(o){const e=await process.getBuiltinModule("fs").promises.readFile(o);return new Uint8Array(e)}class XD extends sC{}class KD extends tC{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class YD extends eC{async _fetch(t){return aC(t)}}class QD extends rC{async _fetch(t){return aC(t)}}const dn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function av(o,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),o.clip(i)}class Bw{getPattern(){Qt("Abstract method `getPattern` called.")}}class ZD extends Bw{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let a;if(i===dn.STROKE||i===dn.FILL){const l=e.current.getClippedPathBoundingBox(i,oe(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-l[0],-l[1]),n=mt.transform(n,[1,0,0,1,l[0],l[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),av(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),a=t.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);a.setTransform(g)}else av(t,this._bbox),a=this._createGradient(t);return a}}function m0(o,t,e,n,i,a,l,u){const d=t.coords,f=t.colors,m=o.data,g=o.width*4;let v;d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=a,a=l,l=v),d[n+1]>d[i+1]&&(v=n,n=i,i=v,v=l,l=u,u=v),d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=a,a=l,l=v);const A=(d[e]+t.offsetX)*t.scaleX,S=(d[e+1]+t.offsetY)*t.scaleY,b=(d[n]+t.offsetX)*t.scaleX,T=(d[n+1]+t.offsetY)*t.scaleY,k=(d[i]+t.offsetX)*t.scaleX,M=(d[i+1]+t.offsetY)*t.scaleY;if(S>=M)return;const L=f[a],R=f[a+1],I=f[a+2],z=f[l],B=f[l+1],U=f[l+2],Q=f[u],ct=f[u+1],ot=f[u+2],Rt=Math.round(S),Ft=Math.round(M);let _t,Kt,Z,K,q,lt,J,F;for(let $=Rt;$<=Ft;$++){if($<T){const vt=$<S?0:(S-$)/(S-T);_t=A-(A-b)*vt,Kt=L-(L-z)*vt,Z=R-(R-B)*vt,K=I-(I-U)*vt}else{let vt;$>M?vt=1:T===M?vt=0:vt=(T-$)/(T-M),_t=b-(b-k)*vt,Kt=z-(z-Q)*vt,Z=B-(B-ct)*vt,K=U-(U-ot)*vt}let ft;$<S?ft=0:$>M?ft=1:ft=(S-$)/(S-M),q=A-(A-k)*ft,lt=L-(L-Q)*ft,J=R-(R-ct)*ft,F=I-(I-ot)*ft;const Ct=Math.round(Math.min(_t,q)),Lt=Math.round(Math.max(_t,q));let St=g*$+Ct*4;for(let vt=Ct;vt<=Lt;vt++)ft=(_t-vt)/(_t-q),ft<0?ft=0:ft>1&&(ft=1),m[St++]=Kt-(Kt-lt)*ft|0,m[St++]=Z-(Z-J)*ft|0,m[St++]=K-(K-F)*ft|0,m[St++]=255}}function JD(o,t,e){const n=t.coords,i=t.colors;let a,l;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(n.length/u)-1,f=u-1;for(a=0;a<d;a++){let m=a*u;for(let g=0;g<f;g++,m++)m0(o,e,n[m],n[m+1],n[m+u],i[m],i[m+1],i[m+u]),m0(o,e,n[m+u+1],n[m+1],n[m+u],i[m+u+1],i[m+1],i[m+u])}break;case"triangles":for(a=0,l=n.length;a<l;a+=3)m0(o,e,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class tI extends Bw{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),A=f/g,S=m/v,b={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/S},T=g+4,k=v+4,M=n.getCanvas("mesh",T,k),L=M.context,R=L.createImageData(g,v);if(e){const z=R.data;for(let B=0,U=z.length;B<U;B+=4)z[B]=e[0],z[B+1]=e[1],z[B+2]=e[2],z[B+3]=255}for(const z of this._figures)JD(R,z,b);return L.putImageData(R,2,2),{canvas:M.canvas,offsetX:u-2*A,offsetY:d-2*S,scaleX:A,scaleY:S}}getPattern(t,e,n,i){av(t,this._bbox);let a;if(i===dn.SHADING)a=mt.singularValueDecompose2dScale(oe(t));else if(a=mt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const u=mt.singularValueDecompose2dScale(this.matrix);a=[a[0]*u[0],a[1]*u[1]]}const l=this._createMeshCanvas(a,i===dn.SHADING?null:this._background,e.cachedCanvases);return i!==dn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class eI extends Bw{getPattern(){return"hotpink"}}function nI(o){switch(o[0]){case"RadialAxial":return new ZD(o);case"Mesh":return new tI(o);case"Dummy":return new eI}throw new Error(`Unknown IR type: ${o[0]}`)}const Eb={COLORED:1,UNCOLORED:2},Cm=class Cm{constructor(t,e,n,i,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:i,tilingType:a,color:l,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),qm("TilingType: "+a);const m=e[0],g=e[1],v=e[2],A=e[3],S=v-m,b=A-g,T=mt.singularValueDecompose2dScale(this.matrix),k=mt.singularValueDecompose2dScale(this.baseTransform),M=T[0]*k[0],L=T[1]*k[1];let R=S,I=b,z=!1,B=!1;const U=Math.ceil(d*M),Q=Math.ceil(f*L),ct=Math.ceil(S*M),ot=Math.ceil(b*L);U>=ct?R=d:z=!0,Q>=ot?I=f:B=!0;const Rt=this.getSizeAndScale(R,this.ctx.canvas.width,M),Ft=this.getSizeAndScale(I,this.ctx.canvas.height,L),_t=t.cachedCanvases.getCanvas("pattern",Rt.size,Ft.size),Kt=_t.context,Z=u.createCanvasGraphics(Kt);if(Z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Z,i,l),Kt.translate(-Rt.scale*m,-Ft.scale*g),Z.transform(Rt.scale,0,0,Ft.scale,0,0),Kt.save(),this.clipBbox(Z,m,g,v,A),Z.baseTransform=oe(Z.ctx),Z.executeOperatorList(n),Z.endDrawing(),Kt.restore(),z||B){const K=_t.canvas;z&&(R=d),B&&(I=f);const q=this.getSizeAndScale(R,this.ctx.canvas.width,M),lt=this.getSizeAndScale(I,this.ctx.canvas.height,L),J=q.size,F=lt.size,$=t.cachedCanvases.getCanvas("pattern-workaround",J,F),ft=$.context,Ct=z?Math.floor(S/d):0,Lt=B?Math.floor(b/f):0;for(let St=0;St<=Ct;St++)for(let vt=0;vt<=Lt;vt++)ft.drawImage(K,J*St,F*vt,J,F,0,0,J,F);return{canvas:$.canvas,scaleX:q.scale,scaleY:lt.scale,offsetX:m,offsetY:g}}return{canvas:_t.canvas,scaleX:Rt.scale,scaleY:Ft.scale,offsetX:m,offsetY:g}}getSizeAndScale(t,e,n){const i=Math.max(Cm.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=i?a=i:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,i,a){const l=i-e,u=a-n;t.ctx.rect(e,n,l,u),t.current.updateRectMinMax(oe(t.ctx),[e,n,i,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,a=t.current;switch(e){case Eb.COLORED:const l=this.ctx;i.fillStyle=l.fillStyle,i.strokeStyle=l.strokeStyle,a.fillColor=l.fillStyle,a.strokeColor=l.strokeStyle;break;case Eb.UNCOLORED:const u=mt.makeHexColor(n[0],n[1],n[2]);i.fillStyle=u,i.strokeStyle=u,a.fillColor=u,a.strokeColor=u;break;default:throw new kD(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,i){let a=n;i!==dn.SHADING&&(a=mt.transform(a,e.baseTransform),this.matrix&&(a=mt.transform(a,this.matrix)));const l=this.createPatternCanvas(e);let u=new DOMMatrix(a);u=u.translate(l.offsetX,l.offsetY),u=u.scale(1/l.scaleX,1/l.scaleY);const d=t.createPattern(l.canvas,"repeat");return d.setTransform(u),d}};wt(Cm,"MAX_PATTERN_SIZE",3e3);let lv=Cm;function sI({src:o,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const u=En.isLittleEndian?4278190080:255,[d,f]=l?[a,u]:[u,a],m=n>>3,g=n&7,v=o.length;e=new Uint32Array(e.buffer);let A=0;for(let S=0;S<i;S++){for(const T=t+m;t<T;t++){const k=t<v?o[t]:255;e[A++]=k&128?f:d,e[A++]=k&64?f:d,e[A++]=k&32?f:d,e[A++]=k&16?f:d,e[A++]=k&8?f:d,e[A++]=k&4?f:d,e[A++]=k&2?f:d,e[A++]=k&1?f:d}if(g===0)continue;const b=t<v?o[t++]:255;for(let T=0;T<g;T++)e[A++]=b&1<<7-T?f:d}return{srcPos:t,destPos:A}}const _b=16,Cb=100,iI=15,Tb=10,kb=1e3,zn=16;function rI(o,t){if(o._removeMirroring)throw new Error("Context is already forwarding operations.");o.__originalSave=o.save,o.__originalRestore=o.restore,o.__originalRotate=o.rotate,o.__originalScale=o.scale,o.__originalTranslate=o.translate,o.__originalTransform=o.transform,o.__originalSetTransform=o.setTransform,o.__originalResetTransform=o.resetTransform,o.__originalClip=o.clip,o.__originalMoveTo=o.moveTo,o.__originalLineTo=o.lineTo,o.__originalBezierCurveTo=o.bezierCurveTo,o.__originalRect=o.rect,o.__originalClosePath=o.closePath,o.__originalBeginPath=o.beginPath,o._removeMirroring=()=>{o.save=o.__originalSave,o.restore=o.__originalRestore,o.rotate=o.__originalRotate,o.scale=o.__originalScale,o.translate=o.__originalTranslate,o.transform=o.__originalTransform,o.setTransform=o.__originalSetTransform,o.resetTransform=o.__originalResetTransform,o.clip=o.__originalClip,o.moveTo=o.__originalMoveTo,o.lineTo=o.__originalLineTo,o.bezierCurveTo=o.__originalBezierCurveTo,o.rect=o.__originalRect,o.closePath=o.__originalClosePath,o.beginPath=o.__originalBeginPath,delete o._removeMirroring},o.save=function(){t.save(),this.__originalSave()},o.restore=function(){t.restore(),this.__originalRestore()},o.translate=function(n,i){t.translate(n,i),this.__originalTranslate(n,i)},o.scale=function(n,i){t.scale(n,i),this.__originalScale(n,i)},o.transform=function(n,i,a,l,u,d){t.transform(n,i,a,l,u,d),this.__originalTransform(n,i,a,l,u,d)},o.setTransform=function(n,i,a,l,u,d){t.setTransform(n,i,a,l,u,d),this.__originalSetTransform(n,i,a,l,u,d)},o.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},o.rotate=function(n){t.rotate(n),this.__originalRotate(n)},o.clip=function(n){t.clip(n),this.__originalClip(n)},o.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},o.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},o.bezierCurveTo=function(e,n,i,a,l,u){t.bezierCurveTo(e,n,i,a,l,u),this.__originalBezierCurveTo(e,n,i,a,l,u)},o.rect=function(e,n,i,a){t.rect(e,n,i,a),this.__originalRect(e,n,i,a)},o.closePath=function(){t.closePath(),this.__originalClosePath()},o.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class oI{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Sp(o,t,e,n,i,a,l,u,d,f){const[m,g,v,A,S,b]=oe(o);if(g===0&&v===0){const M=l*m+S,L=Math.round(M),R=u*A+b,I=Math.round(R),z=(l+d)*m+S,B=Math.abs(Math.round(z)-L)||1,U=(u+f)*A+b,Q=Math.abs(Math.round(U)-I)||1;return o.setTransform(Math.sign(m),0,0,Math.sign(A),L,I),o.drawImage(t,e,n,i,a,0,0,B,Q),o.setTransform(m,g,v,A,S,b),[B,Q]}if(m===0&&A===0){const M=u*v+S,L=Math.round(M),R=l*g+b,I=Math.round(R),z=(u+f)*v+S,B=Math.abs(Math.round(z)-L)||1,U=(l+d)*g+b,Q=Math.abs(Math.round(U)-I)||1;return o.setTransform(0,Math.sign(g),Math.sign(v),0,L,I),o.drawImage(t,e,n,i,a,0,0,Q,B),o.setTransform(m,g,v,A,S,b),[Q,B]}o.drawImage(t,e,n,i,a,l,u,d,f);const T=Math.hypot(m,g),k=Math.hypot(v,A);return[T*d,k*f]}function aI(o){const{width:t,height:e}=o;if(t>kb||e>kb)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1;let l=new Uint8Array(a*(e+1)),u,d,f;const m=t+7&-8;let g=new Uint8Array(m*e),v=0;for(const k of o.data){let M=128;for(;M>0;)g[v++]=k&M?0:255,M>>=1}let A=0;for(v=0,g[v]!==0&&(l[0]=1,++A),d=1;d<t;d++)g[v]!==g[v+1]&&(l[d]=g[v]?2:1,++A),v++;for(g[v]!==0&&(l[d]=2,++A),u=1;u<e;u++){v=u*m,f=u*a,g[v-m]!==g[v]&&(l[f]=g[v]?1:8,++A);let k=(g[v]?4:0)+(g[v-m]?8:0);for(d=1;d<t;d++)k=(k>>2)+(g[v+1]?4:0)+(g[v-m+1]?8:0),i[k]&&(l[f+d]=i[k],++A),v++;if(g[v-m]!==g[v]&&(l[f+d]=g[v]?2:4,++A),A>n)return null}for(v=m*(e-1),f=u*a,g[v]!==0&&(l[f]=8,++A),d=1;d<t;d++)g[v]!==g[v+1]&&(l[f+d]=g[v]?4:8,++A),v++;if(g[v]!==0&&(l[f+d]=4,++A),A>n)return null;const S=new Int32Array([0,a,-1,0,-a,0,0,0,1]),b=new Path2D;for(u=0;A&&u<=e;u++){let k=u*a;const M=k+t;for(;k<M&&!l[k];)k++;if(k===M)continue;b.moveTo(k%a,u);const L=k;let R=l[k];do{const I=S[R];do k+=I;while(!l[k]);const z=l[k];z!==5&&z!==10?(R=z,l[k]=0):(R=z&51*R>>4,l[k]&=R>>2|R<<2),b.lineTo(k%a,k/a|0),l[k]||--A}while(L!==k);--u}return g=null,l=null,function(k){k.save(),k.scale(1/t,-1/e),k.translate(0,-e),k.fill(b),k.beginPath(),k.restore()}}class Pb{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=y_,this.textMatrixScale=1,this.fontMatrix=F0,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=sn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=mt.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=mt.applyTransform(e,t),i=mt.applyTransform(e.slice(2),t),a=mt.applyTransform([e[0],e[3]],t),l=mt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],a[0],l[0]),this.minY=Math.min(this.minY,n[1],i[1],a[1],l[1]),this.maxX=Math.max(this.maxX,n[0],i[0],a[0],l[0]),this.maxY=Math.max(this.maxY,n[1],i[1],a[1],l[1])}updateScalingPathMinMax(t,e){mt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,i,a,l,u,d,f,m){const g=mt.bezierBoundingBox(e,n,i,a,l,u,d,f,m);m||this.updateRectMinMax(t,g)}getPathBoundingBox(t=dn.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===dn.STROKE){e||Qt("Stroke bounding box must include transform.");const i=mt.singularValueDecompose2dScale(e),a=i[0]*this.lineWidth/2,l=i[1]*this.lineWidth/2;n[0]-=a,n[1]-=l,n[2]+=a,n[3]+=l}return n}updateClipFromPath(){const t=mt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=dn.FILL,e=null){return mt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Mb(o,t){if(t instanceof ImageData){o.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%zn,a=(e-i)/zn,l=i===0?a:a+1,u=o.createImageData(n,zn);let d=0,f;const m=t.data,g=u.data;let v,A,S,b;if(t.kind===kp.GRAYSCALE_1BPP){const T=m.byteLength,k=new Uint32Array(g.buffer,0,g.byteLength>>2),M=k.length,L=n+7>>3,R=4294967295,I=En.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(S=v<a?zn:i,f=0,A=0;A<S;A++){const z=T-d;let B=0;const U=z>L?n:z*8-7,Q=U&-8;let ct=0,ot=0;for(;B<Q;B+=8)ot=m[d++],k[f++]=ot&128?R:I,k[f++]=ot&64?R:I,k[f++]=ot&32?R:I,k[f++]=ot&16?R:I,k[f++]=ot&8?R:I,k[f++]=ot&4?R:I,k[f++]=ot&2?R:I,k[f++]=ot&1?R:I;for(;B<U;B++)ct===0&&(ot=m[d++],ct=128),k[f++]=ot&ct?R:I,ct>>=1}for(;f<M;)k[f++]=0;o.putImageData(u,0,v*zn)}}else if(t.kind===kp.RGBA_32BPP){for(A=0,b=n*zn*4,v=0;v<a;v++)g.set(m.subarray(d,d+b)),d+=b,o.putImageData(u,0,A),A+=zn;v<l&&(b=n*i*4,g.set(m.subarray(d,d+b)),o.putImageData(u,0,A))}else if(t.kind===kp.RGB_24BPP)for(S=zn,b=n*S,v=0;v<l;v++){for(v>=a&&(S=i,b=n*S),f=0,A=b;A--;)g[f++]=m[d++],g[f++]=m[d++],g[f++]=m[d++],g[f++]=255;o.putImageData(u,0,v*zn)}else throw new Error(`bad image kind: ${t.kind}`)}function Rb(o,t){if(t.bitmap){o.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%zn,a=(e-i)/zn,l=i===0?a:a+1,u=o.createImageData(n,zn);let d=0;const f=t.data,m=u.data;for(let g=0;g<l;g++){const v=g<a?zn:i;({srcPos:d}=sI({src:f,srcPos:d,dest:m,width:n,height:v,nonBlackColor:0})),o.putImageData(u,0,g*zn)}}function $c(o,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)o[n]!==void 0&&(t[n]=o[n]);o.setLineDash!==void 0&&(t.setLineDash(o.getLineDash()),t.lineDashOffset=o.lineDashOffset)}function bp(o){if(o.strokeStyle=o.fillStyle="#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",o.setLineDash!==void 0&&(o.setLineDash([]),o.lineDashOffset=0),!fn){const{filter:t}=o;t!=="none"&&t!==""&&(o.filter="none")}}function Lb(o,t){if(t)return!0;const e=mt.singularValueDecompose2dScale(o);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*xo.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const lI=["butt","round","square"],uI=["miter","round","bevel"],cI={},Db={};var Qs,uv,cv,hv;const Ww=class Ww{constructor(t,e,n,i,a,{optionalContentConfig:l,markedContentStack:u=null},d,f){_(this,Qs);this.ctx=t,this.current=new Pb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new oI(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...oe(this.compositeCtx))}this.ctx.save(),bp(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=oe(this.ctx)}executeOperatorList(t,e,n,i){const a=t.argsArray,l=t.fnArray;let u=e||0;const d=a.length;if(d===u)return u;const f=d-u>Tb&&typeof n=="function",m=f?Date.now()+iI:0;let g=0;const v=this.commonObjs,A=this.objs;let S;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,n),u;if(S=l[u],S!==Fs.dependency)this[S].apply(this,a[u]);else for(const b of a[u]){const T=b.startsWith("g_")?v:A;if(!T.has(b))return T.get(b,n),u}if(u++,u===d)return u;if(f&&++g>Tb){if(Date.now()>m)return n(),u;g=0}}}endDrawing(){C(this,Qs,uv).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),C(this,Qs,cv).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=n,d=i,f="prescale1",m,g;for(;a>2&&u>1||l>2&&d>1;){let v=u,A=d;a>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),a/=u/v),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),m=this.cachedCanvases.getCanvas(f,v,A),g=m.context,g.clearRect(0,0,v,A),g.drawImage(t,0,0,u,d,0,0,v,A),t=m.canvas,u=v,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,a=this.current.fillColor,l=this.current.patternFill,u=oe(e);let d,f,m,g;if((t.bitmap||t.data)&&t.count>1){const U=t.bitmap||t.data.buffer;f=JSON.stringify(l?u:[u.slice(0,4),a]),d=this._cachedBitmapsMap.get(U),d||(d=new Map,this._cachedBitmapsMap.set(U,d));const Q=d.get(f);if(Q&&!l){const ct=Math.round(Math.min(u[0],u[2])+u[4]),ot=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:Q,offsetX:ct,offsetY:ot}}m=Q}m||(g=this.cachedCanvases.getCanvas("maskCanvas",n,i),Rb(g.context,t));let v=mt.transform(u,[1/n,0,0,-1/i,0,0]);v=mt.transform(v,[1,0,0,1,0,-i]);const[A,S,b,T]=mt.getAxialAlignedBoundingBox([0,0,n,i],v),k=Math.round(b-A)||1,M=Math.round(T-S)||1,L=this.cachedCanvases.getCanvas("fillCanvas",k,M),R=L.context,I=A,z=S;R.translate(-I,-z),R.transform(...v),m||(m=this._scaleImage(g.canvas,si(R)),m=m.img,d&&l&&d.set(f,m)),R.imageSmoothingEnabled=Lb(oe(R),t.interpolate),Sp(R,m,0,0,m.width,m.height,0,0,n,i),R.globalCompositeOperation="source-in";const B=mt.transform(si(R),[1,0,0,1,-I,-z]);return R.fillStyle=l?a.getPattern(e,this,B,dn.FILL):a,R.fillRect(0,0,n,i),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,L.canvas)),{canvas:L.canvas,offsetX:Math.round(I),offsetY:Math.round(z)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=lI[t]}setLineJoin(t){this.ctx.lineJoin=uI[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const a=this.ctx;a.setTransform(...oe(this.suspendedCtx)),$c(this.suspendedCtx,a),rI(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),$c(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const a=i[0],l=i[1],u=i[2]-a,d=i[3]-l;u===0||d===0||(this.genericComposeSMask(e.context,n,u,d,e.subtype,e.backdrop,e.transferMap,a,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,a,l,u,d,f,m,g){let v=t.canvas,A=d-m,S=f-g;if(l){const T=mt.makeHexColor(...l);if(A<0||S<0||A+n>v.width||S+i>v.height){const k=this.cachedCanvases.getCanvas("maskExtension",n,i),M=k.context;M.drawImage(v,-A,-S),M.globalCompositeOperation="destination-atop",M.fillStyle=T,M.fillRect(0,0,n,i),M.globalCompositeOperation="source-over",v=k.canvas,A=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(A,S,n,i),t.clip(k),t.globalCompositeOperation="destination-atop",t.fillStyle=T,t.fillRect(A,S,n,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const b=new Path2D;b.rect(d,f,n,i),e.clip(b),e.globalCompositeOperation="destination-in",e.drawImage(v,A,S,n,i,d,f,n,i),e.restore()}save(){this.inSMaskMode?($c(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),$c(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,i,a,l){this.ctx.transform(t,e,n,i,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const i=this.ctx,a=this.current;let l=a.x,u=a.y,d,f;const m=oe(i),g=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,v=g?n.slice(0):null;for(let A=0,S=0,b=t.length;A<b;A++)switch(t[A]|0){case Fs.rectangle:l=e[S++],u=e[S++];const T=e[S++],k=e[S++],M=l+T,L=u+k;i.moveTo(l,u),T===0||k===0?i.lineTo(M,L):(i.lineTo(M,u),i.lineTo(M,L),i.lineTo(l,L)),g||a.updateRectMinMax(m,[l,u,M,L]),i.closePath();break;case Fs.moveTo:l=e[S++],u=e[S++],i.moveTo(l,u),g||a.updatePathMinMax(m,l,u);break;case Fs.lineTo:l=e[S++],u=e[S++],i.lineTo(l,u),g||a.updatePathMinMax(m,l,u);break;case Fs.curveTo:d=l,f=u,l=e[S+4],u=e[S+5],i.bezierCurveTo(e[S],e[S+1],e[S+2],e[S+3],l,u),a.updateCurvePathMinMax(m,d,f,e[S],e[S+1],e[S+2],e[S+3],l,u,v),S+=6;break;case Fs.curveTo2:d=l,f=u,i.bezierCurveTo(l,u,e[S],e[S+1],e[S+2],e[S+3]),a.updateCurvePathMinMax(m,d,f,l,u,e[S],e[S+1],e[S+2],e[S+3],v),l=e[S+2],u=e[S+3],S+=4;break;case Fs.curveTo3:d=l,f=u,l=e[S+2],u=e[S+3],i.bezierCurveTo(e[S],e[S+1],l,u,l,u),a.updateCurvePathMinMax(m,d,f,e[S],e[S+1],l,u,l,u,v),S+=4;break;case Fs.closePath:i.closePath();break}g&&a.updateScalingPathMinMax(m,v),a.setCurrentPoint(l,u)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,si(e),dn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let a=!1;i&&(e.save(),e.fillStyle=n.getPattern(e,this,si(e),dn.FILL),a=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),a&&e.restore(),t&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=cI}eoClip(){this.pendingClip=Db}beginText(){this.current.textMatrix=y_,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const n=new Path2D,i=e.getTransform().invertSelf();for(const{transform:a,x:l,y:u,fontSize:d,path:f}of t)n.addPath(f,new DOMMatrix(a).preMultiplySelf(i).translate(l,u).scale(d,-d));e.clip(n),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const n=this.commonObjs.get(t),i=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=n.fontMatrix||F0,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Pt("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const a=n.loadedName||"sans-serif",l=((m=n.systemFontInfo)==null?void 0:m.css)||`"${a}", ${n.fallbackName}`;let u="normal";n.black?u="900":n.bold&&(u="bold");const d=n.italic?"italic":"normal";let f=e;e<_b?f=_b:e>Cb&&(f=Cb),this.current.fontSizeScale=e/f,this.ctx.font=`${d} ${u} ${f}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,i,a,l){this.current.textMatrix=[t,e,n,i,a,l],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i,a){const l=this.ctx,u=this.current,d=u.font,f=u.textRenderingMode,m=u.fontSize/u.fontSizeScale,g=f&sn.FILL_STROKE_MASK,v=!!(f&sn.ADD_TO_PATH_FLAG),A=u.patternFill&&!d.missingFile,S=u.patternStroke&&!d.missingFile;let b;if((d.disableFontFace||v||A||S)&&(b=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||A||S){if(l.save(),l.translate(e,n),l.scale(m,-m),g===sn.FILL||g===sn.FILL_STROKE)if(i){const T=l.getTransform();l.setTransform(...i),l.fill(C(this,Qs,hv).call(this,b,T,i))}else l.fill(b);if(g===sn.STROKE||g===sn.FILL_STROKE)if(a){const T=l.getTransform();l.setTransform(...a),l.stroke(C(this,Qs,hv).call(this,b,T,a))}else l.lineWidth/=m,l.stroke(b);l.restore()}else(g===sn.FILL||g===sn.FILL_STROKE)&&l.fillText(t,e,n),(g===sn.STROKE||g===sn.FILL_STROKE)&&l.strokeText(t,e,n);v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:oe(l),x:e,y:n,fontSize:m,path:b})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Nt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const a=this.ctx,l=e.fontSizeScale,u=e.charSpacing,d=e.wordSpacing,f=e.fontDirection,m=e.textHScale*f,g=t.length,v=n.vertical,A=v?1:-1,S=n.defaultVMetrics,b=i*e.fontMatrix[0],T=e.textRenderingMode===sn.FILL&&!n.disableFontFace&&!e.patternFill;a.save(),a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),f>0?a.scale(m,-1):a.scale(m,1);let k,M;if(e.patternFill){a.save();const B=e.fillColor.getPattern(a,this,si(a),dn.FILL);k=oe(a),a.restore(),a.fillStyle=B}if(e.patternStroke){a.save();const B=e.strokeColor.getPattern(a,this,si(a),dn.STROKE);M=oe(a),a.restore(),a.strokeStyle=B}let L=e.lineWidth;const R=e.textMatrixScale;if(R===0||L===0){const B=e.textRenderingMode&sn.FILL_STROKE_MASK;(B===sn.STROKE||B===sn.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=R;if(l!==1&&(a.scale(l,l),L/=l),a.lineWidth=L,n.isInvalidPDFjsFont){const B=[];let U=0;for(const Q of t)B.push(Q.unicode),U+=Q.width;a.fillText(B.join(""),0,0),e.x+=U*b*m,a.restore(),this.compose();return}let I=0,z;for(z=0;z<g;++z){const B=t[z];if(typeof B=="number"){I+=A*B*i/1e3;continue}let U=!1;const Q=(B.isSpace?d:0)+u,ct=B.fontChar,ot=B.accent;let Rt,Ft,_t=B.width;if(v){const Z=B.vmetric||S,K=-(B.vmetric?Z[1]:_t*.5)*b,q=Z[2]*b;_t=Z?-Z[0]:_t,Rt=K/l,Ft=(I+q)/l}else Rt=I/l,Ft=0;if(n.remeasure&&_t>0){const Z=a.measureText(ct).width*1e3/i*l;if(_t<Z&&this.isFontSubpixelAAEnabled){const K=_t/Z;U=!0,a.save(),a.scale(K,1),Rt/=K}else _t!==Z&&(Rt+=(_t-Z)/2e3*i/l)}if(this.contentVisible&&(B.isInFont||n.missingFile)){if(T&&!ot)a.fillText(ct,Rt,Ft);else if(this.paintChar(ct,Rt,Ft,k,M),ot){const Z=Rt+i*ot.offset.x/l,K=Ft-i*ot.offset.y/l;this.paintChar(ot.fontChar,Z,K,k,M)}}const Kt=v?_t*b-Q*f:_t*b+Q*f;I+=Kt,U&&a.restore()}v?e.y-=I:e.x+=I*m,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,a=n.fontSize,l=n.fontDirection,u=i.vertical?1:-1,d=n.charSpacing,f=n.wordSpacing,m=n.textHScale*l,g=n.fontMatrix||F0,v=t.length,A=n.textRenderingMode===sn.INVISIBLE;let S,b,T,k;if(!(A||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(m,l),S=0;S<v;++S){if(b=t[S],typeof b=="number"){k=u*b*a/1e3,this.ctx.translate(k,0),n.x+=k*m;continue}const M=(b.isSpace?f:0)+d,L=i.charProcOperatorList[b.operatorListId];if(!L){Pt(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),e.scale(a,a),e.transform(...g),this.executeOperatorList(L),this.restore()),T=mt.applyTransform([b.width,0],g)[0]*a+M,e.translate(T,0),n.x+=T*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,a,l){this.ctx.rect(n,i,a-n,l-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],i=this.baseTransform||oe(this.ctx),a={createCanvasGraphics:l=>new Ww(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new lv(t,n,this.ctx,a,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=mt.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=mt.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=nI(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,si(e),dn.SHADING);const i=si(e);if(i){const{width:a,height:l}=e.canvas,[u,d,f,m]=mt.getAxialAlignedBoundingBox([0,0,a,l],i);this.ctx.fillRect(u,d,f-u,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Qt("Should not call beginInlineImage")}beginImageData(){Qt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=oe(this.ctx),e)){const n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.current.updateRectMinMax(oe(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||qm("TODO: Support non-isolated groups."),t.knockout&&Pt("Knockout groups not supported.");const n=oe(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=mt.getAxialAlignedBoundingBox(t.bbox,oe(e));const a=[0,0,e.canvas.width,e.canvas.height];i=mt.intersect(i,a)||[0,0,0,0];const l=Math.floor(i[0]),u=Math.floor(i[1]),d=Math.max(Math.ceil(i[2])-l,1),f=Math.max(Math.ceil(i[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,f]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,d,f),v=g.context;v.translate(-l,-u),v.transform(...n),t.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:l,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,u),e.save()),$c(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=oe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const a=mt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,n,i,a){if(C(this,Qs,uv).call(this),bp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const l=e[2]-e[0],u=e[3]-e[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=l,e[3]=u;const[d,f]=mt.singularValueDecompose2dScale(oe(this.ctx)),{viewportScale:m}=this,g=Math.ceil(l*this.outputScaleX*m),v=Math.ceil(u*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(g,v);const{canvas:A,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(t,A),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(d,0,0,-f,0,u*f),bp(this.ctx)}else bp(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],l,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new Pb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),C(this,Qs,cv).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=aI(t)),i.compiled)){i.compiled(n);return}const a=this._createMaskCanvas(t),l=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,i=0,a,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const d=oe(u);u.transform(e,n,i,a,0,0);const f=this._createMaskCanvas(t);u.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let m=0,g=l.length;m<g;m+=2){const v=mt.transform(d,[e,n,i,a,l[m],l[m+1]]),[A,S]=mt.applyTransform([0,0],v);u.drawImage(f.canvas,A,S)}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const a of t){const{data:l,width:u,height:d,transform:f}=a,m=this.cachedCanvases.getCanvas("maskCanvas",u,d),g=m.context;g.save();const v=this.getObject(l,a);Rb(g,v),g.globalCompositeOperation="source-in",g.fillStyle=i?n.getPattern(g,this,si(e),dn.FILL):n,g.fillRect(0,0,u,d),g.restore(),e.save(),e.transform(...f),e.scale(1,-1),Sp(e,m.canvas,0,0,u,d,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){Pt("Dependent image isn't ready yet");return}const l=a.width,u=a.height,d=[];for(let f=0,m=i.length;f<m;f+=2)d.push({transform:[e,0,0,n,i[f],i[f+1]],x:0,y:0,w:l,h:u});this.paintInlineImageXObjectGroup(a,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,i),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;if(this.save(),!fn){const{filter:u}=i;u!=="none"&&u!==""&&(i.filter="none")}i.scale(1/e,-1/n);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Mb(d,t),a=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(a,si(i));i.imageSmoothingEnabled=Lb(oe(i),t.interpolate),Sp(i,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const a=t.width,l=t.height,d=this.cachedCanvases.getCanvas("inlineImage",a,l).context;Mb(d,t),i=this.applyTransferMapsToCanvas(d)}for(const a of e)n.save(),n.transform(...a.transform),n.scale(1,-1),Sp(n,i,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===Db?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=oe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:a}=this.ctx.getTransform();let l,u;if(n===0&&i===0){const d=Math.abs(e),f=Math.abs(a);if(d===f)if(t===0)l=u=1/d;else{const m=d*t;l=u=m<1?1/m:1}else if(t===0)l=1/d,u=1/f;else{const m=d*t,g=f*t;l=m<1?1/m:1,u=g<1?1/g:1}}else{const d=Math.abs(e*a-n*i),f=Math.hypot(e,n),m=Math.hypot(i,a);if(t===0)l=m/d,u=f/d;else{const g=t*d;l=m>g?m/g:1,u=f>g?f/g:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[i,a]=this.getScaleForStroking();if(e.lineWidth=n||1,i===1&&a===1){e.stroke();return}const l=e.getLineDash();if(t&&e.save(),e.scale(i,a),l.length>0){const u=Math.max(i,a);e.setLineDash(l.map(d=>d/u)),e.lineDashOffset/=u}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Qs=new WeakSet,uv=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},cv=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},hv=function(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i};let $l=Ww;for(const o in Fs)$l.prototype[o]!==void 0&&($l.prototype[Fs[o]]=$l.prototype[o]);var ed,nd;class cr{static get workerPort(){return c(this,ed)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,ed,t)}static get workerSrc(){return c(this,nd)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,nd,t)}}ed=new WeakMap,nd=new WeakMap,_(cr,ed,null),_(cr,nd,"");var ga,sd;class hI{constructor({parsedData:t,rawData:e}){_(this,ga);_(this,sd);x(this,ga,t),x(this,sd,e)}getRaw(){return c(this,sd)}get(t){return c(this,ga).get(t)??null}getAll(){return Iw(c(this,ga))}has(t){return c(this,ga).has(t)}}ga=new WeakMap,sd=new WeakMap;const Ll=Symbol("INTERNAL");var id,rd,od,uu;class dI{constructor(t,{name:e,intent:n,usage:i,rbGroups:a}){_(this,id,!1);_(this,rd,!1);_(this,od,!1);_(this,uu,!0);x(this,id,!!(t&ns.DISPLAY)),x(this,rd,!!(t&ns.PRINT)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(c(this,od))return c(this,uu);if(!c(this,uu))return!1;const{print:t,view:e}=this.usage;return c(this,id)?(e==null?void 0:e.viewState)!=="OFF":c(this,rd)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Ll&&Qt("Internal method `_setVisible` called."),x(this,od,n),x(this,uu,e)}}id=new WeakMap,rd=new WeakMap,od=new WeakMap,uu=new WeakMap;var Zr,Wt,cu,hu,ad,dv;class fI{constructor(t,e=ns.DISPLAY){_(this,ad);_(this,Zr,null);_(this,Wt,new Map);_(this,cu,null);_(this,hu,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,hu,t.order);for(const n of t.groups)c(this,Wt).set(n.id,new dI(e,n));if(t.baseState==="OFF")for(const n of c(this,Wt).values())n._setVisible(Ll,!1);for(const n of t.on)c(this,Wt).get(n)._setVisible(Ll,!0);for(const n of t.off)c(this,Wt).get(n)._setVisible(Ll,!1);x(this,cu,this.getHash())}}isVisible(t){if(c(this,Wt).size===0)return!0;if(!t)return qm("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,Wt).has(t.id)?c(this,Wt).get(t.id).visible:(Pt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return C(this,ad,dv).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,Wt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(c(this,Wt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,Wt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(!c(this,Wt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,Wt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(!c(this,Wt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,Wt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(c(this,Wt).get(e).visible)return!1}return!0}return Pt(`Unknown optional content policy ${t.policy}.`),!0}return Pt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var a;const i=c(this,Wt).get(t);if(!i){Pt(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const l of i.rbGroups)for(const u of l)u!==t&&((a=c(this,Wt).get(u))==null||a._setVisible(Ll,!1,!0));i._setVisible(Ll,!!e,!0),x(this,Zr,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=c(this,Wt).get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!a.visible,e);break}}x(this,Zr,null)}get hasInitialVisibility(){return c(this,cu)===null||this.getHash()===c(this,cu)}getOrder(){return c(this,Wt).size?c(this,hu)?c(this,hu).slice():[...c(this,Wt).keys()]:null}getGroups(){return c(this,Wt).size>0?Iw(c(this,Wt)):null}getGroup(t){return c(this,Wt).get(t)||null}getHash(){if(c(this,Zr)!==null)return c(this,Zr);const t=new X_;for(const[e,n]of c(this,Wt))t.update(`${e}:${n.visible}`);return x(this,Zr,t.hexdigest())}}Zr=new WeakMap,Wt=new WeakMap,cu=new WeakMap,hu=new WeakMap,ad=new WeakSet,dv=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const a=t[i];let l;if(Array.isArray(a))l=C(this,ad,dv).call(this,a);else if(c(this,Wt).has(a))l=c(this,Wt).get(a).visible;else return Pt(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class pI{constructor(t,{disableRange:e=!1,disableStream:n=!1}){_e(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,(a==null?void 0:a.length)>0){const d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(n),!0)});_e(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,i,a;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(a=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||a.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){_e(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new mI(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new gI(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class mI{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=Ow(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class gI{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function yI(o){let t=!0,e=n("filename\\*","i").exec(o);if(e){e=e[1];let m=u(e);return m=unescape(m),m=d(m),m=f(m),a(m)}if(e=l(o),e){const m=f(e);return a(m)}if(e=n("filename","i").exec(o),e){e=e[1];let m=u(e);return m=f(m),a(m)}function n(m,g){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(m,g){if(m){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(m,{fatal:!0}),A=Xm(g);g=v.decode(A),t=!1}catch{}}return g}function a(m){return t&&/[\x80-\xff]/.test(m)&&(m=i("utf-8",m),t&&(m=i("iso-8859-1",m))),m}function l(m){const g=[];let v;const A=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=A.exec(m))!==null;){let[,b,T,k]=v;if(b=parseInt(b,10),b in g){if(b===0)break;continue}g[b]=[T,k]}const S=[];for(let b=0;b<g.length&&b in g;++b){let[T,k]=g[b];k=u(k),T&&(k=unescape(k),b===0&&(k=d(k))),S.push(k)}return S.join("")}function u(m){if(m.startsWith('"')){const g=m.slice(1).split('\\"');for(let v=0;v<g.length;++v){const A=g[v].indexOf('"');A!==-1&&(g[v]=g[v].slice(0,A),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}m=g.join('"')}return m}function d(m){const g=m.indexOf("'");if(g===-1)return m;const v=m.slice(0,g),S=m.slice(g+1).replace(/^[^']*'/,"");return i(v,S)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,A,S){if(A==="q"||A==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,T){return String.fromCharCode(parseInt(T,16))}),i(v,S);try{S=atob(S)}catch{}return i(v,S)})}return""}function lC(o,t){const e=new Headers;if(!o||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function Qm(o){try{return new URL(o).origin}catch{}return null}function uC({responseHeaders:o,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(o.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*e)||n||!t||o.get("Accept-Ranges")!=="bytes"||(o.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function cC(o){const t=o.get("Content-Disposition");if(t){let e=yI(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Ow(e))return e}return null}function Zm(o,t){return o===404||o===0&&t.startsWith("file:")?new Eh('Missing PDF "'+t+'".'):new hm(`Unexpected server response (${o}) while retrieving PDF "${t}".`,o)}function hC(o){return o===200||o===206}function dC(o,t,e){return{method:"GET",headers:o,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function fC(o){return o instanceof Uint8Array?o.buffer:o instanceof ArrayBuffer?o:(Pt(`getArrayBuffer - unexpected data format: ${o}`),new Uint8Array(o).buffer)}class Ib{constructor(t){wt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=lC(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return _e(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new vI(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new wI(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class vI{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,dC(n,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=Qm(a.url),!hC(a.status))throw Zm(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:u,suggestedLength:d}=uC({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=cC(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ao("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:fC(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class wI{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${n-1}`);const l=i.url;fetch(l,dC(a,this._withCredentials,this._abortController)).then(u=>{const d=Qm(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!hC(u.status))throw Zm(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:fC(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const g0=200,y0=206;function AI(o){const t=o.response;return typeof t!="string"?t:Xm(t).buffer}class xI{constructor({url:t,httpHeaders:e,withCredentials:n}){wt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=lC(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,l]of this.headers)e.setRequestHeader(a,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=y0):i.expectedStatus=g0,e.responseType="arraybuffer",_e(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var i;const n=this.pendingRequests[t];n&&((i=n.onProgress)==null||i.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){n.onError(i.status);return}const a=i.status||g0;if(!(a===g0&&n.expectedStatus===y0)&&a!==n.expectedStatus){n.onError(i.status);return}const u=AI(i);if(a===y0){const d=i.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:u}):(Pt('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class SI{constructor(t){this._source=t,this._manager=new xI(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return _e(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new bI(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new EI(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class bI{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Qm(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:l}=uC({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=cC(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Zm(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class EI{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Qm((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Zm(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const _I=/^[a-z][a-z0-9\-+.]+:/i;function CI(o){if(_I.test(o))return new URL(o);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(o))}class TI{constructor(t){this.source=t,this.url=CI(t.url),_e(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return _e(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new kI(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new PI(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class kI{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Eh(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ao("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PI{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const MI=1e5,Dn=30,RI=.8;var jb,Jr,On,ld,ud,ya,Xi,cd,hd,va,du,fu,to,pu,dd,mu,wa,fd,pd,Aa,xa,md,eo,gu,yr,pC,mC,fv,os,zp,pv,gC,yC;const Me=class Me{constructor({textContentSource:t,container:e,viewport:n}){_(this,yr);_(this,Jr,Promise.withResolvers());_(this,On,null);_(this,ld,!1);_(this,ud,!!((jb=globalThis.FontInspector)!=null&&jb.enabled));_(this,ya,null);_(this,Xi,null);_(this,cd,0);_(this,hd,0);_(this,va,null);_(this,du,null);_(this,fu,0);_(this,to,0);_(this,pu,Object.create(null));_(this,dd,[]);_(this,mu,null);_(this,wa,[]);_(this,fd,new WeakMap);_(this,pd,null);var d;if(t instanceof ReadableStream)x(this,mu,t);else if(typeof t=="object")x(this,mu,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,On,x(this,du,e)),x(this,to,n.scale*(globalThis.devicePixelRatio||1)),x(this,fu,n.rotation),x(this,Xi,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:l,pageY:u}=n.rawDims;x(this,pd,[1,0,0,-1,-l,u+a]),x(this,hd,i),x(this,cd,a),C(d=Me,os,gC).call(d),Za(e,n),c(this,Jr).promise.finally(()=>{c(Me,gu).delete(this),x(this,Xi,null),x(this,pu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=En.platform;return Nt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,va).read().then(({value:e,done:n})=>{if(n){c(this,Jr).resolve();return}c(this,ya)??x(this,ya,e.lang),Object.assign(c(this,pu),e.styles),C(this,yr,pC).call(this,e.items),t()},c(this,Jr).reject)};return x(this,va,c(this,mu).getReader()),c(Me,gu).add(this),t(),c(this,Jr).promise}update({viewport:t,onBefore:e=null}){var a;const n=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==c(this,fu)&&(e==null||e(),x(this,fu,i),Za(c(this,du),{rotation:i})),n!==c(this,to)){e==null||e(),x(this,to,n);const l={div:null,properties:null,ctx:C(a=Me,os,zp).call(a,c(this,ya))};for(const u of c(this,wa))l.properties=c(this,fd).get(u),l.div=u,C(this,yr,fv).call(this,l)}}cancel(){var e;const t=new Ao("TextLayer task cancelled.");(e=c(this,va))==null||e.cancel(t).catch(()=>{}),x(this,va,null),c(this,Jr).reject(t)}get textDivs(){return c(this,wa)}get textContentItemsStr(){return c(this,dd)}static cleanup(){if(!(c(this,gu).size>0)){c(this,Aa).clear();for(const{canvas:t}of c(this,xa).values())t.remove();c(this,xa).clear()}}};Jr=new WeakMap,On=new WeakMap,ld=new WeakMap,ud=new WeakMap,ya=new WeakMap,Xi=new WeakMap,cd=new WeakMap,hd=new WeakMap,va=new WeakMap,du=new WeakMap,fu=new WeakMap,to=new WeakMap,pu=new WeakMap,dd=new WeakMap,mu=new WeakMap,wa=new WeakMap,fd=new WeakMap,pd=new WeakMap,Aa=new WeakMap,xa=new WeakMap,md=new WeakMap,eo=new WeakMap,gu=new WeakMap,yr=new WeakSet,pC=function(t){var i,a;if(c(this,ld))return;(a=c(this,Xi)).ctx??(a.ctx=C(i=Me,os,zp).call(i,c(this,ya)));const e=c(this,wa),n=c(this,dd);for(const l of t){if(e.length>MI){Pt("Ignoring additional textDivs for performance reasons."),x(this,ld,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const u=c(this,On);x(this,On,document.createElement("span")),c(this,On).classList.add("markedContent"),l.id!==null&&c(this,On).setAttribute("id",`${l.id}`),u.append(c(this,On))}else l.type==="endMarkedContent"&&x(this,On,c(this,On).parentNode);continue}n.push(l.str),C(this,yr,mC).call(this,l)}},mC=function(t){var b;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,wa).push(e);const i=mt.transform(c(this,pd),t.transform);let a=Math.atan2(i[1],i[0]);const l=c(this,pu)[t.fontName];l.vertical&&(a+=Math.PI/2);let u=c(this,ud)&&l.fontSubstitution||l.fontFamily;u=Me.fontFamilyMap.get(u)||u;const d=Math.hypot(i[2],i[3]),f=d*C(b=Me,os,yC).call(b,u,c(this,ya));let m,g;a===0?(m=i[4],g=i[5]-f):(m=i[4]+f*Math.sin(a),g=i[5]-f*Math.cos(a));const v="calc(var(--scale-factor)*",A=e.style;c(this,On)===c(this,du)?(A.left=`${(100*m/c(this,hd)).toFixed(2)}%`,A.top=`${(100*g/c(this,cd)).toFixed(2)}%`):(A.left=`${v}${m.toFixed(2)}px)`,A.top=`${v}${g.toFixed(2)}px)`),A.fontSize=`${v}${(c(Me,eo)*d).toFixed(2)}px)`,A.fontFamily=u,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,ud)&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const T=Math.abs(t.transform[0]),k=Math.abs(t.transform[3]);T!==k&&Math.max(T,k)/Math.min(T,k)>1.5&&(S=!0)}if(S&&(n.canvasWidth=l.vertical?t.height:t.width),c(this,fd).set(e,n),c(this,Xi).div=e,c(this,Xi).properties=n,C(this,yr,fv).call(this,c(this,Xi)),n.hasText&&c(this,On).append(e),n.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),c(this,On).append(T)}},fv=function(t){var u;const{div:e,properties:n,ctx:i}=t,{style:a}=e;let l="";if(c(Me,eo)>1&&(l=`scale(${1/c(Me,eo)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=a,{canvasWidth:f,fontSize:m}=n;C(u=Me,os,pv).call(u,i,m*c(this,to),d);const{width:g}=i.measureText(e.textContent);g>0&&(l=`scaleX(${f*c(this,to)/g}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(a.transform=l)},os=new WeakSet,zp=function(t=null){let e=c(this,xa).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,xa).set(t,e),c(this,md).set(e,{size:0,family:""})}return e},pv=function(t,e,n){const i=c(this,md).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},gC=function(){if(c(this,eo)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),x(this,eo,t.getBoundingClientRect().height),t.remove()},yC=function(t,e){const n=c(this,Aa).get(t);if(n)return n;const i=C(this,os,zp).call(this,e);i.canvas.width=i.canvas.height=Dn,C(this,os,pv).call(this,i,Dn,t);const a=i.measureText("");let l=a.fontBoundingBoxAscent,u=Math.abs(a.fontBoundingBoxDescent);if(l){const m=l/(l+u);return c(this,Aa).set(t,m),i.canvas.width=i.canvas.height=0,m}i.strokeStyle="red",i.clearRect(0,0,Dn,Dn),i.strokeText("g",0,0);let d=i.getImageData(0,0,Dn,Dn).data;u=0;for(let m=d.length-1-3;m>=0;m-=4)if(d[m]>0){u=Math.ceil(m/4/Dn);break}i.clearRect(0,0,Dn,Dn),i.strokeText("A",0,Dn),d=i.getImageData(0,0,Dn,Dn).data,l=0;for(let m=0,g=d.length;m<g;m+=4)if(d[m]>0){l=Dn-Math.floor(m/4/Dn);break}i.canvas.width=i.canvas.height=0;const f=l?l/(l+u):RI;return c(this,Aa).set(t,f),f},_(Me,os),_(Me,Aa,new Map),_(Me,xa,new Map),_(Me,md,new WeakMap),_(Me,eo,null),_(Me,gu,new Set);let _h=Me;class Ch{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(a){var d;if(!a)return;let l=null;const u=a.name;if(u==="#text")l=a.value;else if(Ch.shouldBuildText(u))(d=a==null?void 0:a.attributes)!=null&&d.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&e.push({str:l}),!!a.children)for(const f of a.children)i(f)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const LI=65536,DI=100,II=5e3,NI=fn?KD:WD,FI=fn?YD:nC,OI=fn?XD:qD,jI=fn?QD:oC;function zI(o={}){typeof o=="string"||o instanceof URL?o={url:o}:(o instanceof ArrayBuffer||ArrayBuffer.isView(o))&&(o={data:o});const t=new mv,{docId:e}=t,n=o.url?VI(o.url):null,i=o.data?BI(o.data):null,a=o.httpHeaders||null,l=o.withCredentials===!0,u=o.password??null,d=o.range instanceof vC?o.range:null,f=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:LI;let m=o.worker instanceof Gl?o.worker:null;const g=o.verbosity,v=typeof o.docBaseUrl=="string"&&!Ym(o.docBaseUrl)?o.docBaseUrl:null,A=typeof o.cMapUrl=="string"?o.cMapUrl:null,S=o.cMapPacked!==!1,b=o.CMapReaderFactory||FI,T=typeof o.standardFontDataUrl=="string"?o.standardFontDataUrl:null,k=o.StandardFontDataFactory||jI,M=o.stopAtErrors!==!0,L=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,R=o.isEvalSupported!==!1,I=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!fn,z=typeof o.isImageDecoderSupported=="boolean"?o.isImageDecoderSupported:!fn&&(En.platform.isFirefox||!globalThis.chrome),B=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,U=typeof o.disableFontFace=="boolean"?o.disableFontFace:fn,Q=o.fontExtraProperties===!0,ct=o.enableXfa===!0,ot=o.ownerDocument||globalThis.document,Rt=o.disableRange===!0,Ft=o.disableStream===!0,_t=o.disableAutoFetch===!0,Kt=o.pdfBug===!0,Z=o.CanvasFactory||NI,K=o.FilterFactory||OI,q=o.enableHWA===!0,lt=d?d.length:o.length??NaN,J=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!fn&&!U,F=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:b===nC&&k===oC&&A&&T&&Qc(A,document.baseURI)&&Qc(T,document.baseURI),$=null;ED(g);const ft={canvasFactory:new Z({ownerDocument:ot,enableHWA:q}),filterFactory:new K({docId:e,ownerDocument:ot}),cMapReaderFactory:F?null:new b({baseUrl:A,isCompressed:S}),standardFontDataFactory:F?null:new k({baseUrl:T})};if(!m){const St={verbosity:g,port:cr.workerPort};m=St.port?Gl.fromPort(St):new Gl(St),t._worker=m}const Ct={docId:e,apiVersion:"4.10.38",data:i,password:u,disableAutoFetch:_t,rangeChunkSize:f,length:lt,docBaseUrl:v,enableXfa:ct,evaluatorOptions:{maxImageSize:L,disableFontFace:U,ignoreErrors:M,isEvalSupported:R,isOffscreenCanvasSupported:I,isImageDecoderSupported:z,canvasMaxAreaInBytes:B,fontExtraProperties:Q,useSystemFonts:J,cMapUrl:F?A:null,standardFontDataUrl:F?T:null}},Lt={disableFontFace:U,fontExtraProperties:Q,ownerDocument:ot,pdfBug:Kt,styleElement:$,loadingParams:{disableAutoFetch:_t,enableXfa:ct}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const St=m.messageHandler.sendWithPromise("GetDocRequest",Ct,i?[i.buffer]:null);let vt;if(d)vt=new pI(d,{disableRange:Rt,disableStream:Ft});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Ot;if(fn)if(Qc(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ot=Ib}else Ot=TI;else Ot=Qc(n)?Ib:SI;vt=new Ot({url:n,length:lt,httpHeaders:a,withCredentials:l,rangeChunkSize:f,disableRange:Rt,disableStream:Ft})}return St.then(Ot=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Yt=new eh(e,Ot,m.port),mn=new GI(Yt,t,vt,Lt,ft);t._transport=mn,Yt.send("Ready",null)})}).catch(t._capability.reject),t}function VI(o){if(o instanceof URL)return o.href;try{return new URL(o,window.location).href}catch{if(fn&&typeof o=="string")return o}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function BI(o){if(fn&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return Xm(o);if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="object"&&!isNaN(o==null?void 0:o.length))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Nb(o){return typeof o=="object"&&Number.isInteger(o==null?void 0:o.num)&&o.num>=0&&Number.isInteger(o==null?void 0:o.gen)&&o.gen>=0}var Tm;const km=class km{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${vn(km,Tm)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};Tm=new WeakMap,_(km,Tm,0);let mv=km;class vC{constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Qt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class HI{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Nt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var no,Ki,Es,Dl,Vp;class UI{constructor(t,e,n,i=!1){_(this,Es);_(this,no,null);_(this,Ki,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new xb:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new wC,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new nf({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Nt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:i=zr.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:g=!1}){var R,I;(R=this._stats)==null||R.time("Overall");const v=this._transport.getRenderingIntent(n,i,m,g),{renderingIntent:A,cacheKey:S}=v;x(this,Ki,!1),C(this,Es,Vp).call(this),u||(u=this._transport.getOptionalContentConfig(A));let b=this._intentStates.get(S);b||(b=Object.create(null),this._intentStates.set(S,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const T=!!(A&ns.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(v));const k=z=>{var B;b.renderTasks.delete(M),(this._maybeCleanupAfterRender||T)&&x(this,Ki,!0),C(this,Es,Dl).call(this,!T),z?(M.capability.reject(z),this._abortOperatorList({intentState:b,reason:z instanceof Error?z:new Error(z)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new yv({callback:k,params:{canvasContext:t,viewport:e,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:f});(b.renderTasks||(b.renderTasks=new Set)).add(M);const L=M.task;return Promise.all([b.displayReadyCapability.promise,u]).then(([z,B])=>{var U;if(this.destroyed){k();return}if((U=this._stats)==null||U.time("Rendering"),!(B.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:z,optionalContentConfig:B}),M.operatorListChanged()}).catch(k),L}getOperatorList({intent:t="display",annotationMode:e=zr.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var f;function a(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,n,i,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Ch.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function a(){l.read().then(function({value:d,done:f}){if(f){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),a()},i)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),x(this,Ki,!1),C(this,Es,Vp).call(this),Promise.all(t)}cleanup(t=!1){x(this,Ki,!0);const e=C(this,Es,Dl).call(this,!1);return t&&e&&this._stats&&(this._stats=new xb),e}_startRenderPage(t,e){var i,a;const n=this._intentStates.get(e);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&C(this,Es,Dl).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:i},l).getReader(),f=this._intentStates.get(e);f.streamReader=d;const m=()=>{d.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),m())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();C(this,Es,Dl).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Fw){let i=DI;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Ao(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}no=new WeakMap,Ki=new WeakMap,Es=new WeakSet,Dl=function(t=!1){if(C(this,Es,Vp).call(this),!c(this,Ki)||this.destroyed)return!1;if(t)return x(this,no,setTimeout(()=>{x(this,no,null),C(this,Es,Dl).call(this,!1)},II)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,Ki,!1),!0},Vp=function(){c(this,no)&&(clearTimeout(c(this,no)),x(this,no,null))};var Yi,Pm;class $I{constructor(){_(this,Yi,new Map);_(this,Pm,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};c(this,Pm).then(()=>{for(const[i]of c(this,Yi))i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Pt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);i=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}c(this,Yi).set(e,i)}removeEventListener(t,e){const n=c(this,Yi).get(e);n==null||n(),c(this,Yi).delete(e)}terminate(){for(const[,t]of c(this,Yi))t==null||t();c(this,Yi).clear()}}Yi=new WeakMap,Pm=new WeakMap;var Mm,Sa,ba,yu,Bp,vu,Hp;const re=class re{constructor({name:t=null,port:e=null,verbosity:n=_D()}={}){_(this,yu);var i;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=c(re,ba))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(c(re,ba)||x(re,ba,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new eh("main","worker",t),this._messageHandler.on("ready",function(){}),C(this,yu,Bp).call(this)}_initialize(){if(c(re,Sa)||c(re,vu,Hp)){this._setupFakeWorker();return}let{workerSrc:t}=re;try{re._isSameOrigin(window.location.href,t)||(t=re._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new eh("main","worker",e),i=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:a.signal}),n.on("test",u=>{if(a.abort(),this.destroyed||!u){i();return}this._messageHandler=n,this._port=e,this._webWorker=e,C(this,yu,Bp).call(this)}),n.on("ready",u=>{if(a.abort(),this.destroyed){i();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{qm("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(re,Sa)||(Pt("Setting up fake worker."),x(re,Sa,!0)),re._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new $I;this._port=e;const n=`fake${vn(re,Mm)._++}`,i=new eh(n+"_worker",n,e);t.setup(i,e),this._messageHandler=new eh(n,n+"_worker",e),C(this,yu,Bp).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=c(re,ba))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=c(this,ba))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new re(t)}static get workerSrc(){if(cr.workerSrc)return cr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Nt(this,"_setupFakeWorkerGlobal",(async()=>c(this,vu,Hp)?c(this,vu,Hp):(await import(this.workerSrc)).WorkerMessageHandler)())}};Mm=new WeakMap,Sa=new WeakMap,ba=new WeakMap,yu=new WeakSet,Bp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},vu=new WeakSet,Hp=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},_(re,vu),_(re,Mm,0),_(re,Sa,!1),_(re,ba),fn&&(x(re,Sa,!0),cr.workerSrc||(cr.workerSrc="./pdf.worker.mjs")),re._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const i=new URL(e,n);return n.origin===i.origin},re._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Gl=re;var Qi,mi,wu,Au,Zi,Ea,oh;class GI{constructor(t,e,n,i,a){_(this,Ea);_(this,Qi,new Map);_(this,mi,new Map);_(this,wu,new Map);_(this,Au,new Map);_(this,Zi,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new wC,this.fontLoader=new $D({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Nt(this,"annotationStorage",new Vw)}getRenderingIntent(t,e=zr.ENABLE,n=null,i=!1,a=!1){let l=ns.DISPLAY,u=iv;switch(t){case"any":l=ns.ANY;break;case"display":break;case"print":l=ns.PRINT;break;default:Pt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&ns.PRINT&&n instanceof Y_?n:this.annotationStorage;switch(e){case zr.DISABLE:l+=ns.ANNOTATIONS_DISABLE;break;case zr.ENABLE:break;case zr.ENABLE_FORMS:l+=ns.ANNOTATIONS_FORMS;break;case zr.ENABLE_STORAGE:l+=ns.ANNOTATIONS_STORAGE,u=d.serializable;break;default:Pt(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(l+=ns.IS_EDITING),a&&(l+=ns.OPLIST);const{ids:f,hash:m}=d.modifiedIds,g=[l,u.hash,m];return{renderingIntent:l,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,Zi))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of c(this,mi).values())t.push(i._destroy());c(this,mi).clear(),c(this,wu).clear(),c(this,Au).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Qi).clear(),this.filterFactory.destroy(),_h.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Ao("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{_e(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){i.close();return}_e(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:l}=this._fullReader;return(!i||!a)&&(this._lastProgress&&((u=e.onProgress)==null||u.call(e,this._lastProgress)),this._fullReader.onProgress=d=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:l}}),t.on("GetRangeReader",(n,i)=>{_e(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:l,done:u}){if(u){i.close();return}_e(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{i.error(l)})},i.onCancel=l=>{a.cancel(l),i.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new HI(n,this))}),t.on("DocException",n=>{e._capability.reject(In(n))}),t.on("PasswordRequest",n=>{x(this,Zi,Promise.withResolvers());try{if(!e.onPassword)throw In(n);const i=a=>{a instanceof Error?c(this,Zi).reject(a):c(this,Zi).resolve({password:a})};e.onPassword(i,n.code)}catch(i){c(this,Zi).reject(i)}return c(this,Zi).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,mi).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,a])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:u,fontExtraProperties:d,pdfBug:f}=this._params;if("error"in a){const A=a.error;Pt(`Error during font loading: ${A}`),this.commonObjs.resolve(n,A);break}const m=f&&((l=globalThis.FontInspector)!=null&&l.enabled)?(A,S)=>globalThis.FontInspector.fontAdded(A,S):null,g=new GD(a,{disableFontFace:u,fontExtraProperties:d,inspectFont:m});this.fontLoader.bind(g).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&g.data&&(g.data=null),this.commonObjs.resolve(n,g)});break;case"CopyLocalImage":const{imageRef:v}=a;_e(v,"The imageRef must be defined.");for(const A of c(this,mi).values())for(const[,S]of A.objs)if((S==null?void 0:S.ref)===v)return S.dataLen?(this.commonObjs.resolve(n,structuredClone(S)),S.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,a,l])=>{var d;if(this.destroyed)return;const u=c(this,mi).get(i);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=l==null?void 0:l.bitmap)==null||d.close();return}switch(a){case"Image":u.objs.resolve(n,l),(l==null?void 0:l.dataLen)>AD&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=c(this,wu).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&c(this,Au).set(a.refStr,t);const l=new UI(e,a,this,this._params.pdfBug);return c(this,mi).set(e,l),l});return c(this,wu).set(e,i),i}getPageIndex(t){return Nb(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return C(this,Ea,oh).call(this,"GetFieldObjects")}hasJSActions(){return C(this,Ea,oh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return C(this,Ea,oh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return C(this,Ea,oh).call(this,"GetOptionalContentConfig").then(e=>new fI(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,Qi).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var a,l;return{info:i[0],metadata:i[1]?new hI(i[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}});return c(this,Qi).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,mi).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,Qi).clear(),this.filterFactory.destroy(!0),_h.cleanup()}}cachedPageNumber(t){if(!Nb(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,Au).get(e)??null}}Qi=new WeakMap,mi=new WeakMap,wu=new WeakMap,Au=new WeakMap,Zi=new WeakMap,Ea=new WeakSet,oh=function(t,e=null){const n=c(this,Qi).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return c(this,Qi).set(t,i),i};const Gc=Symbol("INITIAL_DATA");var qn,gd,gv;class wC{constructor(){_(this,gd);_(this,qn,Object.create(null))}get(t,e=null){if(e){const i=C(this,gd,gv).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=c(this,qn)[t];if(!n||n.data===Gc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=c(this,qn)[t];return!!e&&e.data!==Gc}delete(t){const e=c(this,qn)[t];return!e||e.data===Gc?!1:(delete c(this,qn)[t],!0)}resolve(t,e=null){const n=C(this,gd,gv).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in c(this,qn)){const{data:n}=c(this,qn)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}x(this,qn,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,qn)){const{data:e}=c(this,qn)[t];e!==Gc&&(yield[t,e])}}}qn=new WeakMap,gd=new WeakSet,gv=function(t){var e;return(e=c(this,qn))[t]||(e[t]={...Promise.withResolvers(),data:Gc})};var so;class WI{constructor(t){_(this,so,null);x(this,so,t),this.onContinue=null}get promise(){return c(this,so).capability.promise}cancel(t=0){c(this,so).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,so).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(this,so);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}so=new WeakMap;var io,_a;const Go=class Go{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:g=!1,pageColors:v=null}){_(this,io,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new WI(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var u,d;if(this.cancelled)return;if(this._canvas){if(c(Go,_a).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(Go,_a).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:a,background:l}=this.params;this.gfx=new $l(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:i,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,io)&&(window.cancelAnimationFrame(c(this,io)),x(this,io,null)),c(Go,_a).delete(this._canvas),this.callback(t||new Fw(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,io,window.requestAnimationFrame(()=>{x(this,io,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(Go,_a).delete(this._canvas),this.callback())))}};io=new WeakMap,_a=new WeakMap,_(Go,_a,new WeakSet);let yv=Go;const qI="4.10.38",XI="f9bea397f";function Fb(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function Wc(o){return Math.max(0,Math.min(255,255*o))}class Ob{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Wc(t),[t,t,t]}static G_HTML([t]){const e=Fb(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Wc)}static RGB_HTML(t){return`#${t.map(Fb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[Wc(1-Math.min(1,t+i)),Wc(1-Math.min(1,n+i)),Wc(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,a=1-e,l=1-n,u=Math.min(i,a,l);return["CMYK",i,a,l,u]}}class KI{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Qt("Abstract method `_createSVG` called.")}}class Hw extends KI{_createSVG(t){return document.createElementNS(Ii,t)}}class AC{static setupStorage(t,e,n,i,a){const l=i.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),a==="print")break;t.addEventListener("input",u=>{i.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",u=>{i.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),a==="print")break;t.addEventListener("input",u=>{i.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;i.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:a}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${i}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&a.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){var g,v;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,a=t.intent||"display",l=document.createElement(i.name);i.attributes&&this.setAttributes({html:l,element:i,intent:a,linkService:n});const u=a!=="richText",d=t.div;if(d.append(l),t.viewport){const A=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=A}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(i.children.length===0){if(i.value){const A=document.createTextNode(i.value);l.append(A),u&&Ch.shouldBuildText(i.name)&&f.push(A)}return{textDivs:f}}const m=[[i,-1,l]];for(;m.length>0;){const[A,S,b]=m.at(-1);if(S+1===A.children.length){m.pop();continue}const T=A.children[++m.at(-1)[1]];if(T===null)continue;const{name:k}=T;if(k==="#text"){const L=document.createTextNode(T.value);f.push(L),b.append(L);continue}const M=(g=T==null?void 0:T.attributes)!=null&&g.xmlns?document.createElementNS(T.attributes.xmlns,k):document.createElement(k);if(b.append(M),T.attributes&&this.setAttributes({html:M,element:T,storage:e,intent:a,linkService:n}),((v=T.children)==null?void 0:v.length)>0)m.push([T,-1,M]);else if(T.value){const L=document.createTextNode(T.value);u&&Ch.shouldBuildText(k)&&f.push(L),M.append(L)}}for(const A of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const rf=1e3,YI=9,tl=new WeakSet;function yo(o){return{width:o[2]-o[0],height:o[3]-o[1]}}class QI{static create(t){switch(t.data.annotationType){case Pe.LINK:return new xC(t);case Pe.TEXT:return new ZI(t);case Pe.WIDGET:switch(t.data.fieldType){case"Tx":return new JI(t);case"Btn":return t.data.radioButton?new EC(t):t.data.checkBox?new eN(t):new nN(t);case"Ch":return new sN(t);case"Sig":return new tN(t)}return new sl(t);case Pe.POPUP:return new wv(t);case Pe.FREETEXT:return new PC(t);case Pe.LINE:return new rN(t);case Pe.SQUARE:return new oN(t);case Pe.CIRCLE:return new aN(t);case Pe.POLYLINE:return new MC(t);case Pe.CARET:return new uN(t);case Pe.INK:return new Uw(t);case Pe.POLYGON:return new lN(t);case Pe.HIGHLIGHT:return new RC(t);case Pe.UNDERLINE:return new cN(t);case Pe.SQUIGGLY:return new hN(t);case Pe.STRIKEOUT:return new dN(t);case Pe.STAMP:return new LC(t);case Pe.FILEATTACHMENT:return new fN(t);default:return new Se(t)}}}var Ca,xu,Su,yd,vv;const qw=class qw{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){_(this,yd);_(this,Ca,null);_(this,xu,!1);_(this,Su,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return qw._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;c(this,Ca)||x(this,Ca,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&C(this,yd,vv).call(this,e),(n=c(this,Su))==null||n.popup.updateEdited(t)}resetEdited(){var t;c(this,Ca)&&(C(this,yd,vv).call(this,c(this,Ca).rect),(t=c(this,Su))==null||t.popup.resetEdited(),x(this,Ca,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),this instanceof sl||(a.tabIndex=rf);const{style:l}=a;if(l.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof wv){const{rotation:b}=e;return!e.hasOwnCanvas&&b!==0&&this.setRotation(b,a),a}const{width:u,height:d}=yo(e.rect);if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const b=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(b>0||T>0){const M=`calc(${b}px * var(--scale-factor)) / calc(${T}px * var(--scale-factor))`;l.borderRadius=M}else if(this instanceof EC){const M=`calc(${u}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;l.borderRadius=M}switch(e.borderStyle.style){case Uc.SOLID:l.borderStyle="solid";break;case Uc.DASHED:l.borderStyle="dashed";break;case Uc.BEVELED:Pt("Unimplemented border style: beveled");break;case Uc.INSET:Pt("Unimplemented border style: inset");break;case Uc.UNDERLINE:l.borderBottomStyle="solid";break}const k=e.borderColor||null;k?(x(this,xu,!0),l.borderColor=mt.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):l.borderWidth=0}const f=mt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:g,pageX:v,pageY:A}=i.rawDims;l.left=`${100*(f[0]-v)/m}%`,l.top=`${100*(f[1]-A)/g}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(l.width=`${100*u/m}%`,l.height=`${100*d/g}%`):this.setRotation(S,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:a,height:l}=yo(this.data.rect);let u,d;t%180===0?(u=100*a/n,d=100*l/i):(u=100*l/n,d=100*a/i),e.style.width=`${u}%`,e.style.height=`${d}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const a=i.detail[e],l=a[0],u=a.slice(1);i.target.style[n]=Ob[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:Ob[`${l}_rgb`](u)})};return Nt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const a=t[i]||n[i];a==null||a(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,a]of Object.entries(e)){const l=n[i];if(l){const u={detail:{[i]:a},target:t};l(u),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,a]=this.data.rect.map(b=>Math.fround(b));if(t.length===8){const[b,T,k,M]=t.subarray(2,6);if(i===b&&a===T&&e===k&&n===M)return}const{style:l}=this.container;let u;if(c(this,xu)){const{borderColor:b,borderWidth:T}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const d=i-e,f=a-n,{svgFactory:m}=this,g=m.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const v=m.createElement("defs");g.append(v);const A=m.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),v.append(A);for(let b=2,T=t.length;b<T;b+=8){const k=t[b],M=t[b+1],L=t[b+2],R=t[b+3],I=m.createElement("rect"),z=(L-e)/d,B=(a-M)/f,U=(k-L)/d,Q=(M-R)/f;I.setAttribute("x",z),I.setAttribute("y",B),I.setAttribute("width",U),I.setAttribute("height",Q),A.append(I),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${B}" width="${U}" height="${Q}"/>`)}c(this,xu)&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:t}=this,e=x(this,Su,new wv({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Qt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:a,id:l,exportValues:u}of i){if(a===-1||l===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!tl.has(f)){Pt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:f})}return n}for(const i of document.getElementsByName(t)){const{exportValue:a}=i,l=i.getAttribute("data-element-id");l!==e&&tl.has(i)&&n.push({id:l,exportValue:a,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Ca=new WeakMap,xu=new WeakMap,Su=new WeakMap,yd=new WeakSet,vv=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...t);const{width:f,height:m}=yo(t);e.left=`${100*(t[0]-u)/a}%`,e.top=`${100*(l-t[3]+d)/l}%`,i===0?(e.width=`${100*f/a}%`,e.height=`${100*m/l}%`):this.setRotation(i)};let Se=qw;var ss,Bo,SC,bC;class xC extends Se{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});_(this,ss);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let a=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(i,e.action),a=!0):e.attachment?(C(this,ss,SC).call(this,i,e.attachment,e.attachmentDest),a=!0):e.setOCGState?(C(this,ss,bC).call(this,i,e.setOCGState),a=!0):e.dest?(this._bindLink(i,e.dest),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),a=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&C(this,ss,Bo).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),C(this,ss,Bo).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const l=i.get(a);l&&(e[l]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}e.onclick||(e.onclick=()=>!1),C(this,ss,Bo).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),C(this,ss,Bo).call(this),!this._fieldObjects){Pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var g;i==null||i();const{fields:a,refs:l,include:u}=n,d=[];if(a.length!==0||l.length!==0){const v=new Set(l);for(const A of a){const S=this._fieldObjects[A]||[];for(const{id:b}of S)v.add(b)}for(const A of Object.values(this._fieldObjects))for(const S of A)v.has(S.id)===u&&d.push(S)}else for(const v of Object.values(this._fieldObjects))d.push(...v);const f=this.annotationStorage,m=[];for(const v of d){const{id:A}=v;switch(m.push(A),v.type){case"text":{const b=v.defaultValue||"";f.setValue(A,{value:b});break}case"checkbox":case"radiobutton":{const b=v.defaultValue===v.exportValues;f.setValue(A,{value:b});break}case"combobox":case"listbox":{const b=v.defaultValue||"";f.setValue(A,{value:b});break}default:continue}const S=document.querySelector(`[data-element-id="${A}"]`);if(S){if(!tl.has(S)){Pt(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}ss=new WeakSet,Bo=function(){this.container.setAttribute("data-internal-link","")},SC=function(e,n,i=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,i),!1},C(this,ss,Bo).call(this)},bC=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),C(this,ss,Bo).call(this)};class ZI extends Se{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class sl extends Se{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return En.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,a){n.includes("mouse")?t.addEventListener(n,l=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{var u;if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(l)}}))})}_setEventListeners(t,e,n,i){var a,l,u;for(const[d,f]of n)(f==="Action"||(a=this.data.actions)!=null&&a[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,f,i),f==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":mt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||YI,a=t.style;let l;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(f/(h0*i))||1,g=f/m;l=Math.min(i,d(g/h0))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(i,d(f/h0))}a.fontSize=`calc(${l}px * var(--scale-factor))`,a.color=mt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class JI extends sl{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const a=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),a.setValue(l.id,{[i]:n})}render(){var i,a;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=t.getValue(e,{value:this.data.fieldValue});let u=l.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let f=l.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),tl.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=rf,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",v=>{t.setValue(e,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",v=>{const A=this.data.defaultFieldValue??"";n.value=m.userValue=A,m.formattedValue=null});let g=v=>{const{formattedValue:A}=m;A!=null&&(v.target.value=A),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",A=>{var b;if(m.focused)return;const{target:S}=A;m.userValue&&(S.value=m.userValue),m.lastCommittedValue=S.value,m.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const S={value(b){m.userValue=b.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),b.target.value=m.userValue},formattedValue(b){const{formattedValue:T}=b.detail;m.formattedValue=T,T!=null&&b.target!==document.activeElement&&(b.target.value=T),t.setValue(e,{formattedValue:T})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var L;const{charLimit:T}=b.detail,{target:k}=b;if(T===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",T);let M=m.userValue;!M||M.length<=T||(M=M.slice(0,T),k.value=m.userValue=M,t.setValue(e,{value:M}),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(S,A)}),n.addEventListener("keydown",A=>{var T;m.commitKey=1;let S=-1;if(A.key==="Escape"?S=0:A.key==="Enter"&&!this.data.multiLine?S=2:A.key==="Tab"&&(m.commitKey=3),S===-1)return;const{value:b}=A.target;m.lastCommittedValue!==b&&(m.lastCommittedValue=b,m.userValue=b,(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:S,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const v=g;g=null,n.addEventListener("blur",A=>{var b,T;if(!m.focused||!A.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(m.focused=!1);const{value:S}=A.target;m.userValue=S,m.lastCommittedValue!==S&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:m.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}})),v(A)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",A=>{var I;m.lastCommittedValue=null;const{data:S,target:b}=A,{value:T,selectionStart:k,selectionEnd:M}=b;let L=k,R=M;switch(A.inputType){case"deleteWordBackward":{const z=T.substring(0,k).match(/\w*[^\w]*$/);z&&(L-=z[0].length);break}case"deleteWordForward":{const z=T.substring(k).match(/^[^\w]*\w*/);z&&(R+=z[0].length);break}case"deleteContentBackward":k===M&&(L-=1);break;case"deleteContentForward":k===M&&(R+=1);break}A.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:S||"",willCommit:!1,selStart:L,selEnd:R}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${A}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class tN extends sl{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class eN extends sl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return tl.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=rf,a.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,n)){const m=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(n,{value:d})}),a.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class EC extends sl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const a=document.createElement("input");if(tl.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=rf,a.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),a.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;a.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const m=l===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=m&&g.id===n;g.domElement&&(g.domElement.checked=v),t.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class nN extends xC{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class sN extends sl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");tl.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=rf;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",m=>{const g=this.data.defaultFieldValue;for(const v of i.options)v.selected=v.value===g});for(const m of this.data.options){const g=document.createElement("option");g.textContent=m.displayValue,g.value=m.exportValue,n.value.includes(m.exportValue)&&(g.setAttribute("selected",!0),a=!1),i.append(g)}let l=null;if(a){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),i.prepend(m),l=()=>{m.remove(),i.removeEventListener("input",l),l=null},i.addEventListener("input",l)}const u=m=>{const g=m?"value":"textContent",{options:v,multiple:A}=i;return A?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let d=u(!1);const f=m=>{const g=m.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",m=>{const g={value(v){l==null||l();const A=v.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const b of i.options)b.selected=S.has(b.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(v){i.multiple=!0},remove(v){const A=i.options,S=v.detail.remove;A[S].selected=!1,i.remove(S),A.length>0&&Array.prototype.findIndex.call(A,T=>T.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),d=u(!1)},clear(v){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(v){const{index:A,displayValue:S,exportValue:b}=v.detail.insert,T=i.children[A],k=document.createElement("option");k.textContent=S,k.value=b,T?T.before(k):i.append(k),t.setValue(e,{value:u(!0),items:f(v)}),d=u(!1)},items(v){const{items:A}=v.detail;for(;i.length!==0;)i.remove(0);for(const S of A){const{displayValue:b,exportValue:T}=S,k=document.createElement("option");k.textContent=b,k.value=T,i.append(k)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),d=u(!1)},indices(v){const A=new Set(v.detail.indices);for(const S of v.target.options)S.selected=A.has(S.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,m)}),i.addEventListener("input",m=>{var A;const g=u(!0),v=u(!1);t.setValue(e,{value:g}),m.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):i.addEventListener("input",function(m){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class wv extends Se{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Se._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new iN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${Nw}${n}`).join(",")),this.container}}var bu,Rm,Lm,Eu,Ta,me,Ji,_u,vd,wd,Cu,tr,Bs,er,Ad,nr,xd,ka,Pa,Xt,Up,Av,_C,CC,TC,kC,$p,Gp,xv;class iN{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:a,contentsObj:l,richText:u,parent:d,rect:f,parentRect:m,open:g}){_(this,Xt);_(this,bu,C(this,Xt,TC).bind(this));_(this,Rm,C(this,Xt,xv).bind(this));_(this,Lm,C(this,Xt,Gp).bind(this));_(this,Eu,C(this,Xt,$p).bind(this));_(this,Ta,null);_(this,me,null);_(this,Ji,null);_(this,_u,null);_(this,vd,null);_(this,wd,null);_(this,Cu,null);_(this,tr,!1);_(this,Bs,null);_(this,er,null);_(this,Ad,null);_(this,nr,null);_(this,xd,null);_(this,ka,null);_(this,Pa,!1);var v;x(this,me,t),x(this,xd,i),x(this,Ji,l),x(this,nr,u),x(this,wd,d),x(this,Ta,e),x(this,Ad,f),x(this,Cu,m),x(this,vd,n),x(this,_u,jw.toDateObject(a)),this.trigger=n.flatMap(A=>A.getElementsToTriggerPopup());for(const A of this.trigger)A.addEventListener("click",c(this,Eu)),A.addEventListener("mouseenter",c(this,Lm)),A.addEventListener("mouseleave",c(this,Rm)),A.classList.add("popupTriggerArea");for(const A of n)(v=A.container)==null||v.addEventListener("keydown",c(this,bu));c(this,me).hidden=!0,g&&C(this,Xt,$p).call(this)}render(){if(c(this,Bs))return;const t=x(this,Bs,document.createElement("div"));if(t.className="popup",c(this,Ta)){const a=t.style.outlineColor=mt.makeHexColor(...c(this,Ta));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:t.style.backgroundColor=mt.makeHexColor(...c(this,Ta).map(u=>Math.floor(.7*(255-u)+u)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=c(this,xd),t.append(e),c(this,_u)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,_u).valueOf()})),e.append(a)}const i=c(this,Xt,Up);if(i)AC.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(c(this,Ji));t.append(a)}c(this,me).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let a=0,l=i.length;a<l;++a){const u=i[a];n.append(document.createTextNode(u)),a<l-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;c(this,ka)||x(this,ka,{contentsObj:c(this,Ji),richText:c(this,nr)}),t&&x(this,er,null),e&&(x(this,nr,C(this,Xt,CC).call(this,e)),x(this,Ji,null)),(n=c(this,Bs))==null||n.remove(),x(this,Bs,null)}resetEdited(){var t;c(this,ka)&&({contentsObj:vn(this,Ji)._,richText:vn(this,nr)._}=c(this,ka),x(this,ka,null),(t=c(this,Bs))==null||t.remove(),x(this,Bs,null),x(this,er,null))}forceHide(){x(this,Pa,this.isVisible),c(this,Pa)&&(c(this,me).hidden=!0)}maybeShow(){c(this,Pa)&&(c(this,Bs)||C(this,Xt,Gp).call(this),x(this,Pa,!1),c(this,me).hidden=!1)}get isVisible(){return c(this,me).hidden===!1}}bu=new WeakMap,Rm=new WeakMap,Lm=new WeakMap,Eu=new WeakMap,Ta=new WeakMap,me=new WeakMap,Ji=new WeakMap,_u=new WeakMap,vd=new WeakMap,wd=new WeakMap,Cu=new WeakMap,tr=new WeakMap,Bs=new WeakMap,er=new WeakMap,Ad=new WeakMap,nr=new WeakMap,xd=new WeakMap,ka=new WeakMap,Pa=new WeakMap,Xt=new WeakSet,Up=function(){const t=c(this,nr),e=c(this,Ji);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,nr).html||null},Av=function(){var t,e,n;return((n=(e=(t=c(this,Xt,Up))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},_C=function(){var t,e,n;return((n=(e=(t=c(this,Xt,Up))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},CC=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:c(this,Xt,_C),fontSize:c(this,Xt,Av)?`calc(${c(this,Xt,Av)}px * var(--scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:i});return n},TC=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,tr))&&C(this,Xt,$p).call(this)},kC=function(){if(c(this,er)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:a}}}=c(this,wd);let l=!!c(this,Cu),u=l?c(this,Cu):c(this,Ad);for(const S of c(this,vd))if(!u||mt.intersect(S.data.rect,u)!==null){u=S.data.rect,l=!0;break}const d=mt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),m=l?u[2]-u[0]+5:0,g=d[0]+m,v=d[1];x(this,er,[100*(g-i)/e,100*(v-a)/n]);const{style:A}=c(this,me);A.left=`${c(this,er)[0]}%`,A.top=`${c(this,er)[1]}%`},$p=function(){x(this,tr,!c(this,tr)),c(this,tr)?(C(this,Xt,Gp).call(this),c(this,me).addEventListener("click",c(this,Eu)),c(this,me).addEventListener("keydown",c(this,bu))):(C(this,Xt,xv).call(this),c(this,me).removeEventListener("click",c(this,Eu)),c(this,me).removeEventListener("keydown",c(this,bu)))},Gp=function(){c(this,Bs)||this.render(),this.isVisible?c(this,tr)&&c(this,me).classList.add("focused"):(C(this,Xt,kC).call(this),c(this,me).hidden=!1,c(this,me).style.zIndex=parseInt(c(this,me).style.zIndex)+1e3)},xv=function(){c(this,me).classList.remove("focused"),!(c(this,tr)||!this.isVisible)&&(c(this,me).hidden=!0,c(this,me).style.zIndex=parseInt(c(this,me).style.zIndex)-1e3)};class PC extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=kt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Sd;class rN extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Sd,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:i}=yo(e.rect),a=this.svgFactory.create(n,i,!0),l=x(this,Sd,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Sd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sd=new WeakMap;var bd;class oN extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,bd,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:i}=yo(e.rect),a=this.svgFactory.create(n,i,!0),l=e.borderStyle.width,u=x(this,bd,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",l/2),u.setAttribute("y",l/2),u.setAttribute("width",n-l),u.setAttribute("height",i-l),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}bd=new WeakMap;var Ed;class aN extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Ed,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:i}=yo(e.rect),a=this.svgFactory.create(n,i,!0),l=e.borderStyle.width,u=x(this,Ed,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",i/2),u.setAttribute("rx",n/2-l/2),u.setAttribute("ry",i/2-l/2),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Ed)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ed=new WeakMap;var _d;class MC extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,_d,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:a}}=this;if(!n)return this.container;const{width:l,height:u}=yo(e),d=this.svgFactory.create(l,u,!0);let f=[];for(let g=0,v=n.length;g<v;g+=2){const A=n[g]-e[0],S=e[3]-n[g+1];f.push(`${A},${S}`)}f=f.join(" ");const m=x(this,_d,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",f),m.setAttribute("stroke-width",i.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),d.append(m),this.container.append(d),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,_d)}addHighlightArea(){this.container.classList.add("highlightArea")}}_d=new WeakMap;class lN extends MC{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class uN extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Cd,Ma,Td,Sv;class Uw extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Td);_(this,Cd,null);_(this,Ma,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?kt.HIGHLIGHT:kt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:a,popupRef:l}}=this,{transform:u,width:d,height:f}=C(this,Td,Sv).call(this,n,e),m=this.svgFactory.create(d,f,!0),g=x(this,Cd,this.svgFactory.createElement("svg:g"));m.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",u);for(let v=0,A=i.length;v<A;v++){const S=this.svgFactory.createElement(this.svgElementName);c(this,Ma).push(S),S.setAttribute("points",i[v].join(",")),g.append(S)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:a}=e,l=c(this,Cd);if(n>=0&&l.setAttribute("stroke-width",n||1),i)for(let u=0,d=c(this,Ma).length;u<d;u++)c(this,Ma)[u].setAttribute("points",i[u].join(","));if(a){const{transform:u,width:d,height:f}=C(this,Td,Sv).call(this,this.data.rotation,a);l.parentElement.setAttribute("viewBox",`0 0 ${d} ${f}`),l.setAttribute("transform",u)}}getElementsToTriggerPopup(){return c(this,Ma)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cd=new WeakMap,Ma=new WeakMap,Td=new WeakSet,Sv=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class RC extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=kt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class cN extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class hN extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class dN extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class LC extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=kt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var kd,Pd,bv;class fN extends Se{constructor(e){var i;super(e,{isRenderable:!0});_(this,Pd);_(this,kd,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",C(this,Pd,bv).bind(this)),x(this,kd,i);const{isMac:a}=En.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&C(this,Pd,bv).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return c(this,kd)}addHighlightArea(){this.container.classList.add("highlightArea")}}kd=new WeakMap,Pd=new WeakSet,bv=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Md,Ra,La,Rd,el,DC,Ev;class pN{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:l,structTreeLayer:u}){_(this,el);_(this,Md,null);_(this,Ra,null);_(this,La,new Map);_(this,Rd,null);this.div=t,x(this,Md,e),x(this,Ra,n),x(this,Rd,u||null),this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return c(this,La).size>0}async render(t){var l;const{annotations:e}=t,n=this.div;Za(n,this.viewport);const i=new Map,a={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Hw,annotationStorage:t.annotationStorage||new Vw,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const d=u.annotationType===Pe.POPUP;if(d){const g=i.get(u.id);if(!g)continue;a.elements=g}else{const{width:g,height:v}=yo(u.rect);if(g<=0||v<=0)continue}a.data=u;const f=QI.create(a);if(!f.isRenderable)continue;if(!d&&u.popupRef){const g=i.get(u.popupRef);g?g.push(f):i.set(u.popupRef,[f])}const m=f.render();u.hidden&&(m.style.visibility="hidden"),await C(this,el,DC).call(this,m,u.id),f._isEditable&&(c(this,La).set(f.data.id,f),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(f))}C(this,el,Ev).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Za(e,{rotation:t.rotation}),C(this,el,Ev).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,La).values())}getEditableAnnotation(t){return c(this,La).get(t)}}Md=new WeakMap,Ra=new WeakMap,La=new WeakMap,Rd=new WeakMap,el=new WeakSet,DC=async function(t,e){var l,u;const n=t.firstChild||t,i=n.id=`${Nw}${e}`,a=await((l=c(this,Rd))==null?void 0:l.getAriaAttributes(i));if(a)for(const[d,f]of a)n.setAttribute(d,f);this.div.append(t),(u=c(this,Md))==null||u.moveElementInDOM(this.div,t,n,!1)},Ev=function(){if(!c(this,Ra))return;const t=this.div;for(const[e,n]of c(this,Ra)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):i.append(n)}c(this,Ra).clear()};const Ep=/\r\n?|\n/g;var Hs,Xn,Ld,Da,Kn,Ce,IC,NC,FC,Wp,pr,qp,Xp,OC,Cv,jC;const Jt=class Jt extends fe{constructor(e){super({...e,name:"freeTextEditor"});_(this,Ce);_(this,Hs);_(this,Xn,"");_(this,Ld,`${this.id}-editor`);_(this,Da,null);_(this,Kn);x(this,Hs,e.color||Jt._defaultColor||fe._defaultLineColor),x(this,Kn,e.fontSize||Jt._defaultFontSize)}static get _keyboardManager(){const e=Jt.prototype,n=l=>l.isEmpty(),i=Ja.TRANSLATE_SMALL,a=Ja.TRANSLATE_BIG;return Nt(this,"_keyboardManager",new sf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(e,n){fe.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case jt.FREETEXT_SIZE:Jt._defaultFontSize=n;break;case jt.FREETEXT_COLOR:Jt._defaultColor=n;break}}updateParams(e,n){switch(e){case jt.FREETEXT_SIZE:C(this,Ce,IC).call(this,n);break;case jt.FREETEXT_COLOR:C(this,Ce,NC).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jt.FREETEXT_SIZE,Jt._defaultFontSize],[jt.FREETEXT_COLOR,Jt._defaultColor||fe._defaultLineColor]]}get propertiesToUpdate(){return[[jt.FREETEXT_SIZE,c(this,Kn)],[jt.FREETEXT_COLOR,c(this,Hs)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Jt._internalPadding*e,-(Jt._internalPadding+c(this,Kn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(kt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,Da,new AbortController);const e=this._uiManager.combinedSignal(c(this,Da));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Ld)),this._isDraggable=!0,(e=c(this,Da))==null||e.abort(),x(this,Da,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,Xn),n=x(this,Xn,C(this,Ce,FC).call(this).trimEnd());if(e===n)return;const i=a=>{if(x(this,Xn,a),!a){this.remove();return}C(this,Ce,Xp).call(this),this._uiManager.rebuild(this),C(this,Ce,Wp).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),C(this,Ce,Wp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Jt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Ld)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${c(this,Kn)}px * var(--scale-factor))`,i.color=c(this,Hs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),dm(this,this.div,["dblclick","keydown"]),this.width){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[m,g]=this.pageDimensions,[v,A]=this.pageTranslation;let S,b;switch(this.rotation){case 0:S=e+(u[0]-v)/m,b=n+this.height-(u[1]-A)/g;break;case 90:S=e+(u[0]-v)/m,b=n-(u[1]-A)/g,[d,f]=[f,-d];break;case 180:S=e-this.width+(u[0]-v)/m,b=n-(u[1]-A)/g,[d,f]=[-d,-f];break;case 270:S=e+(u[0]-v-this.height*g)/m,b=n+(u[1]-A-this.width*m)/g,[d,f]=[-f,d];break}this.setAt(S*a,b*l,d,f)}else this.setAt(e*a,n*l,this.width*a,this.height*l);C(this,Ce,Xp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var S,b,T;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const a=C(S=Jt,pr,Cv).call(S,n.getData("text")||"").replaceAll(Ep,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const u=l.getRangeAt(0);if(!a.includes(`
`)){u.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:d,startOffset:f}=u,m=[],g=[];if(d.nodeType===Node.TEXT_NODE){const k=d.parentElement;if(g.push(d.nodeValue.slice(f).replaceAll(Ep,"")),k!==this.editorDiv){let M=m;for(const L of this.editorDiv.childNodes){if(L===k){M=g;continue}M.push(C(b=Jt,pr,qp).call(b,L))}}m.push(d.nodeValue.slice(0,f).replaceAll(Ep,""))}else if(d===this.editorDiv){let k=m,M=0;for(const L of this.editorDiv.childNodes)M++===f&&(k=g),k.push(C(T=Jt,pr,qp).call(T,L))}x(this,Xn,`${m.join(`
`)}${a}${g.join(`
`)}`),C(this,Ce,Xp).call(this);const v=new Range;let A=m.reduce((k,M)=>k+M.length,0);for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const M=k.nodeValue.length;if(A<=M){v.setStart(k,A),v.setEnd(k,A);break}A-=M}l.removeAllRanges(),l.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,i){var u;let a=null;if(e instanceof PC){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:m,rotation:g,id:v,popupRef:A},textContent:S,textPosition:b,parent:{page:{pageNumber:T}}}=e;if(!S||S.length===0)return null;a=e={annotationType:kt.FREETEXT,color:Array.from(f),fontSize:d,value:S.join(`
`),position:b,pageIndex:T-1,rect:m.slice(0),rotation:g,id:v,deleted:!1,popupRef:A}}const l=await super.deserialize(e,n,i);return x(l,Kn,e.fontSize),x(l,Hs,mt.makeHexColor(...e.color)),x(l,Xn,C(u=Jt,pr,Cv).call(u,e.value)),l.annotationElementId=e.id||null,l._initialData=a,l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Jt._internalPadding*this.parentScale,i=this.getRect(n,n),a=fe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Hs)),l={annotationType:kt.FREETEXT,color:a,fontSize:c(this,Kn),value:C(this,Ce,OC).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!C(this,Ce,jC).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${c(this,Kn)}px * var(--scale-factor))`,i.color=c(this,Hs),n.replaceChildren();for(const l of c(this,Xn).split(`
`)){const u=document.createElement("div");u.append(l?document.createTextNode(l):document.createElement("br")),n.append(u)}const a=Jt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(a,a),popupContent:c(this,Xn)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Hs=new WeakMap,Xn=new WeakMap,Ld=new WeakMap,Da=new WeakMap,Kn=new WeakMap,Ce=new WeakSet,IC=function(e){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-c(this,Kn))*this.parentScale),x(this,Kn,a),C(this,Ce,Wp).call(this)},i=c(this,Kn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},NC=function(e){const n=a=>{x(this,Hs,this.editorDiv.style.color=a)},i=c(this,Hs);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},FC=function(){var i;const e=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(e.push(C(i=Jt,pr,qp).call(i,a)),n=a);return e.join(`
`)},Wp=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,u=l.style.display,d=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),i=l.getBoundingClientRect(),l.remove(),l.style.display=u,l.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},pr=new WeakSet,qp=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Ep,"")},Xp=function(){if(this.editorDiv.replaceChildren(),!!c(this,Xn))for(const e of c(this,Xn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},OC=function(){return c(this,Xn).replaceAll(""," ")},Cv=function(e){return e.replaceAll(" ","")},jC=function(e){const{value:n,fontSize:i,color:a,pageIndex:l}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((u,d)=>u!==a[d])||e.pageIndex!==l},_(Jt,pr),wt(Jt,"_freeTextDefaultContent",""),wt(Jt,"_internalPadding",0),wt(Jt,"_defaultColor",null),wt(Jt,"_defaultFontSize",10),wt(Jt,"_type","freetext"),wt(Jt,"_editorType",kt.FREETEXT);let _v=Jt;class rt{toSVGPath(){Qt("Abstract method `toSVGPath` must be implemented.")}get box(){Qt("Abstract getter `box` must be implemented.")}serialize(t,e){Qt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,a,l){l||(l=new Float32Array(t.length));for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u]*i,l[u+1]=n+t[u+1]*a;return l}static _rescaleAndSwap(t,e,n,i,a,l){l||(l=new Float32Array(t.length));for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u+1]*i,l[u+1]=n+t[u]*a;return l}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)i[a]=e+t[a],i[a+1]=n+t[a+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,a){switch(a){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,a,l){return[(t+5*n)/6,(e+5*i)/6,(5*n+a)/6,(5*i+l)/6,(n+a)/2,(i+l)/2]}}wt(rt,"PRECISION",1e-4);var Yn,Us,Tu,ku,gi,It,Ia,Na,Dd,Id,Pu,Mu,ro,Nd,Dm,Im,De,ah,zC,VC,BC,HC,UC,$C;const ji=class ji{constructor({x:t,y:e},n,i,a,l,u=0){_(this,De);_(this,Yn);_(this,Us,[]);_(this,Tu);_(this,ku);_(this,gi,[]);_(this,It,new Float32Array(18));_(this,Ia);_(this,Na);_(this,Dd);_(this,Id);_(this,Pu);_(this,Mu);_(this,ro,[]);x(this,Yn,n),x(this,Mu,a*i),x(this,ku,l),c(this,It).set([NaN,NaN,NaN,NaN,t,e],6),x(this,Tu,u),x(this,Id,c(ji,Nd)*i),x(this,Dd,c(ji,Im)*i),x(this,Pu,i),c(this,ro).push(t,e)}isEmpty(){return isNaN(c(this,It)[8])}add({x:t,y:e}){var Q;x(this,Ia,t),x(this,Na,e);const[n,i,a,l]=c(this,Yn);let[u,d,f,m]=c(this,It).subarray(8,12);const g=t-f,v=e-m,A=Math.hypot(g,v);if(A<c(this,Dd))return!1;const S=A-c(this,Id),b=S/A,T=b*g,k=b*v;let M=u,L=d;u=f,d=m,f+=T,m+=k,(Q=c(this,ro))==null||Q.push(t,e);const R=-k/S,I=T/S,z=R*c(this,Mu),B=I*c(this,Mu);return c(this,It).set(c(this,It).subarray(2,8),0),c(this,It).set([f+z,m+B],4),c(this,It).set(c(this,It).subarray(14,18),12),c(this,It).set([f-z,m-B],16),isNaN(c(this,It)[6])?(c(this,gi).length===0&&(c(this,It).set([u+z,d+B],2),c(this,gi).push(NaN,NaN,NaN,NaN,(u+z-n)/a,(d+B-i)/l),c(this,It).set([u-z,d-B],14),c(this,Us).push(NaN,NaN,NaN,NaN,(u-z-n)/a,(d-B-i)/l)),c(this,It).set([M,L,u,d,f,m],6),!this.isEmpty()):(c(this,It).set([M,L,u,d,f,m],6),Math.abs(Math.atan2(L-d,M-u)-Math.atan2(k,T))<Math.PI/2?([u,d,f,m]=c(this,It).subarray(2,6),c(this,gi).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/a,((d+m)/2-i)/l),[u,d,M,L]=c(this,It).subarray(14,18),c(this,Us).push(NaN,NaN,NaN,NaN,((M+u)/2-n)/a,((L+d)/2-i)/l),!0):([M,L,u,d,f,m]=c(this,It).subarray(0,6),c(this,gi).push(((M+5*u)/6-n)/a,((L+5*d)/6-i)/l,((5*u+f)/6-n)/a,((5*d+m)/6-i)/l,((u+f)/2-n)/a,((d+m)/2-i)/l),[f,m,u,d,M,L]=c(this,It).subarray(12,18),c(this,Us).push(((M+5*u)/6-n)/a,((L+5*d)/6-i)/l,((5*u+f)/6-n)/a,((5*d+m)/6-i)/l,((u+f)/2-n)/a,((d+m)/2-i)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,gi),e=c(this,Us);if(isNaN(c(this,It)[6])&&!this.isEmpty())return C(this,De,zC).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);C(this,De,BC).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return C(this,De,VC).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,a,l){return new GC(t,e,n,i,a,l)}getOutlines(){var g;const t=c(this,gi),e=c(this,Us),n=c(this,It),[i,a,l,u]=c(this,Yn),d=new Float32Array((((g=c(this,ro))==null?void 0:g.length)??0)+2);for(let v=0,A=d.length-2;v<A;v+=2)d[v]=(c(this,ro)[v]-i)/l,d[v+1]=(c(this,ro)[v+1]-a)/u;if(d[d.length-2]=(c(this,Ia)-i)/l,d[d.length-1]=(c(this,Na)-a)/u,isNaN(n[6])&&!this.isEmpty())return C(this,De,HC).call(this,d);const f=new Float32Array(c(this,gi).length+24+c(this,Us).length);let m=t.length;for(let v=0;v<m;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}m=C(this,De,$C).call(this,f,m);for(let v=e.length-6;v>=6;v-=6)for(let A=0;A<6;A+=2){if(isNaN(e[v+A])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[v+A],f[m+1]=e[v+A+1],m+=2}return C(this,De,UC).call(this,f,m),this.newFreeDrawOutline(f,d,c(this,Yn),c(this,Pu),c(this,Tu),c(this,ku))}};Yn=new WeakMap,Us=new WeakMap,Tu=new WeakMap,ku=new WeakMap,gi=new WeakMap,It=new WeakMap,Ia=new WeakMap,Na=new WeakMap,Dd=new WeakMap,Id=new WeakMap,Pu=new WeakMap,Mu=new WeakMap,ro=new WeakMap,Nd=new WeakMap,Dm=new WeakMap,Im=new WeakMap,De=new WeakSet,ah=function(){const t=c(this,It).subarray(4,6),e=c(this,It).subarray(16,18),[n,i,a,l]=c(this,Yn);return[(c(this,Ia)+(t[0]-e[0])/2-n)/a,(c(this,Na)+(t[1]-e[1])/2-i)/l,(c(this,Ia)+(e[0]-t[0])/2-n)/a,(c(this,Na)+(e[1]-t[1])/2-i)/l]},zC=function(){const[t,e,n,i]=c(this,Yn),[a,l,u,d]=C(this,De,ah).call(this);return`M${(c(this,It)[2]-t)/n} ${(c(this,It)[3]-e)/i} L${(c(this,It)[4]-t)/n} ${(c(this,It)[5]-e)/i} L${a} ${l} L${u} ${d} L${(c(this,It)[16]-t)/n} ${(c(this,It)[17]-e)/i} L${(c(this,It)[14]-t)/n} ${(c(this,It)[15]-e)/i} Z`},VC=function(t){const e=c(this,Us);t.push(`L${e[4]} ${e[5]} Z`)},BC=function(t){const[e,n,i,a]=c(this,Yn),l=c(this,It).subarray(4,6),u=c(this,It).subarray(16,18),[d,f,m,g]=C(this,De,ah).call(this);t.push(`L${(l[0]-e)/i} ${(l[1]-n)/a} L${d} ${f} L${m} ${g} L${(u[0]-e)/i} ${(u[1]-n)/a}`)},HC=function(t){const e=c(this,It),[n,i,a,l]=c(this,Yn),[u,d,f,m]=C(this,De,ah).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-i)/l,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-i)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-i)/l,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-i)/l],0),this.newFreeDrawOutline(g,t,c(this,Yn),c(this,Pu),c(this,Tu),c(this,ku))},UC=function(t,e){const n=c(this,Us);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},$C=function(t,e){const n=c(this,It).subarray(4,6),i=c(this,It).subarray(16,18),[a,l,u,d]=c(this,Yn),[f,m,g,v]=C(this,De,ah).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/u,(n[1]-l)/d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(i[0]-a)/u,(i[1]-l)/d],e),e+=24},_(ji,Nd,8),_(ji,Dm,2),_(ji,Im,c(ji,Nd)+c(ji,Dm));let mm=ji;var Ru,Fa,sr,Fd,Qn,Od,Ae,Nm,WC;class GC extends rt{constructor(e,n,i,a,l,u){super();_(this,Nm);_(this,Ru);_(this,Fa,new Float32Array(4));_(this,sr);_(this,Fd);_(this,Qn);_(this,Od);_(this,Ae);x(this,Ae,e),x(this,Qn,n),x(this,Ru,i),x(this,Od,a),x(this,sr,l),x(this,Fd,u),this.lastPoint=[NaN,NaN],C(this,Nm,WC).call(this,u);const[d,f,m,g]=c(this,Fa);for(let v=0,A=e.length;v<A;v+=2)e[v]=(e[v]-d)/m,e[v+1]=(e[v+1]-f)/g;for(let v=0,A=n.length;v<A;v+=2)n[v]=(n[v]-d)/m,n[v+1]=(n[v+1]-f)/g}toSVGPath(){const e=[`M${c(this,Ae)[4]} ${c(this,Ae)[5]}`];for(let n=6,i=c(this,Ae).length;n<i;n+=6){if(isNaN(c(this,Ae)[n])){e.push(`L${c(this,Ae)[n+4]} ${c(this,Ae)[n+5]}`);continue}e.push(`C${c(this,Ae)[n]} ${c(this,Ae)[n+1]} ${c(this,Ae)[n+2]} ${c(this,Ae)[n+3]} ${c(this,Ae)[n+4]} ${c(this,Ae)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,a],l){const u=i-e,d=a-n;let f,m;switch(l){case 0:f=rt._rescale(c(this,Ae),e,a,u,-d),m=rt._rescale(c(this,Qn),e,a,u,-d);break;case 90:f=rt._rescaleAndSwap(c(this,Ae),e,n,u,d),m=rt._rescaleAndSwap(c(this,Qn),e,n,u,d);break;case 180:f=rt._rescale(c(this,Ae),i,n,-u,d),m=rt._rescale(c(this,Qn),i,n,-u,d);break;case 270:f=rt._rescaleAndSwap(c(this,Ae),i,a,-u,-d),m=rt._rescaleAndSwap(c(this,Qn),i,a,-u,-d);break}return{outline:Array.from(f),points:[Array.from(m)]}}get box(){return c(this,Fa)}newOutliner(e,n,i,a,l,u=0){return new mm(e,n,i,a,l,u)}getNewOutline(e,n){const[i,a,l,u]=c(this,Fa),[d,f,m,g]=c(this,Ru),v=l*m,A=u*g,S=i*m+d,b=a*g+f,T=this.newOutliner({x:c(this,Qn)[0]*v+S,y:c(this,Qn)[1]*A+b},c(this,Ru),c(this,Od),e,c(this,Fd),n??c(this,sr));for(let k=2;k<c(this,Qn).length;k+=2)T.add({x:c(this,Qn)[k]*v+S,y:c(this,Qn)[k+1]*A+b});return T.getOutlines()}}Ru=new WeakMap,Fa=new WeakMap,sr=new WeakMap,Fd=new WeakMap,Qn=new WeakMap,Od=new WeakMap,Ae=new WeakMap,Nm=new WeakSet,WC=function(e){const n=c(this,Ae);let i=n[4],a=n[5],l=i,u=a,d=i,f=a,m=i,g=a;const v=e?Math.max:Math.min;for(let S=6,b=n.length;S<b;S+=6){if(isNaN(n[S]))l=Math.min(l,n[S+4]),u=Math.min(u,n[S+5]),d=Math.max(d,n[S+4]),f=Math.max(f,n[S+5]),g<n[S+5]?(m=n[S+4],g=n[S+5]):g===n[S+5]&&(m=v(m,n[S+4]));else{const T=mt.bezierBoundingBox(i,a,...n.slice(S,S+6));l=Math.min(l,T[0]),u=Math.min(u,T[1]),d=Math.max(d,T[2]),f=Math.max(f,T[3]),g<T[3]?(m=T[2],g=T[3]):g===T[3]&&(m=v(m,T[2]))}i=n[S+4],a=n[S+5]}const A=c(this,Fa);A[0]=l-c(this,sr),A[1]=u-c(this,sr),A[2]=d-l+2*c(this,sr),A[3]=f-u+2*c(this,sr),this.lastPoint=[m,g]};var jd,zd,oo,$s,Cn,qC,Kp,XC,KC,kv;class Tv{constructor(t,e=0,n=0,i=!0){_(this,Cn);_(this,jd);_(this,zd);_(this,oo,[]);_(this,$s,[]);let a=1/0,l=-1/0,u=1/0,d=-1/0;const f=10**-4;for(const{x:T,y:k,width:M,height:L}of t){const R=Math.floor((T-e)/f)*f,I=Math.ceil((T+M+e)/f)*f,z=Math.floor((k-e)/f)*f,B=Math.ceil((k+L+e)/f)*f,U=[R,z,B,!0],Q=[I,z,B,!1];c(this,oo).push(U,Q),a=Math.min(a,R),l=Math.max(l,I),u=Math.min(u,z),d=Math.max(d,B)}const m=l-a+2*n,g=d-u+2*n,v=a-n,A=u-n,S=c(this,oo).at(i?-1:-2),b=[S[0],S[2]];for(const T of c(this,oo)){const[k,M,L]=T;T[0]=(k-v)/m,T[1]=(M-A)/g,T[2]=(L-A)/g}x(this,jd,new Float32Array([v,A,m,g])),x(this,zd,b)}getOutlines(){c(this,oo).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of c(this,oo))e[3]?(t.push(...C(this,Cn,kv).call(this,e)),C(this,Cn,XC).call(this,e)):(C(this,Cn,KC).call(this,e),t.push(...C(this,Cn,kv).call(this,e)));return C(this,Cn,qC).call(this,t)}}jd=new WeakMap,zd=new WeakMap,oo=new WeakMap,$s=new WeakMap,Cn=new WeakSet,qC=function(t){const e=[],n=new Set;for(const l of t){const[u,d,f]=l;e.push([u,d,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const d=e[l][2],f=e[l+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const i=[];let a;for(;n.size>0;){const l=n.values().next().value;let[u,d,f,m,g]=l;n.delete(l);let v=u,A=d;for(a=[u,f],i.push(a);;){let S;if(n.has(m))S=m;else if(n.has(g))S=g;else break;n.delete(S),[u,d,f,m,g]=S,v!==u&&(a.push(v,A,u,A===d?d:f),v=u),A=A===d?f:d}a.push(v,A)}return new mN(i,c(this,jd),c(this,zd))},Kp=function(t){const e=c(this,$s);let n=0,i=e.length-1;for(;n<=i;){const a=n+i>>1,l=e[a][0];if(l===t)return a;l<t?n=a+1:i=a-1}return i+1},XC=function([,t,e]){const n=C(this,Cn,Kp).call(this,t);c(this,$s).splice(n,0,[t,e])},KC=function([,t,e]){const n=C(this,Cn,Kp).call(this,t);for(let i=n;i<c(this,$s).length;i++){const[a,l]=c(this,$s)[i];if(a!==t)break;if(a===t&&l===e){c(this,$s).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,l]=c(this,$s)[i];if(a!==t)break;if(a===t&&l===e){c(this,$s).splice(i,1);return}}},kv=function(t){const[e,n,i]=t,a=[[e,n,i]],l=C(this,Cn,Kp).call(this,i);for(let u=0;u<l;u++){const[d,f]=c(this,$s)[u];for(let m=0,g=a.length;m<g;m++){const[,v,A]=a[m];if(!(f<=v||A<=d)){if(v>=d){if(A>f)a[m][1]=f;else{if(g===1)return[];a.splice(m,1),m--,g--}continue}a[m][2]=d,A>f&&a.push([e,f,A])}}}return a};var Vd,Lu;class mN extends rt{constructor(e,n,i){super();_(this,Vd);_(this,Lu);x(this,Lu,e),x(this,Vd,n),this.lastPoint=i}toSVGPath(){const e=[];for(const n of c(this,Lu)){let[i,a]=n;e.push(`M${i} ${a}`);for(let l=2;l<n.length;l+=2){const u=n[l],d=n[l+1];u===i?(e.push(`V${d}`),a=d):d===a&&(e.push(`H${u}`),i=u)}e.push("Z")}return e.join(" ")}serialize([e,n,i,a],l){const u=[],d=i-e,f=a-n;for(const m of c(this,Lu)){const g=new Array(m.length);for(let v=0;v<m.length;v+=2)g[v]=e+m[v]*d,g[v+1]=a-m[v+1]*f;u.push(g)}return u}get box(){return c(this,Vd)}get classNamesForOutlining(){return["highlightOutline"]}}Vd=new WeakMap,Lu=new WeakMap;class Pv extends mm{newFreeDrawOutline(t,e,n,i,a,l){return new gN(t,e,n,i,a,l)}}class gN extends GC{newOutliner(t,e,n,i,a,l=0){return new Pv(t,e,n,i,a,l)}}var Gs,Oa,Du,Le,Bd,Iu,Hd,Ud,ao,Ws,Nu,$d,qt,Mv,Rv,Lv,Ho,YC,jr;const Nn=class Nn{constructor({editor:t=null,uiManager:e=null}){_(this,qt);_(this,Gs,null);_(this,Oa,null);_(this,Du);_(this,Le,null);_(this,Bd,!1);_(this,Iu,!1);_(this,Hd,null);_(this,Ud);_(this,ao,null);_(this,Ws,null);_(this,Nu);var n;t?(x(this,Iu,!1),x(this,Nu,jt.HIGHLIGHT_COLOR),x(this,Hd,t)):(x(this,Iu,!0),x(this,Nu,jt.HIGHLIGHT_DEFAULT_COLOR)),x(this,Ws,(t==null?void 0:t._uiManager)||e),x(this,Ud,c(this,Ws)._eventBus),x(this,Du,(t==null?void 0:t.color)||((n=c(this,Ws))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),c(Nn,$d)||x(Nn,$d,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Nt(this,"_keyboardManager",new sf([[["Escape","mac+Escape"],Nn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Nn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Nn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Nn.prototype._moveToPrevious],[["Home","mac+Home"],Nn.prototype._moveToBeginning],[["End","mac+End"],Nn.prototype._moveToEnd]]))}renderButton(){const t=x(this,Gs,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=c(this,Ws)._signal;t.addEventListener("click",C(this,qt,Ho).bind(this),{signal:e}),t.addEventListener("keydown",C(this,qt,Lv).bind(this),{signal:e});const n=x(this,Oa,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=c(this,Du),t.append(n),t}renderMainDropdown(){const t=x(this,Le,C(this,qt,Mv).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===c(this,Gs)){C(this,qt,Ho).call(this,t);return}const e=t.target.getAttribute("data-color");e&&C(this,qt,Rv).call(this,e,t)}_moveToNext(t){var e,n;if(!c(this,qt,jr)){C(this,qt,Ho).call(this,t);return}if(t.target===c(this,Gs)){(e=c(this,Le).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=c(this,Le))==null?void 0:e.firstChild)||t.target===c(this,Gs)){c(this,qt,jr)&&this._hideDropdownFromKeyboard();return}c(this,qt,jr)||C(this,qt,Ho).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!c(this,qt,jr)){C(this,qt,Ho).call(this,t);return}(e=c(this,Le).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,qt,jr)){C(this,qt,Ho).call(this,t);return}(e=c(this,Le).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,Le))==null||t.classList.add("hidden"),(e=c(this,ao))==null||e.abort(),x(this,ao,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,Iu)){if(!c(this,qt,jr)){(t=c(this,Hd))==null||t.unselect();return}this.hideDropdown(),c(this,Gs).focus({preventScroll:!0,focusVisible:c(this,Bd)})}}updateColor(t){if(c(this,Oa)&&(c(this,Oa).style.backgroundColor=t),!c(this,Le))return;const e=c(this,Ws).highlightColors.values();for(const n of c(this,Le).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=c(this,Gs))==null||t.remove(),x(this,Gs,null),x(this,Oa,null),(e=c(this,Le))==null||e.remove(),x(this,Le,null)}};Gs=new WeakMap,Oa=new WeakMap,Du=new WeakMap,Le=new WeakMap,Bd=new WeakMap,Iu=new WeakMap,Hd=new WeakMap,Ud=new WeakMap,ao=new WeakMap,Ws=new WeakMap,Nu=new WeakMap,$d=new WeakMap,qt=new WeakSet,Mv=function(){const t=document.createElement("div"),e=c(this,Ws)._signal;t.addEventListener("contextmenu",Ys,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of c(this,Ws).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",c(Nn,$d)[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=i,a.setAttribute("aria-selected",i===c(this,Du)),a.addEventListener("click",C(this,qt,Rv).bind(this,i),{signal:e}),t.append(a)}return t.addEventListener("keydown",C(this,qt,Lv).bind(this),{signal:e}),t},Rv=function(t,e){e.stopPropagation(),c(this,Ud).dispatch("switchannotationeditorparams",{source:this,type:c(this,Nu),value:t})},Lv=function(t){Nn._keyboardManager.exec(this,t)},Ho=function(t){if(c(this,qt,jr)){this.hideDropdown();return}if(x(this,Bd,t.detail===0),c(this,ao)||(x(this,ao,new AbortController),window.addEventListener("pointerdown",C(this,qt,YC).bind(this),{signal:c(this,Ws).combinedSignal(c(this,ao))})),c(this,Le)){c(this,Le).classList.remove("hidden");return}const e=x(this,Le,C(this,qt,Mv).call(this));c(this,Gs).append(e)},YC=function(t){var e;(e=c(this,Le))!=null&&e.contains(t.target)||this.hideDropdown()},jr=function(){return c(this,Le)&&!c(this,Le).classList.contains("hidden")},_(Nn,$d,null);let gm=Nn;var Fu,Gd,ir,ja,Ou,jn,Wd,qd,za,As,Zn,Xe,ju,rr,un,zu,xs,Xd,Tt,Dv,Yp,QC,ZC,JC,Iv,Uo,_s,Il,tT,Qp,lh,eT,nT,sT,iT,rT;const Ut=class Ut extends fe{constructor(e){super({...e,name:"highlightEditor"});_(this,Tt);_(this,Fu,null);_(this,Gd,0);_(this,ir);_(this,ja,null);_(this,Ou,null);_(this,jn,null);_(this,Wd,null);_(this,qd,0);_(this,za,null);_(this,As,null);_(this,Zn,null);_(this,Xe,!1);_(this,ju,null);_(this,rr);_(this,un,null);_(this,zu,"");_(this,xs);_(this,Xd,"");this.color=e.color||Ut._defaultColor,x(this,xs,e.thickness||Ut._defaultThickness),x(this,rr,e.opacity||Ut._defaultOpacity),x(this,ir,e.boxes||null),x(this,Xd,e.methodOfCreation||""),x(this,zu,e.text||""),this._isDraggable=!1,e.highlightId>-1?(x(this,Xe,!0),C(this,Tt,Yp).call(this,e),C(this,Tt,Uo).call(this)):c(this,ir)&&(x(this,Fu,e.anchorNode),x(this,Gd,e.anchorOffset),x(this,Wd,e.focusNode),x(this,qd,e.focusOffset),C(this,Tt,Dv).call(this),C(this,Tt,Uo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Ut.prototype;return Nt(this,"_keyboardManager",new sf([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Xe)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,xs),methodOfCreation:c(this,Xd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var i;fe.initialize(e,n),Ut._defaultColor||(Ut._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case jt.HIGHLIGHT_DEFAULT_COLOR:Ut._defaultColor=n;break;case jt.HIGHLIGHT_THICKNESS:Ut._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return c(this,ju)}updateParams(e,n){switch(e){case jt.HIGHLIGHT_COLOR:C(this,Tt,QC).call(this,n);break;case jt.HIGHLIGHT_THICKNESS:C(this,Tt,ZC).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jt.HIGHLIGHT_DEFAULT_COLOR,Ut._defaultColor],[jt.HIGHLIGHT_THICKNESS,Ut._defaultThickness]]}get propertiesToUpdate(){return[[jt.HIGHLIGHT_COLOR,this.color||Ut._defaultColor],[jt.HIGHLIGHT_THICKNESS,c(this,xs)||Ut._defaultThickness],[jt.HIGHLIGHT_FREE,c(this,Xe)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(x(this,Ou,new gm({editor:this})),e.addColorPicker(c(this,Ou))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,Tt,lh).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,C(this,Tt,lh).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){C(this,Tt,Iv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Tt,Uo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?C(this,Tt,Iv).call(this):e&&(C(this,Tt,Uo).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var a,l,u;const{drawLayer:n}=this.parent;let i;c(this,Xe)?(e=(e-this.rotation+360)%360,i=C(a=Ut,_s,Il).call(a,c(this,As).box,e)):i=C(l=Ut,_s,Il).call(l,[this.x,this.y,this.width,this.height],e),n.updateProperties(c(this,Zn),{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(c(this,un),{bbox:C(u=Ut,_s,Il).call(u,c(this,jn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(this,zu)&&(e.setAttribute("aria-label",c(this,zu)),e.setAttribute("role","mark")),c(this,Xe)?e.classList.add("free"):this.div.addEventListener("keydown",C(this,Tt,tT).bind(this),{signal:this._uiManager._signal});const n=x(this,za,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,ja);const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),dm(this,c(this,za),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,un),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,un),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:C(this,Tt,Qp).call(this,!0);break;case 1:case 3:C(this,Tt,Qp).call(this,!1);break}}select(){var e;super.select(),c(this,un)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,un),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(this,un)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,un),{rootClass:{selected:!1}}),c(this,Xe)||C(this,Tt,Qp).call(this,!1))}get _mustFixPosition(){return!c(this,Xe)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Zn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(this,un),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:i,x:a,y:l}){const{x:u,y:d,width:f,height:m}=i.getBoundingClientRect(),g=new AbortController,v=e.combinedSignal(g),A=S=>{g.abort(),C(this,_s,iT).call(this,e,S)};window.addEventListener("blur",A,{signal:v}),window.addEventListener("pointerup",A,{signal:v}),window.addEventListener("pointerdown",is,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ys,{signal:v}),i.addEventListener("pointermove",C(this,_s,sT).bind(this,e),{signal:v}),this._freeHighlight=new Pv({x:a,y:l},[u,d,f,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,i){var b,T,k,M;let a=null;if(e instanceof RC){const{data:{quadPoints:L,rect:R,rotation:I,id:z,color:B,opacity:U,popupRef:Q},parent:{page:{pageNumber:ct}}}=e;a=e={annotationType:kt.HIGHLIGHT,color:Array.from(B),opacity:U,quadPoints:L,boxes:null,pageIndex:ct-1,rect:R.slice(0),rotation:I,id:z,deleted:!1,popupRef:Q}}else if(e instanceof Uw){const{data:{inkLists:L,rect:R,rotation:I,id:z,color:B,borderStyle:{rawWidth:U},popupRef:Q},parent:{page:{pageNumber:ct}}}=e;a=e={annotationType:kt.HIGHLIGHT,color:Array.from(B),thickness:U,inkLists:L,boxes:null,pageIndex:ct-1,rect:R.slice(0),rotation:I,id:z,deleted:!1,popupRef:Q}}const{color:l,quadPoints:u,inkLists:d,opacity:f}=e,m=await super.deserialize(e,n,i);m.color=mt.makeHexColor(...l),x(m,rr,f||1),d&&x(m,xs,e.thickness),m.annotationElementId=e.id||null,m._initialData=a;const[g,v]=m.pageDimensions,[A,S]=m.pageTranslation;if(u){const L=x(m,ir,[]);for(let R=0;R<u.length;R+=8)L.push({x:(u[R]-A)/g,y:1-(u[R+1]-S)/v,width:(u[R+2]-u[R])/g,height:(u[R+1]-u[R+5])/v});C(b=m,Tt,Dv).call(b),C(T=m,Tt,Uo).call(T),m.rotate(m.rotation)}else if(d){x(m,Xe,!0);const L=d[0],R={x:L[0]-A,y:v-(L[1]-S)},I=new Pv(R,[0,0,g,v],1,c(m,xs)/2,!0,.001);for(let U=0,Q=L.length;U<Q;U+=2)R.x=L[U]-A,R.y=v-(L[U+1]-S),I.add(R);const{id:z,clipPathId:B}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:I.toSVGPath()}},!0,!0);C(k=m,Tt,Yp).call(k,{highlightOutlines:I.getOutlines(),highlightId:z,clipPathId:B}),C(M=m,Tt,Uo).call(M)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=fe._colorManager.convert(this.color),a={annotationType:kt.HIGHLIGHT,color:i,opacity:c(this,rr),thickness:c(this,xs),quadPoints:C(this,Tt,eT).call(this),outlines:C(this,Tt,nT).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:C(this,Tt,lh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!C(this,Tt,rT).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Fu=new WeakMap,Gd=new WeakMap,ir=new WeakMap,ja=new WeakMap,Ou=new WeakMap,jn=new WeakMap,Wd=new WeakMap,qd=new WeakMap,za=new WeakMap,As=new WeakMap,Zn=new WeakMap,Xe=new WeakMap,ju=new WeakMap,rr=new WeakMap,un=new WeakMap,zu=new WeakMap,xs=new WeakMap,Xd=new WeakMap,Tt=new WeakSet,Dv=function(){const e=new Tv(c(this,ir),.001);x(this,As,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,As).box;const n=new Tv(c(this,ir),.0025,.001,this._uiManager.direction==="ltr");x(this,jn,n.getOutlines());const{lastPoint:i}=c(this,jn);x(this,ju,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Yp=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var g,v;if(x(this,As,e),x(this,jn,e.getNewOutline(c(this,xs)/2+1.5,.0025)),n>=0)x(this,Zn,n),x(this,ja,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),x(this,un,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,jn).box,path:{d:c(this,jn).toSVGPath()}},!0));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Zn),{bbox:C(g=Ut,_s,Il).call(g,c(this,As).box,(A-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,un),{bbox:C(v=Ut,_s,Il).call(v,c(this,jn).box,A),path:{d:c(this,jn).toSVGPath()}})}const[l,u,d,f]=e.box;switch(this.rotation){case 0:this.x=l,this.y=u,this.width=d,this.height=f;break;case 90:{const[A,S]=this.parentDimensions;this.x=u,this.y=1-l,this.width=d*S/A,this.height=f*A/S;break}case 180:this.x=1-l,this.y=1-u,this.width=d,this.height=f;break;case 270:{const[A,S]=this.parentDimensions;this.x=1-u,this.y=l,this.width=d*S/A,this.height=f*A/S;break}}const{lastPoint:m}=c(this,jn);x(this,ju,[(m[0]-l)/d,(m[1]-u)/f])},QC=function(e){const n=(l,u)=>{var d,f;this.color=l,x(this,rr,u),(d=this.parent)==null||d.drawLayer.updateProperties(c(this,Zn),{root:{fill:l,"fill-opacity":u}}),(f=c(this,Ou))==null||f.updateColor(l)},i=this.color,a=c(this,rr);this.addCommands({cmd:n.bind(this,e,Ut._defaultOpacity),undo:n.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},ZC=function(e){const n=c(this,xs),i=a=>{x(this,xs,a),C(this,Tt,JC).call(this,a)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},JC=function(e){if(!c(this,Xe))return;C(this,Tt,Yp).call(this,{highlightOutlines:c(this,As).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},Iv=function(){c(this,Zn)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Zn)),x(this,Zn,null),this.parent.drawLayer.remove(c(this,un)),x(this,un,null))},Uo=function(e=this.parent){c(this,Zn)===null&&({id:vn(this,Zn)._,clipPathId:vn(this,ja)._}=e.drawLayer.draw({bbox:c(this,As).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,rr)},rootClass:{highlight:!0,free:c(this,Xe)},path:{d:c(this,As).toSVGPath()}},!1,!0),x(this,un,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Xe)},bbox:c(this,jn).box,path:{d:c(this,jn).toSVGPath()}},c(this,Xe))),c(this,za)&&(c(this,za).style.clipPath=c(this,ja)))},_s=new WeakSet,Il=function([e,n,i,a],l){switch(l){case 90:return[1-n-a,e,a,i];case 180:return[1-e-i,1-n-a,i,a];case 270:return[n,1-e-i,a,i]}return[e,n,i,a]},tT=function(e){Ut._keyboardManager.exec(this,e)},Qp=function(e){if(!c(this,Fu))return;const n=window.getSelection();e?n.setPosition(c(this,Fu),c(this,Gd)):n.setPosition(c(this,Wd),c(this,qd))},lh=function(){return c(this,Xe)?this.rotation:0},eT=function(){if(c(this,Xe))return null;const[e,n]=this.pageDimensions,[i,a]=this.pageTranslation,l=c(this,ir),u=new Float32Array(l.length*8);let d=0;for(const{x:f,y:m,width:g,height:v}of l){const A=f*e+i,S=(1-m)*n+a;u[d]=u[d+4]=A,u[d+1]=u[d+3]=S,u[d+2]=u[d+6]=A+g*e,u[d+5]=u[d+7]=S-v*n,d+=8}return u},nT=function(e){return c(this,As).serialize(e,C(this,Tt,lh).call(this))},sT=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},iT=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},rT=function(e){const{color:n}=this._initialData;return e.color.some((i,a)=>i!==n[a])},_(Ut,_s),wt(Ut,"_defaultColor",null),wt(Ut,"_defaultOpacity",1),wt(Ut,"_defaultThickness",12),wt(Ut,"_type","highlight"),wt(Ut,"_editorType",kt.HIGHLIGHT),wt(Ut,"_freeHighlightId",-1),wt(Ut,"_freeHighlight",null),wt(Ut,"_freeHighlightClipId","");let ym=Ut;var Va;class yN{constructor(){_(this,Va,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))this.updateProperty(e,n)}updateSVGProperty(t,e){c(this,Va)[t]=e}toSVGProperties(){const t=c(this,Va);return x(this,Va,Object.create(null)),{root:t}}reset(){x(this,Va,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Qt("Not implemented")}}Va=new WeakMap;var Jn,Vu,Be,Ba,Ha,lo,uo,co,Ua,Vt,Fv,Ov,jv,uh,oT,Zp,ch,Nl;const at=class at extends fe{constructor(e){super(e);_(this,Vt);_(this,Jn,null);_(this,Vu);wt(this,"_drawId",null);x(this,Vu,e.mustBeCommitted||!1),e.drawOutlines&&(C(this,Vt,Fv).call(this,e),C(this,Vt,uh).call(this))}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[a,l]of Object.entries(n))i.has(a)?Object.assign(e[a],l):e[a]=l;return e}static getDefaultDrawingOptions(e){Qt("Not implemented")}static get typesMap(){Qt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(c(at,Be).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)e.push([i,n[a]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,a]of this.constructor.typesMap)e.push([i,n[a]]);return e}_updateProperty(e,n,i){const a=this._drawingOptions,l=a[n],u=d=>{var m;a.updateProperty(n,d);const f=c(this,Jn).updateProperty(n,d);f&&C(this,Vt,ch).call(this,f),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:u.bind(this,i),undo:u.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(c(this,Jn).getPathResizingSVGProperties(C(this,Vt,Zp).call(this)),{bbox:C(this,Vt,Nl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(c(this,Jn).getPathResizedSVGProperties(C(this,Vt,Zp).call(this)),{bbox:C(this,Vt,Nl).call(this)}))}_onTranslating(e,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:C(this,Vt,Nl).call(this,e,n)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(c(this,Jn).getPathTranslatedSVGProperties(C(this,Vt,Zp).call(this),this.parentDimensions),{bbox:C(this,Vt,Nl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Vu)&&(x(this,Vu,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){C(this,Vt,jv).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Vt,uh).call(this),C(this,Vt,ch).call(this,c(this,Jn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),C(this,Vt,jv).call(this)):e&&(this._uiManager.addShouldRescale(this),C(this,Vt,uh).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties({bbox:C(this,Vt,Nl).call(this)},c(this,Jn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,Vt,ch).call(this,c(this,Jn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const n=document.createElement("div");e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,n,i,a,l){Qt("Not implemented")}static startDrawing(e,n,i,a){var T;const{target:l,offsetX:u,offsetY:d,pointerId:f,pointerType:m}=a;if(c(at,uo)&&c(at,uo)!==m)return;const{viewport:{rotation:g}}=e,{width:v,height:A}=l.getBoundingClientRect(),S=x(at,Ba,new AbortController),b=e.combinedSignal(S);if(c(at,lo)||x(at,lo,f),c(at,uo)??x(at,uo,m),window.addEventListener("pointerup",k=>{var M;c(at,lo)===k.pointerId?this._endDraw(k):(M=c(at,co))==null||M.delete(k.pointerId)},{signal:b}),window.addEventListener("pointercancel",k=>{var M;c(at,lo)===k.pointerId?this._currentParent.endDrawingSession():(M=c(at,co))==null||M.delete(k.pointerId)},{signal:b}),window.addEventListener("pointerdown",k=>{c(at,uo)===k.pointerType&&((c(at,co)||x(at,co,new Set)).add(k.pointerId),c(at,Be).isCancellable()&&(c(at,Be).removeLastElement(),c(at,Be).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Ys,{signal:b}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),l.addEventListener("touchmove",k=>{k.timeStamp===c(at,Ua)&&is(k)},{signal:b}),e.toggleDrawing(),(T=n._editorUndoBar)==null||T.hide(),c(at,Be)){e.drawLayer.updateProperties(this._currentDrawId,c(at,Be).startNew(u,d,v,A,g));return}n.updateUIForDefaultProperties(this),x(at,Be,this.createDrawerInstance(u,d,v,A,g)),x(at,Ha,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(c(at,Ha).toSVGProperties(),c(at,Be).defaultSVGProperties),!0,!1)}static _drawMove(e){var l;if(x(at,Ua,-1),!c(at,Be))return;const{offsetX:n,offsetY:i,pointerId:a}=e;if(c(at,lo)===a){if(((l=c(at,co))==null?void 0:l.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(at,Be).add(n,i)),x(at,Ua,e.timeStamp),is(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,x(at,Be,null),x(at,Ha,null),x(at,uo,null),x(at,Ua,NaN)),c(at,Ba)&&(c(at,Ba).abort(),x(at,Ba,null),x(at,lo,NaN),x(at,co,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e&&n.drawLayer.updateProperties(this._currentDrawId,c(at,Be).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=c(at,Be),a=this._currentDrawId,l=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,i.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:jt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(jt.DRAW_STEP),!c(at,Be).isEmpty()){const{pageDimensions:[i,a],scale:l}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(at,Be).getOutlines(i*l,a*l,l,this._INNER_MARGIN),drawingOptions:c(at,Ha),mustBeCommitted:!e});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,a,l,u){Qt("Not implemented")}static async deserialize(e,n,i){var g,v;const{rawDims:{pageWidth:a,pageHeight:l,pageX:u,pageY:d}}=n.viewport,f=this.deserializeDraw(u,d,a,l,this._INNER_MARGIN,e),m=await super.deserialize(e,n,i);return m.createDrawingOptions(e),C(g=m,Vt,Fv).call(g,{drawOutlines:f}),C(v=m,Vt,uh).call(v),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[n,i]=this.pageTranslation,[a,l]=this.pageDimensions;return c(this,Jn).serialize([n,i,a,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Jn=new WeakMap,Vu=new WeakMap,Be=new WeakMap,Ba=new WeakMap,Ha=new WeakMap,lo=new WeakMap,uo=new WeakMap,co=new WeakMap,Ua=new WeakMap,Vt=new WeakSet,Fv=function({drawOutlines:e,drawId:n,drawingOptions:i}){x(this,Jn,e),this._drawingOptions||(this._drawingOptions=i),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=C(this,Vt,Ov).call(this,e,this.parent),C(this,Vt,ch).call(this,e.box)},Ov=function(e,n){const{id:i}=n.drawLayer.draw(at._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},jv=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},uh=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,Vt,Ov).call(this,c(this,Jn),e)}},oT=function([e,n,i,a]){const{parentDimensions:[l,u],rotation:d}=this;switch(d){case 90:return[n,1-e,i*(u/l),a*(l/u)];case 180:return[1-e,1-n,i,a];case 270:return[1-n,e,i*(u/l),a*(l/u)];default:return[e,n,i,a]}},Zp=function(){const{x:e,y:n,width:i,height:a,parentDimensions:[l,u],rotation:d}=this;switch(d){case 90:return[1-n,e,i*(l/u),a*(u/l)];case 180:return[1-e,1-n,i,a];case 270:return[n,1-e,i*(l/u),a*(u/l)];default:return[e,n,i,a]}},ch=function(e){if([this.x,this.y,this.width,this.height]=C(this,Vt,oT).call(this,e),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()},Nl=function(){const{x:e,y:n,width:i,height:a,rotation:l,parentRotation:u,parentDimensions:[d,f]}=this;switch((l*4+u)/90){case 1:return[1-n-a,e,a,i];case 2:return[1-e-i,1-n-a,i,a];case 3:return[n,1-e-i,a,i];case 4:return[e,n-i*(d/f),a*(f/d),i*(d/f)];case 5:return[1-n,e,i*(d/f),a*(f/d)];case 6:return[1-e-a*(f/d),1-n,a*(f/d),i*(d/f)];case 7:return[n-i*(d/f),1-e-a*(f/d),i*(d/f),a*(f/d)];case 8:return[e-i,n-a,i,a];case 9:return[1-n,e-i,a,i];case 10:return[1-e,1-n,i,a];case 11:return[n-a,1-e,a,i];case 12:return[e-a*(f/d),n,a*(f/d),i*(d/f)];case 13:return[1-n-i*(d/f),e-a*(f/d),i*(d/f),a*(f/d)];case 14:return[1-e,1-n-i*(d/f),a*(f/d),i*(d/f)];case 15:return[n,1-e,i*(d/f),a*(f/d)];default:return[e,n,i,a]}},wt(at,"_currentDrawId",-1),wt(at,"_currentParent",null),_(at,Be,null),_(at,Ba,null),_(at,Ha,null),_(at,lo,NaN),_(at,uo,null),_(at,co,null),_(at,Ua,NaN),wt(at,"_INNER_MARGIN",3);let Nv=at;var yi,He,Ue,$a,Bu,xn,Ke,Ss,Ga,Wa,qa,Hu,Jp;class vN{constructor(t,e,n,i,a,l){_(this,Hu);_(this,yi,new Float64Array(6));_(this,He);_(this,Ue);_(this,$a);_(this,Bu);_(this,xn);_(this,Ke,"");_(this,Ss,0);_(this,Ga,new vm);_(this,Wa);_(this,qa);x(this,Wa,n),x(this,qa,i),x(this,$a,a),x(this,Bu,l),[t,e]=C(this,Hu,Jp).call(this,t,e);const u=x(this,He,[NaN,NaN,NaN,NaN,t,e]);x(this,xn,[t,e]),x(this,Ue,[{line:u,points:c(this,xn)}]),c(this,yi).set(u,0)}updateProperty(t,e){t==="stroke-width"&&x(this,Bu,e)}isEmpty(){return!c(this,Ue)||c(this,Ue).length===0}isCancellable(){return c(this,xn).length<=10}add(t,e){[t,e]=C(this,Hu,Jp).call(this,t,e);const[n,i,a,l]=c(this,yi).subarray(2,6),u=t-a,d=e-l;return Math.hypot(c(this,Wa)*u,c(this,qa)*d)<=2?null:(c(this,xn).push(t,e),isNaN(n)?(c(this,yi).set([a,l,t,e],2),c(this,He).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(c(this,yi)[0])&&c(this,He).splice(6,6),c(this,yi).set([n,i,a,l,t,e],0),c(this,He).push(...rt.createBezierPoints(n,i,a,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(c(this,xn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,a){x(this,Wa,n),x(this,qa,i),x(this,$a,a),[t,e]=C(this,Hu,Jp).call(this,t,e);const l=x(this,He,[NaN,NaN,NaN,NaN,t,e]);x(this,xn,[t,e]);const u=c(this,Ue).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),c(this,Ue).push({line:l,points:c(this,xn)}),c(this,yi).set(l,0),x(this,Ss,0),this.toSVGPath(),null}getLastElement(){return c(this,Ue).at(-1)}setLastElement(t){return c(this,Ue)?(c(this,Ue).push(t),x(this,He,t.line),x(this,xn,t.points),x(this,Ss,0),{path:{d:this.toSVGPath()}}):c(this,Ga).setLastElement(t)}removeLastElement(){if(!c(this,Ue))return c(this,Ga).removeLastElement();c(this,Ue).pop(),x(this,Ke,"");for(let t=0,e=c(this,Ue).length;t<e;t++){const{line:n,points:i}=c(this,Ue)[t];x(this,He,n),x(this,xn,i),x(this,Ss,0),this.toSVGPath()}return{path:{d:c(this,Ke)}}}toSVGPath(){const t=rt.svgRound(c(this,He)[4]),e=rt.svgRound(c(this,He)[5]);if(c(this,xn).length===2)return x(this,Ke,`${c(this,Ke)} M ${t} ${e} Z`),c(this,Ke);if(c(this,xn).length<=6){const i=c(this,Ke).lastIndexOf("M");x(this,Ke,`${c(this,Ke).slice(0,i)} M ${t} ${e}`),x(this,Ss,6)}if(c(this,xn).length===4){const i=rt.svgRound(c(this,He)[10]),a=rt.svgRound(c(this,He)[11]);return x(this,Ke,`${c(this,Ke)} L ${i} ${a}`),x(this,Ss,12),c(this,Ke)}const n=[];c(this,Ss)===0&&(n.push(`M ${t} ${e}`),x(this,Ss,6));for(let i=c(this,Ss),a=c(this,He).length;i<a;i+=6){const[l,u,d,f,m,g]=c(this,He).slice(i,i+6).map(rt.svgRound);n.push(`C${l} ${u} ${d} ${f} ${m} ${g}`)}return x(this,Ke,c(this,Ke)+n.join(" ")),x(this,Ss,c(this,He).length),c(this,Ke)}getOutlines(t,e,n,i){const a=c(this,Ue).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),c(this,Ga).build(c(this,Ue),t,e,n,c(this,$a),c(this,Bu),i),x(this,yi,null),x(this,He,null),x(this,Ue,null),x(this,Ke,null),c(this,Ga)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}yi=new WeakMap,He=new WeakMap,Ue=new WeakMap,$a=new WeakMap,Bu=new WeakMap,xn=new WeakMap,Ke=new WeakMap,Ss=new WeakMap,Ga=new WeakMap,Wa=new WeakMap,qa=new WeakMap,Hu=new WeakSet,Jp=function(t,e){return rt._normalizePoint(t,e,c(this,Wa),c(this,qa),c(this,$a))};var Sn,Kd,Yd,ts,vi,wi,Uu,$u,Gu,Ze,Fi,aT,lT,uT;const Xw=class Xw extends rt{constructor(){super(...arguments);_(this,Ze);_(this,Sn);_(this,Kd,0);_(this,Yd);_(this,ts);_(this,vi);_(this,wi);_(this,Uu);_(this,$u);_(this,Gu)}build(e,n,i,a,l,u,d){x(this,vi,n),x(this,wi,i),x(this,Uu,a),x(this,$u,l),x(this,Gu,u),x(this,Yd,d??0),x(this,ts,e),C(this,Ze,lT).call(this)}setLastElement(e){return c(this,ts).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,ts).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of c(this,ts)){if(e.push(`M${rt.svgRound(n[4])} ${rt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12){e.push(`L${rt.svgRound(n[10])} ${rt.svgRound(n[11])}`);continue}for(let i=6,a=n.length;i<a;i+=6){const[l,u,d,f,m,g]=n.subarray(i,i+6).map(rt.svgRound);e.push(`C${l} ${u} ${d} ${f} ${m} ${g}`)}}return e.join("")}serialize([e,n,i,a],l){const u=[],d=[],[f,m,g,v]=C(this,Ze,aT).call(this);let A,S,b,T,k,M,L,R,I;switch(c(this,$u)){case 0:I=rt._rescale,A=e,S=n+a,b=i,T=-a,k=e+f*i,M=n+(1-m-v)*a,L=e+(f+g)*i,R=n+(1-m)*a;break;case 90:I=rt._rescaleAndSwap,A=e,S=n,b=i,T=a,k=e+m*i,M=n+f*a,L=e+(m+v)*i,R=n+(f+g)*a;break;case 180:I=rt._rescale,A=e+i,S=n,b=-i,T=a,k=e+(1-f-g)*i,M=n+m*a,L=e+(1-f)*i,R=n+(m+v)*a;break;case 270:I=rt._rescaleAndSwap,A=e+i,S=n+a,b=-i,T=-a,k=e+(1-m-v)*i,M=n+(1-f-g)*a,L=e+(1-m)*i,R=n+(1-f)*a;break}for(const{line:z,points:B}of c(this,ts))u.push(I(z,A,S,b,T,l?new Array(z.length):null)),d.push(I(B,A,S,b,T,l?new Array(B.length):null));return{lines:u,points:d,rect:[k,M,L,R]}}static deserialize(e,n,i,a,l,{paths:{lines:u,points:d},rotation:f,thickness:m}){const g=[];let v,A,S,b,T;switch(f){case 0:T=rt._rescale,v=-e/i,A=n/a+1,S=1/i,b=-1/a;break;case 90:T=rt._rescaleAndSwap,v=-n/a,A=-e/i,S=1/a,b=1/i;break;case 180:T=rt._rescale,v=e/i+1,A=-n/a,S=-1/i,b=1/a;break;case 270:T=rt._rescaleAndSwap,v=n/a+1,A=e/i+1,S=-1/a,b=-1/i;break}if(!u){u=[];for(const M of d){const L=M.length;if(L===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(L===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const R=new Float32Array(3*(L-2));u.push(R);let[I,z,B,U]=M.subarray(0,4);R.set([NaN,NaN,NaN,NaN,I,z],0);for(let Q=4;Q<L;Q+=2){const ct=M[Q],ot=M[Q+1];R.set(rt.createBezierPoints(I,z,B,U,ct,ot),(Q-2)*3),[I,z,B,U]=[B,U,ct,ot]}}}for(let M=0,L=u.length;M<L;M++)g.push({line:T(u[M].map(R=>R??NaN),v,A,S,b),points:T(d[M].map(R=>R??NaN),v,A,S,b)});const k=new Xw;return k.build(g,i,a,1,f,m,l),k}get box(){return c(this,Sn)}updateProperty(e,n){return e==="stroke-width"?C(this,Ze,uT).call(this,n):null}updateParentDimensions([e,n],i){const[a,l]=C(this,Ze,Fi).call(this);x(this,vi,e),x(this,wi,n),x(this,Uu,i);const[u,d]=C(this,Ze,Fi).call(this),f=u-a,m=d-l,g=c(this,Sn);return g[0]-=f,g[1]-=m,g[2]+=2*f,g[3]+=2*m,g}updateRotation(e){return x(this,Kd,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Sn).map(rt.svgRound).join(" ")}get defaultProperties(){const[e,n]=c(this,Sn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${rt.svgRound(e)} ${rt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=c(this,Sn);let i=0,a=0,l=0,u=0,d=0,f=0;switch(c(this,Kd)){case 90:a=n/e,l=-e/n,d=e;break;case 180:i=-1,u=-1,d=e,f=n;break;case 270:a=-n/e,l=e/n,f=n;break;default:return""}return`matrix(${i} ${a} ${l} ${u} ${rt.svgRound(d)} ${rt.svgRound(f)})`}getPathResizingSVGProperties([e,n,i,a]){const[l,u]=C(this,Ze,Fi).call(this),[d,f,m,g]=c(this,Sn);if(Math.abs(m-l)<=rt.PRECISION||Math.abs(g-u)<=rt.PRECISION){const T=e+i/2-(d+m/2),k=n+a/2-(f+g/2);return{path:{"transform-origin":`${rt.svgRound(e)} ${rt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${T} ${k})`}}}const v=(i-2*l)/(m-2*l),A=(a-2*u)/(g-2*u),S=m/i,b=g/a;return{path:{"transform-origin":`${rt.svgRound(d)} ${rt.svgRound(f)}`,transform:`${this.rotationTransform} scale(${S} ${b}) translate(${rt.svgRound(l)} ${rt.svgRound(u)}) scale(${v} ${A}) translate(${rt.svgRound(-l)} ${rt.svgRound(-u)})`}}}getPathResizedSVGProperties([e,n,i,a]){const[l,u]=C(this,Ze,Fi).call(this),d=c(this,Sn),[f,m,g,v]=d;if(d[0]=e,d[1]=n,d[2]=i,d[3]=a,Math.abs(g-l)<=rt.PRECISION||Math.abs(v-u)<=rt.PRECISION){const k=e+i/2-(f+g/2),M=n+a/2-(m+v/2);for(const{line:L,points:R}of c(this,ts))rt._translate(L,k,M,L),rt._translate(R,k,M,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${rt.svgRound(e)} ${rt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const A=(i-2*l)/(g-2*l),S=(a-2*u)/(v-2*u),b=-A*(f+l)+e+l,T=-S*(m+u)+n+u;if(A!==1||S!==1||b!==0||T!==0)for(const{line:k,points:M}of c(this,ts))rt._rescale(k,b,T,A,S,k),rt._rescale(M,b,T,A,S,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${rt.svgRound(e)} ${rt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[a,l]=i,u=c(this,Sn),d=e-u[0],f=n-u[1];if(c(this,vi)===a&&c(this,wi)===l)for(const{line:m,points:g}of c(this,ts))rt._translate(m,d,f,m),rt._translate(g,d,f,g);else{const m=c(this,vi)/a,g=c(this,wi)/l;x(this,vi,a),x(this,wi,l);for(const{line:v,points:A}of c(this,ts))rt._rescale(v,d,f,m,g,v),rt._rescale(A,d,f,m,g,A);u[2]*=m,u[3]*=g}return u[0]=e,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${rt.svgRound(e)} ${rt.svgRound(n)}`}}}get defaultSVGProperties(){const e=c(this,Sn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${rt.svgRound(e[0])} ${rt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};Sn=new WeakMap,Kd=new WeakMap,Yd=new WeakMap,ts=new WeakMap,vi=new WeakMap,wi=new WeakMap,Uu=new WeakMap,$u=new WeakMap,Gu=new WeakMap,Ze=new WeakSet,Fi=function(e=c(this,Gu)){const n=c(this,Yd)+e/2*c(this,Uu);return c(this,$u)%180===0?[n/c(this,vi),n/c(this,wi)]:[n/c(this,wi),n/c(this,vi)]},aT=function(){const[e,n,i,a]=c(this,Sn),[l,u]=C(this,Ze,Fi).call(this,0);return[e+l,n+u,i-2*l,a-2*u]},lT=function(){const e=x(this,Sn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of c(this,ts)){if(a.length<=12){for(let d=4,f=a.length;d<f;d+=6){const[m,g]=a.subarray(d,d+2);e[0]=Math.min(e[0],m),e[1]=Math.min(e[1],g),e[2]=Math.max(e[2],m),e[3]=Math.max(e[3],g)}continue}let l=a[4],u=a[5];for(let d=6,f=a.length;d<f;d+=6){const[m,g,v,A,S,b]=a.subarray(d,d+6);mt.bezierBoundingBox(l,u,m,g,v,A,S,b,e),l=S,u=b}}const[n,i]=C(this,Ze,Fi).call(this);e[0]=Math.min(1,Math.max(0,e[0]-n)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+n)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]},uT=function(e){const[n,i]=C(this,Ze,Fi).call(this);x(this,Gu,e);const[a,l]=C(this,Ze,Fi).call(this),[u,d]=[a-n,l-i],f=c(this,Sn);return f[0]-=u,f[1]-=d,f[2]+=2*u,f[3]+=2*d,f};let vm=Xw;var Wu;const Kw=class Kw extends yN{constructor(e){super();_(this,Wu);x(this,Wu,e),super.updateProperties({fill:"none",stroke:fe._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=c(this,Wu).realScale),super.updateSVGProperty(e,n)}clone(){const e=new Kw(c(this,Wu));return e.updateAll(this),e}};Wu=new WeakMap;let zv=Kw;var Fm,cT;const Hl=class Hl extends Nv{constructor(e){super({...e,name:"inkEditor"});_(this,Fm);this._willKeepAspectRatio=!0}static initialize(e,n){fe.initialize(e,n),this._defaultDrawingOptions=new zv(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Nt(this,"typesMap",new Map([[jt.INK_THICKNESS,"stroke-width"],[jt.INK_COLOR,"stroke"],[jt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,a,l){return new vN(e,n,i,a,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,a,l,u){return vm.deserialize(e,n,i,a,l,u)}static async deserialize(e,n,i){let a=null;if(e instanceof Uw){const{data:{inkLists:u,rect:d,rotation:f,id:m,color:g,opacity:v,borderStyle:{rawWidth:A},popupRef:S},parent:{page:{pageNumber:b}}}=e;a=e={annotationType:kt.INK,color:Array.from(g),thickness:A,opacity:v,paths:{points:u},boxes:null,pageIndex:b-1,rect:d.slice(0),rotation:f,id:m,deleted:!1,popupRef:S}}const l=await super.deserialize(e,n,i);return l.annotationElementId=e.id||null,l._initialData=a,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=Hl.getDefaultDrawingOptions({stroke:mt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:a}=this.serializeDraw(e),{_drawingOptions:{stroke:l,"stroke-opacity":u,"stroke-width":d}}=this,f={annotationType:kt.INK,color:fe._colorManager.convert(l),opacity:u,thickness:d,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?f:this.annotationElementId&&!C(this,Fm,cT).call(this,f)?null:(f.id=this.annotationElementId,f)}renderAnnotationElement(e){const{points:n,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n}),null}};Fm=new WeakSet,cT=function(e){const{color:n,thickness:i,opacity:a,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((u,d)=>u!==n[d])||e.thickness!==i||e.opacity!==a||e.pageIndex!==l},wt(Hl,"_type","ink"),wt(Hl,"_editorType",kt.INK),wt(Hl,"_defaultDrawingOptions",null);let Vv=Hl;var he,Ye,ho,or,fo,qu,Ai,xi,es,Xu,Ht,hh,dh,tm,Hv,em,Uv,nm,hT;const vh=class vh extends fe{constructor(e){super({...e,name:"stampEditor"});_(this,Ht);_(this,he,null);_(this,Ye,null);_(this,ho,null);_(this,or,null);_(this,fo,null);_(this,qu,"");_(this,Ai,null);_(this,xi,null);_(this,es,!1);_(this,Xu,!1);x(this,or,e.bitmapUrl),x(this,fo,e.bitmapFile)}static initialize(e,n){fe.initialize(e,n)}static get supportedTypes(){return Nt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Nt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(kt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:u}=e||this.copyCanvas(null,null,!0).imageData,d=await i.guess({name:"altText",request:{data:a,width:l,height:u,channels:a.length/(l*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const f=d.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;c(this,Ye)&&(x(this,he,null),this._uiManager.imageManager.deleteId(c(this,Ye)),(e=c(this,Ai))==null||e.remove(),x(this,Ai,null),c(this,xi)&&(clearTimeout(c(this,xi)),x(this,xi,null))),super.remove()}rebuild(){if(!this.parent){c(this,Ye)&&C(this,Ht,tm).call(this);return}super.rebuild(),this.div!==null&&(c(this,Ye)&&c(this,Ai)===null&&C(this,Ht,tm).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(this,ho)||c(this,he)||c(this,or)||c(this,fo)||c(this,Ye))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,he)?C(this,Ht,Hv).call(this):C(this,Ht,tm).call(this),this.width&&!this.annotationElementId){const[i,a]=this.parentDimensions;this.setAt(e*i,n*a,this.width*i,this.height*a)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,xi)!==null&&clearTimeout(c(this,xi)),x(this,xi,setTimeout(()=>{x(this,xi,null),C(this,Ht,Uv).call(this)},200))}copyCanvas(e,n,i=!1){var A;e||(e=224);const{width:a,height:l}=c(this,he),u=new z0;let d=c(this,he),f=a,m=l,g=null;if(n){if(a>n||l>n){const U=Math.min(n/a,n/l);f=Math.floor(a*U),m=Math.floor(l*U)}g=document.createElement("canvas");const S=g.width=Math.ceil(f*u.sx),b=g.height=Math.ceil(m*u.sy);c(this,es)||(d=C(this,Ht,em).call(this,S,b));const T=g.getContext("2d");T.filter=this._uiManager.hcmFilter;let k="white",M="#cfcfd8";this._uiManager.hcmFilter!=="none"?M="black":(A=window.matchMedia)!=null&&A.call(window,"(prefers-color-scheme: dark)").matches&&(k="#8f8f9d",M="#42414d");const L=15,R=L*u.sx,I=L*u.sy,z=new OffscreenCanvas(R*2,I*2),B=z.getContext("2d");B.fillStyle=k,B.fillRect(0,0,R*2,I*2),B.fillStyle=M,B.fillRect(0,0,R,I),B.fillRect(R,I,R,I),T.fillStyle=T.createPattern(z,"repeat"),T.fillRect(0,0,S,b),T.drawImage(d,0,0,d.width,d.height,0,0,S,b)}let v=null;if(i){let S,b;if(u.symmetric&&d.width<e&&d.height<e)S=d.width,b=d.height;else if(d=c(this,he),a>e||l>e){const M=Math.min(e/a,e/l);S=Math.floor(a*M),b=Math.floor(l*M),c(this,es)||(d=C(this,Ht,em).call(this,S,b))}const k=new OffscreenCanvas(S,b).getContext("2d",{willReadFrequently:!0});k.drawImage(d,0,0,d.width,d.height,0,0,S,b),v={width:S,height:b,data:k.getImageData(0,0,S,b).data}}return{canvas:g,width:f,height:m,imageData:v}}getImageForAltText(){return c(this,Ai)}static async deserialize(e,n,i){var b;let a=null;if(e instanceof LC){const{data:{rect:T,rotation:k,id:M,structParent:L,popupRef:R},container:I,parent:{page:{pageNumber:z}}}=e,B=I.querySelector("canvas"),U=i.imageManager.getFromCanvas(I.id,B);B.remove();const Q=((b=await n._structTree.getAriaAttributes(`${Nw}${M}`))==null?void 0:b.get("aria-label"))||"";a=e={annotationType:kt.STAMP,bitmapId:U.id,bitmap:U.bitmap,pageIndex:z-1,rect:T.slice(0),rotation:k,id:M,deleted:!1,accessibilityData:{decorative:!1,altText:Q},isSvg:!1,structParent:L,popupRef:R}}const l=await super.deserialize(e,n,i),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:m,isSvg:g,accessibilityData:v}=e;m&&i.imageManager.isValidId(m)?(x(l,Ye,m),d&&x(l,he,d)):x(l,or,f),x(l,es,g);const[A,S]=l.pageDimensions;return l.width=(u[2]-u[0])/A,l.height=(u[3]-u[1])/S,l.annotationElementId=e.id||null,v&&(l.altTextData=v),l._initialData=a,x(l,Xu,!!a),l}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:kt.STAMP,bitmapId:c(this,Ye),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,es),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=C(this,Ht,nm).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(i.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const d=C(this,Ht,hT).call(this,i);if(d.isSame)return null;d.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const u=c(this,es)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(c(this,Ye)))n.stamps.set(c(this,Ye),{area:u,serialized:i}),i.bitmap=C(this,Ht,nm).call(this,!1);else if(c(this,es)){const d=n.stamps.get(c(this,Ye));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=C(this,Ht,nm).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};he=new WeakMap,Ye=new WeakMap,ho=new WeakMap,or=new WeakMap,fo=new WeakMap,qu=new WeakMap,Ai=new WeakMap,xi=new WeakMap,es=new WeakMap,Xu=new WeakMap,Ht=new WeakSet,hh=function(e,n=!1){if(!e){this.remove();return}x(this,he,e.bitmap),n||(x(this,Ye,e.id),x(this,es,e.isSvg)),e.file&&x(this,qu,e.file.name),C(this,Ht,Hv).call(this)},dh=function(){if(x(this,ho,null),this._uiManager.enableWaiting(!1),!!c(this,Ai)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,he)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,he)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},tm=function(){if(c(this,Ye)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Ye)).then(i=>C(this,Ht,hh).call(this,i,!0)).finally(()=>C(this,Ht,dh).call(this));return}if(c(this,or)){const i=c(this,or);x(this,or,null),this._uiManager.enableWaiting(!0),x(this,ho,this._uiManager.imageManager.getFromUrl(i).then(a=>C(this,Ht,hh).call(this,a)).finally(()=>C(this,Ht,dh).call(this)));return}if(c(this,fo)){const i=c(this,fo);x(this,fo,null),this._uiManager.enableWaiting(!0),x(this,ho,this._uiManager.imageManager.getFromFile(i).then(a=>C(this,Ht,hh).call(this,a)).finally(()=>C(this,Ht,dh).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=vh.supportedTypesStr;const n=this._uiManager._signal;x(this,ho,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,Ht,hh).call(this,a)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>C(this,Ht,dh).call(this))),e.click()},Hv=function(){var g;const{div:e}=this;let{width:n,height:i}=c(this,he);const[a,l]=this.pageDimensions,u=.75;if(this.width)n=this.width*a,i=this.height*l;else if(n>u*a||i>u*l){const v=Math.min(u*a/n,u*l/i);n*=v,i*=v}const[d,f]=this.parentDimensions;this.setDims(n*d/a,i*f/l),this._uiManager.enableWaiting(!1);const m=x(this,Ai,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),this.width=n/a,this.height=i/l,(g=this._initialOptions)!=null&&g.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),C(this,Ht,Uv).call(this),c(this,Xu)||(this.parent.addUndoableEditor(this),x(this,Xu,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,qu)&&m.setAttribute("aria-label",c(this,qu))},em=function(e,n){const{width:i,height:a}=c(this,he);let l=i,u=a,d=c(this,he);for(;l>2*e||u>2*n;){const f=l,m=u;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const g=new OffscreenCanvas(l,u);g.getContext("2d").drawImage(d,0,0,f,m,0,0,l,u),d=g.transferToImageBitmap()}return d},Uv=function(){const[e,n]=this.parentDimensions,{width:i,height:a}=this,l=new z0,u=Math.ceil(i*e*l.sx),d=Math.ceil(a*n*l.sy),f=c(this,Ai);if(!f||f.width===u&&f.height===d)return;f.width=u,f.height=d;const m=c(this,es)?c(this,he):C(this,Ht,em).call(this,u,d),g=f.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(m,0,0,m.width,m.height,0,0,u,d)},nm=function(e){if(e){if(c(this,es)){const a=this._uiManager.imageManager.getSvgUrl(c(this,Ye));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,he),n.getContext("2d").drawImage(c(this,he),0,0),n.toDataURL()}if(c(this,es)){const[n,i]=this.pageDimensions,a=Math.round(this.width*n*xo.PDF_TO_CSS_UNITS),l=Math.round(this.height*i*xo.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(a,l);return u.getContext("2d").drawImage(c(this,he),0,0,c(this,he).width,c(this,he).height,0,0,a,l),u.transferToImageBitmap()}return structuredClone(c(this,he))},hT=function(e){var u;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,a=e.pageIndex===n,l=(((u=e.accessibilityData)==null?void 0:u.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&l,isSameAltText:l}},wt(vh,"_type","stamp"),wt(vh,"_editorType",kt.STAMP);let Bv=vh;var Xa,Ku,Si,po,ar,bs,mo,Yu,Ka,qs,lr,cn,ur,pt,go,ae,dT,ri,Gv,Wv,sm;const Ns=class Ns{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:m}){_(this,ae);_(this,Xa);_(this,Ku,!1);_(this,Si,null);_(this,po,null);_(this,ar,null);_(this,bs,new Map);_(this,mo,!1);_(this,Yu,!1);_(this,Ka,!1);_(this,qs,null);_(this,lr,null);_(this,cn,null);_(this,ur,null);_(this,pt);const g=[...c(Ns,go).values()];if(!Ns._initialized){Ns._initialized=!0;for(const v of g)v.initialize(m,t)}t.registerEditorTypes(g),x(this,pt,t),this.pageIndex=e,this.div=n,x(this,Xa,a),x(this,Si,l),this.viewport=f,x(this,cn,d),this.drawLayer=u,this._structTree=i,c(this,pt).addLayer(this)}get isEmpty(){return c(this,bs).size===0}get isInvisible(){return this.isEmpty&&c(this,pt).getMode()===kt.NONE}updateToolbar(t){c(this,pt).updateToolbar(t)}updateMode(t=c(this,pt).getMode()){switch(C(this,ae,sm).call(this),t){case kt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case kt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case kt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of c(Ns,go).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,cn))==null?void 0:e.div)}setEditingState(t){c(this,pt).setEditingState(t)}addCommands(t){c(this,pt).addCommands(t)}cleanUndoStack(t){c(this,pt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,Si))==null||e.div.classList.toggle("disabled",!t)}async enable(){x(this,Ka,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of c(this,bs).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(c(this,pt).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!c(this,Si)){x(this,Ka,!1);return}const e=c(this,Si).getEditableAnnotations();for(const n of e){if(n.hide(),c(this,pt).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}x(this,Ka,!1)}disable(){var i;x(this,Yu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const a of c(this,bs).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);(i=this.getEditableAnnotation(a.annotationElementId))==null||i.show(),a.remove()}if(c(this,Si)){const a=c(this,Si).getEditableAnnotations();for(const l of a){const{id:u}=l.data;if(c(this,pt).isDeletedAnnotationElement(u))continue;let d=e.get(u);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=t.get(u),d&&(c(this,pt).addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}C(this,ae,sm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of c(Ns,go).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,Yu,!1)}getEditableAnnotation(t){var e;return((e=c(this,Si))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,pt).getActive()!==t&&c(this,pt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,cn))!=null&&t.div&&!c(this,ur)){x(this,ur,new AbortController);const e=c(this,pt).combinedSignal(c(this,ur));c(this,cn).div.addEventListener("pointerdown",C(this,ae,dT).bind(this),{signal:e}),c(this,cn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,cn))!=null&&t.div&&c(this,ur)&&(c(this,ur).abort(),x(this,ur,null),c(this,cn).div.classList.remove("highlighting"))}enableClick(){if(c(this,po))return;x(this,po,new AbortController);const t=c(this,pt).combinedSignal(c(this,po));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=c(this,po))==null||t.abort(),x(this,po,null)}attach(t){c(this,bs).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,pt).isDeletedAnnotationElement(e)&&c(this,pt).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,bs).delete(t.id),(e=c(this,Xa))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,Yu)&&t.annotationElementId&&c(this,pt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,pt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,pt).addDeletedAnnotationElement(t.annotationElementId),fe.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,pt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,Ka)),c(this,pt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,ar)&&(t._focusEventsAllowed=!1,x(this,ar,setTimeout(()=>{x(this,ar,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,pt)._signal}),e.focus())},0))),t._structTreeParentId=(n=c(this,Xa))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return c(this,pt).getId()}combinedSignal(t){return c(this,pt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,ae,ri))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){c(this,pt).updateToolbar(t),c(this,pt).updateMode(t);const{offsetX:n,offsetY:i}=C(this,ae,Wv).call(this),a=this.getNextId(),l=C(this,ae,Gv).call(this,{parent:this,id:a,x:n,y:i,uiManager:c(this,pt),isCentered:!0,...e});l&&this.add(l)}async deserialize(t){var e;return await((e=c(Ns,go).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,pt)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),a=C(this,ae,Gv).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:c(this,pt),isCentered:e,...n});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(C(this,ae,Wv).call(this),!0)}setSelected(t){c(this,pt).setSelected(t)}toggleSelected(t){c(this,pt).toggleSelected(t)}unselect(t){c(this,pt).unselect(t)}pointerup(t){var n;const{isMac:e}=En.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&c(this,mo)&&(x(this,mo,!1),!((n=c(this,ae,ri))!=null&&n.isDrawer&&c(this,ae,ri).supportMultipleDrawings))){if(!c(this,Ku)){x(this,Ku,!0);return}if(c(this,pt).getMode()===kt.STAMP){c(this,pt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var i;if(c(this,pt).getMode()===kt.HIGHLIGHT&&this.enableTextSelection(),c(this,mo)){x(this,mo,!1);return}const{isMac:e}=En.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(x(this,mo,!0),(i=c(this,ae,ri))!=null&&i.isDrawer){this.startDrawingSession(t);return}const n=c(this,pt).getActive();x(this,Ku,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus(),c(this,qs)){c(this,ae,ri).startDrawing(this,c(this,pt),!1,t);return}c(this,pt).setCurrentDrawingSession(this),x(this,qs,new AbortController);const e=c(this,pt).combinedSignal(c(this,qs));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(x(this,lr,null),this.commitOrRemove())},{signal:e}),c(this,ae,ri).startDrawing(this,c(this,pt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&x(this,lr,e);return}c(this,lr)&&setTimeout(()=>{var e;(e=c(this,lr))==null||e.focus(),x(this,lr,null)},0)}endDrawingSession(t=!1){return c(this,qs)?(c(this,pt).setCurrentDrawingSession(null),c(this,qs).abort(),x(this,qs,null),x(this,lr,null),c(this,ae,ri).endDrawing(t)):null}findNewParent(t,e,n){const i=c(this,pt).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return c(this,qs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,qs)&&c(this,ae,ri).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=c(this,pt).getActive())==null?void 0:t.parent)===this&&(c(this,pt).commitOrRemove(),c(this,pt).setActiveEditor(null)),c(this,ar)&&(clearTimeout(c(this,ar)),x(this,ar,null));for(const n of c(this,bs).values())(e=c(this,Xa))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,bs).clear(),c(this,pt).removeLayer(this)}render({viewport:t}){this.viewport=t,Za(this.div,t);for(const e of c(this,pt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,pt).commitOrRemove(),C(this,ae,sm).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Za(this.div,{rotation:n}),e!==n)for(const i of c(this,bs).values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,pt).viewParameters.realScale}};Xa=new WeakMap,Ku=new WeakMap,Si=new WeakMap,po=new WeakMap,ar=new WeakMap,bs=new WeakMap,mo=new WeakMap,Yu=new WeakMap,Ka=new WeakMap,qs=new WeakMap,lr=new WeakMap,cn=new WeakMap,ur=new WeakMap,pt=new WeakMap,go=new WeakMap,ae=new WeakSet,dT=function(t){c(this,pt).unselectAll();const{target:e}=t;if(e===c(this,cn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,cn).div.contains(e)){const{isMac:n}=En.platform;if(t.button!==0||t.ctrlKey&&n)return;c(this,pt).showAllEditors("highlight",!0,!0),c(this,cn).div.classList.add("free"),this.toggleDrawing(),ym.startHighlighting(this,c(this,pt).direction==="ltr",{target:c(this,cn).div,x:t.x,y:t.y}),c(this,cn).div.addEventListener("pointerup",()=>{c(this,cn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,pt)._signal}),t.preventDefault()}},ri=function(){return c(Ns,go).get(c(this,pt).getMode())},Gv=function(t){const e=c(this,ae,ri);return e?new e.prototype.constructor(t):null},Wv=function(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+i),f=(a+u)/2-t,m=(l+d)/2-e,[g,v]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:g,offsetY:v}},sm=function(){for(const t of c(this,bs).values())t.isEmpty()&&t.remove()},wt(Ns,"_initialized",!1),_(Ns,go,new Map([_v,Vv,Bv,ym].map(t=>[t._editorType,t])));let $v=Ns;var Xs,Qd,bn,Ya,Om,fT,_i,Xv,pT,Kv;const on=class on{constructor({pageIndex:t}){_(this,_i);_(this,Xs,null);_(this,Qd,0);_(this,bn,new Map);_(this,Ya,new Map);this.pageIndex=t}setParent(t){if(!c(this,Xs)){x(this,Xs,t);return}if(c(this,Xs)!==t){if(c(this,bn).size>0)for(const e of c(this,bn).values())e.remove(),t.append(e);x(this,Xs,t)}}static get _svgFactory(){return Nt(this,"_svgFactory",new Hw)}draw(t,e=!1,n=!1){const i=vn(this,Qd)._++,a=C(this,_i,Xv).call(this),l=on._svgFactory.createElement("defs");a.append(l);const u=on._svgFactory.createElement("path");l.append(u);const d=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&c(this,Ya).set(i,u);const f=n?C(this,_i,pT).call(this,l,d):null,m=on._svgFactory.createElement("use");return a.append(m),m.setAttribute("href",`#${d}`),this.updateProperties(a,t),c(this,bn).set(i,a),{id:i,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=vn(this,Qd)._++,i=C(this,_i,Xv).call(this),a=on._svgFactory.createElement("defs");i.append(a);const l=on._svgFactory.createElement("path");a.append(l);const u=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const g=on._svgFactory.createElement("mask");a.append(g),d=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const v=on._svgFactory.createElement("rect");g.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const A=on._svgFactory.createElement("use");g.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=on._svgFactory.createElement("use");i.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const m=f.cloneNode();return i.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(i,t),c(this,bn).set(n,i),n}finalizeDraw(t,e){c(this,Ya).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var d;if(!e)return;const{root:n,bbox:i,rootClass:a,path:l}=e,u=typeof t=="number"?c(this,bn).get(t):t;if(u){if(n&&C(this,_i,Kv).call(this,u,n),i&&C(d=on,Om,fT).call(d,u,i),a){const{classList:f}=u;for(const[m,g]of Object.entries(a))f.toggle(m,g)}if(l){const m=u.firstChild.firstChild;C(this,_i,Kv).call(this,m,l)}}}updateParent(t,e){if(e===this)return;const n=c(this,bn).get(t);n&&(c(e,Xs).append(n),c(this,bn).delete(t),c(e,bn).set(t,n))}remove(t){c(this,Ya).delete(t),c(this,Xs)!==null&&(c(this,bn).get(t).remove(),c(this,bn).delete(t))}destroy(){x(this,Xs,null);for(const t of c(this,bn).values())t.remove();c(this,bn).clear(),c(this,Ya).clear()}};Xs=new WeakMap,Qd=new WeakMap,bn=new WeakMap,Ya=new WeakMap,Om=new WeakSet,fT=function(t,[e,n,i,a]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*i}%`,l.height=`${100*a}%`},_i=new WeakSet,Xv=function(){const t=on._svgFactory.create(1,1,!0);return c(this,Xs).append(t),t.setAttribute("aria-hidden",!0),t},pT=function(t,e){const n=on._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=on._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),i},Kv=function(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)},_(on,Om);let qv=on;globalThis.pdfjsTestingUtils={HighlightOutliner:Tv};Et.AbortException;Et.AnnotationEditorLayer;Et.AnnotationEditorParamsType;Et.AnnotationEditorType;Et.AnnotationEditorUIManager;Et.AnnotationLayer;Et.AnnotationMode;Et.ColorPicker;Et.DOMSVGFactory;Et.DrawLayer;Et.FeatureTest;var wN=Et.GlobalWorkerOptions;Et.ImageKind;Et.InvalidPDFException;Et.MissingPDFException;Et.OPS;Et.OutputScale;Et.PDFDataRangeTransport;Et.PDFDateString;Et.PDFWorker;Et.PasswordResponses;Et.PermissionFlag;Et.PixelsPerInch;Et.RenderingCancelledException;Et.TextLayer;Et.TouchManager;Et.UnexpectedResponseException;Et.Util;Et.VerbosityLevel;Et.XfaLayer;Et.build;Et.createValidAbsoluteUrl;Et.fetchData;var AN=Et.getDocument;Et.getFilenameFromUrl;Et.getPdfFilenameFromUrl;Et.getXfaPageViewport;Et.isDataScheme;Et.isPdfFile;Et.noContextMenu;Et.normalizeUnicode;Et.setLayerDimensions;Et.shadow;Et.stopEvent;var xN=Et.version;wN.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${xN}/pdf.worker.min.mjs`;async function SN(o){const t=await o.arrayBuffer(),e=await AN({data:t}).promise;let n="";for(let i=1;i<=e.numPages;i++){const u=(await(await e.getPage(i)).getTextContent()).items.map(d=>d.str);n+=u.join(" ")+`
`}return n}async function bN(o,t,e,n,i){if(!t)throw new Error("API Key is required");const a=`
    You are an expert quiz generator. Generate a multiple-choice quiz based on the following text.
    The quiz should have ${n} questions.
    Difficulty level: ${i}.
    
    Return ONLY a JSON object with the following structure:
    {
      "title": "Quiz Title",
      "questions": [
        {
          "question": "Question text?",
          "options": ["Option 1", "Option 2", "Option 3", "Option 4"],
          "correctAnswer": 0,
          "explanation": "Why this is correct"
        }
      ]
    }
    
    Text content:
    ${o.substring(0,8e3)}
  `,u=await(await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json","HTTP-Referer":"https://github.com/mk-knight23/pdf-to-quiz-generator","X-Title":"QuizFlow AI"},body:JSON.stringify({model:e,messages:[{role:"user",content:a}],response_format:{type:"json_object"}})})).json();if(u.error)throw new Error(u.error.message||"AI Generation failed");const d=u.choices[0].message.content;return JSON.parse(d)}function EN(){const{settings:o,addQuiz:t,quizzes:e,removeQuiz:n}=wD(),[i,a]=et.useState(null),[l,u]=et.useState(!1),[d,f]=et.useState(null),[m,g]=et.useState(null),[v,A]=et.useState({}),[S,b]=et.useState(!1),T=R=>{R.target.files&&R.target.files[0]&&(a(R.target.files[0]),f(null))},k=async()=>{if(i){if(!o.apiKey){f("Please configure your API key in Settings first");return}u(!0),f(null);try{const R=await SN(i),I=await bN(R,o.apiKey,o.model,o.numQuestions,o.difficulty),z={id:Math.random().toString(36).substr(2,9),title:I.title,questions:I.questions.map(B=>({...B,id:Math.random().toString(36).substr(2,9)})),createdAt:new Date().toISOString(),pdfName:i.name};t(z),g(z),A({}),b(!1)}catch(R){f(R.message||"Failed to generate quiz")}finally{u(!1)}}},M=(R,I)=>{S||A(z=>({...z,[R]:I}))},L=m?m.questions.reduce((R,I)=>R+(v[I.id]===I.correctAnswer?1:0),0):0;return O.jsx("div",{className:"max-w-4xl mx-auto space-y-8",children:m?O.jsxs(Ul.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-8 pb-20",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("button",{onClick:()=>g(null),className:"text-slate-500 hover:text-quiz-primary transition-colors flex items-center gap-2",children:" Back to Generator"}),O.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:m.pdfName})]}),O.jsxs("header",{className:"space-y-2",children:[O.jsx("h2",{className:"text-3xl md:text-4xl font-display font-black leading-tight",children:m.title}),O.jsx("p",{className:"text-slate-500",children:"Based on your uploaded document"})]}),O.jsx("div",{className:"space-y-6",children:m.questions.map((R,I)=>O.jsxs("div",{className:"glass p-8 rounded-[2rem] space-y-6",children:[O.jsxs("div",{className:"flex items-start gap-4",children:[O.jsx("span",{className:"bg-quiz-primary text-white w-8 h-8 rounded-lg flex items-center justify-center font-bold shrink-0",children:I+1}),O.jsx("h4",{className:"text-xl font-bold leading-snug",children:R.question})]}),O.jsx("div",{className:"grid gap-3 pl-12",children:R.options.map((z,B)=>{const U=v[R.id]===B,Q=B===R.correctAnswer,ct=S&&Q,ot=S&&U&&!Q;return O.jsxs("button",{onClick:()=>M(R.id,B),className:_N("w-full text-left p-4 rounded-xl border-2 transition-all flex items-center justify-between",!S&&U&&"bg-quiz-primary/10 border-quiz-primary",!S&&!U&&"border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50",ct&&"bg-emerald-500/10 border-emerald-500 text-emerald-600 dark:text-emerald-400",ot&&"bg-red-500/10 border-red-500 text-red-600 dark:text-red-400"),children:[O.jsx("span",{className:"font-medium",children:z}),ct&&O.jsx(yb,{size:18}),ot&&O.jsx(gb,{size:18})]},B)})}),S&&O.jsx(Ul.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"pl-12 pt-4 border-t border-slate-100 dark:border-slate-800",children:O.jsxs("p",{className:"text-sm text-slate-500 italic",children:[O.jsx("span",{className:"font-bold text-quiz-accent uppercase not-italic mr-2",children:"Explanation:"}),R.explanation]})})]},R.id))}),O.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 w-full max-w-lg px-4",children:O.jsx("div",{className:"glass p-4 rounded-2xl shadow-2xl flex items-center justify-between",children:S?O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"flex items-center gap-4 pl-4",children:[O.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase",children:"Score"}),O.jsxs("span",{className:"text-2xl font-black text-quiz-primary",children:[L,"/",m.questions.length]})]}),O.jsx("button",{onClick:()=>g(null),className:"bg-quiz-dark dark:bg-white dark:text-quiz-dark text-white px-6 py-3 rounded-xl font-bold",children:"Done"})]}):O.jsxs(O.Fragment,{children:[O.jsxs("p",{className:"text-sm text-slate-500 pl-4 font-medium",children:[Object.keys(v).length," of ",m.questions.length," answered"]}),O.jsx("button",{disabled:Object.keys(v).length<m.questions.length,onClick:()=>b(!0),className:"bg-quiz-primary hover:bg-quiz-primary/90 text-white px-8 py-3 rounded-xl font-bold disabled:opacity-50 transition-all",children:"Check Results"})]})})})]}):O.jsxs(Ul.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[O.jsxs("div",{className:"glass p-12 rounded-[2.5rem] border-2 border-dashed border-slate-300 dark:border-slate-700 flex flex-col items-center text-center space-y-6 transition-colors hover:border-quiz-primary/50",children:[O.jsx("div",{className:"p-6 bg-quiz-primary/10 rounded-full text-quiz-primary",children:O.jsx(lD,{size:48})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-2xl font-display font-bold",children:"Upload PDF"}),O.jsx("p",{className:"text-slate-500 mt-2",children:"Maximum file size: 10MB"})]}),O.jsx("input",{type:"file",accept:".pdf",onChange:T,className:"hidden",id:"pdf-upload"}),O.jsx("label",{htmlFor:"pdf-upload",className:"bg-quiz-primary hover:bg-quiz-primary/90 text-white px-8 py-3 rounded-xl font-bold cursor-pointer transition-all active:scale-95 shadow-lg shadow-quiz-primary/20",children:"Select File"}),i&&O.jsxs("div",{className:"flex items-center gap-2 text-quiz-accent font-medium",children:[O.jsx(yb,{size:18}),i.name]})]}),O.jsxs("button",{onClick:k,disabled:!i||l,className:"w-full bg-quiz-dark dark:bg-white dark:text-quiz-dark text-white p-5 rounded-2xl font-display font-bold text-xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[l?O.jsx(N0,{className:"animate-spin"}):O.jsx(N0,{}),l?"GENERATING QUIZ...":"GENERATE QUIZ"]}),d&&O.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 p-4 rounded-xl flex items-start gap-3",children:[O.jsx(gb,{className:"shrink-0"}),O.jsx("p",{className:"text-sm font-medium",children:d})]}),e.length>0&&O.jsxs("div",{className:"space-y-4",children:[O.jsxs("h3",{className:"text-xl font-display font-bold flex items-center gap-2",children:[O.jsx(cD,{className:"w-5 h-5"})," Recent Quizzes"]}),O.jsx("div",{className:"grid gap-4",children:e.map(R=>O.jsxs("div",{className:"glass p-4 rounded-2xl flex items-center justify-between group",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-xl",children:O.jsx(oD,{className:"text-slate-400"})}),O.jsxs("div",{children:[O.jsx("h4",{className:"font-bold",children:R.title}),O.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-tighter",children:R.pdfName})]})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("button",{onClick:()=>g(R),className:"p-2 hover:bg-quiz-primary/10 text-quiz-primary rounded-lg transition-colors",children:O.jsx(aD,{size:18})}),O.jsx("button",{onClick:()=>n(R.id),className:"p-2 hover:bg-red-500/10 text-red-500 rounded-lg transition-colors",children:O.jsx(gD,{size:18})})]})]},R.id))})]})]})})}function _N(...o){return o.filter(Boolean).join(" ")}const mT=Rw()(Dw(o=>({totalQuizzesCreated:0,totalQuestionsGenerated:0,totalTimeSpent:0,lastSessionDate:null,recordQuizCreated:()=>o(t=>({totalQuizzesCreated:t.totalQuizzesCreated+1,lastSessionDate:new Date().toISOString()})),addQuestions:t=>o(e=>({totalQuestionsGenerated:e.totalQuestionsGenerated+t})),addTimeSpent:t=>o(e=>({totalTimeSpent:e.totalTimeSpent+t})),resetStats:()=>o({totalQuizzesCreated:0,totalQuestionsGenerated:0,totalTimeSpent:0,lastSessionDate:null})}),{name:"quizflow-stats",storage:Lw(()=>localStorage)}));function CN(){const o=$m(),t=et.useRef(null),e=o.soundEnabled,n=et.useCallback((d,f,m="sine",g=.3)=>{if(e)try{t.current||(t.current=new(window.AudioContext||window.webkitAudioContext));const v=t.current.createOscillator(),A=t.current.createGain();v.connect(A),A.connect(t.current.destination),v.type=m,v.frequency.setValueAtTime(d,t.current.currentTime),A.gain.setValueAtTime(g,t.current.currentTime),A.gain.exponentialRampToValueAtTime(.01,t.current.currentTime+f),v.start(t.current.currentTime),v.stop(t.current.currentTime+f)}catch{console.warn("Audio playback failed")}},[e]),i=()=>n(800,.05,"sine",.2),a=()=>n(600,.03,"sine",.1),l=()=>{n(523.25,.1,"sine",.3),setTimeout(()=>n(659.25,.1,"sine",.3),100),setTimeout(()=>n(783.99,.15,"sine",.3),200)},u=()=>n(200,.2,"sawtooth",.2);return et.useEffect(()=>()=>{var d;(d=t.current)==null||d.close()},[]),{playClick:i,playHover:a,playSuccess:l,playError:u,isEnabled:e}}const TN=[{key:"Ctrl + N",action:"New Quiz"},{key:"Escape",action:"Close Settings"},{key:"H",action:"Toggle Help"},{key:"?",action:"Show Shortcuts"}];function kN({onClose:o}){const t=$m(),e=mT(),{playClick:n}=CN(),i=[{value:"dark",label:"Dark",icon:fD},{value:"light",label:"Light",icon:vb},{value:"system",label:"System",icon:dD}],a=u=>{const d=Math.floor(u/3600),f=Math.floor(u%3600/60);return d>0?`${d}h ${f}m`:`${f}m`};et.useEffect(()=>(t.showHelp?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t.showHelp]);const l=()=>{n(),o()};return O.jsx(kP,{children:t.showHelp&&O.jsx(Ul.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:l,role:"dialog","aria-modal":"true","aria-labelledby":"settings-title",children:O.jsxs(Ul.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:u=>u.stopPropagation(),children:[O.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800",children:[O.jsxs("div",{className:"flex items-center space-x-3",children:[O.jsx(g_,{className:"text-quiz-primary",size:24}),O.jsx("h2",{id:"settings-title",className:"text-xl font-bold",children:"Settings"})]}),O.jsx("button",{onClick:l,className:"p-2 text-slate-400 hover:text-white transition-colors rounded-lg hover:bg-white/10","aria-label":"Close settings",children:O.jsx(vD,{size:20})})]}),O.jsxs("div",{className:"p-6 space-y-8",children:[O.jsxs("section",{"aria-labelledby":"audio-section",children:[O.jsxs("h3",{className:"flex items-center space-x-2 text-sm font-bold text-slate-400 uppercase tracking-wider mb-4",children:[O.jsx(yD,{size:16}),O.jsx("span",{children:"Audio"})]}),O.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-100 dark:bg-slate-800 rounded-xl",children:[O.jsx("span",{className:"font-medium",children:"Sound Effects"}),O.jsx("button",{onClick:()=>{n(),t.toggleSound()},className:`relative w-14 h-7 rounded-full transition-colors ${t.soundEnabled?"bg-quiz-primary":"bg-slate-600"}`,role:"switch","aria-checked":t.soundEnabled,children:O.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${t.soundEnabled?"translate-x-7":"translate-x-0"}`})})]})]}),O.jsxs("section",{"aria-labelledby":"theme-section",children:[O.jsxs("h3",{className:"flex items-center space-x-2 text-sm font-bold text-slate-400 uppercase tracking-wider mb-4",children:[O.jsx(vb,{size:16}),O.jsx("span",{children:"Theme"})]}),O.jsx("div",{className:"grid grid-cols-3 gap-3",children:i.map(u=>O.jsxs("button",{onClick:()=>{n(),t.setTheme(u.value)},className:`flex flex-col items-center p-4 rounded-xl transition-all border-2 ${t.theme===u.value?"border-quiz-primary bg-quiz-primary/10":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[O.jsx(u.icon,{size:20,className:`mb-2 ${t.theme===u.value?"text-quiz-primary":"text-slate-400"}`}),O.jsx("span",{className:`text-sm font-medium ${t.theme===u.value?"text-slate-900 dark:text-white":"text-slate-600 dark:text-slate-400"}`,children:u.label})]},u.value))})]}),O.jsxs("section",{"aria-labelledby":"stats-section",children:[O.jsxs("h3",{className:"flex items-center space-x-2 text-sm font-bold text-slate-400 uppercase tracking-wider mb-4",children:[O.jsx(rD,{size:16}),O.jsx("span",{children:"Statistics"})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-100 dark:bg-slate-800 rounded-xl",children:[O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-2xl font-bold",children:e.totalQuizzesCreated}),O.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Quizzes Created"})]}),O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-2xl font-bold text-quiz-primary",children:e.totalQuestionsGenerated}),O.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Questions"})]}),O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-2xl font-bold",children:a(e.totalTimeSpent)}),O.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Time Spent"})]}),O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-2xl font-bold text-quiz-secondary",children:e.lastSessionDate?new Date(e.lastSessionDate).toLocaleDateString():"Never"}),O.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Last Session"})]})]}),O.jsxs("button",{onClick:()=>{n(),e.resetStats()},className:"mt-4 w-full flex items-center justify-center space-x-2 p-3 text-red-500 hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors",children:[O.jsx(pD,{size:16}),O.jsx("span",{className:"text-sm font-medium",children:"Reset Statistics"})]})]}),O.jsxs("section",{"aria-labelledby":"help-section",children:[O.jsxs("h3",{className:"flex items-center space-x-2 text-sm font-bold text-slate-400 uppercase tracking-wider mb-4",children:[O.jsx(hD,{size:16}),O.jsx("span",{children:"Keyboard Shortcuts"})]}),O.jsx("div",{className:"space-y-2",children:TN.map(u=>O.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[O.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:u.action}),O.jsx("kbd",{className:"px-3 py-1 text-xs font-mono bg-slate-200 dark:bg-slate-700 rounded",children:u.key})]},u.action))})]})]}),O.jsx("footer",{className:"p-6 border-t border-slate-200 dark:border-slate-800 text-center",children:O.jsx("p",{className:"text-xs text-slate-500",children:"QuizFlow v1.0.0 - Built with React + Vite"})})]})})})}function PN(){const{isDarkMode:o,toggleHelp:t}=$m();return O.jsxs("div",{className:`min-h-screen ${o?"dark":""}`,children:[O.jsx(kN,{onClose:()=>t()}),O.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[O.jsxs("nav",{className:"flex justify-between items-center mb-16",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:"bg-quiz-primary p-2.5 rounded-2xl shadow-lg shadow-quiz-primary/30 rotate-3",children:O.jsx(N0,{className:"text-white w-7 h-7"})}),O.jsxs("div",{children:[O.jsxs("h1",{className:"text-2xl font-display font-black tracking-tighter",children:["Quiz",O.jsx("span",{className:"text-quiz-primary",children:"Flow"})]}),O.jsxs("div",{className:"flex items-center gap-1",children:[O.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),O.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"AI Enabled"})]})]})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("button",{onClick:()=>t(),className:"p-3 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-quiz-primary transition-all",children:O.jsx(g_,{size:20})}),O.jsx("a",{href:"https://github.com/mk-knight23/37-PDF-to-Quiz-Generator",target:"_blank",rel:"noopener noreferrer",className:"p-3 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-quiz-primary transition-all",children:O.jsx(uD,{size:20})})]})]}),O.jsxs("div",{className:"text-center mb-16 space-y-4",children:[O.jsxs(Ul.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-quiz-secondary/10 text-quiz-secondary text-xs font-black uppercase tracking-widest",children:[O.jsx(mD,{size:14,className:"fill-current"})," Transform Documents Instantly"]}),O.jsxs("h2",{className:"text-5xl md:text-7xl font-display font-black tracking-tight leading-[0.9]",children:["Turn PDFs into ",O.jsx("br",{}),O.jsx("span",{className:"gradient-text italic",children:"Interactive Quizzes"})]}),O.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-xl mx-auto text-lg font-medium",children:"Upload any PDF and let our AI generate a comprehensive quiz for you. Perfect for students, teachers, and lifelong learners."})]}),O.jsx("main",{children:O.jsx(EN,{})}),O.jsx("footer",{className:"mt-32 pb-12 border-t border-slate-200 dark:border-slate-800 pt-12",children:O.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-8 text-sm text-slate-400 font-bold uppercase tracking-widest",children:[O.jsxs("div",{className:"flex items-center gap-6",children:[O.jsx("a",{href:"#",className:"hover:text-quiz-primary transition-colors",children:"Privacy"}),O.jsx("a",{href:"#",className:"hover:text-quiz-primary transition-colors",children:"API"}),O.jsx("a",{href:"#",className:"hover:text-quiz-primary transition-colors",children:"Terms"})]}),O.jsx("p",{children:" 2026 MK-QUILABS"})]})})]})]})}function MN(){$m.getState().applyTheme(),mT.getState()}MN();bP.createRoot(document.getElementById("root")).render(O.jsx(qc.StrictMode,{children:O.jsx(PN,{})}));
