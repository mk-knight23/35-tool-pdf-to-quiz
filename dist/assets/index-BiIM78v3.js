var oP=Object.defineProperty;var Bx=o=>{throw TypeError(o)};var aP=(o,t,e)=>t in o?oP(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var wt=(o,t,e)=>aP(o,typeof t!="symbol"?t+"":t,e),Gy=(o,t,e)=>t.has(o)||Bx("Cannot "+e);var u=(o,t,e)=>(Gy(o,t,"read from private field"),e?e.call(o):t.get(o)),_=(o,t,e)=>t.has(o)?Bx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(o):t.set(o,e),x=(o,t,e,n)=>(Gy(o,t,"write to private field"),n?n.call(o,e):t.set(o,e),e),C=(o,t,e)=>(Gy(o,t,"access private method"),e);var vn=(o,t,e,n)=>({set _(s){x(o,t,s,e)},get _(){return u(o,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function Nb(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Wy={exports:{}},Bc={},qy={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hx;function lP(){if(Hx)return Dt;Hx=1;var o=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=g&&F[g]||F["@@iterator"],typeof F=="function"?F:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function T(F,$,ft){this.props=F,this.context=$,this.refs=b,this.updater=ft||A}T.prototype.isReactComponent={},T.prototype.setState=function(F,$){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,$,"setState")},T.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function k(){}k.prototype=T.prototype;function M(F,$,ft){this.props=F,this.context=$,this.refs=b,this.updater=ft||A}var L=M.prototype=new k;L.constructor=M,S(L,T.prototype),L.isPureReactComponent=!0;var R=Array.isArray,I=Object.prototype.hasOwnProperty,j={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function U(F,$,ft){var Ct,Lt={},St=null,vt=null;if($!=null)for(Ct in $.ref!==void 0&&(vt=$.ref),$.key!==void 0&&(St=""+$.key),$)I.call($,Ct)&&!B.hasOwnProperty(Ct)&&(Lt[Ct]=$[Ct]);var Ot=arguments.length-2;if(Ot===1)Lt.children=ft;else if(1<Ot){for(var Yt=Array(Ot),mn=0;mn<Ot;mn++)Yt[mn]=arguments[mn+2];Lt.children=Yt}if(F&&F.defaultProps)for(Ct in Ot=F.defaultProps,Ot)Lt[Ct]===void 0&&(Lt[Ct]=Ot[Ct]);return{$$typeof:o,type:F,key:St,ref:vt,props:Lt,_owner:j.current}}function Q(F,$){return{$$typeof:o,type:F.type,key:$,ref:F.ref,props:F.props,_owner:F._owner}}function ct(F){return typeof F=="object"&&F!==null&&F.$$typeof===o}function ot(F){var $={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ft){return $[ft]})}var Rt=/\/+/g;function Ft(F,$){return typeof F=="object"&&F!==null&&F.key!=null?ot(""+F.key):$.toString(36)}function _t(F,$,ft,Ct,Lt){var St=typeof F;(St==="undefined"||St==="boolean")&&(F=null);var vt=!1;if(F===null)vt=!0;else switch(St){case"string":case"number":vt=!0;break;case"object":switch(F.$$typeof){case o:case t:vt=!0}}if(vt)return vt=F,Lt=Lt(vt),F=Ct===""?"."+Ft(vt,0):Ct,R(Lt)?(ft="",F!=null&&(ft=F.replace(Rt,"$&/")+"/"),_t(Lt,$,ft,"",function(mn){return mn})):Lt!=null&&(ct(Lt)&&(Lt=Q(Lt,ft+(!Lt.key||vt&&vt.key===Lt.key?"":(""+Lt.key).replace(Rt,"$&/")+"/")+F)),$.push(Lt)),1;if(vt=0,Ct=Ct===""?".":Ct+":",R(F))for(var Ot=0;Ot<F.length;Ot++){St=F[Ot];var Yt=Ct+Ft(St,Ot);vt+=_t(St,$,ft,Yt,Lt)}else if(Yt=v(F),typeof Yt=="function")for(F=Yt.call(F),Ot=0;!(St=F.next()).done;)St=St.value,Yt=Ct+Ft(St,Ot++),vt+=_t(St,$,ft,Yt,Lt);else if(St==="object")throw $=String(F),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return vt}function Kt(F,$,ft){if(F==null)return F;var Ct=[],Lt=0;return _t(F,Ct,"","",function(St){return $.call(ft,St,Lt++)}),Ct}function Z(F){if(F._status===-1){var $=F._result;$=$(),$.then(function(ft){(F._status===0||F._status===-1)&&(F._status=1,F._result=ft)},function(ft){(F._status===0||F._status===-1)&&(F._status=2,F._result=ft)}),F._status===-1&&(F._status=0,F._result=$)}if(F._status===1)return F._result.default;throw F._result}var K={current:null},q={transition:null},lt={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:q,ReactCurrentOwner:j};function J(){throw Error("act(...) is not supported in production builds of React.")}return Dt.Children={map:Kt,forEach:function(F,$,ft){Kt(F,function(){$.apply(this,arguments)},ft)},count:function(F){var $=0;return Kt(F,function(){$++}),$},toArray:function(F){return Kt(F,function($){return $})||[]},only:function(F){if(!ct(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Dt.Component=T,Dt.Fragment=e,Dt.Profiler=s,Dt.PureComponent=M,Dt.StrictMode=n,Dt.Suspense=d,Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lt,Dt.act=J,Dt.cloneElement=function(F,$,ft){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ct=S({},F.props),Lt=F.key,St=F.ref,vt=F._owner;if($!=null){if($.ref!==void 0&&(St=$.ref,vt=j.current),$.key!==void 0&&(Lt=""+$.key),F.type&&F.type.defaultProps)var Ot=F.type.defaultProps;for(Yt in $)I.call($,Yt)&&!B.hasOwnProperty(Yt)&&(Ct[Yt]=$[Yt]===void 0&&Ot!==void 0?Ot[Yt]:$[Yt])}var Yt=arguments.length-2;if(Yt===1)Ct.children=ft;else if(1<Yt){Ot=Array(Yt);for(var mn=0;mn<Yt;mn++)Ot[mn]=arguments[mn+2];Ct.children=Ot}return{$$typeof:o,type:F.type,key:Lt,ref:St,props:Ct,_owner:vt}},Dt.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},Dt.createElement=U,Dt.createFactory=function(F){var $=U.bind(null,F);return $.type=F,$},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(F){return{$$typeof:c,render:F}},Dt.isValidElement=ct,Dt.lazy=function(F){return{$$typeof:m,_payload:{_status:-1,_result:F},_init:Z}},Dt.memo=function(F,$){return{$$typeof:f,type:F,compare:$===void 0?null:$}},Dt.startTransition=function(F){var $=q.transition;q.transition={};try{F()}finally{q.transition=$}},Dt.unstable_act=J,Dt.useCallback=function(F,$){return K.current.useCallback(F,$)},Dt.useContext=function(F){return K.current.useContext(F)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(F){return K.current.useDeferredValue(F)},Dt.useEffect=function(F,$){return K.current.useEffect(F,$)},Dt.useId=function(){return K.current.useId()},Dt.useImperativeHandle=function(F,$,ft){return K.current.useImperativeHandle(F,$,ft)},Dt.useInsertionEffect=function(F,$){return K.current.useInsertionEffect(F,$)},Dt.useLayoutEffect=function(F,$){return K.current.useLayoutEffect(F,$)},Dt.useMemo=function(F,$){return K.current.useMemo(F,$)},Dt.useReducer=function(F,$,ft){return K.current.useReducer(F,$,ft)},Dt.useRef=function(F){return K.current.useRef(F)},Dt.useState=function(F){return K.current.useState(F)},Dt.useSyncExternalStore=function(F,$,ft){return K.current.useSyncExternalStore(F,$,ft)},Dt.useTransition=function(){return K.current.useTransition()},Dt.version="18.3.1",Dt}var Ux;function K0(){return Ux||(Ux=1,qy.exports=lP()),qy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x;function uP(){if($x)return Bc;$x=1;var o=K0(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,f){var m,g={},v=null,A=null;f!==void 0&&(v=""+f),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(A=d.ref);for(m in d)n.call(d,m)&&!a.hasOwnProperty(m)&&(g[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:t,type:c,key:v,ref:A,props:g,_owner:s.current}}return Bc.Fragment=e,Bc.jsx=l,Bc.jsxs=l,Bc}var Gx;function cP(){return Gx||(Gx=1,Wy.exports=uP()),Wy.exports}var z=cP(),et=K0();const qc=Nb(et);var gp={},Xy={exports:{}},Ln={},Ky={exports:{}},Yy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function hP(){return Wx||(Wx=1,(function(o){function t(q,lt){var J=q.length;q.push(lt);t:for(;0<J;){var F=J-1>>>1,$=q[F];if(0<s($,lt))q[F]=lt,q[J]=$,J=F;else break t}}function e(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var lt=q[0],J=q.pop();if(J!==lt){q[0]=J;t:for(var F=0,$=q.length,ft=$>>>1;F<ft;){var Ct=2*(F+1)-1,Lt=q[Ct],St=Ct+1,vt=q[St];if(0>s(Lt,J))St<$&&0>s(vt,Lt)?(q[F]=vt,q[St]=J,F=St):(q[F]=Lt,q[Ct]=J,F=Ct);else if(St<$&&0>s(vt,J))q[F]=vt,q[St]=J,F=St;else break t}}return lt}function s(q,lt){var J=q.sortIndex-lt.sortIndex;return J!==0?J:q.id-lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;o.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();o.unstable_now=function(){return l.now()-c}}var d=[],f=[],m=1,g=null,v=3,A=!1,S=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(q){for(var lt=e(f);lt!==null;){if(lt.callback===null)n(f);else if(lt.startTime<=q)n(f),lt.sortIndex=lt.expirationTime,t(d,lt);else break;lt=e(f)}}function R(q){if(b=!1,L(q),!S)if(e(d)!==null)S=!0,Z(I);else{var lt=e(f);lt!==null&&K(R,lt.startTime-q)}}function I(q,lt){S=!1,b&&(b=!1,k(U),U=-1),A=!0;var J=v;try{for(L(lt),g=e(d);g!==null&&(!(g.expirationTime>lt)||q&&!ot());){var F=g.callback;if(typeof F=="function"){g.callback=null,v=g.priorityLevel;var $=F(g.expirationTime<=lt);lt=o.unstable_now(),typeof $=="function"?g.callback=$:g===e(d)&&n(d),L(lt)}else n(d);g=e(d)}if(g!==null)var ft=!0;else{var Ct=e(f);Ct!==null&&K(R,Ct.startTime-lt),ft=!1}return ft}finally{g=null,v=J,A=!1}}var j=!1,B=null,U=-1,Q=5,ct=-1;function ot(){return!(o.unstable_now()-ct<Q)}function Rt(){if(B!==null){var q=o.unstable_now();ct=q;var lt=!0;try{lt=B(!0,q)}finally{lt?Ft():(j=!1,B=null)}}else j=!1}var Ft;if(typeof M=="function")Ft=function(){M(Rt)};else if(typeof MessageChannel<"u"){var _t=new MessageChannel,Kt=_t.port2;_t.port1.onmessage=Rt,Ft=function(){Kt.postMessage(null)}}else Ft=function(){T(Rt,0)};function Z(q){B=q,j||(j=!0,Ft())}function K(q,lt){U=T(function(){q(o.unstable_now())},lt)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(q){q.callback=null},o.unstable_continueExecution=function(){S||A||(S=!0,Z(I))},o.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<q?Math.floor(1e3/q):5},o.unstable_getCurrentPriorityLevel=function(){return v},o.unstable_getFirstCallbackNode=function(){return e(d)},o.unstable_next=function(q){switch(v){case 1:case 2:case 3:var lt=3;break;default:lt=v}var J=v;v=lt;try{return q()}finally{v=J}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(q,lt){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var J=v;v=q;try{return lt()}finally{v=J}},o.unstable_scheduleCallback=function(q,lt,J){var F=o.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?F+J:F):J=F,q){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=J+$,q={id:m++,callback:lt,priorityLevel:q,startTime:J,expirationTime:$,sortIndex:-1},J>F?(q.sortIndex=J,t(f,q),e(d)===null&&q===e(f)&&(b?(k(U),U=-1):b=!0,K(R,J-F))):(q.sortIndex=$,t(d,q),S||A||(S=!0,Z(I))),q},o.unstable_shouldYield=ot,o.unstable_wrapCallback=function(q){var lt=v;return function(){var J=v;v=lt;try{return q.apply(this,arguments)}finally{v=J}}}})(Yy)),Yy}var qx;function dP(){return qx||(qx=1,Ky.exports=hP()),Ky.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx;function fP(){if(Xx)return Ln;Xx=1;var o=K0(),t=dP();function e(i){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)r+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(i,r){l(i,r),l(i+"Capture",r)}function l(i,r){for(s[i]=r,i=0;i<r.length;i++)n.add(r[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(i){return d.call(g,i)?!0:d.call(m,i)?!1:f.test(i)?g[i]=!0:(m[i]=!0,!1)}function A(i,r,h,p){if(h!==null&&h.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,r,h,p){if(r===null||typeof r>"u"||A(i,r,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function b(i,r,h,p,y,w,E){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=h,this.propertyName=i,this.type=r,this.sanitizeURL=w,this.removeEmptyString=E}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){T[i]=new b(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var r=i[0];T[r]=new b(r,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){T[i]=new b(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){T[i]=new b(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){T[i]=new b(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){T[i]=new b(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){T[i]=new b(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){T[i]=new b(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){T[i]=new b(i,5,!1,i.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function M(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var r=i.replace(k,M);T[r]=new b(r,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var r=i.replace(k,M);T[r]=new b(r,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var r=i.replace(k,M);T[r]=new b(r,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){T[i]=new b(i,1,!1,i.toLowerCase(),null,!1,!1)}),T.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){T[i]=new b(i,1,!1,i.toLowerCase(),null,!0,!0)});function L(i,r,h,p){var y=T.hasOwnProperty(r)?T[r]:null;(y!==null?y.type!==0:p||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,h,y,p)&&(h=null),p||y===null?v(r)&&(h===null?i.removeAttribute(r):i.setAttribute(r,""+h)):y.mustUseProperty?i[y.propertyName]=h===null?y.type===3?!1:"":h:(r=y.attributeName,p=y.attributeNamespace,h===null?i.removeAttribute(r):(y=y.type,h=y===3||y===4&&h===!0?"":""+h,p?i.setAttributeNS(p,r,h):i.setAttribute(r,h))))}var R=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),j=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ct=Symbol.for("react.provider"),ot=Symbol.for("react.context"),Rt=Symbol.for("react.forward_ref"),Ft=Symbol.for("react.suspense"),_t=Symbol.for("react.suspense_list"),Kt=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),q=Symbol.iterator;function lt(i){return i===null||typeof i!="object"?null:(i=q&&i[q]||i["@@iterator"],typeof i=="function"?i:null)}var J=Object.assign,F;function $(i){if(F===void 0)try{throw Error()}catch(h){var r=h.stack.trim().match(/\n( *(at )?)/);F=r&&r[1]||""}return`
`+F+i}var ft=!1;function Ct(i,r){if(!i||ft)return"";ft=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(H){var p=H}Reflect.construct(i,[],r)}else{try{r.call()}catch(H){p=H}i.call(r.prototype)}else{try{throw Error()}catch(H){p=H}i()}}catch(H){if(H&&p&&typeof H.stack=="string"){for(var y=H.stack.split(`
`),w=p.stack.split(`
`),E=y.length-1,P=w.length-1;1<=E&&0<=P&&y[E]!==w[P];)P--;for(;1<=E&&0<=P;E--,P--)if(y[E]!==w[P]){if(E!==1||P!==1)do if(E--,P--,0>P||y[E]!==w[P]){var D=`
`+y[E].replace(" at new "," at ");return i.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",i.displayName)),D}while(1<=E&&0<=P);break}}}finally{ft=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?$(i):""}function Lt(i){switch(i.tag){case 5:return $(i.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return i=Ct(i.type,!1),i;case 11:return i=Ct(i.type.render,!1),i;case 1:return i=Ct(i.type,!0),i;default:return""}}function St(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case j:return"Portal";case Q:return"Profiler";case U:return"StrictMode";case Ft:return"Suspense";case _t:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ot:return(i.displayName||"Context")+".Consumer";case ct:return(i._context.displayName||"Context")+".Provider";case Rt:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Kt:return r=i.displayName||null,r!==null?r:St(i.type)||"Memo";case Z:r=i._payload,i=i._init;try{return St(i(r))}catch{}}return null}function vt(i){var r=i.type;switch(i.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=r.render,i=i.displayName||i.name||"",r.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return St(r);case 8:return r===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ot(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Yt(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function mn(i){var r=Yt(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),p=""+i[r];if(!i.hasOwnProperty(r)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,w=h.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(E){p=""+E,w.call(this,E)}}),Object.defineProperty(i,r,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(E){p=""+E},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function of(i){i._valueTracker||(i._valueTracker=mn(i))}function qw(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var h=r.getValue(),p="";return i&&(p=Yt(i)?i.checked?"true":"false":i.value),i=p,i!==h?(r.setValue(i),!0):!1}function af(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Zm(i,r){var h=r.checked;return J({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??i._wrapperState.initialChecked})}function Xw(i,r){var h=r.defaultValue==null?"":r.defaultValue,p=r.checked!=null?r.checked:r.defaultChecked;h=Ot(r.value!=null?r.value:h),i._wrapperState={initialChecked:p,initialValue:h,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Kw(i,r){r=r.checked,r!=null&&L(i,"checked",r,!1)}function Jm(i,r){Kw(i,r);var h=Ot(r.value),p=r.type;if(h!=null)p==="number"?(h===0&&i.value===""||i.value!=h)&&(i.value=""+h):i.value!==""+h&&(i.value=""+h);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}r.hasOwnProperty("value")?tg(i,r.type,h):r.hasOwnProperty("defaultValue")&&tg(i,r.type,Ot(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(i.defaultChecked=!!r.defaultChecked)}function Yw(i,r,h){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var p=r.type;if(!(p!=="submit"&&p!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+i._wrapperState.initialValue,h||r===i.value||(i.value=r),i.defaultValue=r}h=i.name,h!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,h!==""&&(i.name=h)}function tg(i,r,h){(r!=="number"||af(i.ownerDocument)!==i)&&(h==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+h&&(i.defaultValue=""+h))}var nc=Array.isArray;function sl(i,r,h,p){if(i=i.options,r){r={};for(var y=0;y<h.length;y++)r["$"+h[y]]=!0;for(h=0;h<i.length;h++)y=r.hasOwnProperty("$"+i[h].value),i[h].selected!==y&&(i[h].selected=y),y&&p&&(i[h].defaultSelected=!0)}else{for(h=""+Ot(h),r=null,y=0;y<i.length;y++){if(i[y].value===h){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function eg(i,r){if(r.dangerouslySetInnerHTML!=null)throw Error(e(91));return J({},r,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Qw(i,r){var h=r.value;if(h==null){if(h=r.children,r=r.defaultValue,h!=null){if(r!=null)throw Error(e(92));if(nc(h)){if(1<h.length)throw Error(e(93));h=h[0]}r=h}r==null&&(r=""),h=r}i._wrapperState={initialValue:Ot(h)}}function Zw(i,r){var h=Ot(r.value),p=Ot(r.defaultValue);h!=null&&(h=""+h,h!==i.value&&(i.value=h),r.defaultValue==null&&i.defaultValue!==h&&(i.defaultValue=h)),p!=null&&(i.defaultValue=""+p)}function Jw(i){var r=i.textContent;r===i._wrapperState.initialValue&&r!==""&&r!==null&&(i.value=r)}function tA(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ng(i,r){return i==null||i==="http://www.w3.org/1999/xhtml"?tA(r):i==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var lf,eA=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,h,p,y){MSApp.execUnsafeLocalFunction(function(){return i(r,h,p,y)})}:i})(function(i,r){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=r;else{for(lf=lf||document.createElement("div"),lf.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=lf.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;r.firstChild;)i.appendChild(r.firstChild)}});function ic(i,r){if(r){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=r;return}}i.textContent=r}var sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cT=["Webkit","ms","Moz","O"];Object.keys(sc).forEach(function(i){cT.forEach(function(r){r=r+i.charAt(0).toUpperCase()+i.substring(1),sc[r]=sc[i]})});function nA(i,r,h){return r==null||typeof r=="boolean"||r===""?"":h||typeof r!="number"||r===0||sc.hasOwnProperty(i)&&sc[i]?(""+r).trim():r+"px"}function iA(i,r){i=i.style;for(var h in r)if(r.hasOwnProperty(h)){var p=h.indexOf("--")===0,y=nA(h,r[h],p);h==="float"&&(h="cssFloat"),p?i.setProperty(h,y):i[h]=y}}var hT=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ig(i,r){if(r){if(hT[i]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(e(137,i));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(e(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(e(61))}if(r.style!=null&&typeof r.style!="object")throw Error(e(62))}}function sg(i,r){if(i.indexOf("-")===-1)return typeof r.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rg=null;function og(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ag=null,rl=null,ol=null;function sA(i){if(i=Cc(i)){if(typeof ag!="function")throw Error(e(280));var r=i.stateNode;r&&(r=Rf(r),ag(i.stateNode,i.type,r))}}function rA(i){rl?ol?ol.push(i):ol=[i]:rl=i}function oA(){if(rl){var i=rl,r=ol;if(ol=rl=null,sA(i),r)for(i=0;i<r.length;i++)sA(r[i])}}function aA(i,r){return i(r)}function lA(){}var lg=!1;function uA(i,r,h){if(lg)return i(r,h);lg=!0;try{return aA(i,r,h)}finally{lg=!1,(rl!==null||ol!==null)&&(lA(),oA())}}function rc(i,r){var h=i.stateNode;if(h===null)return null;var p=Rf(h);if(p===null)return null;h=p[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break t;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(e(231,r,typeof h));return h}var ug=!1;if(c)try{var oc={};Object.defineProperty(oc,"passive",{get:function(){ug=!0}}),window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{ug=!1}function dT(i,r,h,p,y,w,E,P,D){var H=Array.prototype.slice.call(arguments,3);try{r.apply(h,H)}catch(W){this.onError(W)}}var ac=!1,uf=null,cf=!1,cg=null,fT={onError:function(i){ac=!0,uf=i}};function pT(i,r,h,p,y,w,E,P,D){ac=!1,uf=null,dT.apply(fT,arguments)}function mT(i,r,h,p,y,w,E,P,D){if(pT.apply(this,arguments),ac){if(ac){var H=uf;ac=!1,uf=null}else throw Error(e(198));cf||(cf=!0,cg=H)}}function _o(i){var r=i,h=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(h=r.return),i=r.return;while(i)}return r.tag===3?h:null}function cA(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function hA(i){if(_o(i)!==i)throw Error(e(188))}function gT(i){var r=i.alternate;if(!r){if(r=_o(i),r===null)throw Error(e(188));return r!==i?null:i}for(var h=i,p=r;;){var y=h.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){h=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===h)return hA(y),i;if(w===p)return hA(y),r;w=w.sibling}throw Error(e(188))}if(h.return!==p.return)h=y,p=w;else{for(var E=!1,P=y.child;P;){if(P===h){E=!0,h=y,p=w;break}if(P===p){E=!0,p=y,h=w;break}P=P.sibling}if(!E){for(P=w.child;P;){if(P===h){E=!0,h=w,p=y;break}if(P===p){E=!0,p=w,h=y;break}P=P.sibling}if(!E)throw Error(e(189))}}if(h.alternate!==p)throw Error(e(190))}if(h.tag!==3)throw Error(e(188));return h.stateNode.current===h?i:r}function dA(i){return i=gT(i),i!==null?fA(i):null}function fA(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var r=fA(i);if(r!==null)return r;i=i.sibling}return null}var pA=t.unstable_scheduleCallback,mA=t.unstable_cancelCallback,yT=t.unstable_shouldYield,vT=t.unstable_requestPaint,ye=t.unstable_now,wT=t.unstable_getCurrentPriorityLevel,hg=t.unstable_ImmediatePriority,gA=t.unstable_UserBlockingPriority,hf=t.unstable_NormalPriority,AT=t.unstable_LowPriority,yA=t.unstable_IdlePriority,df=null,Zi=null;function xT(i){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(df,i,void 0,(i.current.flags&128)===128)}catch{}}var Ti=Math.clz32?Math.clz32:ET,ST=Math.log,bT=Math.LN2;function ET(i){return i>>>=0,i===0?32:31-(ST(i)/bT|0)|0}var ff=64,pf=4194304;function lc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function mf(i,r){var h=i.pendingLanes;if(h===0)return 0;var p=0,y=i.suspendedLanes,w=i.pingedLanes,E=h&268435455;if(E!==0){var P=E&~y;P!==0?p=lc(P):(w&=E,w!==0&&(p=lc(w)))}else E=h&~y,E!==0?p=lc(E):w!==0&&(p=lc(w));if(p===0)return 0;if(r!==0&&r!==p&&(r&y)===0&&(y=p&-p,w=r&-r,y>=w||y===16&&(w&4194240)!==0))return r;if((p&4)!==0&&(p|=h&16),r=i.entangledLanes,r!==0)for(i=i.entanglements,r&=p;0<r;)h=31-Ti(r),y=1<<h,p|=i[h],r&=~y;return p}function _T(i,r){switch(i){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CT(i,r){for(var h=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,w=i.pendingLanes;0<w;){var E=31-Ti(w),P=1<<E,D=y[E];D===-1?((P&h)===0||(P&p)!==0)&&(y[E]=_T(P,r)):D<=r&&(i.expiredLanes|=P),w&=~P}}function dg(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function vA(){var i=ff;return ff<<=1,(ff&4194240)===0&&(ff=64),i}function fg(i){for(var r=[],h=0;31>h;h++)r.push(i);return r}function uc(i,r,h){i.pendingLanes|=r,r!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,r=31-Ti(r),i[r]=h}function TT(i,r){var h=i.pendingLanes&~r;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=r,i.mutableReadLanes&=r,i.entangledLanes&=r,r=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<h;){var y=31-Ti(h),w=1<<y;r[y]=0,p[y]=-1,i[y]=-1,h&=~w}}function pg(i,r){var h=i.entangledLanes|=r;for(i=i.entanglements;h;){var p=31-Ti(h),y=1<<p;y&r|i[p]&r&&(i[p]|=r),h&=~y}}var $t=0;function wA(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var AA,mg,xA,SA,bA,gg=!1,gf=[],vr=null,wr=null,Ar=null,cc=new Map,hc=new Map,xr=[],kT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EA(i,r){switch(i){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":cc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(r.pointerId)}}function dc(i,r,h,p,y,w){return i===null||i.nativeEvent!==w?(i={blockedOn:r,domEventName:h,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},r!==null&&(r=Cc(r),r!==null&&mg(r)),i):(i.eventSystemFlags|=p,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function PT(i,r,h,p,y){switch(r){case"focusin":return vr=dc(vr,i,r,h,p,y),!0;case"dragenter":return wr=dc(wr,i,r,h,p,y),!0;case"mouseover":return Ar=dc(Ar,i,r,h,p,y),!0;case"pointerover":var w=y.pointerId;return cc.set(w,dc(cc.get(w)||null,i,r,h,p,y)),!0;case"gotpointercapture":return w=y.pointerId,hc.set(w,dc(hc.get(w)||null,i,r,h,p,y)),!0}return!1}function _A(i){var r=Co(i.target);if(r!==null){var h=_o(r);if(h!==null){if(r=h.tag,r===13){if(r=cA(h),r!==null){i.blockedOn=r,bA(i.priority,function(){xA(h)});return}}else if(r===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function yf(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var h=vg(i.domEventName,i.eventSystemFlags,r[0],i.nativeEvent);if(h===null){h=i.nativeEvent;var p=new h.constructor(h.type,h);rg=p,h.target.dispatchEvent(p),rg=null}else return r=Cc(h),r!==null&&mg(r),i.blockedOn=h,!1;r.shift()}return!0}function CA(i,r,h){yf(i)&&h.delete(r)}function MT(){gg=!1,vr!==null&&yf(vr)&&(vr=null),wr!==null&&yf(wr)&&(wr=null),Ar!==null&&yf(Ar)&&(Ar=null),cc.forEach(CA),hc.forEach(CA)}function fc(i,r){i.blockedOn===r&&(i.blockedOn=null,gg||(gg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,MT)))}function pc(i){function r(y){return fc(y,i)}if(0<gf.length){fc(gf[0],i);for(var h=1;h<gf.length;h++){var p=gf[h];p.blockedOn===i&&(p.blockedOn=null)}}for(vr!==null&&fc(vr,i),wr!==null&&fc(wr,i),Ar!==null&&fc(Ar,i),cc.forEach(r),hc.forEach(r),h=0;h<xr.length;h++)p=xr[h],p.blockedOn===i&&(p.blockedOn=null);for(;0<xr.length&&(h=xr[0],h.blockedOn===null);)_A(h),h.blockedOn===null&&xr.shift()}var al=R.ReactCurrentBatchConfig,vf=!0;function RT(i,r,h,p){var y=$t,w=al.transition;al.transition=null;try{$t=1,yg(i,r,h,p)}finally{$t=y,al.transition=w}}function LT(i,r,h,p){var y=$t,w=al.transition;al.transition=null;try{$t=4,yg(i,r,h,p)}finally{$t=y,al.transition=w}}function yg(i,r,h,p){if(vf){var y=vg(i,r,h,p);if(y===null)Ng(i,r,p,wf,h),EA(i,p);else if(PT(y,i,r,h,p))p.stopPropagation();else if(EA(i,p),r&4&&-1<kT.indexOf(i)){for(;y!==null;){var w=Cc(y);if(w!==null&&AA(w),w=vg(i,r,h,p),w===null&&Ng(i,r,p,wf,h),w===y)break;y=w}y!==null&&p.stopPropagation()}else Ng(i,r,p,null,h)}}var wf=null;function vg(i,r,h,p){if(wf=null,i=og(p),i=Co(i),i!==null)if(r=_o(i),r===null)i=null;else if(h=r.tag,h===13){if(i=cA(r),i!==null)return i;i=null}else if(h===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null);return wf=i,null}function TA(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wT()){case hg:return 1;case gA:return 4;case hf:case AT:return 16;case yA:return 536870912;default:return 16}default:return 16}}var Sr=null,wg=null,Af=null;function kA(){if(Af)return Af;var i,r=wg,h=r.length,p,y="value"in Sr?Sr.value:Sr.textContent,w=y.length;for(i=0;i<h&&r[i]===y[i];i++);var E=h-i;for(p=1;p<=E&&r[h-p]===y[w-p];p++);return Af=y.slice(i,1<p?1-p:void 0)}function xf(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Sf(){return!0}function PA(){return!1}function zn(i){function r(h,p,y,w,E){this._reactName=h,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=E,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(h=i[P],this[P]=h?h(w):w[P]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Sf:PA,this.isPropagationStopped=PA,this}return J(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Sf)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Sf)},persist:function(){},isPersistent:Sf}),r}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ag=zn(ll),mc=J({},ll,{view:0,detail:0}),DT=zn(mc),xg,Sg,gc,bf=J({},mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eg,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==gc&&(gc&&i.type==="mousemove"?(xg=i.screenX-gc.screenX,Sg=i.screenY-gc.screenY):Sg=xg=0,gc=i),xg)},movementY:function(i){return"movementY"in i?i.movementY:Sg}}),MA=zn(bf),IT=J({},bf,{dataTransfer:0}),NT=zn(IT),FT=J({},mc,{relatedTarget:0}),bg=zn(FT),OT=J({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),jT=zn(OT),VT=J({},ll,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),zT=zn(VT),BT=J({},ll,{data:0}),RA=zn(BT),HT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$T={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GT(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=$T[i])?!!r[i]:!1}function Eg(){return GT}var WT=J({},mc,{key:function(i){if(i.key){var r=HT[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=xf(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?UT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eg,charCode:function(i){return i.type==="keypress"?xf(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xf(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),qT=zn(WT),XT=J({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LA=zn(XT),KT=J({},mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eg}),YT=zn(KT),QT=J({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZT=zn(QT),JT=J({},bf,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),tk=zn(JT),ek=[9,13,27,32],_g=c&&"CompositionEvent"in window,yc=null;c&&"documentMode"in document&&(yc=document.documentMode);var nk=c&&"TextEvent"in window&&!yc,DA=c&&(!_g||yc&&8<yc&&11>=yc),IA=" ",NA=!1;function FA(i,r){switch(i){case"keyup":return ek.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OA(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ul=!1;function ik(i,r){switch(i){case"compositionend":return OA(r);case"keypress":return r.which!==32?null:(NA=!0,IA);case"textInput":return i=r.data,i===IA&&NA?null:i;default:return null}}function sk(i,r){if(ul)return i==="compositionend"||!_g&&FA(i,r)?(i=kA(),Af=wg=Sr=null,ul=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return DA&&r.locale!=="ko"?null:r.data;default:return null}}var rk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jA(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!rk[i.type]:r==="textarea"}function VA(i,r,h,p){rA(p),r=kf(r,"onChange"),0<r.length&&(h=new Ag("onChange","change",null,h,p),i.push({event:h,listeners:r}))}var vc=null,wc=null;function ok(i){i1(i,0)}function Ef(i){var r=pl(i);if(qw(r))return i}function ak(i,r){if(i==="change")return r}var zA=!1;if(c){var Cg;if(c){var Tg="oninput"in document;if(!Tg){var BA=document.createElement("div");BA.setAttribute("oninput","return;"),Tg=typeof BA.oninput=="function"}Cg=Tg}else Cg=!1;zA=Cg&&(!document.documentMode||9<document.documentMode)}function HA(){vc&&(vc.detachEvent("onpropertychange",UA),wc=vc=null)}function UA(i){if(i.propertyName==="value"&&Ef(wc)){var r=[];VA(r,wc,i,og(i)),uA(ok,r)}}function lk(i,r,h){i==="focusin"?(HA(),vc=r,wc=h,vc.attachEvent("onpropertychange",UA)):i==="focusout"&&HA()}function uk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ef(wc)}function ck(i,r){if(i==="click")return Ef(r)}function hk(i,r){if(i==="input"||i==="change")return Ef(r)}function dk(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var ki=typeof Object.is=="function"?Object.is:dk;function Ac(i,r){if(ki(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var h=Object.keys(i),p=Object.keys(r);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var y=h[p];if(!d.call(r,y)||!ki(i[y],r[y]))return!1}return!0}function $A(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function GA(i,r){var h=$A(i);i=0;for(var p;h;){if(h.nodeType===3){if(p=i+h.textContent.length,i<=r&&p>=r)return{node:h,offset:r-i};i=p}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=$A(h)}}function WA(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?WA(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function qA(){for(var i=window,r=af();r instanceof i.HTMLIFrameElement;){try{var h=typeof r.contentWindow.location.href=="string"}catch{h=!1}if(h)i=r.contentWindow;else break;r=af(i.document)}return r}function kg(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}function fk(i){var r=qA(),h=i.focusedElem,p=i.selectionRange;if(r!==h&&h&&h.ownerDocument&&WA(h.ownerDocument.documentElement,h)){if(p!==null&&kg(h)){if(r=p.start,i=p.end,i===void 0&&(i=r),"selectionStart"in h)h.selectionStart=r,h.selectionEnd=Math.min(i,h.value.length);else if(i=(r=h.ownerDocument||document)&&r.defaultView||window,i.getSelection){i=i.getSelection();var y=h.textContent.length,w=Math.min(p.start,y);p=p.end===void 0?w:Math.min(p.end,y),!i.extend&&w>p&&(y=p,p=w,w=y),y=GA(h,w);var E=GA(h,p);y&&E&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==E.node||i.focusOffset!==E.offset)&&(r=r.createRange(),r.setStart(y.node,y.offset),i.removeAllRanges(),w>p?(i.addRange(r),i.extend(E.node,E.offset)):(r.setEnd(E.node,E.offset),i.addRange(r)))}}for(r=[],i=h;i=i.parentNode;)i.nodeType===1&&r.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<r.length;h++)i=r[h],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var pk=c&&"documentMode"in document&&11>=document.documentMode,cl=null,Pg=null,xc=null,Mg=!1;function XA(i,r,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Mg||cl==null||cl!==af(p)||(p=cl,"selectionStart"in p&&kg(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),xc&&Ac(xc,p)||(xc=p,p=kf(Pg,"onSelect"),0<p.length&&(r=new Ag("onSelect","select",null,r,h),i.push({event:r,listeners:p}),r.target=cl)))}function _f(i,r){var h={};return h[i.toLowerCase()]=r.toLowerCase(),h["Webkit"+i]="webkit"+r,h["Moz"+i]="moz"+r,h}var hl={animationend:_f("Animation","AnimationEnd"),animationiteration:_f("Animation","AnimationIteration"),animationstart:_f("Animation","AnimationStart"),transitionend:_f("Transition","TransitionEnd")},Rg={},KA={};c&&(KA=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function Cf(i){if(Rg[i])return Rg[i];if(!hl[i])return i;var r=hl[i],h;for(h in r)if(r.hasOwnProperty(h)&&h in KA)return Rg[i]=r[h];return i}var YA=Cf("animationend"),QA=Cf("animationiteration"),ZA=Cf("animationstart"),JA=Cf("transitionend"),t1=new Map,e1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(i,r){t1.set(i,r),a(r,[i])}for(var Lg=0;Lg<e1.length;Lg++){var Dg=e1[Lg],mk=Dg.toLowerCase(),gk=Dg[0].toUpperCase()+Dg.slice(1);br(mk,"on"+gk)}br(YA,"onAnimationEnd"),br(QA,"onAnimationIteration"),br(ZA,"onAnimationStart"),br("dblclick","onDoubleClick"),br("focusin","onFocus"),br("focusout","onBlur"),br(JA,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sc));function n1(i,r,h){var p=i.type||"unknown-event";i.currentTarget=h,mT(p,r,void 0,i),i.currentTarget=null}function i1(i,r){r=(r&4)!==0;for(var h=0;h<i.length;h++){var p=i[h],y=p.event;p=p.listeners;t:{var w=void 0;if(r)for(var E=p.length-1;0<=E;E--){var P=p[E],D=P.instance,H=P.currentTarget;if(P=P.listener,D!==w&&y.isPropagationStopped())break t;n1(y,P,H),w=D}else for(E=0;E<p.length;E++){if(P=p[E],D=P.instance,H=P.currentTarget,P=P.listener,D!==w&&y.isPropagationStopped())break t;n1(y,P,H),w=D}}}if(cf)throw i=cg,cf=!1,cg=null,i}function te(i,r){var h=r[Bg];h===void 0&&(h=r[Bg]=new Set);var p=i+"__bubble";h.has(p)||(s1(r,i,2,!1),h.add(p))}function Ig(i,r,h){var p=0;r&&(p|=4),s1(h,i,p,r)}var Tf="_reactListening"+Math.random().toString(36).slice(2);function bc(i){if(!i[Tf]){i[Tf]=!0,n.forEach(function(h){h!=="selectionchange"&&(yk.has(h)||Ig(h,!1,i),Ig(h,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Tf]||(r[Tf]=!0,Ig("selectionchange",!1,r))}}function s1(i,r,h,p){switch(TA(r)){case 1:var y=RT;break;case 4:y=LT;break;default:y=yg}h=y.bind(null,r,h,i),y=void 0,!ug||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(r,h,{capture:!0,passive:y}):i.addEventListener(r,h,!0):y!==void 0?i.addEventListener(r,h,{passive:y}):i.addEventListener(r,h,!1)}function Ng(i,r,h,p,y){var w=p;if((r&1)===0&&(r&2)===0&&p!==null)t:for(;;){if(p===null)return;var E=p.tag;if(E===3||E===4){var P=p.stateNode.containerInfo;if(P===y||P.nodeType===8&&P.parentNode===y)break;if(E===4)for(E=p.return;E!==null;){var D=E.tag;if((D===3||D===4)&&(D=E.stateNode.containerInfo,D===y||D.nodeType===8&&D.parentNode===y))return;E=E.return}for(;P!==null;){if(E=Co(P),E===null)return;if(D=E.tag,D===5||D===6){p=w=E;continue t}P=P.parentNode}}p=p.return}uA(function(){var H=w,W=og(h),X=[];t:{var G=t1.get(i);if(G!==void 0){var nt=Ag,ut=i;switch(i){case"keypress":if(xf(h)===0)break t;case"keydown":case"keyup":nt=qT;break;case"focusin":ut="focus",nt=bg;break;case"focusout":ut="blur",nt=bg;break;case"beforeblur":case"afterblur":nt=bg;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=MA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=NT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=YT;break;case YA:case QA:case ZA:nt=jT;break;case JA:nt=ZT;break;case"scroll":nt=DT;break;case"wheel":nt=tk;break;case"copy":case"cut":case"paste":nt=zT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=LA}var ht=(r&4)!==0,ve=!ht&&i==="scroll",O=ht?G!==null?G+"Capture":null:G;ht=[];for(var N=H,V;N!==null;){V=N;var Y=V.stateNode;if(V.tag===5&&Y!==null&&(V=Y,O!==null&&(Y=rc(N,O),Y!=null&&ht.push(Ec(N,Y,V)))),ve)break;N=N.return}0<ht.length&&(G=new nt(G,ut,null,h,W),X.push({event:G,listeners:ht}))}}if((r&7)===0){t:{if(G=i==="mouseover"||i==="pointerover",nt=i==="mouseout"||i==="pointerout",G&&h!==rg&&(ut=h.relatedTarget||h.fromElement)&&(Co(ut)||ut[Cs]))break t;if((nt||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,nt?(ut=h.relatedTarget||h.toElement,nt=H,ut=ut?Co(ut):null,ut!==null&&(ve=_o(ut),ut!==ve||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(nt=null,ut=H),nt!==ut)){if(ht=MA,Y="onMouseLeave",O="onMouseEnter",N="mouse",(i==="pointerout"||i==="pointerover")&&(ht=LA,Y="onPointerLeave",O="onPointerEnter",N="pointer"),ve=nt==null?G:pl(nt),V=ut==null?G:pl(ut),G=new ht(Y,N+"leave",nt,h,W),G.target=ve,G.relatedTarget=V,Y=null,Co(W)===H&&(ht=new ht(O,N+"enter",ut,h,W),ht.target=V,ht.relatedTarget=ve,Y=ht),ve=Y,nt&&ut)e:{for(ht=nt,O=ut,N=0,V=ht;V;V=dl(V))N++;for(V=0,Y=O;Y;Y=dl(Y))V++;for(;0<N-V;)ht=dl(ht),N--;for(;0<V-N;)O=dl(O),V--;for(;N--;){if(ht===O||O!==null&&ht===O.alternate)break e;ht=dl(ht),O=dl(O)}ht=null}else ht=null;nt!==null&&r1(X,G,nt,ht,!1),ut!==null&&ve!==null&&r1(X,ve,ut,ht,!0)}}t:{if(G=H?pl(H):window,nt=G.nodeName&&G.nodeName.toLowerCase(),nt==="select"||nt==="input"&&G.type==="file")var dt=ak;else if(jA(G))if(zA)dt=hk;else{dt=uk;var gt=lk}else(nt=G.nodeName)&&nt.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(dt=ck);if(dt&&(dt=dt(i,H))){VA(X,dt,h,W);break t}gt&&gt(i,G,H),i==="focusout"&&(gt=G._wrapperState)&&gt.controlled&&G.type==="number"&&tg(G,"number",G.value)}switch(gt=H?pl(H):window,i){case"focusin":(jA(gt)||gt.contentEditable==="true")&&(cl=gt,Pg=H,xc=null);break;case"focusout":xc=Pg=cl=null;break;case"mousedown":Mg=!0;break;case"contextmenu":case"mouseup":case"dragend":Mg=!1,XA(X,h,W);break;case"selectionchange":if(pk)break;case"keydown":case"keyup":XA(X,h,W)}var yt;if(_g)t:{switch(i){case"compositionstart":var bt="onCompositionStart";break t;case"compositionend":bt="onCompositionEnd";break t;case"compositionupdate":bt="onCompositionUpdate";break t}bt=void 0}else ul?FA(i,h)&&(bt="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(bt="onCompositionStart");bt&&(DA&&h.locale!=="ko"&&(ul||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&ul&&(yt=kA()):(Sr=W,wg="value"in Sr?Sr.value:Sr.textContent,ul=!0)),gt=kf(H,bt),0<gt.length&&(bt=new RA(bt,i,null,h,W),X.push({event:bt,listeners:gt}),yt?bt.data=yt:(yt=OA(h),yt!==null&&(bt.data=yt)))),(yt=nk?ik(i,h):sk(i,h))&&(H=kf(H,"onBeforeInput"),0<H.length&&(W=new RA("onBeforeInput","beforeinput",null,h,W),X.push({event:W,listeners:H}),W.data=yt))}i1(X,r)})}function Ec(i,r,h){return{instance:i,listener:r,currentTarget:h}}function kf(i,r){for(var h=r+"Capture",p=[];i!==null;){var y=i,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=rc(i,h),w!=null&&p.unshift(Ec(i,w,y)),w=rc(i,r),w!=null&&p.push(Ec(i,w,y))),i=i.return}return p}function dl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function r1(i,r,h,p,y){for(var w=r._reactName,E=[];h!==null&&h!==p;){var P=h,D=P.alternate,H=P.stateNode;if(D!==null&&D===p)break;P.tag===5&&H!==null&&(P=H,y?(D=rc(h,w),D!=null&&E.unshift(Ec(h,D,P))):y||(D=rc(h,w),D!=null&&E.push(Ec(h,D,P)))),h=h.return}E.length!==0&&i.push({event:r,listeners:E})}var vk=/\r\n?/g,wk=/\u0000|\uFFFD/g;function o1(i){return(typeof i=="string"?i:""+i).replace(vk,`
`).replace(wk,"")}function Pf(i,r,h){if(r=o1(r),o1(i)!==r&&h)throw Error(e(425))}function Mf(){}var Fg=null,Og=null;function jg(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Vg=typeof setTimeout=="function"?setTimeout:void 0,Ak=typeof clearTimeout=="function"?clearTimeout:void 0,a1=typeof Promise=="function"?Promise:void 0,xk=typeof queueMicrotask=="function"?queueMicrotask:typeof a1<"u"?function(i){return a1.resolve(null).then(i).catch(Sk)}:Vg;function Sk(i){setTimeout(function(){throw i})}function zg(i,r){var h=r,p=0;do{var y=h.nextSibling;if(i.removeChild(h),y&&y.nodeType===8)if(h=y.data,h==="/$"){if(p===0){i.removeChild(y),pc(r);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=y}while(h);pc(r)}function Er(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return i}function l1(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(r===0)return i;r--}else h==="/$"&&r++}i=i.previousSibling}return null}var fl=Math.random().toString(36).slice(2),Ji="__reactFiber$"+fl,_c="__reactProps$"+fl,Cs="__reactContainer$"+fl,Bg="__reactEvents$"+fl,bk="__reactListeners$"+fl,Ek="__reactHandles$"+fl;function Co(i){var r=i[Ji];if(r)return r;for(var h=i.parentNode;h;){if(r=h[Cs]||h[Ji]){if(h=r.alternate,r.child!==null||h!==null&&h.child!==null)for(i=l1(i);i!==null;){if(h=i[Ji])return h;i=l1(i)}return r}i=h,h=i.parentNode}return null}function Cc(i){return i=i[Ji]||i[Cs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function pl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(e(33))}function Rf(i){return i[_c]||null}var Hg=[],ml=-1;function _r(i){return{current:i}}function ee(i){0>ml||(i.current=Hg[ml],Hg[ml]=null,ml--)}function Zt(i,r){ml++,Hg[ml]=i.current,i.current=r}var Cr={},Je=_r(Cr),Tn=_r(!1),To=Cr;function gl(i,r){var h=i.type.contextTypes;if(!h)return Cr;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===r)return p.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in h)y[w]=r[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=y),y}function kn(i){return i=i.childContextTypes,i!=null}function Lf(){ee(Tn),ee(Je)}function u1(i,r,h){if(Je.current!==Cr)throw Error(e(168));Zt(Je,r),Zt(Tn,h)}function c1(i,r,h){var p=i.stateNode;if(r=r.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var y in p)if(!(y in r))throw Error(e(108,vt(i)||"Unknown",y));return J({},h,p)}function Df(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Cr,To=Je.current,Zt(Je,i),Zt(Tn,Tn.current),!0}function h1(i,r,h){var p=i.stateNode;if(!p)throw Error(e(169));h?(i=c1(i,r,To),p.__reactInternalMemoizedMergedChildContext=i,ee(Tn),ee(Je),Zt(Je,i)):ee(Tn),Zt(Tn,h)}var Ts=null,If=!1,Ug=!1;function d1(i){Ts===null?Ts=[i]:Ts.push(i)}function _k(i){If=!0,d1(i)}function Tr(){if(!Ug&&Ts!==null){Ug=!0;var i=0,r=$t;try{var h=Ts;for($t=1;i<h.length;i++){var p=h[i];do p=p(!0);while(p!==null)}Ts=null,If=!1}catch(y){throw Ts!==null&&(Ts=Ts.slice(i+1)),pA(hg,Tr),y}finally{$t=r,Ug=!1}}return null}var yl=[],vl=0,Nf=null,Ff=0,li=[],ui=0,ko=null,ks=1,Ps="";function Po(i,r){yl[vl++]=Ff,yl[vl++]=Nf,Nf=i,Ff=r}function f1(i,r,h){li[ui++]=ks,li[ui++]=Ps,li[ui++]=ko,ko=i;var p=ks;i=Ps;var y=32-Ti(p)-1;p&=~(1<<y),h+=1;var w=32-Ti(r)+y;if(30<w){var E=y-y%5;w=(p&(1<<E)-1).toString(32),p>>=E,y-=E,ks=1<<32-Ti(r)+y|h<<y|p,Ps=w+i}else ks=1<<w|h<<y|p,Ps=i}function $g(i){i.return!==null&&(Po(i,1),f1(i,1,0))}function Gg(i){for(;i===Nf;)Nf=yl[--vl],yl[vl]=null,Ff=yl[--vl],yl[vl]=null;for(;i===ko;)ko=li[--ui],li[ui]=null,Ps=li[--ui],li[ui]=null,ks=li[--ui],li[ui]=null}var Bn=null,Hn=null,se=!1,Pi=null;function p1(i,r){var h=fi(5,null,null,0);h.elementType="DELETED",h.stateNode=r,h.return=i,r=i.deletions,r===null?(i.deletions=[h],i.flags|=16):r.push(h)}function m1(i,r){switch(i.tag){case 5:var h=i.type;return r=r.nodeType!==1||h.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(i.stateNode=r,Bn=i,Hn=Er(r.firstChild),!0):!1;case 6:return r=i.pendingProps===""||r.nodeType!==3?null:r,r!==null?(i.stateNode=r,Bn=i,Hn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(h=ko!==null?{id:ks,overflow:Ps}:null,i.memoizedState={dehydrated:r,treeContext:h,retryLane:1073741824},h=fi(18,null,null,0),h.stateNode=r,h.return=i,i.child=h,Bn=i,Hn=null,!0):!1;default:return!1}}function Wg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function qg(i){if(se){var r=Hn;if(r){var h=r;if(!m1(i,r)){if(Wg(i))throw Error(e(418));r=Er(h.nextSibling);var p=Bn;r&&m1(i,r)?p1(p,h):(i.flags=i.flags&-4097|2,se=!1,Bn=i)}}else{if(Wg(i))throw Error(e(418));i.flags=i.flags&-4097|2,se=!1,Bn=i}}}function g1(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Bn=i}function Of(i){if(i!==Bn)return!1;if(!se)return g1(i),se=!0,!1;var r;if((r=i.tag!==3)&&!(r=i.tag!==5)&&(r=i.type,r=r!=="head"&&r!=="body"&&!jg(i.type,i.memoizedProps)),r&&(r=Hn)){if(Wg(i))throw y1(),Error(e(418));for(;r;)p1(i,r),r=Er(r.nextSibling)}if(g1(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(e(317));t:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"){if(r===0){Hn=Er(i.nextSibling);break t}r--}else h!=="$"&&h!=="$!"&&h!=="$?"||r++}i=i.nextSibling}Hn=null}}else Hn=Bn?Er(i.stateNode.nextSibling):null;return!0}function y1(){for(var i=Hn;i;)i=Er(i.nextSibling)}function wl(){Hn=Bn=null,se=!1}function Xg(i){Pi===null?Pi=[i]:Pi.push(i)}var Ck=R.ReactCurrentBatchConfig;function Tc(i,r,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(e(309));var p=h.stateNode}if(!p)throw Error(e(147,i));var y=p,w=""+i;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===w?r.ref:(r=function(E){var P=y.refs;E===null?delete P[w]:P[w]=E},r._stringRef=w,r)}if(typeof i!="string")throw Error(e(284));if(!h._owner)throw Error(e(290,i))}return i}function jf(i,r){throw i=Object.prototype.toString.call(r),Error(e(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i))}function v1(i){var r=i._init;return r(i._payload)}function w1(i){function r(O,N){if(i){var V=O.deletions;V===null?(O.deletions=[N],O.flags|=16):V.push(N)}}function h(O,N){if(!i)return null;for(;N!==null;)r(O,N),N=N.sibling;return null}function p(O,N){for(O=new Map;N!==null;)N.key!==null?O.set(N.key,N):O.set(N.index,N),N=N.sibling;return O}function y(O,N){return O=Nr(O,N),O.index=0,O.sibling=null,O}function w(O,N,V){return O.index=V,i?(V=O.alternate,V!==null?(V=V.index,V<N?(O.flags|=2,N):V):(O.flags|=2,N)):(O.flags|=1048576,N)}function E(O){return i&&O.alternate===null&&(O.flags|=2),O}function P(O,N,V,Y){return N===null||N.tag!==6?(N=Vy(V,O.mode,Y),N.return=O,N):(N=y(N,V),N.return=O,N)}function D(O,N,V,Y){var dt=V.type;return dt===B?W(O,N,V.props.children,Y,V.key):N!==null&&(N.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===Z&&v1(dt)===N.type)?(Y=y(N,V.props),Y.ref=Tc(O,N,V),Y.return=O,Y):(Y=lp(V.type,V.key,V.props,null,O.mode,Y),Y.ref=Tc(O,N,V),Y.return=O,Y)}function H(O,N,V,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==V.containerInfo||N.stateNode.implementation!==V.implementation?(N=zy(V,O.mode,Y),N.return=O,N):(N=y(N,V.children||[]),N.return=O,N)}function W(O,N,V,Y,dt){return N===null||N.tag!==7?(N=Oo(V,O.mode,Y,dt),N.return=O,N):(N=y(N,V),N.return=O,N)}function X(O,N,V){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Vy(""+N,O.mode,V),N.return=O,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case I:return V=lp(N.type,N.key,N.props,null,O.mode,V),V.ref=Tc(O,null,N),V.return=O,V;case j:return N=zy(N,O.mode,V),N.return=O,N;case Z:var Y=N._init;return X(O,Y(N._payload),V)}if(nc(N)||lt(N))return N=Oo(N,O.mode,V,null),N.return=O,N;jf(O,N)}return null}function G(O,N,V,Y){var dt=N!==null?N.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return dt!==null?null:P(O,N,""+V,Y);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case I:return V.key===dt?D(O,N,V,Y):null;case j:return V.key===dt?H(O,N,V,Y):null;case Z:return dt=V._init,G(O,N,dt(V._payload),Y)}if(nc(V)||lt(V))return dt!==null?null:W(O,N,V,Y,null);jf(O,V)}return null}function nt(O,N,V,Y,dt){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return O=O.get(V)||null,P(N,O,""+Y,dt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:return O=O.get(Y.key===null?V:Y.key)||null,D(N,O,Y,dt);case j:return O=O.get(Y.key===null?V:Y.key)||null,H(N,O,Y,dt);case Z:var gt=Y._init;return nt(O,N,V,gt(Y._payload),dt)}if(nc(Y)||lt(Y))return O=O.get(V)||null,W(N,O,Y,dt,null);jf(N,Y)}return null}function ut(O,N,V,Y){for(var dt=null,gt=null,yt=N,bt=N=0,Oe=null;yt!==null&&bt<V.length;bt++){yt.index>bt?(Oe=yt,yt=null):Oe=yt.sibling;var Bt=G(O,yt,V[bt],Y);if(Bt===null){yt===null&&(yt=Oe);break}i&&yt&&Bt.alternate===null&&r(O,yt),N=w(Bt,N,bt),gt===null?dt=Bt:gt.sibling=Bt,gt=Bt,yt=Oe}if(bt===V.length)return h(O,yt),se&&Po(O,bt),dt;if(yt===null){for(;bt<V.length;bt++)yt=X(O,V[bt],Y),yt!==null&&(N=w(yt,N,bt),gt===null?dt=yt:gt.sibling=yt,gt=yt);return se&&Po(O,bt),dt}for(yt=p(O,yt);bt<V.length;bt++)Oe=nt(yt,O,bt,V[bt],Y),Oe!==null&&(i&&Oe.alternate!==null&&yt.delete(Oe.key===null?bt:Oe.key),N=w(Oe,N,bt),gt===null?dt=Oe:gt.sibling=Oe,gt=Oe);return i&&yt.forEach(function(Fr){return r(O,Fr)}),se&&Po(O,bt),dt}function ht(O,N,V,Y){var dt=lt(V);if(typeof dt!="function")throw Error(e(150));if(V=dt.call(V),V==null)throw Error(e(151));for(var gt=dt=null,yt=N,bt=N=0,Oe=null,Bt=V.next();yt!==null&&!Bt.done;bt++,Bt=V.next()){yt.index>bt?(Oe=yt,yt=null):Oe=yt.sibling;var Fr=G(O,yt,Bt.value,Y);if(Fr===null){yt===null&&(yt=Oe);break}i&&yt&&Fr.alternate===null&&r(O,yt),N=w(Fr,N,bt),gt===null?dt=Fr:gt.sibling=Fr,gt=Fr,yt=Oe}if(Bt.done)return h(O,yt),se&&Po(O,bt),dt;if(yt===null){for(;!Bt.done;bt++,Bt=V.next())Bt=X(O,Bt.value,Y),Bt!==null&&(N=w(Bt,N,bt),gt===null?dt=Bt:gt.sibling=Bt,gt=Bt);return se&&Po(O,bt),dt}for(yt=p(O,yt);!Bt.done;bt++,Bt=V.next())Bt=nt(yt,O,bt,Bt.value,Y),Bt!==null&&(i&&Bt.alternate!==null&&yt.delete(Bt.key===null?bt:Bt.key),N=w(Bt,N,bt),gt===null?dt=Bt:gt.sibling=Bt,gt=Bt);return i&&yt.forEach(function(rP){return r(O,rP)}),se&&Po(O,bt),dt}function ve(O,N,V,Y){if(typeof V=="object"&&V!==null&&V.type===B&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case I:t:{for(var dt=V.key,gt=N;gt!==null;){if(gt.key===dt){if(dt=V.type,dt===B){if(gt.tag===7){h(O,gt.sibling),N=y(gt,V.props.children),N.return=O,O=N;break t}}else if(gt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===Z&&v1(dt)===gt.type){h(O,gt.sibling),N=y(gt,V.props),N.ref=Tc(O,gt,V),N.return=O,O=N;break t}h(O,gt);break}else r(O,gt);gt=gt.sibling}V.type===B?(N=Oo(V.props.children,O.mode,Y,V.key),N.return=O,O=N):(Y=lp(V.type,V.key,V.props,null,O.mode,Y),Y.ref=Tc(O,N,V),Y.return=O,O=Y)}return E(O);case j:t:{for(gt=V.key;N!==null;){if(N.key===gt)if(N.tag===4&&N.stateNode.containerInfo===V.containerInfo&&N.stateNode.implementation===V.implementation){h(O,N.sibling),N=y(N,V.children||[]),N.return=O,O=N;break t}else{h(O,N);break}else r(O,N);N=N.sibling}N=zy(V,O.mode,Y),N.return=O,O=N}return E(O);case Z:return gt=V._init,ve(O,N,gt(V._payload),Y)}if(nc(V))return ut(O,N,V,Y);if(lt(V))return ht(O,N,V,Y);jf(O,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,N!==null&&N.tag===6?(h(O,N.sibling),N=y(N,V),N.return=O,O=N):(h(O,N),N=Vy(V,O.mode,Y),N.return=O,O=N),E(O)):h(O,N)}return ve}var Al=w1(!0),A1=w1(!1),Vf=_r(null),zf=null,xl=null,Kg=null;function Yg(){Kg=xl=zf=null}function Qg(i){var r=Vf.current;ee(Vf),i._currentValue=r}function Zg(i,r,h){for(;i!==null;){var p=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),i===h)break;i=i.return}}function Sl(i,r){zf=i,Kg=xl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&r)!==0&&(Pn=!0),i.firstContext=null)}function ci(i){var r=i._currentValue;if(Kg!==i)if(i={context:i,memoizedValue:r,next:null},xl===null){if(zf===null)throw Error(e(308));xl=i,zf.dependencies={lanes:0,firstContext:i}}else xl=xl.next=i;return r}var Mo=null;function Jg(i){Mo===null?Mo=[i]:Mo.push(i)}function x1(i,r,h,p){var y=r.interleaved;return y===null?(h.next=h,Jg(r)):(h.next=y.next,y.next=h),r.interleaved=h,Ms(i,p)}function Ms(i,r){i.lanes|=r;var h=i.alternate;for(h!==null&&(h.lanes|=r),h=i,i=i.return;i!==null;)i.childLanes|=r,h=i.alternate,h!==null&&(h.childLanes|=r),h=i,i=i.return;return h.tag===3?h.stateNode:null}var kr=!1;function ty(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S1(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Rs(i,r){return{eventTime:i,lane:r,tag:0,payload:null,callback:null,next:null}}function Pr(i,r,h){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Vt&2)!==0){var y=p.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),p.pending=r,Ms(i,h)}return y=p.interleaved,y===null?(r.next=r,Jg(p)):(r.next=y.next,y.next=r),p.interleaved=r,Ms(i,h)}function Bf(i,r,h){if(r=r.updateQueue,r!==null&&(r=r.shared,(h&4194240)!==0)){var p=r.lanes;p&=i.pendingLanes,h|=p,r.lanes=h,pg(i,h)}}function b1(i,r){var h=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var y=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var E={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};w===null?y=w=E:w=w.next=E,h=h.next}while(h!==null);w===null?y=w=r:w=w.next=r}else y=w=r;h={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=r:i.next=r,h.lastBaseUpdate=r}function Hf(i,r,h,p){var y=i.updateQueue;kr=!1;var w=y.firstBaseUpdate,E=y.lastBaseUpdate,P=y.shared.pending;if(P!==null){y.shared.pending=null;var D=P,H=D.next;D.next=null,E===null?w=H:E.next=H,E=D;var W=i.alternate;W!==null&&(W=W.updateQueue,P=W.lastBaseUpdate,P!==E&&(P===null?W.firstBaseUpdate=H:P.next=H,W.lastBaseUpdate=D))}if(w!==null){var X=y.baseState;E=0,W=H=D=null,P=w;do{var G=P.lane,nt=P.eventTime;if((p&G)===G){W!==null&&(W=W.next={eventTime:nt,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});t:{var ut=i,ht=P;switch(G=r,nt=h,ht.tag){case 1:if(ut=ht.payload,typeof ut=="function"){X=ut.call(nt,X,G);break t}X=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ht.payload,G=typeof ut=="function"?ut.call(nt,X,G):ut,G==null)break t;X=J({},X,G);break t;case 2:kr=!0}}P.callback!==null&&P.lane!==0&&(i.flags|=64,G=y.effects,G===null?y.effects=[P]:G.push(P))}else nt={eventTime:nt,lane:G,tag:P.tag,payload:P.payload,callback:P.callback,next:null},W===null?(H=W=nt,D=X):W=W.next=nt,E|=G;if(P=P.next,P===null){if(P=y.shared.pending,P===null)break;G=P,P=G.next,G.next=null,y.lastBaseUpdate=G,y.shared.pending=null}}while(!0);if(W===null&&(D=X),y.baseState=D,y.firstBaseUpdate=H,y.lastBaseUpdate=W,r=y.shared.interleaved,r!==null){y=r;do E|=y.lane,y=y.next;while(y!==r)}else w===null&&(y.shared.lanes=0);Do|=E,i.lanes=E,i.memoizedState=X}}function E1(i,r,h){if(i=r.effects,r.effects=null,i!==null)for(r=0;r<i.length;r++){var p=i[r],y=p.callback;if(y!==null){if(p.callback=null,p=h,typeof y!="function")throw Error(e(191,y));y.call(p)}}}var kc={},ts=_r(kc),Pc=_r(kc),Mc=_r(kc);function Ro(i){if(i===kc)throw Error(e(174));return i}function ey(i,r){switch(Zt(Mc,r),Zt(Pc,i),Zt(ts,kc),i=r.nodeType,i){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ng(null,"");break;default:i=i===8?r.parentNode:r,r=i.namespaceURI||null,i=i.tagName,r=ng(r,i)}ee(ts),Zt(ts,r)}function bl(){ee(ts),ee(Pc),ee(Mc)}function _1(i){Ro(Mc.current);var r=Ro(ts.current),h=ng(r,i.type);r!==h&&(Zt(Pc,i),Zt(ts,h))}function ny(i){Pc.current===i&&(ee(ts),ee(Pc))}var le=_r(0);function Uf(i){for(var r=i;r!==null;){if(r.tag===13){var h=r.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var iy=[];function sy(){for(var i=0;i<iy.length;i++)iy[i]._workInProgressVersionPrimary=null;iy.length=0}var $f=R.ReactCurrentDispatcher,ry=R.ReactCurrentBatchConfig,Lo=0,ue=null,Te=null,Ne=null,Gf=!1,Rc=!1,Lc=0,Tk=0;function tn(){throw Error(e(321))}function oy(i,r){if(r===null)return!1;for(var h=0;h<r.length&&h<i.length;h++)if(!ki(i[h],r[h]))return!1;return!0}function ay(i,r,h,p,y,w){if(Lo=w,ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$f.current=i===null||i.memoizedState===null?Rk:Lk,i=h(p,y),Rc){w=0;do{if(Rc=!1,Lc=0,25<=w)throw Error(e(301));w+=1,Ne=Te=null,r.updateQueue=null,$f.current=Dk,i=h(p,y)}while(Rc)}if($f.current=Xf,r=Te!==null&&Te.next!==null,Lo=0,Ne=Te=ue=null,Gf=!1,r)throw Error(e(300));return i}function ly(){var i=Lc!==0;return Lc=0,i}function es(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?ue.memoizedState=Ne=i:Ne=Ne.next=i,Ne}function hi(){if(Te===null){var i=ue.alternate;i=i!==null?i.memoizedState:null}else i=Te.next;var r=Ne===null?ue.memoizedState:Ne.next;if(r!==null)Ne=r,Te=i;else{if(i===null)throw Error(e(310));Te=i,i={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ne===null?ue.memoizedState=Ne=i:Ne=Ne.next=i}return Ne}function Dc(i,r){return typeof r=="function"?r(i):r}function uy(i){var r=hi(),h=r.queue;if(h===null)throw Error(e(311));h.lastRenderedReducer=i;var p=Te,y=p.baseQueue,w=h.pending;if(w!==null){if(y!==null){var E=y.next;y.next=w.next,w.next=E}p.baseQueue=y=w,h.pending=null}if(y!==null){w=y.next,p=p.baseState;var P=E=null,D=null,H=w;do{var W=H.lane;if((Lo&W)===W)D!==null&&(D=D.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),p=H.hasEagerState?H.eagerState:i(p,H.action);else{var X={lane:W,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};D===null?(P=D=X,E=p):D=D.next=X,ue.lanes|=W,Do|=W}H=H.next}while(H!==null&&H!==w);D===null?E=p:D.next=P,ki(p,r.memoizedState)||(Pn=!0),r.memoizedState=p,r.baseState=E,r.baseQueue=D,h.lastRenderedState=p}if(i=h.interleaved,i!==null){y=i;do w=y.lane,ue.lanes|=w,Do|=w,y=y.next;while(y!==i)}else y===null&&(h.lanes=0);return[r.memoizedState,h.dispatch]}function cy(i){var r=hi(),h=r.queue;if(h===null)throw Error(e(311));h.lastRenderedReducer=i;var p=h.dispatch,y=h.pending,w=r.memoizedState;if(y!==null){h.pending=null;var E=y=y.next;do w=i(w,E.action),E=E.next;while(E!==y);ki(w,r.memoizedState)||(Pn=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),h.lastRenderedState=w}return[w,p]}function C1(){}function T1(i,r){var h=ue,p=hi(),y=r(),w=!ki(p.memoizedState,y);if(w&&(p.memoizedState=y,Pn=!0),p=p.queue,hy(M1.bind(null,h,p,i),[i]),p.getSnapshot!==r||w||Ne!==null&&Ne.memoizedState.tag&1){if(h.flags|=2048,Ic(9,P1.bind(null,h,p,y,r),void 0,null),Fe===null)throw Error(e(349));(Lo&30)!==0||k1(h,r,y)}return y}function k1(i,r,h){i.flags|=16384,i={getSnapshot:r,value:h},r=ue.updateQueue,r===null?(r={lastEffect:null,stores:null},ue.updateQueue=r,r.stores=[i]):(h=r.stores,h===null?r.stores=[i]:h.push(i))}function P1(i,r,h,p){r.value=h,r.getSnapshot=p,R1(r)&&L1(i)}function M1(i,r,h){return h(function(){R1(r)&&L1(i)})}function R1(i){var r=i.getSnapshot;i=i.value;try{var h=r();return!ki(i,h)}catch{return!0}}function L1(i){var r=Ms(i,1);r!==null&&Di(r,i,1,-1)}function D1(i){var r=es();return typeof i=="function"&&(i=i()),r.memoizedState=r.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dc,lastRenderedState:i},r.queue=i,i=i.dispatch=Mk.bind(null,ue,i),[r.memoizedState,i]}function Ic(i,r,h,p){return i={tag:i,create:r,destroy:h,deps:p,next:null},r=ue.updateQueue,r===null?(r={lastEffect:null,stores:null},ue.updateQueue=r,r.lastEffect=i.next=i):(h=r.lastEffect,h===null?r.lastEffect=i.next=i:(p=h.next,h.next=i,i.next=p,r.lastEffect=i)),i}function I1(){return hi().memoizedState}function Wf(i,r,h,p){var y=es();ue.flags|=i,y.memoizedState=Ic(1|r,h,void 0,p===void 0?null:p)}function qf(i,r,h,p){var y=hi();p=p===void 0?null:p;var w=void 0;if(Te!==null){var E=Te.memoizedState;if(w=E.destroy,p!==null&&oy(p,E.deps)){y.memoizedState=Ic(r,h,w,p);return}}ue.flags|=i,y.memoizedState=Ic(1|r,h,w,p)}function N1(i,r){return Wf(8390656,8,i,r)}function hy(i,r){return qf(2048,8,i,r)}function F1(i,r){return qf(4,2,i,r)}function O1(i,r){return qf(4,4,i,r)}function j1(i,r){if(typeof r=="function")return i=i(),r(i),function(){r(null)};if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function V1(i,r,h){return h=h!=null?h.concat([i]):null,qf(4,4,j1.bind(null,r,i),h)}function dy(){}function z1(i,r){var h=hi();r=r===void 0?null:r;var p=h.memoizedState;return p!==null&&r!==null&&oy(r,p[1])?p[0]:(h.memoizedState=[i,r],i)}function B1(i,r){var h=hi();r=r===void 0?null:r;var p=h.memoizedState;return p!==null&&r!==null&&oy(r,p[1])?p[0]:(i=i(),h.memoizedState=[i,r],i)}function H1(i,r,h){return(Lo&21)===0?(i.baseState&&(i.baseState=!1,Pn=!0),i.memoizedState=h):(ki(h,r)||(h=vA(),ue.lanes|=h,Do|=h,i.baseState=!0),r)}function kk(i,r){var h=$t;$t=h!==0&&4>h?h:4,i(!0);var p=ry.transition;ry.transition={};try{i(!1),r()}finally{$t=h,ry.transition=p}}function U1(){return hi().memoizedState}function Pk(i,r,h){var p=Dr(i);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},$1(i))G1(r,h);else if(h=x1(i,r,h,p),h!==null){var y=yn();Di(h,i,p,y),W1(h,r,p)}}function Mk(i,r,h){var p=Dr(i),y={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if($1(i))G1(r,y);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var E=r.lastRenderedState,P=w(E,h);if(y.hasEagerState=!0,y.eagerState=P,ki(P,E)){var D=r.interleaved;D===null?(y.next=y,Jg(r)):(y.next=D.next,D.next=y),r.interleaved=y;return}}catch{}finally{}h=x1(i,r,y,p),h!==null&&(y=yn(),Di(h,i,p,y),W1(h,r,p))}}function $1(i){var r=i.alternate;return i===ue||r!==null&&r===ue}function G1(i,r){Rc=Gf=!0;var h=i.pending;h===null?r.next=r:(r.next=h.next,h.next=r),i.pending=r}function W1(i,r,h){if((h&4194240)!==0){var p=r.lanes;p&=i.pendingLanes,h|=p,r.lanes=h,pg(i,h)}}var Xf={readContext:ci,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},Rk={readContext:ci,useCallback:function(i,r){return es().memoizedState=[i,r===void 0?null:r],i},useContext:ci,useEffect:N1,useImperativeHandle:function(i,r,h){return h=h!=null?h.concat([i]):null,Wf(4194308,4,j1.bind(null,r,i),h)},useLayoutEffect:function(i,r){return Wf(4194308,4,i,r)},useInsertionEffect:function(i,r){return Wf(4,2,i,r)},useMemo:function(i,r){var h=es();return r=r===void 0?null:r,i=i(),h.memoizedState=[i,r],i},useReducer:function(i,r,h){var p=es();return r=h!==void 0?h(r):r,p.memoizedState=p.baseState=r,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:r},p.queue=i,i=i.dispatch=Pk.bind(null,ue,i),[p.memoizedState,i]},useRef:function(i){var r=es();return i={current:i},r.memoizedState=i},useState:D1,useDebugValue:dy,useDeferredValue:function(i){return es().memoizedState=i},useTransition:function(){var i=D1(!1),r=i[0];return i=kk.bind(null,i[1]),es().memoizedState=i,[r,i]},useMutableSource:function(){},useSyncExternalStore:function(i,r,h){var p=ue,y=es();if(se){if(h===void 0)throw Error(e(407));h=h()}else{if(h=r(),Fe===null)throw Error(e(349));(Lo&30)!==0||k1(p,r,h)}y.memoizedState=h;var w={value:h,getSnapshot:r};return y.queue=w,N1(M1.bind(null,p,w,i),[i]),p.flags|=2048,Ic(9,P1.bind(null,p,w,h,r),void 0,null),h},useId:function(){var i=es(),r=Fe.identifierPrefix;if(se){var h=Ps,p=ks;h=(p&~(1<<32-Ti(p)-1)).toString(32)+h,r=":"+r+"R"+h,h=Lc++,0<h&&(r+="H"+h.toString(32)),r+=":"}else h=Tk++,r=":"+r+"r"+h.toString(32)+":";return i.memoizedState=r},unstable_isNewReconciler:!1},Lk={readContext:ci,useCallback:z1,useContext:ci,useEffect:hy,useImperativeHandle:V1,useInsertionEffect:F1,useLayoutEffect:O1,useMemo:B1,useReducer:uy,useRef:I1,useState:function(){return uy(Dc)},useDebugValue:dy,useDeferredValue:function(i){var r=hi();return H1(r,Te.memoizedState,i)},useTransition:function(){var i=uy(Dc)[0],r=hi().memoizedState;return[i,r]},useMutableSource:C1,useSyncExternalStore:T1,useId:U1,unstable_isNewReconciler:!1},Dk={readContext:ci,useCallback:z1,useContext:ci,useEffect:hy,useImperativeHandle:V1,useInsertionEffect:F1,useLayoutEffect:O1,useMemo:B1,useReducer:cy,useRef:I1,useState:function(){return cy(Dc)},useDebugValue:dy,useDeferredValue:function(i){var r=hi();return Te===null?r.memoizedState=i:H1(r,Te.memoizedState,i)},useTransition:function(){var i=cy(Dc)[0],r=hi().memoizedState;return[i,r]},useMutableSource:C1,useSyncExternalStore:T1,useId:U1,unstable_isNewReconciler:!1};function Mi(i,r){if(i&&i.defaultProps){r=J({},r),i=i.defaultProps;for(var h in i)r[h]===void 0&&(r[h]=i[h]);return r}return r}function fy(i,r,h,p){r=i.memoizedState,h=h(p,r),h=h==null?r:J({},r,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var Kf={isMounted:function(i){return(i=i._reactInternals)?_o(i)===i:!1},enqueueSetState:function(i,r,h){i=i._reactInternals;var p=yn(),y=Dr(i),w=Rs(p,y);w.payload=r,h!=null&&(w.callback=h),r=Pr(i,w,y),r!==null&&(Di(r,i,y,p),Bf(r,i,y))},enqueueReplaceState:function(i,r,h){i=i._reactInternals;var p=yn(),y=Dr(i),w=Rs(p,y);w.tag=1,w.payload=r,h!=null&&(w.callback=h),r=Pr(i,w,y),r!==null&&(Di(r,i,y,p),Bf(r,i,y))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var h=yn(),p=Dr(i),y=Rs(h,p);y.tag=2,r!=null&&(y.callback=r),r=Pr(i,y,p),r!==null&&(Di(r,i,p,h),Bf(r,i,p))}};function q1(i,r,h,p,y,w,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,E):r.prototype&&r.prototype.isPureReactComponent?!Ac(h,p)||!Ac(y,w):!0}function X1(i,r,h){var p=!1,y=Cr,w=r.contextType;return typeof w=="object"&&w!==null?w=ci(w):(y=kn(r)?To:Je.current,p=r.contextTypes,w=(p=p!=null)?gl(i,y):Cr),r=new r(h,w),i.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Kf,i.stateNode=r,r._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=w),r}function K1(i,r,h,p){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(h,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(h,p),r.state!==i&&Kf.enqueueReplaceState(r,r.state,null)}function py(i,r,h,p){var y=i.stateNode;y.props=h,y.state=i.memoizedState,y.refs={},ty(i);var w=r.contextType;typeof w=="object"&&w!==null?y.context=ci(w):(w=kn(r)?To:Je.current,y.context=gl(i,w)),y.state=i.memoizedState,w=r.getDerivedStateFromProps,typeof w=="function"&&(fy(i,r,w,h),y.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(r=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),r!==y.state&&Kf.enqueueReplaceState(y,y.state,null),Hf(i,h,y,p),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function El(i,r){try{var h="",p=r;do h+=Lt(p),p=p.return;while(p);var y=h}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:r,stack:y,digest:null}}function my(i,r,h){return{value:i,source:null,stack:h??null,digest:r??null}}function gy(i,r){try{console.error(r.value)}catch(h){setTimeout(function(){throw h})}}var Ik=typeof WeakMap=="function"?WeakMap:Map;function Y1(i,r,h){h=Rs(-1,h),h.tag=3,h.payload={element:null};var p=r.value;return h.callback=function(){np||(np=!0,Ry=p),gy(i,r)},h}function Q1(i,r,h){h=Rs(-1,h),h.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var y=r.value;h.payload=function(){return p(y)},h.callback=function(){gy(i,r)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(h.callback=function(){gy(i,r),typeof p!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var E=r.stack;this.componentDidCatch(r.value,{componentStack:E!==null?E:""})}),h}function Z1(i,r,h){var p=i.pingCache;if(p===null){p=i.pingCache=new Ik;var y=new Set;p.set(r,y)}else y=p.get(r),y===void 0&&(y=new Set,p.set(r,y));y.has(h)||(y.add(h),i=Xk.bind(null,i,r,h),r.then(i,i))}function J1(i){do{var r;if((r=i.tag===13)&&(r=i.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return i;i=i.return}while(i!==null);return null}function tx(i,r,h,p,y){return(i.mode&1)===0?(i===r?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(r=Rs(-1,1),r.tag=2,Pr(h,r,1))),h.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var Nk=R.ReactCurrentOwner,Pn=!1;function gn(i,r,h,p){r.child=i===null?A1(r,null,h,p):Al(r,i.child,h,p)}function ex(i,r,h,p,y){h=h.render;var w=r.ref;return Sl(r,y),p=ay(i,r,h,p,w,y),h=ly(),i!==null&&!Pn?(r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~y,Ls(i,r,y)):(se&&h&&$g(r),r.flags|=1,gn(i,r,p,y),r.child)}function nx(i,r,h,p,y){if(i===null){var w=h.type;return typeof w=="function"&&!jy(w)&&w.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(r.tag=15,r.type=w,ix(i,r,w,p,y)):(i=lp(h.type,null,p,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(w=i.child,(i.lanes&y)===0){var E=w.memoizedProps;if(h=h.compare,h=h!==null?h:Ac,h(E,p)&&i.ref===r.ref)return Ls(i,r,y)}return r.flags|=1,i=Nr(w,p),i.ref=r.ref,i.return=r,r.child=i}function ix(i,r,h,p,y){if(i!==null){var w=i.memoizedProps;if(Ac(w,p)&&i.ref===r.ref)if(Pn=!1,r.pendingProps=p=w,(i.lanes&y)!==0)(i.flags&131072)!==0&&(Pn=!0);else return r.lanes=i.lanes,Ls(i,r,y)}return yy(i,r,h,p,y)}function sx(i,r,h){var p=r.pendingProps,y=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(Cl,Un),Un|=h;else{if((h&1073741824)===0)return i=w!==null?w.baseLanes|h:h,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:i,cachePool:null,transitions:null},r.updateQueue=null,Zt(Cl,Un),Un|=i,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:h,Zt(Cl,Un),Un|=p}else w!==null?(p=w.baseLanes|h,r.memoizedState=null):p=h,Zt(Cl,Un),Un|=p;return gn(i,r,y,h),r.child}function rx(i,r){var h=r.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(r.flags|=512,r.flags|=2097152)}function yy(i,r,h,p,y){var w=kn(h)?To:Je.current;return w=gl(r,w),Sl(r,y),h=ay(i,r,h,p,w,y),p=ly(),i!==null&&!Pn?(r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~y,Ls(i,r,y)):(se&&p&&$g(r),r.flags|=1,gn(i,r,h,y),r.child)}function ox(i,r,h,p,y){if(kn(h)){var w=!0;Df(r)}else w=!1;if(Sl(r,y),r.stateNode===null)Qf(i,r),X1(r,h,p),py(r,h,p,y),p=!0;else if(i===null){var E=r.stateNode,P=r.memoizedProps;E.props=P;var D=E.context,H=h.contextType;typeof H=="object"&&H!==null?H=ci(H):(H=kn(h)?To:Je.current,H=gl(r,H));var W=h.getDerivedStateFromProps,X=typeof W=="function"||typeof E.getSnapshotBeforeUpdate=="function";X||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==p||D!==H)&&K1(r,E,p,H),kr=!1;var G=r.memoizedState;E.state=G,Hf(r,p,E,y),D=r.memoizedState,P!==p||G!==D||Tn.current||kr?(typeof W=="function"&&(fy(r,h,W,p),D=r.memoizedState),(P=kr||q1(r,h,P,p,G,D,H))?(X||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(r.flags|=4194308)):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=D),E.props=p,E.state=D,E.context=H,p=P):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{E=r.stateNode,S1(i,r),P=r.memoizedProps,H=r.type===r.elementType?P:Mi(r.type,P),E.props=H,X=r.pendingProps,G=E.context,D=h.contextType,typeof D=="object"&&D!==null?D=ci(D):(D=kn(h)?To:Je.current,D=gl(r,D));var nt=h.getDerivedStateFromProps;(W=typeof nt=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==X||G!==D)&&K1(r,E,p,D),kr=!1,G=r.memoizedState,E.state=G,Hf(r,p,E,y);var ut=r.memoizedState;P!==X||G!==ut||Tn.current||kr?(typeof nt=="function"&&(fy(r,h,nt,p),ut=r.memoizedState),(H=kr||q1(r,h,H,p,G,ut,D)||!1)?(W||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,ut,D),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,ut,D)),typeof E.componentDidUpdate=="function"&&(r.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof E.componentDidUpdate!="function"||P===i.memoizedProps&&G===i.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&G===i.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=ut),E.props=p,E.state=ut,E.context=D,p=H):(typeof E.componentDidUpdate!="function"||P===i.memoizedProps&&G===i.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&G===i.memoizedState||(r.flags|=1024),p=!1)}return vy(i,r,h,p,w,y)}function vy(i,r,h,p,y,w){rx(i,r);var E=(r.flags&128)!==0;if(!p&&!E)return y&&h1(r,h,!1),Ls(i,r,w);p=r.stateNode,Nk.current=r;var P=E&&typeof h.getDerivedStateFromError!="function"?null:p.render();return r.flags|=1,i!==null&&E?(r.child=Al(r,i.child,null,w),r.child=Al(r,null,P,w)):gn(i,r,P,w),r.memoizedState=p.state,y&&h1(r,h,!0),r.child}function ax(i){var r=i.stateNode;r.pendingContext?u1(i,r.pendingContext,r.pendingContext!==r.context):r.context&&u1(i,r.context,!1),ey(i,r.containerInfo)}function lx(i,r,h,p,y){return wl(),Xg(y),r.flags|=256,gn(i,r,h,p),r.child}var wy={dehydrated:null,treeContext:null,retryLane:0};function Ay(i){return{baseLanes:i,cachePool:null,transitions:null}}function ux(i,r,h){var p=r.pendingProps,y=le.current,w=!1,E=(r.flags&128)!==0,P;if((P=E)||(P=i!==null&&i.memoizedState===null?!1:(y&2)!==0),P?(w=!0,r.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),Zt(le,y&1),i===null)return qg(r),i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((r.mode&1)===0?r.lanes=1:i.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(E=p.children,i=p.fallback,w?(p=r.mode,w=r.child,E={mode:"hidden",children:E},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=E):w=up(E,p,0,null),i=Oo(i,p,h,null),w.return=r,i.return=r,w.sibling=i,r.child=w,r.child.memoizedState=Ay(h),r.memoizedState=wy,i):xy(r,E));if(y=i.memoizedState,y!==null&&(P=y.dehydrated,P!==null))return Fk(i,r,E,p,P,y,h);if(w){w=p.fallback,E=r.mode,y=i.child,P=y.sibling;var D={mode:"hidden",children:p.children};return(E&1)===0&&r.child!==y?(p=r.child,p.childLanes=0,p.pendingProps=D,r.deletions=null):(p=Nr(y,D),p.subtreeFlags=y.subtreeFlags&14680064),P!==null?w=Nr(P,w):(w=Oo(w,E,h,null),w.flags|=2),w.return=r,p.return=r,p.sibling=w,r.child=p,p=w,w=r.child,E=i.child.memoizedState,E=E===null?Ay(h):{baseLanes:E.baseLanes|h,cachePool:null,transitions:E.transitions},w.memoizedState=E,w.childLanes=i.childLanes&~h,r.memoizedState=wy,p}return w=i.child,i=w.sibling,p=Nr(w,{mode:"visible",children:p.children}),(r.mode&1)===0&&(p.lanes=h),p.return=r,p.sibling=null,i!==null&&(h=r.deletions,h===null?(r.deletions=[i],r.flags|=16):h.push(i)),r.child=p,r.memoizedState=null,p}function xy(i,r){return r=up({mode:"visible",children:r},i.mode,0,null),r.return=i,i.child=r}function Yf(i,r,h,p){return p!==null&&Xg(p),Al(r,i.child,null,h),i=xy(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Fk(i,r,h,p,y,w,E){if(h)return r.flags&256?(r.flags&=-257,p=my(Error(e(422))),Yf(i,r,E,p)):r.memoizedState!==null?(r.child=i.child,r.flags|=128,null):(w=p.fallback,y=r.mode,p=up({mode:"visible",children:p.children},y,0,null),w=Oo(w,y,E,null),w.flags|=2,p.return=r,w.return=r,p.sibling=w,r.child=p,(r.mode&1)!==0&&Al(r,i.child,null,E),r.child.memoizedState=Ay(E),r.memoizedState=wy,w);if((r.mode&1)===0)return Yf(i,r,E,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var P=p.dgst;return p=P,w=Error(e(419)),p=my(w,p,void 0),Yf(i,r,E,p)}if(P=(E&i.childLanes)!==0,Pn||P){if(p=Fe,p!==null){switch(E&-E){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|E))!==0?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,Ms(i,y),Di(p,i,y,-1))}return Oy(),p=my(Error(e(421))),Yf(i,r,E,p)}return y.data==="$?"?(r.flags|=128,r.child=i.child,r=Kk.bind(null,i),y._reactRetry=r,null):(i=w.treeContext,Hn=Er(y.nextSibling),Bn=r,se=!0,Pi=null,i!==null&&(li[ui++]=ks,li[ui++]=Ps,li[ui++]=ko,ks=i.id,Ps=i.overflow,ko=r),r=xy(r,p.children),r.flags|=4096,r)}function cx(i,r,h){i.lanes|=r;var p=i.alternate;p!==null&&(p.lanes|=r),Zg(i.return,r,h)}function Sy(i,r,h,p,y){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:y}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=h,w.tailMode=y)}function hx(i,r,h){var p=r.pendingProps,y=p.revealOrder,w=p.tail;if(gn(i,r,p.children,h),p=le.current,(p&2)!==0)p=p&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&cx(i,h,r);else if(i.tag===19)cx(i,h,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Zt(le,p),(r.mode&1)===0)r.memoizedState=null;else switch(y){case"forwards":for(h=r.child,y=null;h!==null;)i=h.alternate,i!==null&&Uf(i)===null&&(y=h),h=h.sibling;h=y,h===null?(y=r.child,r.child=null):(y=h.sibling,h.sibling=null),Sy(r,!1,y,h,w);break;case"backwards":for(h=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&Uf(i)===null){r.child=y;break}i=y.sibling,y.sibling=h,h=y,y=i}Sy(r,!0,h,null,w);break;case"together":Sy(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Qf(i,r){(r.mode&1)===0&&i!==null&&(i.alternate=null,r.alternate=null,r.flags|=2)}function Ls(i,r,h){if(i!==null&&(r.dependencies=i.dependencies),Do|=r.lanes,(h&r.childLanes)===0)return null;if(i!==null&&r.child!==i.child)throw Error(e(153));if(r.child!==null){for(i=r.child,h=Nr(i,i.pendingProps),r.child=h,h.return=r;i.sibling!==null;)i=i.sibling,h=h.sibling=Nr(i,i.pendingProps),h.return=r;h.sibling=null}return r.child}function Ok(i,r,h){switch(r.tag){case 3:ax(r),wl();break;case 5:_1(r);break;case 1:kn(r.type)&&Df(r);break;case 4:ey(r,r.stateNode.containerInfo);break;case 10:var p=r.type._context,y=r.memoizedProps.value;Zt(Vf,p._currentValue),p._currentValue=y;break;case 13:if(p=r.memoizedState,p!==null)return p.dehydrated!==null?(Zt(le,le.current&1),r.flags|=128,null):(h&r.child.childLanes)!==0?ux(i,r,h):(Zt(le,le.current&1),i=Ls(i,r,h),i!==null?i.sibling:null);Zt(le,le.current&1);break;case 19:if(p=(h&r.childLanes)!==0,(i.flags&128)!==0){if(p)return hx(i,r,h);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Zt(le,le.current),p)break;return null;case 22:case 23:return r.lanes=0,sx(i,r,h)}return Ls(i,r,h)}var dx,by,fx,px;dx=function(i,r){for(var h=r.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break;for(;h.sibling===null;){if(h.return===null||h.return===r)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},by=function(){},fx=function(i,r,h,p){var y=i.memoizedProps;if(y!==p){i=r.stateNode,Ro(ts.current);var w=null;switch(h){case"input":y=Zm(i,y),p=Zm(i,p),w=[];break;case"select":y=J({},y,{value:void 0}),p=J({},p,{value:void 0}),w=[];break;case"textarea":y=eg(i,y),p=eg(i,p),w=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Mf)}ig(h,p);var E;h=null;for(H in y)if(!p.hasOwnProperty(H)&&y.hasOwnProperty(H)&&y[H]!=null)if(H==="style"){var P=y[H];for(E in P)P.hasOwnProperty(E)&&(h||(h={}),h[E]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(s.hasOwnProperty(H)?w||(w=[]):(w=w||[]).push(H,null));for(H in p){var D=p[H];if(P=y!=null?y[H]:void 0,p.hasOwnProperty(H)&&D!==P&&(D!=null||P!=null))if(H==="style")if(P){for(E in P)!P.hasOwnProperty(E)||D&&D.hasOwnProperty(E)||(h||(h={}),h[E]="");for(E in D)D.hasOwnProperty(E)&&P[E]!==D[E]&&(h||(h={}),h[E]=D[E])}else h||(w||(w=[]),w.push(H,h)),h=D;else H==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,P=P?P.__html:void 0,D!=null&&P!==D&&(w=w||[]).push(H,D)):H==="children"?typeof D!="string"&&typeof D!="number"||(w=w||[]).push(H,""+D):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(s.hasOwnProperty(H)?(D!=null&&H==="onScroll"&&te("scroll",i),w||P===D||(w=[])):(w=w||[]).push(H,D))}h&&(w=w||[]).push("style",h);var H=w;(r.updateQueue=H)&&(r.flags|=4)}},px=function(i,r,h,p){h!==p&&(r.flags|=4)};function Nc(i,r){if(!se)switch(i.tailMode){case"hidden":r=i.tail;for(var h=null;r!==null;)r.alternate!==null&&(h=r),r=r.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function en(i){var r=i.alternate!==null&&i.alternate.child===i.child,h=0,p=0;if(r)for(var y=i.child;y!==null;)h|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)h|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=h,r}function jk(i,r,h){var p=r.pendingProps;switch(Gg(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(r),null;case 1:return kn(r.type)&&Lf(),en(r),null;case 3:return p=r.stateNode,bl(),ee(Tn),ee(Je),sy(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(Of(r)?r.flags|=4:i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Pi!==null&&(Iy(Pi),Pi=null))),by(i,r),en(r),null;case 5:ny(r);var y=Ro(Mc.current);if(h=r.type,i!==null&&r.stateNode!=null)fx(i,r,h,p,y),i.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!p){if(r.stateNode===null)throw Error(e(166));return en(r),null}if(i=Ro(ts.current),Of(r)){p=r.stateNode,h=r.type;var w=r.memoizedProps;switch(p[Ji]=r,p[_c]=w,i=(r.mode&1)!==0,h){case"dialog":te("cancel",p),te("close",p);break;case"iframe":case"object":case"embed":te("load",p);break;case"video":case"audio":for(y=0;y<Sc.length;y++)te(Sc[y],p);break;case"source":te("error",p);break;case"img":case"image":case"link":te("error",p),te("load",p);break;case"details":te("toggle",p);break;case"input":Xw(p,w),te("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},te("invalid",p);break;case"textarea":Qw(p,w),te("invalid",p)}ig(h,w),y=null;for(var E in w)if(w.hasOwnProperty(E)){var P=w[E];E==="children"?typeof P=="string"?p.textContent!==P&&(w.suppressHydrationWarning!==!0&&Pf(p.textContent,P,i),y=["children",P]):typeof P=="number"&&p.textContent!==""+P&&(w.suppressHydrationWarning!==!0&&Pf(p.textContent,P,i),y=["children",""+P]):s.hasOwnProperty(E)&&P!=null&&E==="onScroll"&&te("scroll",p)}switch(h){case"input":of(p),Yw(p,w,!0);break;case"textarea":of(p),Jw(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=Mf)}p=y,r.updateQueue=p,p!==null&&(r.flags|=4)}else{E=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=tA(h)),i==="http://www.w3.org/1999/xhtml"?h==="script"?(i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=E.createElement(h,{is:p.is}):(i=E.createElement(h),h==="select"&&(E=i,p.multiple?E.multiple=!0:p.size&&(E.size=p.size))):i=E.createElementNS(i,h),i[Ji]=r,i[_c]=p,dx(i,r,!1,!1),r.stateNode=i;t:{switch(E=sg(h,p),h){case"dialog":te("cancel",i),te("close",i),y=p;break;case"iframe":case"object":case"embed":te("load",i),y=p;break;case"video":case"audio":for(y=0;y<Sc.length;y++)te(Sc[y],i);y=p;break;case"source":te("error",i),y=p;break;case"img":case"image":case"link":te("error",i),te("load",i),y=p;break;case"details":te("toggle",i),y=p;break;case"input":Xw(i,p),y=Zm(i,p),te("invalid",i);break;case"option":y=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},y=J({},p,{value:void 0}),te("invalid",i);break;case"textarea":Qw(i,p),y=eg(i,p),te("invalid",i);break;default:y=p}ig(h,y),P=y;for(w in P)if(P.hasOwnProperty(w)){var D=P[w];w==="style"?iA(i,D):w==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&eA(i,D)):w==="children"?typeof D=="string"?(h!=="textarea"||D!=="")&&ic(i,D):typeof D=="number"&&ic(i,""+D):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?D!=null&&w==="onScroll"&&te("scroll",i):D!=null&&L(i,w,D,E))}switch(h){case"input":of(i),Yw(i,p,!1);break;case"textarea":of(i),Jw(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Ot(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?sl(i,!!p.multiple,w,!1):p.defaultValue!=null&&sl(i,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=Mf)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break t;case"img":p=!0;break t;default:p=!1}}p&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return en(r),null;case 6:if(i&&r.stateNode!=null)px(i,r,i.memoizedProps,p);else{if(typeof p!="string"&&r.stateNode===null)throw Error(e(166));if(h=Ro(Mc.current),Ro(ts.current),Of(r)){if(p=r.stateNode,h=r.memoizedProps,p[Ji]=r,(w=p.nodeValue!==h)&&(i=Bn,i!==null))switch(i.tag){case 3:Pf(p.nodeValue,h,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Pf(p.nodeValue,h,(i.mode&1)!==0)}w&&(r.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[Ji]=r,r.stateNode=p}return en(r),null;case 13:if(ee(le),p=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(se&&Hn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)y1(),wl(),r.flags|=98560,w=!1;else if(w=Of(r),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(e(318));if(w=r.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(e(317));w[Ji]=r}else wl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;en(r),w=!1}else Pi!==null&&(Iy(Pi),Pi=null),w=!0;if(!w)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=h,r):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(r.child.flags|=8192,(r.mode&1)!==0&&(i===null||(le.current&1)!==0?ke===0&&(ke=3):Oy())),r.updateQueue!==null&&(r.flags|=4),en(r),null);case 4:return bl(),by(i,r),i===null&&bc(r.stateNode.containerInfo),en(r),null;case 10:return Qg(r.type._context),en(r),null;case 17:return kn(r.type)&&Lf(),en(r),null;case 19:if(ee(le),w=r.memoizedState,w===null)return en(r),null;if(p=(r.flags&128)!==0,E=w.rendering,E===null)if(p)Nc(w,!1);else{if(ke!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(E=Uf(i),E!==null){for(r.flags|=128,Nc(w,!1),p=E.updateQueue,p!==null&&(r.updateQueue=p,r.flags|=4),r.subtreeFlags=0,p=h,h=r.child;h!==null;)w=h,i=p,w.flags&=14680066,E=w.alternate,E===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=E.childLanes,w.lanes=E.lanes,w.child=E.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=E.memoizedProps,w.memoizedState=E.memoizedState,w.updateQueue=E.updateQueue,w.type=E.type,i=E.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),h=h.sibling;return Zt(le,le.current&1|2),r.child}i=i.sibling}w.tail!==null&&ye()>Tl&&(r.flags|=128,p=!0,Nc(w,!1),r.lanes=4194304)}else{if(!p)if(i=Uf(E),i!==null){if(r.flags|=128,p=!0,h=i.updateQueue,h!==null&&(r.updateQueue=h,r.flags|=4),Nc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!E.alternate&&!se)return en(r),null}else 2*ye()-w.renderingStartTime>Tl&&h!==1073741824&&(r.flags|=128,p=!0,Nc(w,!1),r.lanes=4194304);w.isBackwards?(E.sibling=r.child,r.child=E):(h=w.last,h!==null?h.sibling=E:r.child=E,w.last=E)}return w.tail!==null?(r=w.tail,w.rendering=r,w.tail=r.sibling,w.renderingStartTime=ye(),r.sibling=null,h=le.current,Zt(le,p?h&1|2:h&1),r):(en(r),null);case 22:case 23:return Fy(),p=r.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(r.flags|=8192),p&&(r.mode&1)!==0?(Un&1073741824)!==0&&(en(r),r.subtreeFlags&6&&(r.flags|=8192)):en(r),null;case 24:return null;case 25:return null}throw Error(e(156,r.tag))}function Vk(i,r){switch(Gg(r),r.tag){case 1:return kn(r.type)&&Lf(),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return bl(),ee(Tn),ee(Je),sy(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 5:return ny(r),null;case 13:if(ee(le),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(e(340));wl()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ee(le),null;case 4:return bl(),null;case 10:return Qg(r.type._context),null;case 22:case 23:return Fy(),null;case 24:return null;default:return null}}var Zf=!1,nn=!1,zk=typeof WeakSet=="function"?WeakSet:Set,st=null;function _l(i,r){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){pe(i,r,p)}else h.current=null}function Ey(i,r,h){try{h()}catch(p){pe(i,r,p)}}var mx=!1;function Bk(i,r){if(Fg=vf,i=qA(),kg(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else t:{h=(h=i.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{h.nodeType,w.nodeType}catch{h=null;break t}var E=0,P=-1,D=-1,H=0,W=0,X=i,G=null;e:for(;;){for(var nt;X!==h||y!==0&&X.nodeType!==3||(P=E+y),X!==w||p!==0&&X.nodeType!==3||(D=E+p),X.nodeType===3&&(E+=X.nodeValue.length),(nt=X.firstChild)!==null;)G=X,X=nt;for(;;){if(X===i)break e;if(G===h&&++H===y&&(P=E),G===w&&++W===p&&(D=E),(nt=X.nextSibling)!==null)break;X=G,G=X.parentNode}X=nt}h=P===-1||D===-1?null:{start:P,end:D}}else h=null}h=h||{start:0,end:0}}else h=null;for(Og={focusedElem:i,selectionRange:h},vf=!1,st=r;st!==null;)if(r=st,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,st=i;else for(;st!==null;){r=st;try{var ut=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var ht=ut.memoizedProps,ve=ut.memoizedState,O=r.stateNode,N=O.getSnapshotBeforeUpdate(r.elementType===r.type?ht:Mi(r.type,ht),ve);O.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var V=r.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(Y){pe(r,r.return,Y)}if(i=r.sibling,i!==null){i.return=r.return,st=i;break}st=r.return}return ut=mx,mx=!1,ut}function Fc(i,r,h){var p=r.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&i)===i){var w=y.destroy;y.destroy=void 0,w!==void 0&&Ey(r,h,w)}y=y.next}while(y!==p)}}function Jf(i,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var h=r=r.next;do{if((h.tag&i)===i){var p=h.create;h.destroy=p()}h=h.next}while(h!==r)}}function _y(i){var r=i.ref;if(r!==null){var h=i.stateNode;switch(i.tag){case 5:i=h;break;default:i=h}typeof r=="function"?r(i):r.current=i}}function gx(i){var r=i.alternate;r!==null&&(i.alternate=null,gx(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&(delete r[Ji],delete r[_c],delete r[Bg],delete r[bk],delete r[Ek])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function yx(i){return i.tag===5||i.tag===3||i.tag===4}function vx(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||yx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Cy(i,r,h){var p=i.tag;if(p===5||p===6)i=i.stateNode,r?h.nodeType===8?h.parentNode.insertBefore(i,r):h.insertBefore(i,r):(h.nodeType===8?(r=h.parentNode,r.insertBefore(i,h)):(r=h,r.appendChild(i)),h=h._reactRootContainer,h!=null||r.onclick!==null||(r.onclick=Mf));else if(p!==4&&(i=i.child,i!==null))for(Cy(i,r,h),i=i.sibling;i!==null;)Cy(i,r,h),i=i.sibling}function Ty(i,r,h){var p=i.tag;if(p===5||p===6)i=i.stateNode,r?h.insertBefore(i,r):h.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Ty(i,r,h),i=i.sibling;i!==null;)Ty(i,r,h),i=i.sibling}var $e=null,Ri=!1;function Mr(i,r,h){for(h=h.child;h!==null;)wx(i,r,h),h=h.sibling}function wx(i,r,h){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(df,h)}catch{}switch(h.tag){case 5:nn||_l(h,r);case 6:var p=$e,y=Ri;$e=null,Mr(i,r,h),$e=p,Ri=y,$e!==null&&(Ri?(i=$e,h=h.stateNode,i.nodeType===8?i.parentNode.removeChild(h):i.removeChild(h)):$e.removeChild(h.stateNode));break;case 18:$e!==null&&(Ri?(i=$e,h=h.stateNode,i.nodeType===8?zg(i.parentNode,h):i.nodeType===1&&zg(i,h),pc(i)):zg($e,h.stateNode));break;case 4:p=$e,y=Ri,$e=h.stateNode.containerInfo,Ri=!0,Mr(i,r,h),$e=p,Ri=y;break;case 0:case 11:case 14:case 15:if(!nn&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var w=y,E=w.destroy;w=w.tag,E!==void 0&&((w&2)!==0||(w&4)!==0)&&Ey(h,r,E),y=y.next}while(y!==p)}Mr(i,r,h);break;case 1:if(!nn&&(_l(h,r),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(P){pe(h,r,P)}Mr(i,r,h);break;case 21:Mr(i,r,h);break;case 22:h.mode&1?(nn=(p=nn)||h.memoizedState!==null,Mr(i,r,h),nn=p):Mr(i,r,h);break;default:Mr(i,r,h)}}function Ax(i){var r=i.updateQueue;if(r!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new zk),r.forEach(function(p){var y=Yk.bind(null,i,p);h.has(p)||(h.add(p),p.then(y,y))})}}function Li(i,r){var h=r.deletions;if(h!==null)for(var p=0;p<h.length;p++){var y=h[p];try{var w=i,E=r,P=E;t:for(;P!==null;){switch(P.tag){case 5:$e=P.stateNode,Ri=!1;break t;case 3:$e=P.stateNode.containerInfo,Ri=!0;break t;case 4:$e=P.stateNode.containerInfo,Ri=!0;break t}P=P.return}if($e===null)throw Error(e(160));wx(w,E,y),$e=null,Ri=!1;var D=y.alternate;D!==null&&(D.return=null),y.return=null}catch(H){pe(y,r,H)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)xx(r,i),r=r.sibling}function xx(i,r){var h=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Li(r,i),ns(i),p&4){try{Fc(3,i,i.return),Jf(3,i)}catch(ht){pe(i,i.return,ht)}try{Fc(5,i,i.return)}catch(ht){pe(i,i.return,ht)}}break;case 1:Li(r,i),ns(i),p&512&&h!==null&&_l(h,h.return);break;case 5:if(Li(r,i),ns(i),p&512&&h!==null&&_l(h,h.return),i.flags&32){var y=i.stateNode;try{ic(y,"")}catch(ht){pe(i,i.return,ht)}}if(p&4&&(y=i.stateNode,y!=null)){var w=i.memoizedProps,E=h!==null?h.memoizedProps:w,P=i.type,D=i.updateQueue;if(i.updateQueue=null,D!==null)try{P==="input"&&w.type==="radio"&&w.name!=null&&Kw(y,w),sg(P,E);var H=sg(P,w);for(E=0;E<D.length;E+=2){var W=D[E],X=D[E+1];W==="style"?iA(y,X):W==="dangerouslySetInnerHTML"?eA(y,X):W==="children"?ic(y,X):L(y,W,X,H)}switch(P){case"input":Jm(y,w);break;case"textarea":Zw(y,w);break;case"select":var G=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var nt=w.value;nt!=null?sl(y,!!w.multiple,nt,!1):G!==!!w.multiple&&(w.defaultValue!=null?sl(y,!!w.multiple,w.defaultValue,!0):sl(y,!!w.multiple,w.multiple?[]:"",!1))}y[_c]=w}catch(ht){pe(i,i.return,ht)}}break;case 6:if(Li(r,i),ns(i),p&4){if(i.stateNode===null)throw Error(e(162));y=i.stateNode,w=i.memoizedProps;try{y.nodeValue=w}catch(ht){pe(i,i.return,ht)}}break;case 3:if(Li(r,i),ns(i),p&4&&h!==null&&h.memoizedState.isDehydrated)try{pc(r.containerInfo)}catch(ht){pe(i,i.return,ht)}break;case 4:Li(r,i),ns(i);break;case 13:Li(r,i),ns(i),y=i.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(My=ye())),p&4&&Ax(i);break;case 22:if(W=h!==null&&h.memoizedState!==null,i.mode&1?(nn=(H=nn)||W,Li(r,i),nn=H):Li(r,i),ns(i),p&8192){if(H=i.memoizedState!==null,(i.stateNode.isHidden=H)&&!W&&(i.mode&1)!==0)for(st=i,W=i.child;W!==null;){for(X=st=W;st!==null;){switch(G=st,nt=G.child,G.tag){case 0:case 11:case 14:case 15:Fc(4,G,G.return);break;case 1:_l(G,G.return);var ut=G.stateNode;if(typeof ut.componentWillUnmount=="function"){p=G,h=G.return;try{r=p,ut.props=r.memoizedProps,ut.state=r.memoizedState,ut.componentWillUnmount()}catch(ht){pe(p,h,ht)}}break;case 5:_l(G,G.return);break;case 22:if(G.memoizedState!==null){Ex(X);continue}}nt!==null?(nt.return=G,st=nt):Ex(X)}W=W.sibling}t:for(W=null,X=i;;){if(X.tag===5){if(W===null){W=X;try{y=X.stateNode,H?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(P=X.stateNode,D=X.memoizedProps.style,E=D!=null&&D.hasOwnProperty("display")?D.display:null,P.style.display=nA("display",E))}catch(ht){pe(i,i.return,ht)}}}else if(X.tag===6){if(W===null)try{X.stateNode.nodeValue=H?"":X.memoizedProps}catch(ht){pe(i,i.return,ht)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===i)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===i)break t;for(;X.sibling===null;){if(X.return===null||X.return===i)break t;W===X&&(W=null),X=X.return}W===X&&(W=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Li(r,i),ns(i),p&4&&Ax(i);break;case 21:break;default:Li(r,i),ns(i)}}function ns(i){var r=i.flags;if(r&2){try{t:{for(var h=i.return;h!==null;){if(yx(h)){var p=h;break t}h=h.return}throw Error(e(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(ic(y,""),p.flags&=-33);var w=vx(i);Ty(i,w,y);break;case 3:case 4:var E=p.stateNode.containerInfo,P=vx(i);Cy(i,P,E);break;default:throw Error(e(161))}}catch(D){pe(i,i.return,D)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Hk(i,r,h){st=i,Sx(i)}function Sx(i,r,h){for(var p=(i.mode&1)!==0;st!==null;){var y=st,w=y.child;if(y.tag===22&&p){var E=y.memoizedState!==null||Zf;if(!E){var P=y.alternate,D=P!==null&&P.memoizedState!==null||nn;P=Zf;var H=nn;if(Zf=E,(nn=D)&&!H)for(st=y;st!==null;)E=st,D=E.child,E.tag===22&&E.memoizedState!==null?_x(y):D!==null?(D.return=E,st=D):_x(y);for(;w!==null;)st=w,Sx(w),w=w.sibling;st=y,Zf=P,nn=H}bx(i)}else(y.subtreeFlags&8772)!==0&&w!==null?(w.return=y,st=w):bx(i)}}function bx(i){for(;st!==null;){var r=st;if((r.flags&8772)!==0){var h=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:nn||Jf(5,r);break;case 1:var p=r.stateNode;if(r.flags&4&&!nn)if(h===null)p.componentDidMount();else{var y=r.elementType===r.type?h.memoizedProps:Mi(r.type,h.memoizedProps);p.componentDidUpdate(y,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=r.updateQueue;w!==null&&E1(r,w,p);break;case 3:var E=r.updateQueue;if(E!==null){if(h=null,r.child!==null)switch(r.child.tag){case 5:h=r.child.stateNode;break;case 1:h=r.child.stateNode}E1(r,E,h)}break;case 5:var P=r.stateNode;if(h===null&&r.flags&4){h=P;var D=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&h.focus();break;case"img":D.src&&(h.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var H=r.alternate;if(H!==null){var W=H.memoizedState;if(W!==null){var X=W.dehydrated;X!==null&&pc(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}nn||r.flags&512&&_y(r)}catch(G){pe(r,r.return,G)}}if(r===i){st=null;break}if(h=r.sibling,h!==null){h.return=r.return,st=h;break}st=r.return}}function Ex(i){for(;st!==null;){var r=st;if(r===i){st=null;break}var h=r.sibling;if(h!==null){h.return=r.return,st=h;break}st=r.return}}function _x(i){for(;st!==null;){var r=st;try{switch(r.tag){case 0:case 11:case 15:var h=r.return;try{Jf(4,r)}catch(D){pe(r,h,D)}break;case 1:var p=r.stateNode;if(typeof p.componentDidMount=="function"){var y=r.return;try{p.componentDidMount()}catch(D){pe(r,y,D)}}var w=r.return;try{_y(r)}catch(D){pe(r,w,D)}break;case 5:var E=r.return;try{_y(r)}catch(D){pe(r,E,D)}}}catch(D){pe(r,r.return,D)}if(r===i){st=null;break}var P=r.sibling;if(P!==null){P.return=r.return,st=P;break}st=r.return}}var Uk=Math.ceil,tp=R.ReactCurrentDispatcher,ky=R.ReactCurrentOwner,di=R.ReactCurrentBatchConfig,Vt=0,Fe=null,be=null,Ge=0,Un=0,Cl=_r(0),ke=0,Oc=null,Do=0,ep=0,Py=0,jc=null,Mn=null,My=0,Tl=1/0,Ds=null,np=!1,Ry=null,Rr=null,ip=!1,Lr=null,sp=0,Vc=0,Ly=null,rp=-1,op=0;function yn(){return(Vt&6)!==0?ye():rp!==-1?rp:rp=ye()}function Dr(i){return(i.mode&1)===0?1:(Vt&2)!==0&&Ge!==0?Ge&-Ge:Ck.transition!==null?(op===0&&(op=vA()),op):(i=$t,i!==0||(i=window.event,i=i===void 0?16:TA(i.type)),i)}function Di(i,r,h,p){if(50<Vc)throw Vc=0,Ly=null,Error(e(185));uc(i,h,p),((Vt&2)===0||i!==Fe)&&(i===Fe&&((Vt&2)===0&&(ep|=h),ke===4&&Ir(i,Ge)),Rn(i,p),h===1&&Vt===0&&(r.mode&1)===0&&(Tl=ye()+500,If&&Tr()))}function Rn(i,r){var h=i.callbackNode;CT(i,r);var p=mf(i,i===Fe?Ge:0);if(p===0)h!==null&&mA(h),i.callbackNode=null,i.callbackPriority=0;else if(r=p&-p,i.callbackPriority!==r){if(h!=null&&mA(h),r===1)i.tag===0?_k(Tx.bind(null,i)):d1(Tx.bind(null,i)),xk(function(){(Vt&6)===0&&Tr()}),h=null;else{switch(wA(p)){case 1:h=hg;break;case 4:h=gA;break;case 16:h=hf;break;case 536870912:h=yA;break;default:h=hf}h=Nx(h,Cx.bind(null,i))}i.callbackPriority=r,i.callbackNode=h}}function Cx(i,r){if(rp=-1,op=0,(Vt&6)!==0)throw Error(e(327));var h=i.callbackNode;if(kl()&&i.callbackNode!==h)return null;var p=mf(i,i===Fe?Ge:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||r)r=ap(i,p);else{r=p;var y=Vt;Vt|=2;var w=Px();(Fe!==i||Ge!==r)&&(Ds=null,Tl=ye()+500,No(i,r));do try{Wk();break}catch(P){kx(i,P)}while(!0);Yg(),tp.current=w,Vt=y,be!==null?r=0:(Fe=null,Ge=0,r=ke)}if(r!==0){if(r===2&&(y=dg(i),y!==0&&(p=y,r=Dy(i,y))),r===1)throw h=Oc,No(i,0),Ir(i,p),Rn(i,ye()),h;if(r===6)Ir(i,p);else{if(y=i.current.alternate,(p&30)===0&&!$k(y)&&(r=ap(i,p),r===2&&(w=dg(i),w!==0&&(p=w,r=Dy(i,w))),r===1))throw h=Oc,No(i,0),Ir(i,p),Rn(i,ye()),h;switch(i.finishedWork=y,i.finishedLanes=p,r){case 0:case 1:throw Error(e(345));case 2:Fo(i,Mn,Ds);break;case 3:if(Ir(i,p),(p&130023424)===p&&(r=My+500-ye(),10<r)){if(mf(i,0)!==0)break;if(y=i.suspendedLanes,(y&p)!==p){yn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Vg(Fo.bind(null,i,Mn,Ds),r);break}Fo(i,Mn,Ds);break;case 4:if(Ir(i,p),(p&4194240)===p)break;for(r=i.eventTimes,y=-1;0<p;){var E=31-Ti(p);w=1<<E,E=r[E],E>y&&(y=E),p&=~w}if(p=y,p=ye()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Uk(p/1960))-p,10<p){i.timeoutHandle=Vg(Fo.bind(null,i,Mn,Ds),p);break}Fo(i,Mn,Ds);break;case 5:Fo(i,Mn,Ds);break;default:throw Error(e(329))}}}return Rn(i,ye()),i.callbackNode===h?Cx.bind(null,i):null}function Dy(i,r){var h=jc;return i.current.memoizedState.isDehydrated&&(No(i,r).flags|=256),i=ap(i,r),i!==2&&(r=Mn,Mn=h,r!==null&&Iy(r)),i}function Iy(i){Mn===null?Mn=i:Mn.push.apply(Mn,i)}function $k(i){for(var r=i;;){if(r.flags&16384){var h=r.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var y=h[p],w=y.getSnapshot;y=y.value;try{if(!ki(w(),y))return!1}catch{return!1}}}if(h=r.child,r.subtreeFlags&16384&&h!==null)h.return=r,r=h;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ir(i,r){for(r&=~Py,r&=~ep,i.suspendedLanes|=r,i.pingedLanes&=~r,i=i.expirationTimes;0<r;){var h=31-Ti(r),p=1<<h;i[h]=-1,r&=~p}}function Tx(i){if((Vt&6)!==0)throw Error(e(327));kl();var r=mf(i,0);if((r&1)===0)return Rn(i,ye()),null;var h=ap(i,r);if(i.tag!==0&&h===2){var p=dg(i);p!==0&&(r=p,h=Dy(i,p))}if(h===1)throw h=Oc,No(i,0),Ir(i,r),Rn(i,ye()),h;if(h===6)throw Error(e(345));return i.finishedWork=i.current.alternate,i.finishedLanes=r,Fo(i,Mn,Ds),Rn(i,ye()),null}function Ny(i,r){var h=Vt;Vt|=1;try{return i(r)}finally{Vt=h,Vt===0&&(Tl=ye()+500,If&&Tr())}}function Io(i){Lr!==null&&Lr.tag===0&&(Vt&6)===0&&kl();var r=Vt;Vt|=1;var h=di.transition,p=$t;try{if(di.transition=null,$t=1,i)return i()}finally{$t=p,di.transition=h,Vt=r,(Vt&6)===0&&Tr()}}function Fy(){Un=Cl.current,ee(Cl)}function No(i,r){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==-1&&(i.timeoutHandle=-1,Ak(h)),be!==null)for(h=be.return;h!==null;){var p=h;switch(Gg(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Lf();break;case 3:bl(),ee(Tn),ee(Je),sy();break;case 5:ny(p);break;case 4:bl();break;case 13:ee(le);break;case 19:ee(le);break;case 10:Qg(p.type._context);break;case 22:case 23:Fy()}h=h.return}if(Fe=i,be=i=Nr(i.current,null),Ge=Un=r,ke=0,Oc=null,Py=ep=Do=0,Mn=jc=null,Mo!==null){for(r=0;r<Mo.length;r++)if(h=Mo[r],p=h.interleaved,p!==null){h.interleaved=null;var y=p.next,w=h.pending;if(w!==null){var E=w.next;w.next=y,p.next=E}h.pending=p}Mo=null}return i}function kx(i,r){do{var h=be;try{if(Yg(),$f.current=Xf,Gf){for(var p=ue.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Gf=!1}if(Lo=0,Ne=Te=ue=null,Rc=!1,Lc=0,ky.current=null,h===null||h.return===null){ke=1,Oc=r,be=null;break}t:{var w=i,E=h.return,P=h,D=r;if(r=Ge,P.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var H=D,W=P,X=W.tag;if((W.mode&1)===0&&(X===0||X===11||X===15)){var G=W.alternate;G?(W.updateQueue=G.updateQueue,W.memoizedState=G.memoizedState,W.lanes=G.lanes):(W.updateQueue=null,W.memoizedState=null)}var nt=J1(E);if(nt!==null){nt.flags&=-257,tx(nt,E,P,w,r),nt.mode&1&&Z1(w,H,r),r=nt,D=H;var ut=r.updateQueue;if(ut===null){var ht=new Set;ht.add(D),r.updateQueue=ht}else ut.add(D);break t}else{if((r&1)===0){Z1(w,H,r),Oy();break t}D=Error(e(426))}}else if(se&&P.mode&1){var ve=J1(E);if(ve!==null){(ve.flags&65536)===0&&(ve.flags|=256),tx(ve,E,P,w,r),Xg(El(D,P));break t}}w=D=El(D,P),ke!==4&&(ke=2),jc===null?jc=[w]:jc.push(w),w=E;do{switch(w.tag){case 3:w.flags|=65536,r&=-r,w.lanes|=r;var O=Y1(w,D,r);b1(w,O);break t;case 1:P=D;var N=w.type,V=w.stateNode;if((w.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Rr===null||!Rr.has(V)))){w.flags|=65536,r&=-r,w.lanes|=r;var Y=Q1(w,P,r);b1(w,Y);break t}}w=w.return}while(w!==null)}Rx(h)}catch(dt){r=dt,be===h&&h!==null&&(be=h=h.return);continue}break}while(!0)}function Px(){var i=tp.current;return tp.current=Xf,i===null?Xf:i}function Oy(){(ke===0||ke===3||ke===2)&&(ke=4),Fe===null||(Do&268435455)===0&&(ep&268435455)===0||Ir(Fe,Ge)}function ap(i,r){var h=Vt;Vt|=2;var p=Px();(Fe!==i||Ge!==r)&&(Ds=null,No(i,r));do try{Gk();break}catch(y){kx(i,y)}while(!0);if(Yg(),Vt=h,tp.current=p,be!==null)throw Error(e(261));return Fe=null,Ge=0,ke}function Gk(){for(;be!==null;)Mx(be)}function Wk(){for(;be!==null&&!yT();)Mx(be)}function Mx(i){var r=Ix(i.alternate,i,Un);i.memoizedProps=i.pendingProps,r===null?Rx(i):be=r,ky.current=null}function Rx(i){var r=i;do{var h=r.alternate;if(i=r.return,(r.flags&32768)===0){if(h=jk(h,r,Un),h!==null){be=h;return}}else{if(h=Vk(h,r),h!==null){h.flags&=32767,be=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{ke=6,be=null;return}}if(r=r.sibling,r!==null){be=r;return}be=r=i}while(r!==null);ke===0&&(ke=5)}function Fo(i,r,h){var p=$t,y=di.transition;try{di.transition=null,$t=1,qk(i,r,h,p)}finally{di.transition=y,$t=p}return null}function qk(i,r,h,p){do kl();while(Lr!==null);if((Vt&6)!==0)throw Error(e(327));h=i.finishedWork;var y=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(e(177));i.callbackNode=null,i.callbackPriority=0;var w=h.lanes|h.childLanes;if(TT(i,w),i===Fe&&(be=Fe=null,Ge=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||ip||(ip=!0,Nx(hf,function(){return kl(),null})),w=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||w){w=di.transition,di.transition=null;var E=$t;$t=1;var P=Vt;Vt|=4,ky.current=null,Bk(i,h),xx(h,i),fk(Og),vf=!!Fg,Og=Fg=null,i.current=h,Hk(h),vT(),Vt=P,$t=E,di.transition=w}else i.current=h;if(ip&&(ip=!1,Lr=i,sp=y),w=i.pendingLanes,w===0&&(Rr=null),xT(h.stateNode),Rn(i,ye()),r!==null)for(p=i.onRecoverableError,h=0;h<r.length;h++)y=r[h],p(y.value,{componentStack:y.stack,digest:y.digest});if(np)throw np=!1,i=Ry,Ry=null,i;return(sp&1)!==0&&i.tag!==0&&kl(),w=i.pendingLanes,(w&1)!==0?i===Ly?Vc++:(Vc=0,Ly=i):Vc=0,Tr(),null}function kl(){if(Lr!==null){var i=wA(sp),r=di.transition,h=$t;try{if(di.transition=null,$t=16>i?16:i,Lr===null)var p=!1;else{if(i=Lr,Lr=null,sp=0,(Vt&6)!==0)throw Error(e(331));var y=Vt;for(Vt|=4,st=i.current;st!==null;){var w=st,E=w.child;if((st.flags&16)!==0){var P=w.deletions;if(P!==null){for(var D=0;D<P.length;D++){var H=P[D];for(st=H;st!==null;){var W=st;switch(W.tag){case 0:case 11:case 15:Fc(8,W,w)}var X=W.child;if(X!==null)X.return=W,st=X;else for(;st!==null;){W=st;var G=W.sibling,nt=W.return;if(gx(W),W===H){st=null;break}if(G!==null){G.return=nt,st=G;break}st=nt}}}var ut=w.alternate;if(ut!==null){var ht=ut.child;if(ht!==null){ut.child=null;do{var ve=ht.sibling;ht.sibling=null,ht=ve}while(ht!==null)}}st=w}}if((w.subtreeFlags&2064)!==0&&E!==null)E.return=w,st=E;else t:for(;st!==null;){if(w=st,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Fc(9,w,w.return)}var O=w.sibling;if(O!==null){O.return=w.return,st=O;break t}st=w.return}}var N=i.current;for(st=N;st!==null;){E=st;var V=E.child;if((E.subtreeFlags&2064)!==0&&V!==null)V.return=E,st=V;else t:for(E=N;st!==null;){if(P=st,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Jf(9,P)}}catch(dt){pe(P,P.return,dt)}if(P===E){st=null;break t}var Y=P.sibling;if(Y!==null){Y.return=P.return,st=Y;break t}st=P.return}}if(Vt=y,Tr(),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(df,i)}catch{}p=!0}return p}finally{$t=h,di.transition=r}}return!1}function Lx(i,r,h){r=El(h,r),r=Y1(i,r,1),i=Pr(i,r,1),r=yn(),i!==null&&(uc(i,1,r),Rn(i,r))}function pe(i,r,h){if(i.tag===3)Lx(i,i,h);else for(;r!==null;){if(r.tag===3){Lx(r,i,h);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Rr===null||!Rr.has(p))){i=El(h,i),i=Q1(r,i,1),r=Pr(r,i,1),i=yn(),r!==null&&(uc(r,1,i),Rn(r,i));break}}r=r.return}}function Xk(i,r,h){var p=i.pingCache;p!==null&&p.delete(r),r=yn(),i.pingedLanes|=i.suspendedLanes&h,Fe===i&&(Ge&h)===h&&(ke===4||ke===3&&(Ge&130023424)===Ge&&500>ye()-My?No(i,0):Py|=h),Rn(i,r)}function Dx(i,r){r===0&&((i.mode&1)===0?r=1:(r=pf,pf<<=1,(pf&130023424)===0&&(pf=4194304)));var h=yn();i=Ms(i,r),i!==null&&(uc(i,r,h),Rn(i,h))}function Kk(i){var r=i.memoizedState,h=0;r!==null&&(h=r.retryLane),Dx(i,h)}function Yk(i,r){var h=0;switch(i.tag){case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(h=y.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(e(314))}p!==null&&p.delete(r),Dx(i,h)}var Ix;Ix=function(i,r,h){if(i!==null)if(i.memoizedProps!==r.pendingProps||Tn.current)Pn=!0;else{if((i.lanes&h)===0&&(r.flags&128)===0)return Pn=!1,Ok(i,r,h);Pn=(i.flags&131072)!==0}else Pn=!1,se&&(r.flags&1048576)!==0&&f1(r,Ff,r.index);switch(r.lanes=0,r.tag){case 2:var p=r.type;Qf(i,r),i=r.pendingProps;var y=gl(r,Je.current);Sl(r,h),y=ay(null,r,p,i,y,h);var w=ly();return r.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,kn(p)?(w=!0,Df(r)):w=!1,r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,ty(r),y.updater=Kf,r.stateNode=y,y._reactInternals=r,py(r,p,i,h),r=vy(null,r,p,!0,w,h)):(r.tag=0,se&&w&&$g(r),gn(null,r,y,h),r=r.child),r;case 16:p=r.elementType;t:{switch(Qf(i,r),i=r.pendingProps,y=p._init,p=y(p._payload),r.type=p,y=r.tag=Zk(p),i=Mi(p,i),y){case 0:r=yy(null,r,p,i,h);break t;case 1:r=ox(null,r,p,i,h);break t;case 11:r=ex(null,r,p,i,h);break t;case 14:r=nx(null,r,p,Mi(p.type,i),h);break t}throw Error(e(306,p,""))}return r;case 0:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Mi(p,y),yy(i,r,p,y,h);case 1:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Mi(p,y),ox(i,r,p,y,h);case 3:t:{if(ax(r),i===null)throw Error(e(387));p=r.pendingProps,w=r.memoizedState,y=w.element,S1(i,r),Hf(r,p,null,h);var E=r.memoizedState;if(p=E.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){y=El(Error(e(423)),r),r=lx(i,r,p,h,y);break t}else if(p!==y){y=El(Error(e(424)),r),r=lx(i,r,p,h,y);break t}else for(Hn=Er(r.stateNode.containerInfo.firstChild),Bn=r,se=!0,Pi=null,h=A1(r,null,p,h),r.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(wl(),p===y){r=Ls(i,r,h);break t}gn(i,r,p,h)}r=r.child}return r;case 5:return _1(r),i===null&&qg(r),p=r.type,y=r.pendingProps,w=i!==null?i.memoizedProps:null,E=y.children,jg(p,y)?E=null:w!==null&&jg(p,w)&&(r.flags|=32),rx(i,r),gn(i,r,E,h),r.child;case 6:return i===null&&qg(r),null;case 13:return ux(i,r,h);case 4:return ey(r,r.stateNode.containerInfo),p=r.pendingProps,i===null?r.child=Al(r,null,p,h):gn(i,r,p,h),r.child;case 11:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Mi(p,y),ex(i,r,p,y,h);case 7:return gn(i,r,r.pendingProps,h),r.child;case 8:return gn(i,r,r.pendingProps.children,h),r.child;case 12:return gn(i,r,r.pendingProps.children,h),r.child;case 10:t:{if(p=r.type._context,y=r.pendingProps,w=r.memoizedProps,E=y.value,Zt(Vf,p._currentValue),p._currentValue=E,w!==null)if(ki(w.value,E)){if(w.children===y.children&&!Tn.current){r=Ls(i,r,h);break t}}else for(w=r.child,w!==null&&(w.return=r);w!==null;){var P=w.dependencies;if(P!==null){E=w.child;for(var D=P.firstContext;D!==null;){if(D.context===p){if(w.tag===1){D=Rs(-1,h&-h),D.tag=2;var H=w.updateQueue;if(H!==null){H=H.shared;var W=H.pending;W===null?D.next=D:(D.next=W.next,W.next=D),H.pending=D}}w.lanes|=h,D=w.alternate,D!==null&&(D.lanes|=h),Zg(w.return,h,r),P.lanes|=h;break}D=D.next}}else if(w.tag===10)E=w.type===r.type?null:w.child;else if(w.tag===18){if(E=w.return,E===null)throw Error(e(341));E.lanes|=h,P=E.alternate,P!==null&&(P.lanes|=h),Zg(E,h,r),E=w.sibling}else E=w.child;if(E!==null)E.return=w;else for(E=w;E!==null;){if(E===r){E=null;break}if(w=E.sibling,w!==null){w.return=E.return,E=w;break}E=E.return}w=E}gn(i,r,y.children,h),r=r.child}return r;case 9:return y=r.type,p=r.pendingProps.children,Sl(r,h),y=ci(y),p=p(y),r.flags|=1,gn(i,r,p,h),r.child;case 14:return p=r.type,y=Mi(p,r.pendingProps),y=Mi(p.type,y),nx(i,r,p,y,h);case 15:return ix(i,r,r.type,r.pendingProps,h);case 17:return p=r.type,y=r.pendingProps,y=r.elementType===p?y:Mi(p,y),Qf(i,r),r.tag=1,kn(p)?(i=!0,Df(r)):i=!1,Sl(r,h),X1(r,p,y),py(r,p,y,h),vy(null,r,p,!0,i,h);case 19:return hx(i,r,h);case 22:return sx(i,r,h)}throw Error(e(156,r.tag))};function Nx(i,r){return pA(i,r)}function Qk(i,r,h,p){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(i,r,h,p){return new Qk(i,r,h,p)}function jy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zk(i){if(typeof i=="function")return jy(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Rt)return 11;if(i===Kt)return 14}return 2}function Nr(i,r){var h=i.alternate;return h===null?(h=fi(i.tag,r,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=r,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,r=i.dependencies,h.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function lp(i,r,h,p,y,w){var E=2;if(p=i,typeof i=="function")jy(i)&&(E=1);else if(typeof i=="string")E=5;else t:switch(i){case B:return Oo(h.children,y,w,r);case U:E=8,y|=8;break;case Q:return i=fi(12,h,r,y|2),i.elementType=Q,i.lanes=w,i;case Ft:return i=fi(13,h,r,y),i.elementType=Ft,i.lanes=w,i;case _t:return i=fi(19,h,r,y),i.elementType=_t,i.lanes=w,i;case K:return up(h,y,w,r);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ct:E=10;break t;case ot:E=9;break t;case Rt:E=11;break t;case Kt:E=14;break t;case Z:E=16,p=null;break t}throw Error(e(130,i==null?i:typeof i,""))}return r=fi(E,h,r,y),r.elementType=i,r.type=p,r.lanes=w,r}function Oo(i,r,h,p){return i=fi(7,i,p,r),i.lanes=h,i}function up(i,r,h,p){return i=fi(22,i,p,r),i.elementType=K,i.lanes=h,i.stateNode={isHidden:!1},i}function Vy(i,r,h){return i=fi(6,i,null,r),i.lanes=h,i}function zy(i,r,h){return r=fi(4,i.children!==null?i.children:[],i.key,r),r.lanes=h,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}function Jk(i,r,h,p,y){this.tag=r,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fg(0),this.expirationTimes=fg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fg(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function By(i,r,h,p,y,w,E,P,D){return i=new Jk(i,r,h,P,D),r===1?(r=1,w===!0&&(r|=8)):r=0,w=fi(3,null,null,r),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},ty(w),i}function tP(i,r,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:p==null?null:""+p,children:i,containerInfo:r,implementation:h}}function Fx(i){if(!i)return Cr;i=i._reactInternals;t:{if(_o(i)!==i||i.tag!==1)throw Error(e(170));var r=i;do{switch(r.tag){case 3:r=r.stateNode.context;break t;case 1:if(kn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break t}}r=r.return}while(r!==null);throw Error(e(171))}if(i.tag===1){var h=i.type;if(kn(h))return c1(i,h,r)}return r}function Ox(i,r,h,p,y,w,E,P,D){return i=By(h,p,!0,i,y,w,E,P,D),i.context=Fx(null),h=i.current,p=yn(),y=Dr(h),w=Rs(p,y),w.callback=r??null,Pr(h,w,y),i.current.lanes=y,uc(i,y,p),Rn(i,p),i}function cp(i,r,h,p){var y=r.current,w=yn(),E=Dr(y);return h=Fx(h),r.context===null?r.context=h:r.pendingContext=h,r=Rs(w,E),r.payload={element:i},p=p===void 0?null:p,p!==null&&(r.callback=p),i=Pr(y,r,E),i!==null&&(Di(i,y,E,w),Bf(i,y,E)),E}function hp(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function jx(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<r?h:r}}function Hy(i,r){jx(i,r),(i=i.alternate)&&jx(i,r)}function eP(){return null}var Vx=typeof reportError=="function"?reportError:function(i){console.error(i)};function Uy(i){this._internalRoot=i}dp.prototype.render=Uy.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(e(409));cp(i,r,null,null)},dp.prototype.unmount=Uy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Io(function(){cp(null,i,null,null)}),r[Cs]=null}};function dp(i){this._internalRoot=i}dp.prototype.unstable_scheduleHydration=function(i){if(i){var r=SA();i={blockedOn:null,target:i,priority:r};for(var h=0;h<xr.length&&r!==0&&r<xr[h].priority;h++);xr.splice(h,0,i),h===0&&_A(i)}};function $y(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function fp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function zx(){}function nP(i,r,h,p,y){if(y){if(typeof p=="function"){var w=p;p=function(){var H=hp(E);w.call(H)}}var E=Ox(r,p,i,0,null,!1,!1,"",zx);return i._reactRootContainer=E,i[Cs]=E.current,bc(i.nodeType===8?i.parentNode:i),Io(),E}for(;y=i.lastChild;)i.removeChild(y);if(typeof p=="function"){var P=p;p=function(){var H=hp(D);P.call(H)}}var D=By(i,0,!1,null,null,!1,!1,"",zx);return i._reactRootContainer=D,i[Cs]=D.current,bc(i.nodeType===8?i.parentNode:i),Io(function(){cp(r,D,h,p)}),D}function pp(i,r,h,p,y){var w=h._reactRootContainer;if(w){var E=w;if(typeof y=="function"){var P=y;y=function(){var D=hp(E);P.call(D)}}cp(r,E,i,y)}else E=nP(h,r,i,y,p);return hp(E)}AA=function(i){switch(i.tag){case 3:var r=i.stateNode;if(r.current.memoizedState.isDehydrated){var h=lc(r.pendingLanes);h!==0&&(pg(r,h|1),Rn(r,ye()),(Vt&6)===0&&(Tl=ye()+500,Tr()))}break;case 13:Io(function(){var p=Ms(i,1);if(p!==null){var y=yn();Di(p,i,1,y)}}),Hy(i,1)}},mg=function(i){if(i.tag===13){var r=Ms(i,134217728);if(r!==null){var h=yn();Di(r,i,134217728,h)}Hy(i,134217728)}},xA=function(i){if(i.tag===13){var r=Dr(i),h=Ms(i,r);if(h!==null){var p=yn();Di(h,i,r,p)}Hy(i,r)}},SA=function(){return $t},bA=function(i,r){var h=$t;try{return $t=i,r()}finally{$t=h}},ag=function(i,r,h){switch(r){case"input":if(Jm(i,h),r=h.name,h.type==="radio"&&r!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<h.length;r++){var p=h[r];if(p!==i&&p.form===i.form){var y=Rf(p);if(!y)throw Error(e(90));qw(p),Jm(p,y)}}}break;case"textarea":Zw(i,h);break;case"select":r=h.value,r!=null&&sl(i,!!h.multiple,r,!1)}},aA=Ny,lA=Io;var iP={usingClientEntryPoint:!1,Events:[Cc,pl,Rf,rA,oA,Ny]},zc={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sP={bundleType:zc.bundleType,version:zc.version,rendererPackageName:zc.rendererPackageName,rendererConfig:zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=dA(i),i===null?null:i.stateNode},findFiberByHostInstance:zc.findFiberByHostInstance||eP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mp.isDisabled&&mp.supportsFiber)try{df=mp.inject(sP),Zi=mp}catch{}}return Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iP,Ln.createPortal=function(i,r){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$y(r))throw Error(e(200));return tP(i,r,null,h)},Ln.createRoot=function(i,r){if(!$y(i))throw Error(e(299));var h=!1,p="",y=Vx;return r!=null&&(r.unstable_strictMode===!0&&(h=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),r=By(i,1,!1,null,null,h,!1,p,y),i[Cs]=r.current,bc(i.nodeType===8?i.parentNode:i),new Uy(r)},Ln.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(e(188)):(i=Object.keys(i).join(","),Error(e(268,i)));return i=dA(r),i=i===null?null:i.stateNode,i},Ln.flushSync=function(i){return Io(i)},Ln.hydrate=function(i,r,h){if(!fp(r))throw Error(e(200));return pp(null,i,r,!0,h)},Ln.hydrateRoot=function(i,r,h){if(!$y(i))throw Error(e(405));var p=h!=null&&h.hydratedSources||null,y=!1,w="",E=Vx;if(h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(E=h.onRecoverableError)),r=Ox(r,null,i,1,h??null,y,!1,w,E),i[Cs]=r.current,bc(i),p)for(i=0;i<p.length;i++)h=p[i],y=h._getVersion,y=y(h._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[h,y]:r.mutableSourceEagerHydrationData.push(h,y);return new dp(r)},Ln.render=function(i,r,h){if(!fp(r))throw Error(e(200));return pp(null,i,r,!1,h)},Ln.unmountComponentAtNode=function(i){if(!fp(i))throw Error(e(40));return i._reactRootContainer?(Io(function(){pp(null,null,i,!1,function(){i._reactRootContainer=null,i[Cs]=null})}),!0):!1},Ln.unstable_batchedUpdates=Ny,Ln.unstable_renderSubtreeIntoContainer=function(i,r,h,p){if(!fp(h))throw Error(e(200));if(i==null||i._reactInternals===void 0)throw Error(e(38));return pp(i,r,h,!1,p)},Ln.version="18.3.1-next-f1338f8080-20240426",Ln}var Kx;function pP(){if(Kx)return Xy.exports;Kx=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),Xy.exports=fP(),Xy.exports}var Yx;function mP(){if(Yx)return gp;Yx=1;var o=pP();return gp.createRoot=o.createRoot,gp.hydrateRoot=o.hydrateRoot,gp}var gP=mP();const yP=Nb(gP),Y0=et.createContext({});function Q0(o){const t=et.useRef(null);return t.current===null&&(t.current=o()),t.current}const jm=et.createContext(null),Z0=et.createContext({transformPagePoint:o=>o,isStatic:!1,reducedMotion:"never"});class vP extends et.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function wP({children:o,isPresent:t}){const e=et.useId(),n=et.useRef(null),s=et.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=et.useContext(Z0);return et.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:f}=s.current;if(t||!n.current||!l||!c)return;n.current.dataset.motionPopId=e;const m=document.createElement("style");return a&&(m.nonce=a),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${d}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[t]),z.jsx(vP,{isPresent:t,childRef:n,sizeRef:s,children:et.cloneElement(o,{ref:n})})}const AP=({children:o,initial:t,isPresent:e,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:l})=>{const c=Q0(xP),d=et.useId(),f=et.useCallback(g=>{c.set(g,!0);for(const v of c.values())if(!v)return;n&&n()},[c,n]),m=et.useMemo(()=>({id:d,initial:t,isPresent:e,custom:s,onExitComplete:f,register:g=>(c.set(g,!1),()=>c.delete(g))}),a?[Math.random(),f]:[e,f]);return et.useMemo(()=>{c.forEach((g,v)=>c.set(v,!1))},[e]),et.useEffect(()=>{!e&&!c.size&&n&&n()},[e]),l==="popLayout"&&(o=z.jsx(wP,{isPresent:e,children:o})),z.jsx(jm.Provider,{value:m,children:o})};function xP(){return new Map}function Fb(o=!0){const t=et.useContext(jm);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,a=et.useId();et.useEffect(()=>{o&&s(a)},[o]);const l=et.useCallback(()=>o&&n&&n(a),[a,n,o]);return!e&&n?[!1,l]:[!0]}const yp=o=>o.key||"";function Qx(o){const t=[];return et.Children.forEach(o,e=>{et.isValidElement(e)&&t.push(e)}),t}const J0=typeof window<"u",Ob=J0?et.useLayoutEffect:et.useEffect,SP=({children:o,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:l=!1})=>{const[c,d]=Fb(l),f=et.useMemo(()=>Qx(o),[o]),m=l&&!c?[]:f.map(yp),g=et.useRef(!0),v=et.useRef(f),A=Q0(()=>new Map),[S,b]=et.useState(f),[T,k]=et.useState(f);Ob(()=>{g.current=!1,v.current=f;for(let R=0;R<T.length;R++){const I=yp(T[R]);m.includes(I)?A.delete(I):A.get(I)!==!0&&A.set(I,!1)}},[T,m.length,m.join("-")]);const M=[];if(f!==S){let R=[...f];for(let I=0;I<T.length;I++){const j=T[I],B=yp(j);m.includes(B)||(R.splice(I,0,j),M.push(j))}a==="wait"&&M.length&&(R=M),k(Qx(R)),b(f);return}const{forceRender:L}=et.useContext(Y0);return z.jsx(z.Fragment,{children:T.map(R=>{const I=yp(R),j=l&&!c?!1:f===T||m.includes(I),B=()=>{if(A.has(I))A.set(I,!0);else return;let U=!0;A.forEach(Q=>{Q||(U=!1)}),U&&(L==null||L(),k(v.current),l&&(d==null||d()),n&&n())};return z.jsx(AP,{isPresent:j,initial:!g.current||e?void 0:!1,custom:j?void 0:t,presenceAffectsLayout:s,mode:a,onExitComplete:j?void 0:B,children:R},I)})})},ri=o=>o;let jb=ri;function tw(o){let t;return()=>(t===void 0&&(t=o()),t)}const Qu=(o,t,e)=>{const n=t-o;return n===0?1:(e-o)/n},hr=o=>o*1e3,dr=o=>o/1e3,bP={useManualTiming:!1};function EP(o){let t=new Set,e=new Set,n=!1,s=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(f){a.has(f)&&(d.schedule(f),o()),f(l)}const d={schedule:(f,m=!1,g=!1)=>{const A=g&&n?t:e;return m&&a.add(f),A.has(f)||A.add(f),f},cancel:f=>{e.delete(f),a.delete(f)},process:f=>{if(l=f,n){s=!0;return}n=!0,[t,e]=[e,t],t.forEach(c),t.clear(),n=!1,s&&(s=!1,d.process(f))}};return d}const vp=["read","resolveKeyframes","update","preRender","render","postRender"],_P=40;function Vb(o,t){let e=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,l=vp.reduce((k,M)=>(k[M]=EP(a),k),{}),{read:c,resolveKeyframes:d,update:f,preRender:m,render:g,postRender:v}=l,A=()=>{const k=performance.now();e=!1,s.delta=n?1e3/60:Math.max(Math.min(k-s.timestamp,_P),1),s.timestamp=k,s.isProcessing=!0,c.process(s),d.process(s),f.process(s),m.process(s),g.process(s),v.process(s),s.isProcessing=!1,e&&t&&(n=!1,o(A))},S=()=>{e=!0,n=!0,s.isProcessing||o(A)};return{schedule:vp.reduce((k,M)=>{const L=l[M];return k[M]=(R,I=!1,j=!1)=>(e||S(),L.schedule(R,I,j)),k},{}),cancel:k=>{for(let M=0;M<vp.length;M++)l[vp[M]].cancel(k)},state:s,steps:l}}const{schedule:ie,cancel:vo,state:Qe,steps:Qy}=Vb(typeof requestAnimationFrame<"u"?requestAnimationFrame:ri,!0),zb=et.createContext({strict:!1}),Zx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zu={};for(const o in Zx)Zu[o]={isEnabled:t=>Zx[o].some(e=>!!t[e])};function CP(o){for(const t in o)Zu[t]={...Zu[t],...o[t]}}const TP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sm(o){return o.startsWith("while")||o.startsWith("drag")&&o!=="draggable"||o.startsWith("layout")||o.startsWith("onTap")||o.startsWith("onPan")||o.startsWith("onLayout")||TP.has(o)}let Bb=o=>!sm(o);function kP(o){o&&(Bb=t=>t.startsWith("on")?!sm(t):o(t))}try{kP(require("@emotion/is-prop-valid").default)}catch{}function PP(o,t,e){const n={};for(const s in o)s==="values"&&typeof o.values=="object"||(Bb(s)||e===!0&&sm(s)||!t&&!sm(s)||o.draggable&&s.startsWith("onDrag"))&&(n[s]=o[s]);return n}function MP(o){if(typeof Proxy>"u")return o;const t=new Map,e=(...n)=>o(...n);return new Proxy(e,{get:(n,s)=>s==="create"?o:(t.has(s)||t.set(s,o(s)),t.get(s))})}const Vm=et.createContext({});function wh(o){return typeof o=="string"||Array.isArray(o)}function zm(o){return o!==null&&typeof o=="object"&&typeof o.start=="function"}const ew=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nw=["initial",...ew];function Bm(o){return zm(o.animate)||nw.some(t=>wh(o[t]))}function Hb(o){return!!(Bm(o)||o.variants)}function RP(o,t){if(Bm(o)){const{initial:e,animate:n}=o;return{initial:e===!1||wh(e)?e:void 0,animate:wh(n)?n:void 0}}return o.inherit!==!1?t:{}}function LP(o){const{initial:t,animate:e}=RP(o,et.useContext(Vm));return et.useMemo(()=>({initial:t,animate:e}),[Jx(t),Jx(e)])}function Jx(o){return Array.isArray(o)?o.join(" "):o}const DP=Symbol.for("motionComponentSymbol");function Fl(o){return o&&typeof o=="object"&&Object.prototype.hasOwnProperty.call(o,"current")}function IP(o,t,e){return et.useCallback(n=>{n&&o.onMount&&o.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):Fl(e)&&(e.current=n))},[t])}const iw=o=>o.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),NP="framerAppearId",Ub="data-"+iw(NP),{schedule:sw}=Vb(queueMicrotask,!1),$b=et.createContext({});function FP(o,t,e,n,s){var a,l;const{visualElement:c}=et.useContext(Vm),d=et.useContext(zb),f=et.useContext(jm),m=et.useContext(Z0).reducedMotion,g=et.useRef(null);n=n||d.renderer,!g.current&&n&&(g.current=n(o,{visualState:t,parent:c,props:e,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m}));const v=g.current,A=et.useContext($b);v&&!v.projection&&s&&(v.type==="html"||v.type==="svg")&&OP(g.current,e,s,A);const S=et.useRef(!1);et.useInsertionEffect(()=>{v&&S.current&&v.update(e,f)});const b=e[Ub],T=et.useRef(!!b&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,b))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,b)));return Ob(()=>{v&&(S.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),sw.render(v.render),T.current&&v.animationState&&v.animationState.animateChanges())}),et.useEffect(()=>{v&&(!T.current&&v.animationState&&v.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)===null||k===void 0||k.call(window,b)}),T.current=!1))}),v}function OP(o,t,e,n){const{layoutId:s,layout:a,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:f}=t;o.projection=new e(o.latestValues,t["data-framer-portal-id"]?void 0:Gb(o.parent)),o.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||c&&Fl(c),visualElement:o,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,layoutScroll:d,layoutRoot:f})}function Gb(o){if(o)return o.options.allowProjection!==!1?o.projection:Gb(o.parent)}function jP({preloadedFeatures:o,createVisualElement:t,useRender:e,useVisualState:n,Component:s}){var a,l;o&&CP(o);function c(f,m){let g;const v={...et.useContext(Z0),...f,layoutId:VP(f)},{isStatic:A}=v,S=LP(f),b=n(f,A);if(!A&&J0){zP();const T=BP(v);g=T.MeasureLayout,S.visualElement=FP(s,b,v,t,T.ProjectionNode)}return z.jsxs(Vm.Provider,{value:S,children:[g&&S.visualElement?z.jsx(g,{visualElement:S.visualElement,...v}):null,e(s,f,IP(b,S.visualElement,m),b,A,S.visualElement)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${(l=(a=s.displayName)!==null&&a!==void 0?a:s.name)!==null&&l!==void 0?l:""})`}`;const d=et.forwardRef(c);return d[DP]=s,d}function VP({layoutId:o}){const t=et.useContext(Y0).id;return t&&o!==void 0?t+"-"+o:o}function zP(o,t){et.useContext(zb).strict}function BP(o){const{drag:t,layout:e}=Zu;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(o)||e!=null&&e.isEnabled(o)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const HP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rw(o){return typeof o!="string"||o.includes("-")?!1:!!(HP.indexOf(o)>-1||/[A-Z]/u.test(o))}function tS(o){const t=[{},{}];return o==null||o.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function ow(o,t,e,n){if(typeof t=="function"){const[s,a]=tS(n);t=t(e!==void 0?e:o.custom,s,a)}if(typeof t=="string"&&(t=o.variants&&o.variants[t]),typeof t=="function"){const[s,a]=tS(n);t=t(e!==void 0?e:o.custom,s,a)}return t}const yv=o=>Array.isArray(o),UP=o=>!!(o&&typeof o=="object"&&o.mix&&o.toValue),$P=o=>yv(o)?o[o.length-1]||0:o,pn=o=>!!(o&&o.getVelocity);function _p(o){const t=pn(o)?o.get():o;return UP(t)?t.toValue():t}function GP({scrapeMotionValuesFromProps:o,createRenderState:t,onUpdate:e},n,s,a){const l={latestValues:WP(n,s,a,o),renderState:t()};return e&&(l.onMount=c=>e({props:n,current:c,...l}),l.onUpdate=c=>e(c)),l}const Wb=o=>(t,e)=>{const n=et.useContext(Vm),s=et.useContext(jm),a=()=>GP(o,t,n,s);return e?a():Q0(a)};function WP(o,t,e,n){const s={},a=n(o,{});for(const v in a)s[v]=_p(a[v]);let{initial:l,animate:c}=o;const d=Bm(o),f=Hb(o);t&&f&&!d&&o.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let m=e?e.initial===!1:!1;m=m||l===!1;const g=m?c:l;if(g&&typeof g!="boolean"&&!zm(g)){const v=Array.isArray(g)?g:[g];for(let A=0;A<v.length;A++){const S=ow(o,v[A]);if(S){const{transitionEnd:b,transition:T,...k}=S;for(const M in k){let L=k[M];if(Array.isArray(L)){const R=m?L.length-1:0;L=L[R]}L!==null&&(s[M]=L)}for(const M in b)s[M]=b[M]}}}return s}const tc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nl=new Set(tc),qb=o=>t=>typeof t=="string"&&t.startsWith(o),Xb=qb("--"),qP=qb("var(--"),aw=o=>qP(o)?XP.test(o.split("/*")[0].trim()):!1,XP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Kb=(o,t)=>t&&typeof o=="number"?t.transform(o):o,mr=(o,t,e)=>e>t?t:e<o?o:e,ec={test:o=>typeof o=="number",parse:parseFloat,transform:o=>o},Ah={...ec,transform:o=>mr(0,1,o)},wp={...ec,default:1},Zd=o=>({test:t=>typeof t=="string"&&t.endsWith(o)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${o}`}),Or=Zd("deg"),bs=Zd("%"),xt=Zd("px"),KP=Zd("vh"),YP=Zd("vw"),eS={...bs,parse:o=>bs.parse(o)/100,transform:o=>bs.transform(o*100)},QP={borderWidth:xt,borderTopWidth:xt,borderRightWidth:xt,borderBottomWidth:xt,borderLeftWidth:xt,borderRadius:xt,radius:xt,borderTopLeftRadius:xt,borderTopRightRadius:xt,borderBottomRightRadius:xt,borderBottomLeftRadius:xt,width:xt,maxWidth:xt,height:xt,maxHeight:xt,top:xt,right:xt,bottom:xt,left:xt,padding:xt,paddingTop:xt,paddingRight:xt,paddingBottom:xt,paddingLeft:xt,margin:xt,marginTop:xt,marginRight:xt,marginBottom:xt,marginLeft:xt,backgroundPositionX:xt,backgroundPositionY:xt},ZP={rotate:Or,rotateX:Or,rotateY:Or,rotateZ:Or,scale:wp,scaleX:wp,scaleY:wp,scaleZ:wp,skew:Or,skewX:Or,skewY:Or,distance:xt,translateX:xt,translateY:xt,translateZ:xt,x:xt,y:xt,z:xt,perspective:xt,transformPerspective:xt,opacity:Ah,originX:eS,originY:eS,originZ:xt},nS={...ec,transform:Math.round},lw={...QP,...ZP,zIndex:nS,size:xt,fillOpacity:Ah,strokeOpacity:Ah,numOctaves:nS},JP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tM=tc.length;function eM(o,t,e){let n="",s=!0;for(let a=0;a<tM;a++){const l=tc[a],c=o[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||e){const f=Kb(c,lw[l]);if(!d){s=!1;const m=JP[l]||l;n+=`${m}(${f}) `}e&&(t[l]=f)}}return n=n.trim(),e?n=e(t,s?"":n):s&&(n="none"),n}function uw(o,t,e){const{style:n,vars:s,transformOrigin:a}=o;let l=!1,c=!1;for(const d in t){const f=t[d];if(nl.has(d)){l=!0;continue}else if(Xb(d)){s[d]=f;continue}else{const m=Kb(f,lw[d]);d.startsWith("origin")?(c=!0,a[d]=m):n[d]=m}}if(t.transform||(l||e?n.transform=eM(t,o.transform,e):n.transform&&(n.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:m=0}=a;n.transformOrigin=`${d} ${f} ${m}`}}const nM={offset:"stroke-dashoffset",array:"stroke-dasharray"},iM={offset:"strokeDashoffset",array:"strokeDasharray"};function sM(o,t,e=1,n=0,s=!0){o.pathLength=1;const a=s?nM:iM;o[a.offset]=xt.transform(-n);const l=xt.transform(t),c=xt.transform(e);o[a.array]=`${l} ${c}`}function iS(o,t,e){return typeof o=="string"?o:xt.transform(t+e*o)}function rM(o,t,e){const n=iS(t,o.x,o.width),s=iS(e,o.y,o.height);return`${n} ${s}`}function cw(o,{attrX:t,attrY:e,attrScale:n,originX:s,originY:a,pathLength:l,pathSpacing:c=1,pathOffset:d=0,...f},m,g){if(uw(o,f,g),m){o.style.viewBox&&(o.attrs.viewBox=o.style.viewBox);return}o.attrs=o.style,o.style={};const{attrs:v,style:A,dimensions:S}=o;v.transform&&(S&&(A.transform=v.transform),delete v.transform),S&&(s!==void 0||a!==void 0||A.transform)&&(A.transformOrigin=rM(S,s!==void 0?s:.5,a!==void 0?a:.5)),t!==void 0&&(v.x=t),e!==void 0&&(v.y=e),n!==void 0&&(v.scale=n),l!==void 0&&sM(v,l,c,d,!1)}const hw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Yb=()=>({...hw(),attrs:{}}),dw=o=>typeof o=="string"&&o.toLowerCase()==="svg";function Qb(o,{style:t,vars:e},n,s){Object.assign(o.style,t,s&&s.getProjectionStyles(n));for(const a in e)o.style.setProperty(a,e[a])}const Zb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Jb(o,t,e,n){Qb(o,t,void 0,n);for(const s in t.attrs)o.setAttribute(Zb.has(s)?s:iw(s),t.attrs[s])}const rm={};function oM(o){Object.assign(rm,o)}function tE(o,{layout:t,layoutId:e}){return nl.has(o)||o.startsWith("origin")||(t||e!==void 0)&&(!!rm[o]||o==="opacity")}function fw(o,t,e){var n;const{style:s}=o,a={};for(const l in s)(pn(s[l])||t.style&&pn(t.style[l])||tE(l,o)||((n=e==null?void 0:e.getValue(l))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(a[l]=s[l]);return a}function eE(o,t,e){const n=fw(o,t,e);for(const s in o)if(pn(o[s])||pn(t[s])){const a=tc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=o[s]}return n}function aM(o,t){try{t.dimensions=typeof o.getBBox=="function"?o.getBBox():o.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const sS=["x","y","width","height","cx","cy","r"],lM={useVisualState:Wb({scrapeMotionValuesFromProps:eE,createRenderState:Yb,onUpdate:({props:o,prevProps:t,current:e,renderState:n,latestValues:s})=>{if(!e)return;let a=!!o.drag;if(!a){for(const c in s)if(nl.has(c)){a=!0;break}}if(!a)return;let l=!t;if(t)for(let c=0;c<sS.length;c++){const d=sS[c];o[d]!==t[d]&&(l=!0)}l&&ie.read(()=>{aM(e,n),ie.render(()=>{cw(n,s,dw(e.tagName),o.transformTemplate),Jb(e,n)})})}})},uM={useVisualState:Wb({scrapeMotionValuesFromProps:fw,createRenderState:hw})};function nE(o,t,e){for(const n in t)!pn(t[n])&&!tE(n,e)&&(o[n]=t[n])}function cM({transformTemplate:o},t){return et.useMemo(()=>{const e=hw();return uw(e,t,o),Object.assign({},e.vars,e.style)},[t])}function hM(o,t){const e=o.style||{},n={};return nE(n,e,o),Object.assign(n,cM(o,t)),n}function dM(o,t){const e={},n=hM(o,t);return o.drag&&o.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=o.drag===!0?"none":`pan-${o.drag==="x"?"y":"x"}`),o.tabIndex===void 0&&(o.onTap||o.onTapStart||o.whileTap)&&(e.tabIndex=0),e.style=n,e}function fM(o,t,e,n){const s=et.useMemo(()=>{const a=Yb();return cw(a,t,dw(n),o.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(o.style){const a={};nE(a,o.style,o),s.style={...a,...s.style}}return s}function pM(o=!1){return(e,n,s,{latestValues:a},l)=>{const d=(rw(e)?fM:dM)(n,a,l,e),f=PP(n,typeof e=="string",o),m=e!==et.Fragment?{...f,...d,ref:s}:{},{children:g}=n,v=et.useMemo(()=>pn(g)?g.get():g,[g]);return et.createElement(e,{...m,children:v})}}function mM(o,t){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...rw(n)?lM:uM,preloadedFeatures:o,useRender:pM(s),createVisualElement:t,Component:n};return jP(l)}}function iE(o,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==o.length)return!1;for(let n=0;n<e;n++)if(t[n]!==o[n])return!1;return!0}function Hm(o,t,e){const n=o.getProps();return ow(n,t,e!==void 0?e:n.custom,o)}const gM=tw(()=>window.ScrollTimeline!==void 0);class yM{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t,e){const n=this.animations.map(s=>{if(gM()&&s.attachTimeline)return s.attachTimeline(t);if(typeof e=="function")return e(s)});return()=>{n.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class vM extends yM{then(t,e){return Promise.all(this.animations).then(t).catch(e)}}function pw(o,t){return o?o[t]||o.default||o:void 0}const vv=2e4;function sE(o){let t=0;const e=50;let n=o.next(t);for(;!n.done&&t<vv;)t+=e,n=o.next(t);return t>=vv?1/0:t}function mw(o){return typeof o=="function"}function rS(o,t){o.timeline=t,o.onfinish=null}const gw=o=>Array.isArray(o)&&typeof o[0]=="number",wM={linearEasing:void 0};function AM(o,t){const e=tw(o);return()=>{var n;return(n=wM[t])!==null&&n!==void 0?n:e()}}const om=AM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rE=(o,t,e=10)=>{let n="";const s=Math.max(Math.round(t/e),2);for(let a=0;a<s;a++)n+=o(Qu(0,s-1,a))+", ";return`linear(${n.substring(0,n.length-2)})`};function oE(o){return!!(typeof o=="function"&&om()||!o||typeof o=="string"&&(o in wv||om())||gw(o)||Array.isArray(o)&&o.every(oE))}const Xc=([o,t,e,n])=>`cubic-bezier(${o}, ${t}, ${e}, ${n})`,wv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xc([0,.65,.55,1]),circOut:Xc([.55,0,1,.45]),backIn:Xc([.31,.01,.66,-.59]),backOut:Xc([.33,1.53,.69,.99])};function aE(o,t){if(o)return typeof o=="function"&&om()?rE(o,t):gw(o)?Xc(o):Array.isArray(o)?o.map(e=>aE(e,t)||wv.easeOut):wv[o]}const Ii={x:!1,y:!1};function lE(){return Ii.x||Ii.y}function xM(o,t,e){var n;if(o instanceof Element)return[o];if(typeof o=="string"){let s=document;const a=(n=void 0)!==null&&n!==void 0?n:s.querySelectorAll(o);return a?Array.from(a):[]}return Array.from(o)}function uE(o,t){const e=xM(o),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[e,s,()=>n.abort()]}function oS(o){return t=>{t.pointerType==="touch"||lE()||o(t)}}function SM(o,t,e={}){const[n,s,a]=uE(o,e),l=oS(c=>{const{target:d}=c,f=t(c);if(typeof f!="function"||!d)return;const m=oS(g=>{f(g),d.removeEventListener("pointerleave",m)});d.addEventListener("pointerleave",m,s)});return n.forEach(c=>{c.addEventListener("pointerenter",l,s)}),a}const cE=(o,t)=>t?o===t?!0:cE(o,t.parentElement):!1,yw=o=>o.pointerType==="mouse"?typeof o.button!="number"||o.button<=0:o.isPrimary!==!1,bM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EM(o){return bM.has(o.tagName)||o.tabIndex!==-1}const Kc=new WeakSet;function aS(o){return t=>{t.key==="Enter"&&o(t)}}function Zy(o,t){o.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const _M=(o,t)=>{const e=o.currentTarget;if(!e)return;const n=aS(()=>{if(Kc.has(e))return;Zy(e,"down");const s=aS(()=>{Zy(e,"up")}),a=()=>Zy(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function lS(o){return yw(o)&&!lE()}function CM(o,t,e={}){const[n,s,a]=uE(o,e),l=c=>{const d=c.currentTarget;if(!lS(c)||Kc.has(d))return;Kc.add(d);const f=t(c),m=(A,S)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),!(!lS(A)||!Kc.has(d))&&(Kc.delete(d),typeof f=="function"&&f(A,{success:S}))},g=A=>{m(A,e.useGlobalTarget||cE(d,A.target))},v=A=>{m(A,!1)};window.addEventListener("pointerup",g,s),window.addEventListener("pointercancel",v,s)};return n.forEach(c=>{!EM(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(e.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),c.addEventListener("focus",f=>_M(f,s),s)}),a}function TM(o){return o==="x"||o==="y"?Ii[o]?null:(Ii[o]=!0,()=>{Ii[o]=!1}):Ii.x||Ii.y?null:(Ii.x=Ii.y=!0,()=>{Ii.x=Ii.y=!1})}const hE=new Set(["width","height","top","left","right","bottom",...tc]);let Cp;function kM(){Cp=void 0}const Es={now:()=>(Cp===void 0&&Es.set(Qe.isProcessing||bP.useManualTiming?Qe.timestamp:performance.now()),Cp),set:o=>{Cp=o,queueMicrotask(kM)}};function vw(o,t){o.indexOf(t)===-1&&o.push(t)}function ww(o,t){const e=o.indexOf(t);e>-1&&o.splice(e,1)}class Aw{constructor(){this.subscriptions=[]}add(t){return vw(this.subscriptions,t),()=>ww(this.subscriptions,t)}notify(t,e,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,n);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function dE(o,t){return t?o*(1e3/t):0}const uS=30,PM=o=>!isNaN(parseFloat(o));class MM{constructor(t,e={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const a=Es.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Es.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=PM(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Aw);const n=this.events[t].add(e);return t==="change"?()=>{n(),ie.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Es.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>uS)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,uS);return dE(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xh(o,t){return new MM(o,t)}function RM(o,t,e){o.hasValue(t)?o.getValue(t).set(e):o.addValue(t,xh(e))}function LM(o,t){const e=Hm(o,t);let{transitionEnd:n={},transition:s={},...a}=e||{};a={...a,...n};for(const l in a){const c=$P(a[l]);RM(o,l,c)}}function DM(o){return!!(pn(o)&&o.add)}function Av(o,t){const e=o.getValue("willChange");if(DM(e))return e.add(t)}function fE(o){return o.props[Ub]}const pE=(o,t,e)=>(((1-3*e+3*t)*o+(3*e-6*t))*o+3*t)*o,IM=1e-7,NM=12;function FM(o,t,e,n,s){let a,l,c=0;do l=t+(e-t)/2,a=pE(l,n,s)-o,a>0?e=l:t=l;while(Math.abs(a)>IM&&++c<NM);return l}function Jd(o,t,e,n){if(o===t&&e===n)return ri;const s=a=>FM(a,0,1,o,e);return a=>a===0||a===1?a:pE(s(a),t,n)}const mE=o=>t=>t<=.5?o(2*t)/2:(2-o(2*(1-t)))/2,gE=o=>t=>1-o(1-t),yE=Jd(.33,1.53,.69,.99),xw=gE(yE),vE=mE(xw),wE=o=>(o*=2)<1?.5*xw(o):.5*(2-Math.pow(2,-10*(o-1))),Sw=o=>1-Math.sin(Math.acos(o)),AE=gE(Sw),xE=mE(Sw),SE=o=>/^0[^.\s]+$/u.test(o);function OM(o){return typeof o=="number"?o===0:o!==null?o==="none"||o==="0"||SE(o):!0}const fh=o=>Math.round(o*1e5)/1e5,bw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jM(o){return o==null}const VM=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ew=(o,t)=>e=>!!(typeof e=="string"&&VM.test(e)&&e.startsWith(o)||t&&!jM(e)&&Object.prototype.hasOwnProperty.call(e,t)),bE=(o,t,e)=>n=>{if(typeof n!="string")return n;const[s,a,l,c]=n.match(bw);return{[o]:parseFloat(s),[t]:parseFloat(a),[e]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},zM=o=>mr(0,255,o),Jy={...ec,transform:o=>Math.round(zM(o))},Wo={test:Ew("rgb","red"),parse:bE("red","green","blue"),transform:({red:o,green:t,blue:e,alpha:n=1})=>"rgba("+Jy.transform(o)+", "+Jy.transform(t)+", "+Jy.transform(e)+", "+fh(Ah.transform(n))+")"};function BM(o){let t="",e="",n="",s="";return o.length>5?(t=o.substring(1,3),e=o.substring(3,5),n=o.substring(5,7),s=o.substring(7,9)):(t=o.substring(1,2),e=o.substring(2,3),n=o.substring(3,4),s=o.substring(4,5),t+=t,e+=e,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const xv={test:Ew("#"),parse:BM,transform:Wo.transform},Ol={test:Ew("hsl","hue"),parse:bE("hue","saturation","lightness"),transform:({hue:o,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(o)+", "+bs.transform(fh(t))+", "+bs.transform(fh(e))+", "+fh(Ah.transform(n))+")"},hn={test:o=>Wo.test(o)||xv.test(o)||Ol.test(o),parse:o=>Wo.test(o)?Wo.parse(o):Ol.test(o)?Ol.parse(o):xv.parse(o),transform:o=>typeof o=="string"?o:o.hasOwnProperty("red")?Wo.transform(o):Ol.transform(o)},HM=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function UM(o){var t,e;return isNaN(o)&&typeof o=="string"&&(((t=o.match(bw))===null||t===void 0?void 0:t.length)||0)+(((e=o.match(HM))===null||e===void 0?void 0:e.length)||0)>0}const EE="number",_E="color",$M="var",GM="var(",cS="${}",WM=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sh(o){const t=o.toString(),e=[],n={color:[],number:[],var:[]},s=[];let a=0;const c=t.replace(WM,d=>(hn.test(d)?(n.color.push(a),s.push(_E),e.push(hn.parse(d))):d.startsWith(GM)?(n.var.push(a),s.push($M),e.push(d)):(n.number.push(a),s.push(EE),e.push(parseFloat(d))),++a,cS)).split(cS);return{values:e,split:c,indexes:n,types:s}}function CE(o){return Sh(o).values}function TE(o){const{split:t,types:e}=Sh(o),n=t.length;return s=>{let a="";for(let l=0;l<n;l++)if(a+=t[l],s[l]!==void 0){const c=e[l];c===EE?a+=fh(s[l]):c===_E?a+=hn.transform(s[l]):a+=s[l]}return a}}const qM=o=>typeof o=="number"?0:o;function XM(o){const t=CE(o);return TE(o)(t.map(qM))}const wo={test:UM,parse:CE,createTransformer:TE,getAnimatableNone:XM},KM=new Set(["brightness","contrast","saturate","opacity"]);function YM(o){const[t,e]=o.slice(0,-1).split("(");if(t==="drop-shadow")return o;const[n]=e.match(bw)||[];if(!n)return o;const s=e.replace(n,"");let a=KM.has(t)?1:0;return n!==e&&(a*=100),t+"("+a+s+")"}const QM=/\b([a-z-]*)\(.*?\)/gu,Sv={...wo,getAnimatableNone:o=>{const t=o.match(QM);return t?t.map(YM).join(" "):o}},ZM={...lw,color:hn,backgroundColor:hn,outlineColor:hn,fill:hn,stroke:hn,borderColor:hn,borderTopColor:hn,borderRightColor:hn,borderBottomColor:hn,borderLeftColor:hn,filter:Sv,WebkitFilter:Sv},_w=o=>ZM[o];function kE(o,t){let e=_w(o);return e!==Sv&&(e=wo),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const JM=new Set(["auto","none","0"]);function tR(o,t,e){let n=0,s;for(;n<o.length&&!s;){const a=o[n];typeof a=="string"&&!JM.has(a)&&Sh(a).values.length&&(s=o[n]),n++}if(s&&e)for(const a of t)o[a]=kE(e,s)}const hS=o=>o===ec||o===xt,dS=(o,t)=>parseFloat(o.split(", ")[t]),fS=(o,t)=>(e,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/u);if(s)return dS(s[1],t);{const a=n.match(/^matrix\((.+)\)$/u);return a?dS(a[1],o):0}},eR=new Set(["x","y","z"]),nR=tc.filter(o=>!eR.has(o));function iR(o){const t=[];return nR.forEach(e=>{const n=o.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const Ju={width:({x:o},{paddingLeft:t="0",paddingRight:e="0"})=>o.max-o.min-parseFloat(t)-parseFloat(e),height:({y:o},{paddingTop:t="0",paddingBottom:e="0"})=>o.max-o.min-parseFloat(t)-parseFloat(e),top:(o,{top:t})=>parseFloat(t),left:(o,{left:t})=>parseFloat(t),bottom:({y:o},{top:t})=>parseFloat(t)+(o.max-o.min),right:({x:o},{left:t})=>parseFloat(t)+(o.max-o.min),x:fS(4,13),y:fS(5,14)};Ju.translateX=Ju.x;Ju.translateY=Ju.y;const Qa=new Set;let bv=!1,Ev=!1;function PE(){if(Ev){const o=Array.from(Qa).filter(n=>n.needsMeasurement),t=new Set(o.map(n=>n.element)),e=new Map;t.forEach(n=>{const s=iR(n);s.length&&(e.set(n,s),n.render())}),o.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=e.get(n);s&&s.forEach(([a,l])=>{var c;(c=n.getValue(a))===null||c===void 0||c.set(l)})}),o.forEach(n=>n.measureEndState()),o.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Ev=!1,bv=!1,Qa.forEach(o=>o.complete()),Qa.clear()}function ME(){Qa.forEach(o=>{o.readKeyframes(),o.needsMeasurement&&(Ev=!0)})}function sR(){ME(),PE()}class Cw{constructor(t,e,n,s,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Qa.add(this),bv||(bv=!0,ie.read(ME),ie.resolveKeyframes(PE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:s}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const l=s==null?void 0:s.get(),c=t[t.length-1];if(l!==void 0)t[0]=l;else if(n&&e){const d=n.readValue(e,c);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=c),s&&l===void 0&&s.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Qa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Qa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const RE=o=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(o),rR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function oR(o){const t=rR.exec(o);if(!t)return[,];const[,e,n,s]=t;return[`--${e??n}`,s]}function LE(o,t,e=1){const[n,s]=oR(o);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const l=a.trim();return RE(l)?parseFloat(l):l}return aw(s)?LE(s,t,e+1):s}const DE=o=>t=>t.test(o),aR={test:o=>o==="auto",parse:o=>o},IE=[ec,xt,bs,Or,YP,KP,aR],pS=o=>IE.find(DE(o));class NE extends Cw{constructor(t,e,n,s,a){super(t,e,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let f=t[d];if(typeof f=="string"&&(f=f.trim(),aw(f))){const m=LE(f,e.current);m!==void 0&&(t[d]=m),d===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!hE.has(n)||t.length!==2)return;const[s,a]=t,l=pS(s),c=pS(a);if(l!==c)if(hS(l)&&hS(c))for(let d=0;d<t.length;d++){const f=t[d];typeof f=="string"&&(t[d]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let s=0;s<t.length;s++)OM(t[s])&&n.push(s);n.length&&tR(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ju[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var t;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const a=e.getValue(n);a&&a.jump(this.measuredOrigin,!1);const l=s.length-1,c=s[l];s[l]=Ju[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([d,f])=>{e.getValue(d).set(f)}),this.resolveNoneKeyframes()}}const mS=(o,t)=>t==="zIndex"?!1:!!(typeof o=="number"||Array.isArray(o)||typeof o=="string"&&(wo.test(o)||o==="0")&&!o.startsWith("url("));function lR(o){const t=o[0];if(o.length===1)return!0;for(let e=0;e<o.length;e++)if(o[e]!==t)return!0}function uR(o,t,e,n){const s=o[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=o[o.length-1],l=mS(s,t),c=mS(a,t);return!l||!c?!1:lR(o)||(e==="spring"||mw(e))&&n}const cR=o=>o!==null;function Um(o,{repeat:t,repeatType:e="loop"},n){const s=o.filter(cR),a=t&&e!=="loop"&&t%2===1?0:s.length-1;return!a||n===void 0?s[a]:n}const hR=40;class FE{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Es.now(),this.options={autoplay:t,delay:e,type:n,repeat:s,repeatDelay:a,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>hR?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&sR(),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=Es.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:a,delay:l,onComplete:c,onUpdate:d,isGenerator:f}=this.options;if(!f&&!uR(t,n,s,a))if(l)this.options.duration=0;else{d&&d(Um(t,this.options,e)),c&&c(),this.resolveFinishedPromise();return}const m=this.initPlayback(t,e);m!==!1&&(this._resolved={keyframes:t,finalKeyframe:e,...m},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const de=(o,t,e)=>o+(t-o)*e;function tv(o,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?o+(t-o)*6*e:e<1/2?t:e<2/3?o+(t-o)*(2/3-e)*6:o}function dR({hue:o,saturation:t,lightness:e,alpha:n}){o/=360,t/=100,e/=100;let s=0,a=0,l=0;if(!t)s=a=l=e;else{const c=e<.5?e*(1+t):e+t-e*t,d=2*e-c;s=tv(d,c,o+1/3),a=tv(d,c,o),l=tv(d,c,o-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:n}}function am(o,t){return e=>e>0?t:o}const ev=(o,t,e)=>{const n=o*o,s=e*(t*t-n)+n;return s<0?0:Math.sqrt(s)},fR=[xv,Wo,Ol],pR=o=>fR.find(t=>t.test(o));function gS(o){const t=pR(o);if(!t)return!1;let e=t.parse(o);return t===Ol&&(e=dR(e)),e}const yS=(o,t)=>{const e=gS(o),n=gS(t);if(!e||!n)return am(o,t);const s={...e};return a=>(s.red=ev(e.red,n.red,a),s.green=ev(e.green,n.green,a),s.blue=ev(e.blue,n.blue,a),s.alpha=de(e.alpha,n.alpha,a),Wo.transform(s))},mR=(o,t)=>e=>t(o(e)),tf=(...o)=>o.reduce(mR),_v=new Set(["none","hidden"]);function gR(o,t){return _v.has(o)?e=>e<=0?o:t:e=>e>=1?t:o}function yR(o,t){return e=>de(o,t,e)}function Tw(o){return typeof o=="number"?yR:typeof o=="string"?aw(o)?am:hn.test(o)?yS:AR:Array.isArray(o)?OE:typeof o=="object"?hn.test(o)?yS:vR:am}function OE(o,t){const e=[...o],n=e.length,s=o.map((a,l)=>Tw(a)(a,t[l]));return a=>{for(let l=0;l<n;l++)e[l]=s[l](a);return e}}function vR(o,t){const e={...o,...t},n={};for(const s in e)o[s]!==void 0&&t[s]!==void 0&&(n[s]=Tw(o[s])(o[s],t[s]));return s=>{for(const a in n)e[a]=n[a](s);return e}}function wR(o,t){var e;const n=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const l=t.types[a],c=o.indexes[l][s[l]],d=(e=o.values[c])!==null&&e!==void 0?e:0;n[a]=d,s[l]++}return n}const AR=(o,t)=>{const e=wo.createTransformer(t),n=Sh(o),s=Sh(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?_v.has(o)&&!s.values.length||_v.has(t)&&!n.values.length?gR(o,t):tf(OE(wR(n,s),s.values),e):am(o,t)};function jE(o,t,e){return typeof o=="number"&&typeof t=="number"&&typeof e=="number"?de(o,t,e):Tw(o)(o,t)}const xR=5;function VE(o,t,e){const n=Math.max(t-xR,0);return dE(e-o(n),t-n)}const ge={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},nv=.001;function SR({duration:o=ge.duration,bounce:t=ge.bounce,velocity:e=ge.velocity,mass:n=ge.mass}){let s,a,l=1-t;l=mr(ge.minDamping,ge.maxDamping,l),o=mr(ge.minDuration,ge.maxDuration,dr(o)),l<1?(s=f=>{const m=f*l,g=m*o,v=m-e,A=Cv(f,l),S=Math.exp(-g);return nv-v/A*S},a=f=>{const g=f*l*o,v=g*e+e,A=Math.pow(l,2)*Math.pow(f,2)*o,S=Math.exp(-g),b=Cv(Math.pow(f,2),l);return(-s(f)+nv>0?-1:1)*((v-A)*S)/b}):(s=f=>{const m=Math.exp(-f*o),g=(f-e)*o+1;return-nv+m*g},a=f=>{const m=Math.exp(-f*o),g=(e-f)*(o*o);return m*g});const c=5/o,d=ER(s,a,c);if(o=hr(o),isNaN(d))return{stiffness:ge.stiffness,damping:ge.damping,duration:o};{const f=Math.pow(d,2)*n;return{stiffness:f,damping:l*2*Math.sqrt(n*f),duration:o}}}const bR=12;function ER(o,t,e){let n=e;for(let s=1;s<bR;s++)n=n-o(n)/t(n);return n}function Cv(o,t){return o*Math.sqrt(1-t*t)}const _R=["duration","bounce"],CR=["stiffness","damping","mass"];function vS(o,t){return t.some(e=>o[e]!==void 0)}function TR(o){let t={velocity:ge.velocity,stiffness:ge.stiffness,damping:ge.damping,mass:ge.mass,isResolvedFromDuration:!1,...o};if(!vS(o,CR)&&vS(o,_R))if(o.visualDuration){const e=o.visualDuration,n=2*Math.PI/(e*1.2),s=n*n,a=2*mr(.05,1,1-(o.bounce||0))*Math.sqrt(s);t={...t,mass:ge.mass,stiffness:s,damping:a}}else{const e=SR(o);t={...t,...e,mass:ge.mass},t.isResolvedFromDuration=!0}return t}function zE(o=ge.visualDuration,t=ge.bounce){const e=typeof o!="object"?{visualDuration:o,keyframes:[0,1],bounce:t}:o;let{restSpeed:n,restDelta:s}=e;const a=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],c={done:!1,value:a},{stiffness:d,damping:f,mass:m,duration:g,velocity:v,isResolvedFromDuration:A}=TR({...e,velocity:-dr(e.velocity||0)}),S=v||0,b=f/(2*Math.sqrt(d*m)),T=l-a,k=dr(Math.sqrt(d/m)),M=Math.abs(T)<5;n||(n=M?ge.restSpeed.granular:ge.restSpeed.default),s||(s=M?ge.restDelta.granular:ge.restDelta.default);let L;if(b<1){const I=Cv(k,b);L=j=>{const B=Math.exp(-b*k*j);return l-B*((S+b*k*T)/I*Math.sin(I*j)+T*Math.cos(I*j))}}else if(b===1)L=I=>l-Math.exp(-k*I)*(T+(S+k*T)*I);else{const I=k*Math.sqrt(b*b-1);L=j=>{const B=Math.exp(-b*k*j),U=Math.min(I*j,300);return l-B*((S+b*k*T)*Math.sinh(U)+I*T*Math.cosh(U))/I}}const R={calculatedDuration:A&&g||null,next:I=>{const j=L(I);if(A)c.done=I>=g;else{let B=0;b<1&&(B=I===0?hr(S):VE(L,I,j));const U=Math.abs(B)<=n,Q=Math.abs(l-j)<=s;c.done=U&&Q}return c.value=c.done?l:j,c},toString:()=>{const I=Math.min(sE(R),vv),j=rE(B=>R.next(I*B).value,I,30);return I+"ms "+j}};return R}function wS({keyframes:o,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:d,restDelta:f=.5,restSpeed:m}){const g=o[0],v={done:!1,value:g},A=U=>c!==void 0&&U<c||d!==void 0&&U>d,S=U=>c===void 0?d:d===void 0||Math.abs(c-U)<Math.abs(d-U)?c:d;let b=e*t;const T=g+b,k=l===void 0?T:l(T);k!==T&&(b=k-g);const M=U=>-b*Math.exp(-U/n),L=U=>k+M(U),R=U=>{const Q=M(U),ct=L(U);v.done=Math.abs(Q)<=f,v.value=v.done?k:ct};let I,j;const B=U=>{A(v.value)&&(I=U,j=zE({keyframes:[v.value,S(v.value)],velocity:VE(L,U,v.value),damping:s,stiffness:a,restDelta:f,restSpeed:m}))};return B(0),{calculatedDuration:null,next:U=>{let Q=!1;return!j&&I===void 0&&(Q=!0,R(U),B(U)),I!==void 0&&U>=I?j.next(U-I):(!Q&&R(U),v)}}}const kR=Jd(.42,0,1,1),PR=Jd(0,0,.58,1),BE=Jd(.42,0,.58,1),MR=o=>Array.isArray(o)&&typeof o[0]!="number",RR={linear:ri,easeIn:kR,easeInOut:BE,easeOut:PR,circIn:Sw,circInOut:xE,circOut:AE,backIn:xw,backInOut:vE,backOut:yE,anticipate:wE},AS=o=>{if(gw(o)){jb(o.length===4);const[t,e,n,s]=o;return Jd(t,e,n,s)}else if(typeof o=="string")return RR[o];return o};function LR(o,t,e){const n=[],s=e||jE,a=o.length-1;for(let l=0;l<a;l++){let c=s(o[l],o[l+1]);if(t){const d=Array.isArray(t)?t[l]||ri:t;c=tf(d,c)}n.push(c)}return n}function DR(o,t,{clamp:e=!0,ease:n,mixer:s}={}){const a=o.length;if(jb(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=o[0]===o[1];o[0]>o[a-1]&&(o=[...o].reverse(),t=[...t].reverse());const c=LR(t,n,s),d=c.length,f=m=>{if(l&&m<o[0])return t[0];let g=0;if(d>1)for(;g<o.length-2&&!(m<o[g+1]);g++);const v=Qu(o[g],o[g+1],m);return c[g](v)};return e?m=>f(mr(o[0],o[a-1],m)):f}function IR(o,t){const e=o[o.length-1];for(let n=1;n<=t;n++){const s=Qu(0,t,n);o.push(de(e,1,s))}}function NR(o){const t=[0];return IR(t,o.length-1),t}function FR(o,t){return o.map(e=>e*t)}function OR(o,t){return o.map(()=>t||BE).splice(0,o.length-1)}function lm({duration:o=300,keyframes:t,times:e,ease:n="easeInOut"}){const s=MR(n)?n.map(AS):AS(n),a={done:!1,value:t[0]},l=FR(e&&e.length===t.length?e:NR(t),o),c=DR(l,t,{ease:Array.isArray(s)?s:OR(t,s)});return{calculatedDuration:o,next:d=>(a.value=c(d),a.done=d>=o,a)}}const jR=o=>{const t=({timestamp:e})=>o(e);return{start:()=>ie.update(t,!0),stop:()=>vo(t),now:()=>Qe.isProcessing?Qe.timestamp:Es.now()}},VR={decay:wS,inertia:wS,tween:lm,keyframes:lm,spring:zE},zR=o=>o/100;class kw extends FE{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:e,motionValue:n,element:s,keyframes:a}=this.options,l=(s==null?void 0:s.KeyframeResolver)||Cw,c=(d,f)=>this.onKeyframesResolved(d,f);this.resolver=new l(a,c,e,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=this.options,c=mw(e)?e:VR[e]||lm;let d,f;c!==lm&&typeof t[0]!="number"&&(d=tf(zR,jE(t[0],t[1])),t=[0,100]);const m=c({...this.options,keyframes:t});a==="mirror"&&(f=c({...this.options,keyframes:[...t].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=sE(m));const{calculatedDuration:g}=m,v=g+s,A=v*(n+1)-s;return{generator:m,mirroredGenerator:f,mapPercentToKeyframes:d,calculatedDuration:g,resolvedDuration:v,totalDuration:A}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,e=!1){const{resolved:n}=this;if(!n){const{keyframes:U}=this.options;return{done:!0,value:U[U.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:d,calculatedDuration:f,totalDuration:m,resolvedDuration:g}=n;if(this.startTime===null)return a.next(0);const{delay:v,repeat:A,repeatType:S,repeatDelay:b,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-m/this.speed,this.startTime)),e?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const k=this.currentTime-v*(this.speed>=0?1:-1),M=this.speed>=0?k<0:k>m;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let L=this.currentTime,R=a;if(A){const U=Math.min(this.currentTime,m)/g;let Q=Math.floor(U),ct=U%1;!ct&&U>=1&&(ct=1),ct===1&&Q--,Q=Math.min(Q,A+1),!!(Q%2)&&(S==="reverse"?(ct=1-ct,b&&(ct-=b/g)):S==="mirror"&&(R=l)),L=mr(0,1,ct)*g}const I=M?{done:!1,value:d[0]}:R.next(L);c&&(I.value=c(I.value));let{done:j}=I;!M&&f!==null&&(j=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return B&&s!==void 0&&(I.value=Um(d,this.options,s)),T&&T(I.value),B&&this.finish(),I}get duration(){const{resolved:t}=this;return t?dr(t.calculatedDuration):0}get time(){return dr(this.currentTime)}set time(t){t=hr(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=dr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=jR,onPlay:e,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),e&&e();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const BR=new Set(["opacity","clipPath","filter","transform"]);function HR(o,t,e,{delay:n=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:c="easeInOut",times:d}={}){const f={[t]:e};d&&(f.offset=d);const m=aE(c,s);return Array.isArray(m)&&(f.easing=m),o.animate(f,{delay:n,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const UR=tw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),um=10,$R=2e4;function GR(o){return mw(o.type)||o.type==="spring"||!oE(o.ease)}function WR(o,t){const e=new kw({...t,keyframes:o,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:o[0]};const s=[];let a=0;for(;!n.done&&a<$R;)n=e.sample(a),s.push(n.value),a+=um;return{times:void 0,keyframes:s,duration:a-um,ease:"linear"}}const HE={anticipate:wE,backInOut:vE,circInOut:xE};function qR(o){return o in HE}class xS extends FE{constructor(t){super(t);const{name:e,motionValue:n,element:s,keyframes:a}=this.options;this.resolver=new NE(a,(l,c)=>this.onKeyframesResolved(l,c),e,n,s),this.resolver.scheduleResolve()}initPlayback(t,e){let{duration:n=300,times:s,ease:a,type:l,motionValue:c,name:d,startTime:f}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof a=="string"&&om()&&qR(a)&&(a=HE[a]),GR(this.options)){const{onComplete:g,onUpdate:v,motionValue:A,element:S,...b}=this.options,T=WR(t,b);t=T.keyframes,t.length===1&&(t[1]=t[0]),n=T.duration,s=T.times,a=T.ease,l="keyframes"}const m=HR(c.owner.current,d,t,{...this.options,duration:n,times:s,ease:a});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(rS(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;c.set(Um(t,this.options,e)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:n,times:s,type:l,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return dr(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return dr(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.currentTime=hr(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:e}=this;if(!e)return ri;const{animation:n}=e;rS(n,t)}return ri}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.playState==="finished"&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:n,duration:s,type:a,ease:l,times:c}=t;if(e.playState==="idle"||e.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:m,onComplete:g,element:v,...A}=this.options,S=new kw({...A,keyframes:n,duration:s,type:a,ease:l,times:c,isGenerator:!0}),b=hr(this.time);f.setWithVelocity(S.sample(b-um).value,S.sample(b).value,um)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:a,damping:l,type:c}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return UR()&&n&&BR.has(n)&&!d&&!f&&!s&&a!=="mirror"&&l!==0&&c!=="inertia"}}const XR={type:"spring",stiffness:500,damping:25,restSpeed:10},KR=o=>({type:"spring",stiffness:550,damping:o===0?2*Math.sqrt(550):30,restSpeed:10}),YR={type:"keyframes",duration:.8},QR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ZR=(o,{keyframes:t})=>t.length>2?YR:nl.has(o)?o.startsWith("scale")?KR(t[1]):XR:QR;function JR({when:o,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:c,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const Pw=(o,t,e,n={},s,a)=>l=>{const c=pw(n,o)||{},d=c.delay||n.delay||0;let{elapsed:f=0}=n;f=f-hr(d);let m={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-f,onUpdate:v=>{t.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:o,motionValue:t,element:a?void 0:s};JR(c)||(m={...m,...ZR(o,m)}),m.duration&&(m.duration=hr(m.duration)),m.repeatDelay&&(m.repeatDelay=hr(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!a&&t.get()!==void 0){const v=Um(m.keyframes,c);if(v!==void 0)return ie.update(()=>{m.onUpdate(v),m.onComplete()}),new vM([])}return!a&&xS.supports(m)?new xS(m):new kw(m)};function t2({protectedKeys:o,needsAnimating:t},e){const n=o.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function UE(o,t,{delay:e=0,transitionOverride:n,type:s}={}){var a;let{transition:l=o.getDefaultTransition(),transitionEnd:c,...d}=t;n&&(l=n);const f=[],m=s&&o.animationState&&o.animationState.getState()[s];for(const g in d){const v=o.getValue(g,(a=o.latestValues[g])!==null&&a!==void 0?a:null),A=d[g];if(A===void 0||m&&t2(m,g))continue;const S={delay:e,...pw(l||{},g)};let b=!1;if(window.MotionHandoffAnimation){const k=fE(o);if(k){const M=window.MotionHandoffAnimation(k,g,ie);M!==null&&(S.startTime=M,b=!0)}}Av(o,g),v.start(Pw(g,v,A,o.shouldReduceMotion&&hE.has(g)?{type:!1}:S,o,b));const T=v.animation;T&&f.push(T)}return c&&Promise.all(f).then(()=>{ie.update(()=>{c&&LM(o,c)})}),f}function Tv(o,t,e={}){var n;const s=Hm(o,t,e.type==="exit"?(n=o.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:a=o.getDefaultTransition()||{}}=s||{};e.transitionOverride&&(a=e.transitionOverride);const l=s?()=>Promise.all(UE(o,s,e)):()=>Promise.resolve(),c=o.variantChildren&&o.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:v}=a;return e2(o,t,m+f,g,v,e)}:()=>Promise.resolve(),{when:d}=a;if(d){const[f,m]=d==="beforeChildren"?[l,c]:[c,l];return f().then(()=>m())}else return Promise.all([l(),c(e.delay)])}function e2(o,t,e=0,n=0,s=1,a){const l=[],c=(o.variantChildren.size-1)*n,d=s===1?(f=0)=>f*n:(f=0)=>c-f*n;return Array.from(o.variantChildren).sort(n2).forEach((f,m)=>{f.notify("AnimationStart",t),l.push(Tv(f,t,{...a,delay:e+d(m)}).then(()=>f.notify("AnimationComplete",t)))}),Promise.all(l)}function n2(o,t){return o.sortNodePosition(t)}function i2(o,t,e={}){o.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>Tv(o,a,e));n=Promise.all(s)}else if(typeof t=="string")n=Tv(o,t,e);else{const s=typeof t=="function"?Hm(o,t,e.custom):t;n=Promise.all(UE(o,s,e))}return n.then(()=>{o.notify("AnimationComplete",t)})}const s2=nw.length;function $E(o){if(!o)return;if(!o.isControllingVariants){const e=o.parent?$E(o.parent)||{}:{};return o.props.initial!==void 0&&(e.initial=o.props.initial),e}const t={};for(let e=0;e<s2;e++){const n=nw[e],s=o.props[n];(wh(s)||s===!1)&&(t[n]=s)}return t}const r2=[...ew].reverse(),o2=ew.length;function a2(o){return t=>Promise.all(t.map(({animation:e,options:n})=>i2(o,e,n)))}function l2(o){let t=a2(o),e=SS(),n=!0;const s=d=>(f,m)=>{var g;const v=Hm(o,m,d==="exit"?(g=o.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(v){const{transition:A,transitionEnd:S,...b}=v;f={...f,...b,...S}}return f};function a(d){t=d(o)}function l(d){const{props:f}=o,m=$E(o.parent)||{},g=[],v=new Set;let A={},S=1/0;for(let T=0;T<o2;T++){const k=r2[T],M=e[k],L=f[k]!==void 0?f[k]:m[k],R=wh(L),I=k===d?M.isActive:null;I===!1&&(S=T);let j=L===m[k]&&L!==f[k]&&R;if(j&&n&&o.manuallyAnimateOnMount&&(j=!1),M.protectedKeys={...A},!M.isActive&&I===null||!L&&!M.prevProp||zm(L)||typeof L=="boolean")continue;const B=u2(M.prevProp,L);let U=B||k===d&&M.isActive&&!j&&R||T>S&&R,Q=!1;const ct=Array.isArray(L)?L:[L];let ot=ct.reduce(s(k),{});I===!1&&(ot={});const{prevResolvedValues:Rt={}}=M,Ft={...Rt,...ot},_t=K=>{U=!0,v.has(K)&&(Q=!0,v.delete(K)),M.needsAnimating[K]=!0;const q=o.getValue(K);q&&(q.liveStyle=!1)};for(const K in Ft){const q=ot[K],lt=Rt[K];if(A.hasOwnProperty(K))continue;let J=!1;yv(q)&&yv(lt)?J=!iE(q,lt):J=q!==lt,J?q!=null?_t(K):v.add(K):q!==void 0&&v.has(K)?_t(K):M.protectedKeys[K]=!0}M.prevProp=L,M.prevResolvedValues=ot,M.isActive&&(A={...A,...ot}),n&&o.blockInitialAnimation&&(U=!1),U&&(!(j&&B)||Q)&&g.push(...ct.map(K=>({animation:K,options:{type:k}})))}if(v.size){const T={};v.forEach(k=>{const M=o.getBaseTarget(k),L=o.getValue(k);L&&(L.liveStyle=!0),T[k]=M??null}),g.push({animation:T})}let b=!!g.length;return n&&(f.initial===!1||f.initial===f.animate)&&!o.manuallyAnimateOnMount&&(b=!1),n=!1,b?t(g):Promise.resolve()}function c(d,f){var m;if(e[d].isActive===f)return Promise.resolve();(m=o.variantChildren)===null||m===void 0||m.forEach(v=>{var A;return(A=v.animationState)===null||A===void 0?void 0:A.setActive(d,f)}),e[d].isActive=f;const g=l(d);for(const v in e)e[v].protectedKeys={};return g}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>e,reset:()=>{e=SS(),n=!0}}}function u2(o,t){return typeof t=="string"?t!==o:Array.isArray(t)?!iE(t,o):!1}function jo(o=!1){return{isActive:o,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SS(){return{animate:jo(!0),whileInView:jo(),whileHover:jo(),whileTap:jo(),whileDrag:jo(),whileFocus:jo(),exit:jo()}}class bo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class c2 extends bo{constructor(t){super(t),t.animationState||(t.animationState=l2(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();zm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let h2=0;class d2 extends bo{constructor(){super(...arguments),this.id=h2++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const f2={animation:{Feature:c2},exit:{Feature:d2}};function bh(o,t,e,n={passive:!0}){return o.addEventListener(t,e,n),()=>o.removeEventListener(t,e)}function ef(o){return{point:{x:o.pageX,y:o.pageY}}}const p2=o=>t=>yw(t)&&o(t,ef(t));function ph(o,t,e,n){return bh(o,t,p2(e),n)}const bS=(o,t)=>Math.abs(o-t);function m2(o,t){const e=bS(o.x,t.x),n=bS(o.y,t.y);return Math.sqrt(e**2+n**2)}class GE{constructor(t,e,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=sv(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,A=m2(g.offset,{x:0,y:0})>=3;if(!v&&!A)return;const{point:S}=g,{timestamp:b}=Qe;this.history.push({...S,timestamp:b});const{onStart:T,onMove:k}=this.handlers;v||(T&&T(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=iv(v,this.transformPagePoint),ie.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:A,onSessionEnd:S,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=sv(g.type==="pointercancel"?this.lastMoveEventInfo:iv(v,this.transformPagePoint),this.history);this.startEvent&&A&&A(g,T),S&&S(g,T)},!yw(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=n,this.contextWindow=s||window;const l=ef(t),c=iv(l,this.transformPagePoint),{point:d}=c,{timestamp:f}=Qe;this.history=[{...d,timestamp:f}];const{onSessionStart:m}=e;m&&m(t,sv(c,this.history)),this.removeListeners=tf(ph(this.contextWindow,"pointermove",this.handlePointerMove),ph(this.contextWindow,"pointerup",this.handlePointerUp),ph(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),vo(this.updatePoint)}}function iv(o,t){return t?{point:t(o.point)}:o}function ES(o,t){return{x:o.x-t.x,y:o.y-t.y}}function sv({point:o},t){return{point:o,delta:ES(o,WE(t)),offset:ES(o,g2(t)),velocity:y2(t,.1)}}function g2(o){return o[0]}function WE(o){return o[o.length-1]}function y2(o,t){if(o.length<2)return{x:0,y:0};let e=o.length-1,n=null;const s=WE(o);for(;e>=0&&(n=o[e],!(s.timestamp-n.timestamp>hr(t)));)e--;if(!n)return{x:0,y:0};const a=dr(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const qE=1e-4,v2=1-qE,w2=1+qE,XE=.01,A2=0-XE,x2=0+XE;function ai(o){return o.max-o.min}function S2(o,t,e){return Math.abs(o-t)<=e}function _S(o,t,e,n=.5){o.origin=n,o.originPoint=de(t.min,t.max,o.origin),o.scale=ai(e)/ai(t),o.translate=de(e.min,e.max,o.origin)-o.originPoint,(o.scale>=v2&&o.scale<=w2||isNaN(o.scale))&&(o.scale=1),(o.translate>=A2&&o.translate<=x2||isNaN(o.translate))&&(o.translate=0)}function mh(o,t,e,n){_S(o.x,t.x,e.x,n?n.originX:void 0),_S(o.y,t.y,e.y,n?n.originY:void 0)}function CS(o,t,e){o.min=e.min+t.min,o.max=o.min+ai(t)}function b2(o,t,e){CS(o.x,t.x,e.x),CS(o.y,t.y,e.y)}function TS(o,t,e){o.min=t.min-e.min,o.max=o.min+ai(t)}function gh(o,t,e){TS(o.x,t.x,e.x),TS(o.y,t.y,e.y)}function E2(o,{min:t,max:e},n){return t!==void 0&&o<t?o=n?de(t,o,n.min):Math.max(o,t):e!==void 0&&o>e&&(o=n?de(e,o,n.max):Math.min(o,e)),o}function kS(o,t,e){return{min:t!==void 0?o.min+t:void 0,max:e!==void 0?o.max+e-(o.max-o.min):void 0}}function _2(o,{top:t,left:e,bottom:n,right:s}){return{x:kS(o.x,e,s),y:kS(o.y,t,n)}}function PS(o,t){let e=t.min-o.min,n=t.max-o.max;return t.max-t.min<o.max-o.min&&([e,n]=[n,e]),{min:e,max:n}}function C2(o,t){return{x:PS(o.x,t.x),y:PS(o.y,t.y)}}function T2(o,t){let e=.5;const n=ai(o),s=ai(t);return s>n?e=Qu(t.min,t.max-n,o.min):n>s&&(e=Qu(o.min,o.max-s,t.min)),mr(0,1,e)}function k2(o,t){const e={};return t.min!==void 0&&(e.min=t.min-o.min),t.max!==void 0&&(e.max=t.max-o.min),e}const kv=.35;function P2(o=kv){return o===!1?o=0:o===!0&&(o=kv),{x:MS(o,"left","right"),y:MS(o,"top","bottom")}}function MS(o,t,e){return{min:RS(o,t),max:RS(o,e)}}function RS(o,t){return typeof o=="number"?o:o[t]||0}const LS=()=>({translate:0,scale:1,origin:0,originPoint:0}),jl=()=>({x:LS(),y:LS()}),DS=()=>({min:0,max:0}),xe=()=>({x:DS(),y:DS()});function gi(o){return[o("x"),o("y")]}function KE({top:o,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:o,max:n}}}function M2({x:o,y:t}){return{top:t.min,right:o.max,bottom:t.max,left:o.min}}function R2(o,t){if(!t)return o;const e=t({x:o.left,y:o.top}),n=t({x:o.right,y:o.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function rv(o){return o===void 0||o===1}function Pv({scale:o,scaleX:t,scaleY:e}){return!rv(o)||!rv(t)||!rv(e)}function Vo(o){return Pv(o)||YE(o)||o.z||o.rotate||o.rotateX||o.rotateY||o.skewX||o.skewY}function YE(o){return IS(o.x)||IS(o.y)}function IS(o){return o&&o!=="0%"}function cm(o,t,e){const n=o-e,s=t*n;return e+s}function NS(o,t,e,n,s){return s!==void 0&&(o=cm(o,s,n)),cm(o,e,n)+t}function Mv(o,t=0,e=1,n,s){o.min=NS(o.min,t,e,n,s),o.max=NS(o.max,t,e,n,s)}function QE(o,{x:t,y:e}){Mv(o.x,t.translate,t.scale,t.originPoint),Mv(o.y,e.translate,e.scale,e.originPoint)}const FS=.999999999999,OS=1.0000000000001;function L2(o,t,e,n=!1){const s=e.length;if(!s)return;t.x=t.y=1;let a,l;for(let c=0;c<s;c++){a=e[c],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&zl(o,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,QE(o,l)),n&&Vo(a.latestValues)&&zl(o,a.latestValues))}t.x<OS&&t.x>FS&&(t.x=1),t.y<OS&&t.y>FS&&(t.y=1)}function Vl(o,t){o.min=o.min+t,o.max=o.max+t}function jS(o,t,e,n,s=.5){const a=de(o.min,o.max,s);Mv(o,t,e,a,n)}function zl(o,t){jS(o.x,t.x,t.scaleX,t.scale,t.originX),jS(o.y,t.y,t.scaleY,t.scale,t.originY)}function ZE(o,t){return KE(R2(o.getBoundingClientRect(),t))}function D2(o,t,e){const n=ZE(o,e),{scroll:s}=t;return s&&(Vl(n.x,s.offset.x),Vl(n.y,s.offset.y)),n}const JE=({current:o})=>o?o.ownerDocument.defaultView:null,I2=new WeakMap;class N2{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xe(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(ef(m).point)},a=(m,g)=>{const{drag:v,dragPropagation:A,onDragStart:S}=this.getProps();if(v&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=TM(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gi(T=>{let k=this.getAxisMotionValue(T).get()||0;if(bs.test(k)){const{projection:M}=this.visualElement;if(M&&M.layout){const L=M.layout.layoutBox[T];L&&(k=ai(L)*(parseFloat(k)/100))}}this.originPoint[T]=k}),S&&ie.postRender(()=>S(m,g)),Av(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(m,g)=>{const{dragPropagation:v,dragDirectionLock:A,onDirectionLock:S,onDrag:b}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:T}=g;if(A&&this.currentDirection===null){this.currentDirection=F2(T),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,T),this.updateAxis("y",g.point,T),this.visualElement.render(),b&&b(m,g)},c=(m,g)=>this.stop(m,g),d=()=>gi(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new GE(t,{onSessionStart:s,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:JE(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=e;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&ie.postRender(()=>a(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!Ap(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=E2(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;e&&Fl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=_2(s.layoutBox,e):this.constraints=!1,this.elastic=P2(n),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&gi(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=k2(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Fl(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=D2(n,s.root,this.visualElement.getTransformPagePoint());let l=C2(s.layout.layoutBox,a);if(e){const c=e(M2(l));this.hasMutatedConstraints=!!c,c&&(l=KE(c))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=gi(m=>{if(!Ap(m,e,this.currentDirection))return;let g=d&&d[m]||{};l&&(g={min:0,max:0});const v=s?200:1e6,A=s?40:1e7,S={type:"inertia",velocity:n?t[m]:0,bounceStiffness:v,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(m,S)});return Promise.all(f).then(c)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return Av(this.visualElement,t),n.start(Pw(t,n,0,e,this.visualElement,!1))}stopAnimation(){gi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gi(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[e];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){gi(e=>{const{drag:n}=this.getProps();if(!Ap(e,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(e);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[e];a.set(t[e]-de(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Fl(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};gi(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();s[l]=T2({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),gi(l=>{if(!Ap(l,t,null))return;const c=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];c.set(de(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;I2.set(this.visualElement,this);const t=this.visualElement.current,e=ph(t,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Fl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ie.read(n);const l=bh(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(gi(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())}));return()=>{l(),e(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=kv,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function Ap(o,t,e){return(t===!0||t===o)&&(e===null||e===o)}function F2(o,t=10){let e=null;return Math.abs(o.y)>t?e="y":Math.abs(o.x)>t&&(e="x"),e}class O2 extends bo{constructor(t){super(t),this.removeGroupControls=ri,this.removeListeners=ri,this.controls=new N2(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ri}unmount(){this.removeGroupControls(),this.removeListeners()}}const VS=o=>(t,e)=>{o&&ie.postRender(()=>o(t,e))};class j2 extends bo{constructor(){super(...arguments),this.removePointerDownListener=ri}onPointerDown(t){this.session=new GE(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JE(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:VS(t),onStart:VS(e),onMove:n,onEnd:(a,l)=>{delete this.session,s&&ie.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=ph(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zS(o,t){return t.max===t.min?0:o/(t.max-t.min)*100}const Hc={correct:(o,t)=>{if(!t.target)return o;if(typeof o=="string")if(xt.test(o))o=parseFloat(o);else return o;const e=zS(o,t.target.x),n=zS(o,t.target.y);return`${e}% ${n}%`}},V2={correct:(o,{treeScale:t,projectionDelta:e})=>{const n=o,s=wo.parse(o);if(s.length>5)return n;const a=wo.createTransformer(o),l=typeof s[0]!="number"?1:0,c=e.x.scale*t.x,d=e.y.scale*t.y;s[0+l]/=c,s[1+l]/=d;const f=de(c,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),a(s)}};class z2 extends et.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;oM(B2),a&&(e.group&&e.group.add(a),n&&n.register&&s&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Tp.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:a}=this.props,l=n.projection;return l&&(l.isPresent=a,s||t.layoutDependency!==e||e===void 0?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||ie.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),sw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function t_(o){const[t,e]=Fb(),n=et.useContext(Y0);return z.jsx(z2,{...o,layoutGroup:n,switchLayoutGroup:et.useContext($b),isPresent:t,safeToRemove:e})}const B2={borderRadius:{...Hc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hc,borderTopRightRadius:Hc,borderBottomLeftRadius:Hc,borderBottomRightRadius:Hc,boxShadow:V2};function H2(o,t,e){const n=pn(o)?o:xh(o);return n.start(Pw("",n,t,e)),n.animation}function U2(o){return o instanceof SVGElement&&o.tagName!=="svg"}const $2=(o,t)=>o.depth-t.depth;class G2{constructor(){this.children=[],this.isDirty=!1}add(t){vw(this.children,t),this.isDirty=!0}remove(t){ww(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort($2),this.isDirty=!1,this.children.forEach(t)}}function W2(o,t){const e=Es.now(),n=({timestamp:s})=>{const a=s-e;a>=t&&(vo(n),o(a-t))};return ie.read(n,!0),()=>vo(n)}const e_=["TopLeft","TopRight","BottomLeft","BottomRight"],q2=e_.length,BS=o=>typeof o=="string"?parseFloat(o):o,HS=o=>typeof o=="number"||xt.test(o);function X2(o,t,e,n,s,a){s?(o.opacity=de(0,e.opacity!==void 0?e.opacity:1,K2(n)),o.opacityExit=de(t.opacity!==void 0?t.opacity:1,0,Y2(n))):a&&(o.opacity=de(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,n));for(let l=0;l<q2;l++){const c=`border${e_[l]}Radius`;let d=US(t,c),f=US(e,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||HS(d)===HS(f)?(o[c]=Math.max(de(BS(d),BS(f),n),0),(bs.test(f)||bs.test(d))&&(o[c]+="%")):o[c]=f}(t.rotate||e.rotate)&&(o.rotate=de(t.rotate||0,e.rotate||0,n))}function US(o,t){return o[t]!==void 0?o[t]:o.borderRadius}const K2=n_(0,.5,AE),Y2=n_(.5,.95,ri);function n_(o,t,e){return n=>n<o?0:n>t?1:e(Qu(o,t,n))}function $S(o,t){o.min=t.min,o.max=t.max}function pi(o,t){$S(o.x,t.x),$S(o.y,t.y)}function GS(o,t){o.translate=t.translate,o.scale=t.scale,o.originPoint=t.originPoint,o.origin=t.origin}function WS(o,t,e,n,s){return o-=t,o=cm(o,1/e,n),s!==void 0&&(o=cm(o,1/s,n)),o}function Q2(o,t=0,e=1,n=.5,s,a=o,l=o){if(bs.test(t)&&(t=parseFloat(t),t=de(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=de(a.min,a.max,n);o===a&&(c-=t),o.min=WS(o.min,t,e,c,s),o.max=WS(o.max,t,e,c,s)}function qS(o,t,[e,n,s],a,l){Q2(o,t[e],t[n],t[s],t.scale,a,l)}const Z2=["x","scaleX","originX"],J2=["y","scaleY","originY"];function XS(o,t,e,n){qS(o.x,t,Z2,e?e.x:void 0,n?n.x:void 0),qS(o.y,t,J2,e?e.y:void 0,n?n.y:void 0)}function KS(o){return o.translate===0&&o.scale===1}function i_(o){return KS(o.x)&&KS(o.y)}function YS(o,t){return o.min===t.min&&o.max===t.max}function tL(o,t){return YS(o.x,t.x)&&YS(o.y,t.y)}function QS(o,t){return Math.round(o.min)===Math.round(t.min)&&Math.round(o.max)===Math.round(t.max)}function s_(o,t){return QS(o.x,t.x)&&QS(o.y,t.y)}function ZS(o){return ai(o.x)/ai(o.y)}function JS(o,t){return o.translate===t.translate&&o.scale===t.scale&&o.originPoint===t.originPoint}class eL{constructor(){this.members=[]}add(t){vw(this.members,t),t.scheduleRender()}remove(t){if(ww(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let n;for(let s=e;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function nL(o,t,e){let n="";const s=o.x.translate/t.x,a=o.y.translate/t.y,l=(e==null?void 0:e.z)||0;if((s||a||l)&&(n=`translate3d(${s}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:m,rotateX:g,rotateY:v,skewX:A,skewY:S}=e;f&&(n=`perspective(${f}px) ${n}`),m&&(n+=`rotate(${m}deg) `),g&&(n+=`rotateX(${g}deg) `),v&&(n+=`rotateY(${v}deg) `),A&&(n+=`skewX(${A}deg) `),S&&(n+=`skewY(${S}deg) `)}const c=o.x.scale*t.x,d=o.y.scale*t.y;return(c!==1||d!==1)&&(n+=`scale(${c}, ${d})`),n||"none"}const zo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Yc=typeof window<"u"&&window.MotionDebug!==void 0,ov=["","X","Y","Z"],iL={visibility:"hidden"},tb=1e3;let sL=0;function av(o,t,e,n){const{latestValues:s}=t;s[o]&&(e[o]=s[o],t.setStaticValue(o,0),n&&(n[o]=0))}function r_(o){if(o.hasCheckedOptimisedAppear=!0,o.root===o)return;const{visualElement:t}=o.options;if(!t)return;const e=fE(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:a}=o.options;window.MotionCancelOptimisedAnimation(e,"transform",ie,!(s||a))}const{parent:n}=o;n&&!n.hasCheckedOptimisedAppear&&r_(n)}function o_({attachResizeListener:o,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(l={},c=t==null?void 0:t()){this.id=sL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yc&&(zo.totalNodes=zo.resolvedTargetDeltas=zo.recalculatedProjection=0),this.nodes.forEach(aL),this.nodes.forEach(dL),this.nodes.forEach(fL),this.nodes.forEach(lL),Yc&&window.MotionDebug.record(zo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new G2)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Aw),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=U2(l),this.instance=l;const{layoutId:d,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(f||d)&&(this.isLayoutDirty=!0),o){let g;const v=()=>this.root.updateBlockedByResize=!1;o(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=W2(v,250),Tp.hasAnimatedSinceResize&&(Tp.hasAnimatedSinceResize=!1,this.nodes.forEach(nb))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:A,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||vL,{onLayoutAnimationStart:T,onLayoutAnimationComplete:k}=m.getProps(),M=!this.targetLayout||!s_(this.targetLayout,S)||A,L=!v&&A;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||L||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,L);const R={...pw(b,"layout"),onPlay:T,onComplete:k};(m.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else v||nb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(pL),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&r_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eb);return}this.isUpdating||this.nodes.forEach(cL),this.isUpdating=!1,this.nodes.forEach(hL),this.nodes.forEach(rL),this.nodes.forEach(oL),this.clearAllSnapshots();const c=Es.now();Qe.delta=mr(0,1e3/60,c-Qe.timestamp),Qe.timestamp=c,Qe.isProcessing=!0,Qy.update.process(Qe),Qy.preRender.process(Qe),Qy.render.process(Qe),Qe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(uL),this.sharedNodes.forEach(mL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!i_(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;l&&(c||Vo(this.latestValues)||m)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),wL(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return xe();const d=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(AL))){const{scroll:m}=this.root;m&&(Vl(d.x,m.offset.x),Vl(d.y,m.offset.y))}return d}removeElementScroll(l){var c;const d=xe();if(pi(d,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return d;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:g,options:v}=m;m!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&pi(d,l),Vl(d.x,g.offset.x),Vl(d.y,g.offset.y))}return d}applyTransform(l,c=!1){const d=xe();pi(d,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&zl(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Vo(m.latestValues)&&zl(d,m.latestValues)}return Vo(this.latestValues)&&zl(d,this.latestValues),d}removeTransform(l){const c=xe();pi(c,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Vo(f.latestValues))continue;Pv(f.latestValues)&&f.updateSnapshot();const m=xe(),g=f.measurePageBox();pi(m,g),XS(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Vo(this.latestValues)&&XS(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Qe.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xe(),this.relativeTargetOrigin=xe(),gh(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),pi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xe(),this.targetWithTransforms=xe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),b2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pi(this.target,this.layout.layoutBox),QE(this.target,this.targetDelta)):pi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xe(),this.relativeTargetOrigin=xe(),gh(this.relativeTargetOrigin,this.target,A.target),pi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yc&&zo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Pv(this.parent.latestValues)||YE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Qe.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;pi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,A=this.treeScale.y;L2(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=xe());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(GS(this.prevProjectionDelta.x,this.projectionDelta.x),GS(this.prevProjectionDelta.y,this.projectionDelta.y)),mh(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==A||!JS(this.projectionDelta.x,this.prevProjectionDelta.x)||!JS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),Yc&&zo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jl(),this.projectionDelta=jl(),this.projectionDeltaWithTransform=jl()}setAnimationOrigin(l,c=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},g=jl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=xe(),A=d?d.source:void 0,S=this.layout?this.layout.source:void 0,b=A!==S,T=this.getStack(),k=!T||T.members.length<=1,M=!!(b&&!k&&this.options.crossfade===!0&&!this.path.some(yL));this.animationProgress=0;let L;this.mixTargetDelta=R=>{const I=R/1e3;ib(g.x,l.x,I),ib(g.y,l.y,I),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gh(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gL(this.relativeTarget,this.relativeTargetOrigin,v,I),L&&tL(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=xe()),pi(L,this.relativeTarget)),b&&(this.animationValues=m,X2(m,f,this.latestValues,I,M,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ie.update(()=>{Tp.hasAnimatedSinceResize=!0,this.currentAnimation=H2(0,tb,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:m}=l;if(!(!c||!d||!f)){if(this!==l&&this.layout&&f&&a_(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||xe();const g=ai(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+g;const v=ai(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+v}pi(c,d),zl(c,m),mh(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new eL),this.sharedNodes.get(l).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&av("z",l,f,this.animationValues);for(let m=0;m<ov.length;m++)av(`rotate${ov[m]}`,l,f,this.animationValues),av(`skew${ov[m]}`,l,f,this.animationValues);l.render();for(const m in f)l.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);l.scheduleRender()}getProjectionStyles(l){var c,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return iL;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=_p(l==null?void 0:l.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=_p(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Vo(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=nL(this.projectionDeltaWithTransform,this.treeScale,v),m&&(f.transform=m(v,f.transform));const{x:A,y:S}=this.projectionDelta;f.transformOrigin=`${A.origin*100}% ${S.origin*100}% 0`,g.animationValues?f.opacity=g===this?(d=(c=v.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const b in rm){if(v[b]===void 0)continue;const{correct:T,applyTo:k}=rm[b],M=f.transform==="none"?v[b]:T(v[b],g);if(k){const L=k.length;for(let R=0;R<L;R++)f[k[R]]=M}else f[b]=M}return this.options.layoutId&&(f.pointerEvents=g===this?_p(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(eb),this.root.sharedNodes.clear()}}}function rL(o){o.updateLayout()}function oL(o){var t;const e=((t=o.resumeFrom)===null||t===void 0?void 0:t.snapshot)||o.snapshot;if(o.isLead()&&o.layout&&e&&o.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=o.layout,{animationType:a}=o.options,l=e.source!==o.layout.source;a==="size"?gi(g=>{const v=l?e.measuredBox[g]:e.layoutBox[g],A=ai(v);v.min=n[g].min,v.max=v.min+A}):a_(a,e.layoutBox,n)&&gi(g=>{const v=l?e.measuredBox[g]:e.layoutBox[g],A=ai(n[g]);v.max=v.min+A,o.relativeTarget&&!o.currentAnimation&&(o.isProjectionDirty=!0,o.relativeTarget[g].max=o.relativeTarget[g].min+A)});const c=jl();mh(c,n,e.layoutBox);const d=jl();l?mh(d,o.applyTransform(s,!0),e.measuredBox):mh(d,n,e.layoutBox);const f=!i_(c);let m=!1;if(!o.resumeFrom){const g=o.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:A}=g;if(v&&A){const S=xe();gh(S,e.layoutBox,v.layoutBox);const b=xe();gh(b,n,A.layoutBox),s_(S,b)||(m=!0),g.options.layoutRoot&&(o.relativeTarget=b,o.relativeTargetOrigin=S,o.relativeParent=g)}}}o.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(o.isLead()){const{onExitComplete:n}=o.options;n&&n()}o.options.transition=void 0}function aL(o){Yc&&zo.totalNodes++,o.parent&&(o.isProjecting()||(o.isProjectionDirty=o.parent.isProjectionDirty),o.isSharedProjectionDirty||(o.isSharedProjectionDirty=!!(o.isProjectionDirty||o.parent.isProjectionDirty||o.parent.isSharedProjectionDirty)),o.isTransformDirty||(o.isTransformDirty=o.parent.isTransformDirty))}function lL(o){o.isProjectionDirty=o.isSharedProjectionDirty=o.isTransformDirty=!1}function uL(o){o.clearSnapshot()}function eb(o){o.clearMeasurements()}function cL(o){o.isLayoutDirty=!1}function hL(o){const{visualElement:t}=o.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),o.resetTransform()}function nb(o){o.finishAnimation(),o.targetDelta=o.relativeTarget=o.target=void 0,o.isProjectionDirty=!0}function dL(o){o.resolveTargetDelta()}function fL(o){o.calcProjection()}function pL(o){o.resetSkewAndRotation()}function mL(o){o.removeLeadSnapshot()}function ib(o,t,e){o.translate=de(t.translate,0,e),o.scale=de(t.scale,1,e),o.origin=t.origin,o.originPoint=t.originPoint}function sb(o,t,e,n){o.min=de(t.min,e.min,n),o.max=de(t.max,e.max,n)}function gL(o,t,e,n){sb(o.x,t.x,e.x,n),sb(o.y,t.y,e.y,n)}function yL(o){return o.animationValues&&o.animationValues.opacityExit!==void 0}const vL={duration:.45,ease:[.4,0,.1,1]},rb=o=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(o),ob=rb("applewebkit/")&&!rb("chrome/")?Math.round:ri;function ab(o){o.min=ob(o.min),o.max=ob(o.max)}function wL(o){ab(o.x),ab(o.y)}function a_(o,t,e){return o==="position"||o==="preserve-aspect"&&!S2(ZS(t),ZS(e),.2)}function AL(o){var t;return o!==o.root&&((t=o.scroll)===null||t===void 0?void 0:t.wasRoot)}const xL=o_({attachResizeListener:(o,t)=>bh(o,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),lv={current:void 0},l_=o_({measureScroll:o=>({x:o.scrollLeft,y:o.scrollTop}),defaultParent:()=>{if(!lv.current){const o=new xL({});o.mount(window),o.setOptions({layoutScroll:!0}),lv.current=o}return lv.current},resetTransform:(o,t)=>{o.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:o=>window.getComputedStyle(o).position==="fixed"}),SL={pan:{Feature:j2},drag:{Feature:O2,ProjectionNode:l_,MeasureLayout:t_}};function lb(o,t,e){const{props:n}=o;o.animationState&&n.whileHover&&o.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,a=n[s];a&&ie.postRender(()=>a(t,ef(t)))}class bL extends bo{mount(){const{current:t}=this.node;t&&(this.unmount=SM(t,e=>(lb(this.node,e,"Start"),n=>lb(this.node,n,"End"))))}unmount(){}}class EL extends bo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tf(bh(this.node.current,"focus",()=>this.onFocus()),bh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ub(o,t,e){const{props:n}=o;o.animationState&&n.whileTap&&o.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),a=n[s];a&&ie.postRender(()=>a(t,ef(t)))}class _L extends bo{mount(){const{current:t}=this.node;t&&(this.unmount=CM(t,e=>(ub(this.node,e,"Start"),(n,{success:s})=>ub(this.node,n,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Rv=new WeakMap,uv=new WeakMap,CL=o=>{const t=Rv.get(o.target);t&&t(o)},TL=o=>{o.forEach(CL)};function kL({root:o,...t}){const e=o||document;uv.has(e)||uv.set(e,{});const n=uv.get(e),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(TL,{root:o,...t})),n[s]}function PL(o,t,e){const n=kL(t);return Rv.set(o,e),n.observe(o),()=>{Rv.delete(o),n.unobserve(o)}}const ML={some:0,all:1};class RL extends bo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:s="some",once:a}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:ML[s]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=f?m:g;v&&v(d)};return PL(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(LL(t,e))&&this.startObserver()}unmount(){}}function LL({viewport:o={}},{viewport:t={}}={}){return e=>o[e]!==t[e]}const DL={inView:{Feature:RL},tap:{Feature:_L},focus:{Feature:EL},hover:{Feature:bL}},IL={layout:{ProjectionNode:l_,MeasureLayout:t_}},Lv={current:null},u_={current:!1};function NL(){if(u_.current=!0,!!J0)if(window.matchMedia){const o=window.matchMedia("(prefers-reduced-motion)"),t=()=>Lv.current=o.matches;o.addListener(t),t()}else Lv.current=!1}const FL=[...IE,hn,wo],OL=o=>FL.find(DE(o)),cb=new WeakMap;function jL(o,t,e){for(const n in t){const s=t[n],a=e[n];if(pn(s))o.addValue(n,s);else if(pn(a))o.addValue(n,xh(s,{owner:o}));else if(a!==s)if(o.hasValue(n)){const l=o.getValue(n);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=o.getStaticValue(n);o.addValue(n,xh(l!==void 0?l:s,{owner:o}))}}for(const n in e)t[n]===void 0&&o.removeValue(n);return t}const hb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VL{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Cw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=Es.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,ie.render(this.render,!1,!0))};const{latestValues:d,renderState:f,onUpdate:m}=l;this.onUpdate=m,this.latestValues=d,this.baseTarget={...d},this.initialValues=e.initial?{...d}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Bm(e),this.isVariantNode=Hb(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(e,{},this);for(const A in v){const S=v[A];d[A]!==void 0&&pn(S)&&S.set(d[A],!1)}}mount(t){this.current=t,cb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),u_.current||NL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Lv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){cb.delete(this.current),this.projection&&this.projection.unmount(),vo(this.notifyUpdate),vo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=nl.has(t),s=e.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&ie.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=e.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),a(),l&&l(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Zu){const e=Zu[t];if(!e)continue;const{isEnabled:n,Feature:s}=e;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<hb.length;n++){const s=hb[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=t[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=jL(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=xh(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){var n;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(RE(s)||SE(s))?s=parseFloat(s):!OL(s)&&wo.test(e)&&(s=kE(t,e)),this.setBaseTarget(t,pn(s)?s.get():s)),pn(s)?s.get():s}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const l=ow(this.props,n,(e=this.presenceContext)===null||e===void 0?void 0:e.custom);l&&(s=l[t])}if(n&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!pn(a)?a:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new Aw),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class c_ extends VL{constructor(){super(...arguments),this.KeyframeResolver=NE}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;pn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function zL(o){return window.getComputedStyle(o)}class BL extends c_{constructor(){super(...arguments),this.type="html",this.renderInstance=Qb}readValueFromInstance(t,e){if(nl.has(e)){const n=_w(e);return n&&n.default||0}else{const n=zL(t),s=(Xb(e)?n.getPropertyValue(e):n[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return ZE(t,e)}build(t,e,n){uw(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return fw(t,e,n)}}class HL extends c_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xe}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(nl.has(e)){const n=_w(e);return n&&n.default||0}return e=Zb.has(e)?e:iw(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return eE(t,e,n)}build(t,e,n){cw(t,e,this.isSVGTag,n.transformTemplate)}renderInstance(t,e,n,s){Jb(t,e,n,s)}mount(t){this.isSVGTag=dw(t.tagName),super.mount(t)}}const UL=(o,t)=>rw(o)?new HL(t):new BL(t,{allowProjection:o!==et.Fragment}),$L=mM({...f2,...DL,...SL,...IL},UL),Ul=MP($L),db=o=>{let t;const e=new Set,n=(f,m)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const v=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(A=>A(t,v))}},s=()=>t,c={setState:n,getState:s,getInitialState:()=>d,subscribe:f=>(e.add(f),()=>e.delete(f))},d=t=o(n,s,c);return c},GL=(o=>o?db(o):db),WL=o=>o;function qL(o,t=WL){const e=qc.useSyncExternalStore(o.subscribe,qc.useCallback(()=>t(o.getState()),[o,t]),qc.useCallback(()=>t(o.getInitialState()),[o,t]));return qc.useDebugValue(e),e}const XL=o=>{const t=GL(o),e=n=>qL(t,n);return Object.assign(e,t),e},KL=(o=>XL);function YL(o,t){let e;try{e=o()}catch{return}return{getItem:s=>{var a;const l=d=>d===null?null:JSON.parse(d,void 0),c=(a=e.getItem(s))!=null?a:null;return c instanceof Promise?c.then(l):l(c)},setItem:(s,a)=>e.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>e.removeItem(s)}}const Dv=o=>t=>{try{const e=o(t);return e instanceof Promise?e:{then(n){return Dv(n)(e)},catch(n){return this}}}catch(e){return{then(n){return this},catch(n){return Dv(n)(e)}}}},QL=(o,t)=>(e,n,s)=>{let a={storage:YL(()=>localStorage),partialize:T=>T,version:0,merge:(T,k)=>({...k,...T}),...t},l=!1,c=0;const d=new Set,f=new Set;let m=a.storage;if(!m)return o((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),e(...T)},n,s);const g=()=>{const T=a.partialize({...n()});return m.setItem(a.name,{state:T,version:a.version})},v=s.setState;s.setState=(T,k)=>(v(T,k),g());const A=o((...T)=>(e(...T),g()),n,s);s.getInitialState=()=>A;let S;const b=()=>{var T,k;if(!m)return;const M=++c;l=!1,d.forEach(R=>{var I;return R((I=n())!=null?I:A)});const L=((k=a.onRehydrateStorage)==null?void 0:k.call(a,(T=n())!=null?T:A))||void 0;return Dv(m.getItem.bind(m))(a.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==a.version){if(a.migrate){const I=a.migrate(R.state,R.version);return I instanceof Promise?I.then(j=>[!0,j]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var I;if(M!==c)return;const[j,B]=R;if(S=a.merge(B,(I=n())!=null?I:A),e(S,!0),j)return g()}).then(()=>{M===c&&(L==null||L(S,void 0),S=n(),l=!0,f.forEach(R=>R(S)))}).catch(R=>{M===c&&(L==null||L(void 0,R))})};return s.persist={setOptions:T=>{a={...a,...T},T.storage&&(m=T.storage)},clearStorage:()=>{m==null||m.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>l,onHydrate:T=>(d.add(T),()=>{d.delete(T)}),onFinishHydration:T=>(f.add(T),()=>{f.delete(T)})},a.skipHydration||b(),S||A},ZL=QL,Mw=KL()(ZL(o=>({quizzes:[],settings:{apiKey:"",model:"minimax/minimax-m2:free",numQuestions:5,difficulty:"medium"},isDarkMode:!0,addQuiz:t=>o(e=>({quizzes:[t,...e.quizzes]})),removeQuiz:t=>o(e=>({quizzes:e.quizzes.filter(n=>n.id!==t)})),updateSettings:t=>o(e=>({settings:{...e.settings,...t}})),toggleDarkMode:()=>o(t=>({isDarkMode:!t.isDarkMode}))}),{name:"quizflow-storage"}));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),h_=(...o)=>o.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=et.forwardRef(({color:o="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:l,...c},d)=>et.createElement("svg",{ref:d,...tD,width:t,height:t,stroke:o,strokeWidth:n?Number(e)*24/Number(t):e,className:h_("lucide",s),...c},[...l.map(([f,m])=>et.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(o,t)=>{const e=et.forwardRef(({className:n,...s},a)=>et.createElement(eD,{ref:a,iconNode:t,className:h_(`lucide-${JL(o)}`,n),...s}));return e.displayName=`${o}`,e};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=Ie("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=Ie("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=Ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=Ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=Ie("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=Ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=Ie("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=Ie("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=Ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=Ie("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=Ie("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=Ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=Ie("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=Ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=Ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var yh={};yh.d=(o,t)=>{for(var e in t)yh.o(t,e)&&!yh.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})};yh.o=(o,t)=>Object.prototype.hasOwnProperty.call(o,t);var Et=globalThis.pdfjsLib={};yh.d(Et,{AbortException:()=>Ao,AnnotationEditorLayer:()=>U0,AnnotationEditorParamsType:()=>jt,AnnotationEditorType:()=>kt,AnnotationEditorUIManager:()=>Ja,AnnotationLayer:()=>dN,AnnotationMode:()=>Vr,ColorPicker:()=>gm,DOMSVGFactory:()=>Vw,DrawLayer:()=>W0,FeatureTest:()=>En,GlobalWorkerOptions:()=>cr,ImageKind:()=>kp,InvalidPDFException:()=>Fv,MissingPDFException:()=>Eh,OPS:()=>Fi,OutputScale:()=>jv,PDFDataRangeTransport:()=>fC,PDFDateString:()=>Nw,PDFWorker:()=>Gl,PasswordResponses:()=>xD,PermissionFlag:()=>AD,PixelsPerInch:()=>xo,RenderingCancelledException:()=>Dw,TextLayer:()=>_h,TouchManager:()=>pm,UnexpectedResponseException:()=>hm,Util:()=>mt,VerbosityLevel:()=>$m,XfaLayer:()=>mC,build:()=>WI,createValidAbsoluteUrl:()=>_D,fetchData:()=>Xm,getDocument:()=>OI,getFilenameFromUrl:()=>ID,getPdfFilenameFromUrl:()=>ND,getXfaPageViewport:()=>FD,isDataScheme:()=>Km,isPdfFile:()=>Iw,noContextMenu:()=>Yi,normalizeUnicode:()=>RD,setLayerDimensions:()=>Za,shadow:()=>Nt,stopEvent:()=>si,version:()=>GI});const fn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),d_=[1,0,0,1,0,0],Nv=[.001,0,0,.001,0,0],vD=1e7,cv=1.35,ni={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Vr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},wD="pdfjs_internal_editor_",kt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},jt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},AD={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},sn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},kp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Pe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Uc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},$m={ERRORS:0,WARNINGS:1,INFOS:5},Fi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},xD={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Gm=$m.WARNINGS;function SD(o){Number.isInteger(o)&&(Gm=o)}function bD(){return Gm}function Wm(o){Gm>=$m.INFOS&&console.log(`Info: ${o}`)}function Pt(o){Gm>=$m.WARNINGS&&console.log(`Warning: ${o}`)}function Qt(o){throw new Error(o)}function _e(o,t){o||Qt(t)}function ED(o){switch(o==null?void 0:o.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _D(o,t=null,e=null){if(!o)return null;try{if(e&&typeof o=="string"){if(e.addDefaultProtocol&&o.startsWith("www.")){const s=o.match(/\./g);(s==null?void 0:s.length)>=2&&(o=`http://${o}`)}if(e.tryConvertEncoding)try{o=MD(o)}catch{}}const n=t?new URL(o,t):new URL(o);if(ED(n))return n}catch{}return null}function Nt(o,t,e,n=!1){return Object.defineProperty(o,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Eo=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class mb extends Eo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class hv extends Eo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Fv extends Eo{constructor(t){super(t,"InvalidPDFException")}}class Eh extends Eo{constructor(t){super(t,"MissingPDFException")}}class hm extends Eo{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class CD extends Eo{constructor(t){super(t,"FormatError")}}class Ao extends Eo{constructor(t){super(t,"AbortException")}}function f_(o){(typeof o!="object"||(o==null?void 0:o.length)===void 0)&&Qt("Invalid argument for bytesToString");const t=o.length,e=8192;if(t<e)return String.fromCharCode.apply(null,o);const n=[];for(let s=0;s<t;s+=e){const a=Math.min(s+e,t),l=o.subarray(s,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function qm(o){typeof o!="string"&&Qt("Invalid argument for stringToBytes");const t=o.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=o.charCodeAt(n)&255;return e}function TD(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function Rw(o){const t=Object.create(null);for(const[e,n]of o)t[e]=n;return t}function kD(){const o=new Uint8Array(4);return o[0]=1,new Uint32Array(o.buffer,0,1)[0]===1}function PD(){try{return new Function(""),!0}catch{return!1}}class En{static get isLittleEndian(){return Nt(this,"isLittleEndian",kD())}static get isEvalSupported(){return Nt(this,"isEvalSupported",PD())}static get isOffscreenCanvasSupported(){return Nt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Nt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Nt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Nt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Nt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const dv=Array.from(Array(256).keys(),o=>o.toString(16).padStart(2,"0"));var fr,Pp,Ov;class mt{static makeHexColor(t,e,n){return`#${dv[t]}${dv[e]}${dv[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[n,s]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,a=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[s,a]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),a=this.applyTransform([t[0],t[3]],e),l=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],s[0],a[0],l[0]),Math.min(n[1],s[1],a[1],l[1]),Math.max(n[0],s[0],a[0],l[0]),Math.max(n[1],s[1],a[1],l[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],l=t[2]*e[1]+t[3]*e[3],c=(n+l)/2,d=Math.sqrt((n+l)**2-4*(n*l-a*s))/2,f=c+d||1,m=c-d||1;return[Math.sqrt(f),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>l?null:[n,a,s,l]}static bezierBoundingBox(t,e,n,s,a,l,c,d,f){return f?(f[0]=Math.min(f[0],t,c),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,c),f[3]=Math.max(f[3],e,d)):f=[Math.min(t,c),Math.min(e,d),Math.max(t,c),Math.max(e,d)],C(this,fr,Ov).call(this,t,n,a,c,e,s,l,d,3*(-t+3*(n-a)+c),6*(t-2*n+a),3*(n-t),f),C(this,fr,Ov).call(this,t,n,a,c,e,s,l,d,3*(-e+3*(s-l)+d),6*(e-2*s+l),3*(s-e),f),f}}fr=new WeakSet,Pp=function(t,e,n,s,a,l,c,d,f,m){if(f<=0||f>=1)return;const g=1-f,v=f*f,A=v*f,S=g*(g*(g*t+3*f*e)+3*v*n)+A*s,b=g*(g*(g*a+3*f*l)+3*v*c)+A*d;m[0]=Math.min(m[0],S),m[1]=Math.min(m[1],b),m[2]=Math.max(m[2],S),m[3]=Math.max(m[3],b)},Ov=function(t,e,n,s,a,l,c,d,f,m,g,v){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&C(this,fr,Pp).call(this,t,e,n,s,a,l,c,d,-g/m,v);return}const A=m**2-4*g*f;if(A<0)return;const S=Math.sqrt(A),b=2*f;C(this,fr,Pp).call(this,t,e,n,s,a,l,c,d,(-m+S)/b,v),C(this,fr,Pp).call(this,t,e,n,s,a,l,c,d,(-m-S)/b,v)},_(mt,fr);function MD(o){return decodeURIComponent(escape(o))}let fv=null,gb=null;function RD(o){return fv||(fv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,gb=new Map([["","t"]])),o.replaceAll(fv,(t,e,n)=>e?e.normalize("NFKC"):gb.get(n))}function LD(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const o=new Uint8Array(32);return crypto.getRandomValues(o),f_(o)}const Lw="pdfjs_internal_id_";function DD(o){return Uint8Array.prototype.toBase64?o.toBase64():btoa(f_(o))}typeof Promise.try!="function"&&(Promise.try=function(o,...t){return new Promise(e=>{e(o(...t))})});const Is="http://www.w3.org/2000/svg",$o=class $o{};wt($o,"CSS",96),wt($o,"PDF",72),wt($o,"PDF_TO_CSS_UNITS",$o.CSS/$o.PDF);let xo=$o;async function Xm(o,t="text"){if(Qc(o,document.baseURI)){const e=await fetch(o);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",o,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class nf{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:a=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=a,this.offsetY=l,n*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let m,g,v,A;switch(s%=360,s<0&&(s+=360),s){case 180:m=-1,g=0,v=0,A=1;break;case 90:m=0,g=1,v=1,A=0;break;case 270:m=0,g=-1,v=-1,A=0;break;case 0:m=1,g=0,v=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(v=-v,A=-A);let S,b,T,k;m===0?(S=Math.abs(f-t[1])*n+a,b=Math.abs(d-t[0])*n+l,T=(t[3]-t[1])*n,k=(t[2]-t[0])*n):(S=Math.abs(d-t[0])*n+a,b=Math.abs(f-t[1])*n+l,T=(t[2]-t[0])*n,k=(t[3]-t[1])*n),this.transform=[m*n,g*n,v*n,A*n,S-m*n*d-v*n*f,b-g*n*d-A*n*f],this.width=T,this.height=k}get rawDims(){const{userUnit:t,viewBox:e}=this,n=e.map(s=>s*t);return Nt(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new nf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}convertToViewportPoint(t,e){return mt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=mt.applyTransform([t[0],t[1]],this.transform),n=mt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return mt.applyInverseTransform([t,e],this.transform)}}class Dw extends Eo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Km(o){const t=o.length;let e=0;for(;e<t&&o[e].trim()==="";)e++;return o.substring(e,e+5).toLowerCase()==="data:"}function Iw(o){return typeof o=="string"&&/\.pdf$/i.test(o)}function ID(o){return[o]=o.split(/[#?]/,1),o.substring(o.lastIndexOf("/")+1)}function ND(o,t="document.pdf"){if(typeof o!="string")return t;if(Km(o))return Pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(o);let a=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(a&&(a=a[0],a.includes("%")))try{a=n.exec(decodeURIComponent(a))[0]}catch{}return a||t}class yb{constructor(){wt(this,"started",Object.create(null));wt(this,"times",[])}time(t){t in this.started&&Pt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Pt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-s}ms
`);return t.join("")}}function Qc(o,t){try{const{protocol:e}=t?new URL(o,t):new URL(o);return e==="http:"||e==="https:"}catch{return!1}}function Yi(o){o.preventDefault()}function si(o){o.preventDefault(),o.stopPropagation()}var Th;class Nw{static toDateObject(t){if(!t||typeof t!="string")return null;u(this,Th)||x(this,Th,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=u(this,Th).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(l+=m,c+=g):f==="+"&&(l-=m,c-=g),new Date(Date.UTC(n,s,a,l,c,d))}}Th=new WeakMap,_(Nw,Th);function FD(o,{scale:t=1,rotation:e=0}){const{width:n,height:s}=o.attributes.style,a=[0,0,parseInt(n),parseInt(s)];return new nf({viewBox:a,userUnit:1,scale:t,rotation:e})}function Fw(o){if(o.startsWith("#")){const t=parseInt(o.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return o.startsWith("rgb(")?o.slice(4,-1).split(",").map(t=>parseInt(t)):o.startsWith("rgba(")?o.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Pt(`Not a valid color format: "${o}"`),[0,0,0])}function OD(o){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of o.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;o.set(e,Fw(n))}t.remove()}function oe(o){const{a:t,b:e,c:n,d:s,e:a,f:l}=o.getTransform();return[t,e,n,s,a,l]}function is(o){const{a:t,b:e,c:n,d:s,e:a,f:l}=o.getTransform().invertSelf();return[t,e,n,s,a,l]}function Za(o,t,e=!1,n=!0){if(t instanceof nf){const{pageWidth:s,pageHeight:a}=t.rawDims,{style:l}=o,c=En.isCSSRoundSupported,d=`var(--scale-factor) * ${s}px`,f=`var(--scale-factor) * ${a}px`,m=c?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,g=c?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=m,l.height=g):(l.width=g,l.height=m)}n&&o.setAttribute("data-main-rotation",t.rotation)}class jv{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var zr,qo,Oi,Xo,kh,Ph,wm,p_,_n,m_,g_,Mp,y_,zv;const Os=class Os{constructor(t){_(this,_n);_(this,zr,null);_(this,qo,null);_(this,Oi);_(this,Xo,null);_(this,kh,null);x(this,Oi,t),u(Os,Ph)||x(Os,Ph,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=x(this,zr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=u(this,Oi)._uiManager._signal;t.addEventListener("contextmenu",Yi,{signal:e}),t.addEventListener("pointerdown",C(Os,wm,p_),{signal:e});const n=x(this,Xo,document.createElement("div"));n.className="buttons",t.append(n);const s=u(this,Oi).toolbarPosition;if(s){const{style:a}=t,l=u(this,Oi)._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return C(this,_n,y_).call(this),t}get div(){return u(this,zr)}hide(){var t;u(this,zr).classList.add("hidden"),(t=u(this,qo))==null||t.hideDropdown()}show(){var t;u(this,zr).classList.remove("hidden"),(t=u(this,kh))==null||t.shown()}async addAltText(t){const e=await t.render();C(this,_n,Mp).call(this,e),u(this,Xo).prepend(e,u(this,_n,zv)),x(this,kh,t)}addColorPicker(t){x(this,qo,t);const e=t.renderButton();C(this,_n,Mp).call(this,e),u(this,Xo).prepend(e,u(this,_n,zv))}remove(){var t;u(this,zr).remove(),(t=u(this,qo))==null||t.destroy(),x(this,qo,null)}};zr=new WeakMap,qo=new WeakMap,Oi=new WeakMap,Xo=new WeakMap,kh=new WeakMap,Ph=new WeakMap,wm=new WeakSet,p_=function(t){t.stopPropagation()},_n=new WeakSet,m_=function(t){u(this,Oi)._focusEventsAllowed=!1,si(t)},g_=function(t){u(this,Oi)._focusEventsAllowed=!0,si(t)},Mp=function(t){const e=u(this,Oi)._uiManager._signal;t.addEventListener("focusin",C(this,_n,m_).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",C(this,_n,g_).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Yi,{signal:e})},y_=function(){const{editorType:t,_uiManager:e}=u(this,Oi),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",u(Os,Ph)[t]),C(this,_n,Mp).call(this,n),n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),u(this,Xo).append(n)},zv=function(){const t=document.createElement("div");return t.className="divider",t},_(Os,wm),_(Os,Ph,null);let Vv=Os;var Mh,Ko,Yo,So,v_,w_,A_;class jD{constructor(t){_(this,So);_(this,Mh,null);_(this,Ko,null);_(this,Yo);x(this,Yo,t)}show(t,e,n){const[s,a]=C(this,So,w_).call(this,e,n),{style:l}=u(this,Ko)||x(this,Ko,C(this,So,v_).call(this));t.append(u(this,Ko)),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Ko).remove()}}Mh=new WeakMap,Ko=new WeakMap,Yo=new WeakMap,So=new WeakSet,v_=function(){const t=x(this,Ko,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Yi,{signal:u(this,Yo)._signal});const e=x(this,Mh,document.createElement("div"));return e.className="buttons",t.append(e),C(this,So,A_).call(this),t},w_=function(t,e){let n=0,s=0;for(const a of t){const l=a.y+a.height;if(l<n)continue;const c=a.x+(e?a.width:0);if(l>n){s=c,n=l;continue}e?c>s&&(s=c):c<s&&(s=c)}return[e?1-s:s,n]},A_=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=u(this,Yo)._signal;t.addEventListener("contextmenu",Yi,{signal:n}),t.addEventListener("click",()=>{u(this,Yo).highlightSelection("floating_button")},{signal:n}),u(this,Mh).append(t)};function dm(o,t,e){for(const n of e)t.addEventListener(n,o[n].bind(o))}var Am;class VD{constructor(){_(this,Am,0)}get id(){return`${wD}${vn(this,Am)._++}`}}Am=new WeakMap;var Wl,Rh,an,ql,Rp;const Bw=class Bw{constructor(){_(this,ql);_(this,Wl,LD());_(this,Rh,0);_(this,an,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const a=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Nt(this,"_isSVGFittingCanvas",a)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:a}=t;return C(this,ql,Rp).call(this,`${e}_${n}_${s}_${a}`,t)}async getFromUrl(t){return C(this,ql,Rp).call(this,t,t)}async getFromBlob(t,e){const n=await e;return C(this,ql,Rp).call(this,t,n)}async getFromId(t){u(this,an)||x(this,an,new Map);const e=u(this,an).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){u(this,an)||x(this,an,new Map);let n=u(this,an).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${u(this,Wl)}_${vn(this,Rh)._++}`,refCounter:1,isSvg:!1},u(this,an).set(t,n),u(this,an).set(n.id,n),n}getSvgUrl(t){const e=u(this,an).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;u(this,an)||x(this,an,new Map);const e=u(this,an).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=a.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${u(this,Wl)}_`)}};Wl=new WeakMap,Rh=new WeakMap,an=new WeakMap,ql=new WeakSet,Rp=async function(t,e){u(this,an)||x(this,an,new Map);let n=u(this,an).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,Wl)}_${vn(this,Rh)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await Xm(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const a=Bw._isSVGFittingCanvas,l=new FileReader,c=new Image,d=new Promise((f,m)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,f()},l.onload=async()=>{const g=n.svgUrl=l.result;c.src=await a?`${g}#svgView(preserveAspectRatio(none))`:g},c.onerror=l.onerror=m});l.readAsDataURL(s),await d}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Pt(s),n=null}return u(this,an).set(t,n),n&&u(this,an).set(n.id,n),n};let Bv=Bw;var we,Br,Lh,ce;class zD{constructor(t=128){_(this,we,[]);_(this,Br,!1);_(this,Lh);_(this,ce,-1);x(this,Lh,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(s&&t(),u(this,Br))return;const d={cmd:t,undo:e,post:n,type:a};if(u(this,ce)===-1){u(this,we).length>0&&(u(this,we).length=0),x(this,ce,0),u(this,we).push(d);return}if(l&&u(this,we)[u(this,ce)].type===a){c&&(d.undo=u(this,we)[u(this,ce)].undo),u(this,we)[u(this,ce)]=d;return}const f=u(this,ce)+1;f===u(this,Lh)?u(this,we).splice(0,1):(x(this,ce,f),f<u(this,we).length&&u(this,we).splice(f)),u(this,we).push(d)}undo(){if(u(this,ce)===-1)return;x(this,Br,!0);const{undo:t,post:e}=u(this,we)[u(this,ce)];t(),e==null||e(),x(this,Br,!1),x(this,ce,u(this,ce)-1)}redo(){if(u(this,ce)<u(this,we).length-1){x(this,ce,u(this,ce)+1),x(this,Br,!0);const{cmd:t,post:e}=u(this,we)[u(this,ce)];t(),e==null||e(),x(this,Br,!1)}}hasSomethingToUndo(){return u(this,ce)!==-1}hasSomethingToRedo(){return u(this,ce)<u(this,we).length-1}cleanType(t){if(u(this,ce)!==-1){for(let e=u(this,ce);e>=0;e--)if(u(this,we)[e].type!==t){u(this,we).splice(e+1,u(this,ce)-e),x(this,ce,e);return}u(this,we).length=0,x(this,ce,-1)}}destroy(){x(this,we,null)}}we=new WeakMap,Br=new WeakMap,Lh=new WeakMap,ce=new WeakMap;var xm,x_;class sf{constructor(t){_(this,xm);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=En.platform;for(const[n,s,a={}]of t)for(const l of n){const c=l.startsWith("mac+");e&&c?(this.callbacks.set(l.slice(4),{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1))):!e&&!c&&(this.callbacks.set(l,{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(C(this,xm,x_).call(this,e));if(!n)return;const{callback:s,options:{bubbles:a=!1,args:l=[],checker:c=null}}=n;c&&!c(t,e)||(s.bind(t,...l,e)(),a||si(e))}}xm=new WeakSet,x_=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Sm=class Sm{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return OD(t),Nt(this,"_colors",t)}convert(t){const e=Fw(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((a,l)=>a===e[l]))return Sm._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?mt.makeHexColor(...e):t}};wt(Sm,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Hv=Sm;var Xl,$n,Re,We,Kl,Vs,Yl,yi,Hr,Qo,Ql,Zo,os,ji,Jo,Dh,Ih,Zl,Nh,as,Ur,Jl,$r,ls,bm,Gr,Fh,Wr,ta,Oh,jh,je,Gt,zs,ea,Vh,zh,qr,us,Bs,Bh,vi,tt,Lp,Uv,S_,b_,Dp,E_,__,C_,$v,T_,Gv,Wv,k_,wn,Ns,P_,M_,qv,R_,Zc,Xv;const Bl=class Bl{constructor(t,e,n,s,a,l,c,d,f,m,g,v,A){_(this,tt);_(this,Xl,new AbortController);_(this,$n,null);_(this,Re,new Map);_(this,We,new Map);_(this,Kl,null);_(this,Vs,null);_(this,Yl,null);_(this,yi,new zD);_(this,Hr,null);_(this,Qo,null);_(this,Ql,0);_(this,Zo,new Set);_(this,os,null);_(this,ji,null);_(this,Jo,new Set);wt(this,"_editorUndoBar",null);_(this,Dh,!1);_(this,Ih,!1);_(this,Zl,!1);_(this,Nh,null);_(this,as,null);_(this,Ur,null);_(this,Jl,null);_(this,$r,!1);_(this,ls,null);_(this,bm,new VD);_(this,Gr,!1);_(this,Fh,!1);_(this,Wr,null);_(this,ta,null);_(this,Oh,null);_(this,jh,null);_(this,je,kt.NONE);_(this,Gt,new Set);_(this,zs,null);_(this,ea,null);_(this,Vh,null);_(this,zh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,qr,[0,0]);_(this,us,null);_(this,Bs,null);_(this,Bh,null);_(this,vi,null);const S=this._signal=u(this,Xl).signal;x(this,Bs,t),x(this,Bh,e),x(this,Kl,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:S}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),s._on("setpreference",this.onSetPreference.bind(this),{signal:S}),s._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:S}),C(this,tt,E_).call(this),C(this,tt,k_).call(this),C(this,tt,$v).call(this),x(this,Vs,a.annotationStorage),x(this,Nh,a.filterFactory),x(this,ea,l),x(this,Jl,c||null),x(this,Dh,d),x(this,Ih,f),x(this,Zl,m),x(this,jh,g||null),this.viewParameters={realScale:xo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=A!==!1}static get _keyboardManager(){const t=Bl.prototype,e=l=>u(l,Bs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Nt(this,"_keyboardManager",new sf([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&u(l,Bs).contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&u(l,Bs).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}destroy(){var t,e,n,s,a;(t=u(this,vi))==null||t.resolve(),x(this,vi,null),(e=u(this,Xl))==null||e.abort(),x(this,Xl,null),this._signal=null;for(const l of u(this,We).values())l.destroy();u(this,We).clear(),u(this,Re).clear(),u(this,Jo).clear(),x(this,$n,null),u(this,Gt).clear(),u(this,yi).destroy(),(n=u(this,Kl))==null||n.destroy(),(s=u(this,ls))==null||s.hide(),x(this,ls,null),u(this,as)&&(clearTimeout(u(this,as)),x(this,as,null)),u(this,us)&&(clearTimeout(u(this,us)),x(this,us,null)),(a=this._editorUndoBar)==null||a.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return u(this,jh)}get useNewAltTextFlow(){return u(this,Ih)}get useNewAltTextWhenAddingImage(){return u(this,Zl)}get hcmFilter(){return Nt(this,"hcmFilter",u(this,ea)?u(this,Nh).addHCMFilter(u(this,ea).foreground,u(this,ea).background):"none")}get direction(){return Nt(this,"direction",getComputedStyle(u(this,Bs)).direction)}get highlightColors(){return Nt(this,"highlightColors",u(this,Jl)?new Map(u(this,Jl).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Nt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,Qo,t)}setMainHighlightColorPicker(t){x(this,Oh,t)}editAltText(t,e=!1){var n;(n=u(this,Kl))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":x(this,Zl,e);break}}onPageChanging({pageNumber:t}){x(this,Ql,t-1)}focusMainContainer(){u(this,Bs).focus()}findParent(t,e){for(const n of u(this,We).values()){const{x:s,y:a,width:l,height:c}=n.div.getBoundingClientRect();if(t>=s&&t<=s+l&&e>=a&&e<=a+c)return n}return null}disableUserSelect(t=!1){u(this,Bh).classList.toggle("noUserSelect",t)}addShouldRescale(t){u(this,Jo).add(t)}removeShouldRescale(t){u(this,Jo).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*xo.PDF_TO_CSS_UNITS;for(const n of u(this,Jo))n.onScaleChanging();(e=u(this,Qo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:l}=e,c=e.toString(),f=C(this,tt,Lp).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;e.empty();const g=C(this,tt,Uv).call(this,f),v=u(this,je)===kt.NONE,A=()=>{g==null||g.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:l,text:c}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(kt.HIGHLIGHT,A);return}A()}addToAnnotationStorage(t){!t.isEmpty()&&u(this,Vs)&&!u(this,Vs).has(t.id)&&u(this,Vs).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,u(this,$r)&&(x(this,$r,!1),C(this,tt,Dp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of u(this,Gt))if(e.div.contains(t)){x(this,ta,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!u(this,ta))return;const[t,e]=u(this,ta);x(this,ta,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){C(this,tt,$v).call(this),C(this,tt,Gv).call(this)}removeEditListeners(){C(this,tt,T_).call(this),C(this,tt,Wv).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of u(this,ji))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of u(this,ji))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=u(this,$n))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of u(this,Gt)){const a=s.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const l of u(this,ji))if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Pt(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const d of n){const f=await s.deserialize(d);if(!f)return;a.push(f)}const l=()=>{for(const d of a)C(this,tt,qv).call(this,d);C(this,tt,Xv).call(this,a)},c=()=>{for(const d of a)d.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(a){Pt(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,je)!==kt.NONE&&!this.isEditorHandlingKeyboard&&Bl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,$r)&&(x(this,$r,!1),C(this,tt,Dp).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(C(this,tt,__).call(this),C(this,tt,Gv).call(this),C(this,tt,wn).call(this,{isEditing:u(this,je)!==kt.NONE,isEmpty:C(this,tt,Zc).call(this),hasSomethingToUndo:u(this,yi).hasSomethingToUndo(),hasSomethingToRedo:u(this,yi).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,tt,C_).call(this),C(this,tt,Wv).call(this),C(this,tt,wn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!u(this,ji)){x(this,ji,t);for(const e of u(this,ji))C(this,tt,Ns).call(this,e.defaultPropertiesToUpdate)}}getId(){return u(this,bm).id}get currentLayer(){return u(this,We).get(u(this,Ql))}getLayer(t){return u(this,We).get(t)}get currentPageIndex(){return u(this,Ql)}addLayer(t){u(this,We).set(t.pageIndex,t),u(this,Gr)?t.enable():t.disable()}removeLayer(t){u(this,We).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var s;if(u(this,je)!==t&&!(u(this,vi)&&(await u(this,vi).promise,!u(this,vi)))){if(x(this,vi,Promise.withResolvers()),x(this,je,t),t===kt.NONE){this.setEditingState(!1),C(this,tt,M_).call(this),(s=this._editorUndoBar)==null||s.hide(),u(this,vi).resolve();return}this.setEditingState(!0),await C(this,tt,P_).call(this),this.unselectAll();for(const a of u(this,We).values())a.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),u(this,vi).resolve();return}for(const a of u(this,Re).values())a.annotationElementId===e?(this.setSelected(a),a.enterInEditMode()):a.unselect();u(this,vi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==u(this,je)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(u(this,ji)){switch(t){case jt.CREATE:this.currentLayer.addNewEditor();return;case jt.HIGHLIGHT_DEFAULT_COLOR:(n=u(this,Oh))==null||n.updateColor(e);break;case jt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Vh)||x(this,Vh,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of u(this,Gt))s.updateParams(t,e);for(const s of u(this,ji))s.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var a;for(const l of u(this,Re).values())l.editorType===t&&l.show(e);(((a=u(this,Vh))==null?void 0:a.get(jt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&C(this,tt,Ns).call(this,[[jt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(u(this,Fh)!==t){x(this,Fh,t);for(const e of u(this,We).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of u(this,Re).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return u(this,Re).get(t)}addEditor(t){u(this,Re).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(u(this,as)&&clearTimeout(u(this,as)),x(this,as,setTimeout(()=>{this.focusMainContainer(),x(this,as,null)},0))),u(this,Re).delete(t.id),this.unselect(t),(!t.annotationElementId||!u(this,Zo).has(t.annotationElementId))&&((e=u(this,Vs))==null||e.remove(t.id))}addDeletedAnnotationElement(t){u(this,Zo).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return u(this,Zo).has(t)}removeDeletedAnnotationElement(t){u(this,Zo).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){u(this,$n)!==t&&(x(this,$n,t),t&&C(this,tt,Ns).call(this,t.propertiesToUpdate))}updateUI(t){u(this,tt,R_)===t&&C(this,tt,Ns).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){C(this,tt,Ns).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(u(this,Gt).has(t)){u(this,Gt).delete(t),t.unselect(),C(this,tt,wn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Gt).add(t),t.select(),C(this,tt,Ns).call(this,t.propertiesToUpdate),C(this,tt,wn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=u(this,Qo))==null||e.commitOrRemove();for(const n of u(this,Gt))n!==t&&n.unselect();u(this,Gt).clear(),u(this,Gt).add(t),t.select(),C(this,tt,Ns).call(this,t.propertiesToUpdate),C(this,tt,wn).call(this,{hasSelectedEditor:!0})}isSelected(t){return u(this,Gt).has(t)}get firstSelectedEditor(){return u(this,Gt).values().next().value}unselect(t){t.unselect(),u(this,Gt).delete(t),C(this,tt,wn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Gt).size!==0}get isEnterHandled(){return u(this,Gt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;u(this,yi).undo(),C(this,tt,wn).call(this,{hasSomethingToUndo:u(this,yi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,tt,Zc).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){u(this,yi).redo(),C(this,tt,wn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,yi).hasSomethingToRedo(),isEmpty:C(this,tt,Zc).call(this)})}addCommands(t){u(this,yi).add(t),C(this,tt,wn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,tt,Zc).call(this)})}cleanUndoStack(t){u(this,yi).cleanType(t)}delete(){var a;this.commitOrRemove();const t=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...u(this,Gt)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(s,e.length===1?e[0].editorType:e.length);for(const c of e)c.remove()},s=()=>{for(const l of e)C(this,tt,qv).call(this,l)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=u(this,$n))==null||t.commitOrRemove()}hasSomethingToControl(){return u(this,$n)||this.hasSelection}selectAll(){for(const t of u(this,Gt))t.commit();C(this,tt,Xv).call(this,u(this,Re).values())}unselectAll(){var t;if(!(u(this,$n)&&(u(this,$n).commitOrRemove(),u(this,je)!==kt.NONE))&&!((t=u(this,Qo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of u(this,Gt))e.unselect();u(this,Gt).clear(),C(this,tt,wn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,qr)[0]+=t,u(this,qr)[1]+=e;const[s,a]=u(this,qr),l=[...u(this,Gt)],c=1e3;u(this,us)&&clearTimeout(u(this,us)),x(this,us,setTimeout(()=>{x(this,us,null),u(this,qr)[0]=u(this,qr)[1]=0,this.addCommands({cmd:()=>{for(const d of l)u(this,Re).has(d.id)&&d.translateInPage(s,a)},undo:()=>{for(const d of l)u(this,Re).has(d.id)&&d.translateInPage(-s,-a)},mustExec:!1})},c));for(const d of l)d.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,os,new Map);for(const t of u(this,Gt))u(this,os).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,os))return!1;this.disableUserSelect(!1);const t=u(this,os);x(this,os,null);let e=!1;for(const[{x:s,y:a,pageIndex:l},c]of t)c.newX=s,c.newY=a,c.newPageIndex=l,e||(e=s!==c.savedX||a!==c.savedY||l!==c.savedPageIndex);if(!e)return!1;const n=(s,a,l,c)=>{if(u(this,Re).has(s.id)){const d=u(this,We).get(c);d?s._setParentAndPosition(d,a,l):(s.pageIndex=c,s.x=a,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:l,newPageIndex:c}]of t)n(s,a,l,c)},undo:()=>{for(const[s,{savedX:a,savedY:l,savedPageIndex:c}]of t)n(s,a,l,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(u(this,os))for(const n of u(this,os).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||u(this,Gt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return u(this,$n)===t}getActive(){return u(this,$n)}getMode(){return u(this,je)}get imageManager(){return Nt(this,"imageManager",new Bv)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:a,height:l}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(f,m,g,v)=>({x:(m-s)/l,y:1-(f+g-n)/a,width:v/l,height:g/a});break;case"180":c=(f,m,g,v)=>({x:1-(f+g-n)/a,y:1-(m+v-s)/l,width:g/a,height:v/l});break;case"270":c=(f,m,g,v)=>({x:1-(m+v-s)/l,y:(f-n)/a,width:v/l,height:g/a});break;default:c=(f,m,g,v)=>({x:(f-n)/a,y:(m-s)/l,width:g/a,height:v/l});break}const d=[];for(let f=0,m=e.rangeCount;f<m;f++){const g=e.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:A,width:S,height:b}of g.getClientRects())S===0||b===0||d.push(c(v,A,S,b))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(u(this,Yl)||x(this,Yl,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=u(this,Yl))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=u(this,Yl))==null?void 0:s.get(t.data.id);if(!e)return;const n=u(this,Vs).getRawValue(e);n&&(u(this,je)===kt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};Xl=new WeakMap,$n=new WeakMap,Re=new WeakMap,We=new WeakMap,Kl=new WeakMap,Vs=new WeakMap,Yl=new WeakMap,yi=new WeakMap,Hr=new WeakMap,Qo=new WeakMap,Ql=new WeakMap,Zo=new WeakMap,os=new WeakMap,ji=new WeakMap,Jo=new WeakMap,Dh=new WeakMap,Ih=new WeakMap,Zl=new WeakMap,Nh=new WeakMap,as=new WeakMap,Ur=new WeakMap,Jl=new WeakMap,$r=new WeakMap,ls=new WeakMap,bm=new WeakMap,Gr=new WeakMap,Fh=new WeakMap,Wr=new WeakMap,ta=new WeakMap,Oh=new WeakMap,jh=new WeakMap,je=new WeakMap,Gt=new WeakMap,zs=new WeakMap,ea=new WeakMap,Vh=new WeakMap,zh=new WeakMap,qr=new WeakMap,us=new WeakMap,Bs=new WeakMap,Bh=new WeakMap,vi=new WeakMap,tt=new WeakSet,Lp=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Uv=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of u(this,We).values())if(n.hasTextLayer(t))return n;return null},S_=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=C(this,tt,Lp).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(u(this,ls)||x(this,ls,new jD(this)),u(this,ls).show(n,s,this.direction==="ltr"))},b_=function(){var a,l,c;const t=document.getSelection();if(!t||t.isCollapsed){u(this,zs)&&((a=u(this,ls))==null||a.hide(),x(this,zs,null),C(this,tt,wn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===u(this,zs))return;const s=C(this,tt,Lp).call(this,t).closest(".textLayer");if(!s){u(this,zs)&&((l=u(this,ls))==null||l.hide(),x(this,zs,null),C(this,tt,wn).call(this,{hasSelectedText:!1}));return}if((c=u(this,ls))==null||c.hide(),x(this,zs,e),C(this,tt,wn).call(this,{hasSelectedText:!0}),!(u(this,je)!==kt.HIGHLIGHT&&u(this,je)!==kt.NONE)&&(u(this,je)===kt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,$r,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=u(this,je)===kt.HIGHLIGHT?C(this,tt,Uv).call(this,s):null;d==null||d.toggleDrawing();const f=new AbortController,m=this.combinedSignal(f),g=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),d==null||d.toggleDrawing(!0),v.type==="pointerup"&&C(this,tt,Dp).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("blur",g,{signal:m})}},Dp=function(t=""){u(this,je)===kt.HIGHLIGHT?this.highlightSelection(t):u(this,Dh)&&C(this,tt,S_).call(this)},E_=function(){document.addEventListener("selectionchange",C(this,tt,b_).bind(this),{signal:this._signal})},__=function(){if(u(this,Ur))return;x(this,Ur,new AbortController);const t=this.combinedSignal(u(this,Ur));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},C_=function(){var t;(t=u(this,Ur))==null||t.abort(),x(this,Ur,null)},$v=function(){if(u(this,Wr))return;x(this,Wr,new AbortController);const t=this.combinedSignal(u(this,Wr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},T_=function(){var t;(t=u(this,Wr))==null||t.abort(),x(this,Wr,null)},Gv=function(){if(u(this,Hr))return;x(this,Hr,new AbortController);const t=this.combinedSignal(u(this,Hr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Wv=function(){var t;(t=u(this,Hr))==null||t.abort(),x(this,Hr,null)},k_=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},wn=function(t){Object.entries(t).some(([n,s])=>u(this,zh)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,zh),t)}),u(this,je)===kt.HIGHLIGHT&&t.hasSelectedEditor===!1&&C(this,tt,Ns).call(this,[[jt.HIGHLIGHT_FREE,!0]]))},Ns=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},P_=async function(){if(!u(this,Gr)){x(this,Gr,!0);const t=[];for(const e of u(this,We).values())t.push(e.enable());await Promise.all(t);for(const e of u(this,Re).values())e.enable()}},M_=function(){if(this.unselectAll(),u(this,Gr)){x(this,Gr,!1);for(const t of u(this,We).values())t.disable();for(const t of u(this,Re).values())t.disable()}},qv=function(t){const e=u(this,We).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},R_=function(){let t=null;for(t of u(this,Gt));return t},Zc=function(){if(u(this,Re).size===0)return!0;if(u(this,Re).size===1)for(const t of u(this,Re).values())return t.isEmpty();return!1},Xv=function(t){for(const e of u(this,Gt))e.unselect();u(this,Gt).clear();for(const e of t)e.isEmpty()||(u(this,Gt).add(e),e.select());C(this,tt,wn).call(this,{hasSelectedEditor:this.hasSelection})},wt(Bl,"TRANSLATE_SMALL",1),wt(Bl,"TRANSLATE_BIG",10);let Ja=Bl;var Ve,cs,Vi,tu,hs,Gn,eu,ds,Fn,Hs,na,fs,Xr,Ki,Jc,Ip;const An=class An{constructor(t){_(this,Ki);_(this,Ve,null);_(this,cs,!1);_(this,Vi,null);_(this,tu,null);_(this,hs,null);_(this,Gn,null);_(this,eu,!1);_(this,ds,null);_(this,Fn,null);_(this,Hs,null);_(this,na,null);_(this,fs,!1);x(this,Fn,t),x(this,fs,t._uiManager.useNewAltTextFlow),u(An,Xr)||x(An,Xr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){An._l10n??(An._l10n=t)}async render(){const t=x(this,Vi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=x(this,tu,document.createElement("span"));t.append(e),u(this,fs)?(t.classList.add("new"),t.setAttribute("data-l10n-id",u(An,Xr).missing),e.setAttribute("data-l10n-id",u(An,Xr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,Fn)._uiManager._signal;t.addEventListener("contextmenu",Yi,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),u(this,Fn)._uiManager.editAltText(u(this,Fn)),u(this,fs)&&u(this,Fn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Ki,Jc)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(x(this,eu,!0),s(a))},{signal:n}),await C(this,Ki,Ip).call(this),t}finish(){u(this,Vi)&&(u(this,Vi).focus({focusVisible:u(this,eu)}),x(this,eu,!1))}isEmpty(){return u(this,fs)?u(this,Ve)===null:!u(this,Ve)&&!u(this,cs)}hasData(){return u(this,fs)?u(this,Ve)!==null||!!u(this,Hs):this.isEmpty()}get guessedText(){return u(this,Hs)}async setGuessedText(t){u(this,Ve)===null&&(x(this,Hs,t),x(this,na,await An._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),C(this,Ki,Ip).call(this))}toggleAltTextBadge(t=!1){var e;if(!u(this,fs)||u(this,Ve)){(e=u(this,ds))==null||e.remove(),x(this,ds,null);return}if(!u(this,ds)){const n=x(this,ds,document.createElement("div"));n.className="noAltTextBadge",u(this,Fn).div.append(n)}u(this,ds).classList.toggle("hidden",!t)}serialize(t){let e=u(this,Ve);return!t&&u(this,Hs)===e&&(e=u(this,na)),{altText:e,decorative:u(this,cs),guessedText:u(this,Hs),textWithDisclaimer:u(this,na)}}get data(){return{altText:u(this,Ve),decorative:u(this,cs)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:a=!1}){n&&(x(this,Hs,n),x(this,na,s)),!(u(this,Ve)===t&&u(this,cs)===e)&&(a||(x(this,Ve,t),x(this,cs,e)),C(this,Ki,Ip).call(this))}toggle(t=!1){u(this,Vi)&&(!t&&u(this,Gn)&&(clearTimeout(u(this,Gn)),x(this,Gn,null)),u(this,Vi).disabled=!t)}shown(){u(this,Fn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Ki,Jc)}})}destroy(){var t,e;(t=u(this,Vi))==null||t.remove(),x(this,Vi,null),x(this,tu,null),x(this,hs,null),(e=u(this,ds))==null||e.remove(),x(this,ds,null)}};Ve=new WeakMap,cs=new WeakMap,Vi=new WeakMap,tu=new WeakMap,hs=new WeakMap,Gn=new WeakMap,eu=new WeakMap,ds=new WeakMap,Fn=new WeakMap,Hs=new WeakMap,na=new WeakMap,fs=new WeakMap,Xr=new WeakMap,Ki=new WeakSet,Jc=function(){return u(this,Ve)&&"added"||u(this,Ve)===null&&this.guessedText&&"review"||"missing"},Ip=async function(){var s,a,l;const t=u(this,Vi);if(!t)return;if(u(this,fs)){if(t.classList.toggle("done",!!u(this,Ve)),t.setAttribute("data-l10n-id",u(An,Xr)[u(this,Ki,Jc)]),(s=u(this,tu))==null||s.setAttribute("data-l10n-id",u(An,Xr)[`${u(this,Ki,Jc)}-label`]),!u(this,Ve)){(a=u(this,hs))==null||a.remove();return}}else{if(!u(this,Ve)&&!u(this,cs)){t.classList.remove("done"),(l=u(this,hs))==null||l.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=u(this,hs);if(!e){x(this,hs,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${u(this,Fn).id}`;const c=100,d=u(this,Fn)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(u(this,Gn)),x(this,Gn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,Gn,setTimeout(()=>{x(this,Gn,null),u(this,hs).classList.add("show"),u(this,Fn)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:d}),t.addEventListener("mouseleave",()=>{var f;u(this,Gn)&&(clearTimeout(u(this,Gn)),x(this,Gn,null)),(f=u(this,hs))==null||f.classList.remove("show")},{signal:d})}u(this,cs)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=u(this,Ve)),e.parentNode||t.append(e);const n=u(this,Fn).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},_(An,Xr,null),wt(An,"_l10n",null);let fm=An;var Hh,ia,Uh,$h,Gh,Wh,qh,nu,Us,sa,Kr,gr,L_,D_,Kv;const Hw=class Hw{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:l=null,signal:c}){_(this,gr);_(this,Hh);_(this,ia,!1);_(this,Uh,null);_(this,$h);_(this,Gh);_(this,Wh);_(this,qh);_(this,nu);_(this,Us,null);_(this,sa);_(this,Kr,null);x(this,Hh,t),x(this,Uh,n),x(this,$h,e),x(this,Gh,s),x(this,Wh,a),x(this,qh,l),x(this,sa,new AbortController),x(this,nu,AbortSignal.any([c,u(this,sa).signal])),t.addEventListener("touchstart",C(this,gr,L_).bind(this),{passive:!1,signal:u(this,nu)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Nt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=u(this,sa))==null||t.abort(),x(this,sa,null)}};Hh=new WeakMap,ia=new WeakMap,Uh=new WeakMap,$h=new WeakMap,Gh=new WeakMap,Wh=new WeakMap,qh=new WeakMap,nu=new WeakMap,Us=new WeakMap,sa=new WeakMap,Kr=new WeakMap,gr=new WeakSet,L_=function(t){var s,a,l;if((s=u(this,$h))!=null&&s.call(this)||t.touches.length<2)return;if(!u(this,Kr)){x(this,Kr,new AbortController);const c=AbortSignal.any([u(this,nu),u(this,Kr).signal]),d=u(this,Hh),f={signal:c,passive:!1};d.addEventListener("touchmove",C(this,gr,D_).bind(this),f),d.addEventListener("touchend",C(this,gr,Kv).bind(this),f),d.addEventListener("touchcancel",C(this,gr,Kv).bind(this),f),(a=u(this,Gh))==null||a.call(this)}if(si(t),t.touches.length!==2||(l=u(this,Uh))!=null&&l.call(this)){x(this,Us,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),x(this,Us,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},D_=function(t){var R;if(!u(this,Us)||t.touches.length!==2)return;let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:a}=e,{screenX:l,screenY:c}=n,d=u(this,Us),{touch0X:f,touch0Y:m,touch1X:g,touch1Y:v}=d,A=g-f,S=v-m,b=l-s,T=c-a,k=Math.hypot(b,T)||1,M=Math.hypot(A,S)||1;if(!u(this,ia)&&Math.abs(M-k)<=Hw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=s,d.touch0Y=a,d.touch1X=l,d.touch1Y=c,t.preventDefault(),!u(this,ia)){x(this,ia,!0);return}const L=[(s+l)/2,(a+c)/2];(R=u(this,Wh))==null||R.call(this,L,M,k)},Kv=function(t){var e;u(this,Kr).abort(),x(this,Kr,null),(e=u(this,qh))==null||e.call(this),u(this,Us)&&(t.preventDefault(),x(this,Us,null),x(this,ia,!1))};let pm=Hw;var ra,zi,ne,iu,Yr,Xh,oa,qe,aa,$s,Qr,Kh,la,Wn,Yh,ua,Gs,ps,su,ru,wi,ca,Qh,Em,At,Yv,Zh,Qv,Np,I_,N_,Zv,Fp,Jv,F_,O_,j_,t0,V_,e0,z_,B_,H_,n0,th;const Mt=class Mt{constructor(t){_(this,At);_(this,ra,null);_(this,zi,null);_(this,ne,null);_(this,iu,!1);_(this,Yr,null);_(this,Xh,"");_(this,oa,!1);_(this,qe,null);_(this,aa,null);_(this,$s,null);_(this,Qr,null);_(this,Kh,"");_(this,la,!1);_(this,Wn,null);_(this,Yh,!1);_(this,ua,!1);_(this,Gs,!1);_(this,ps,null);_(this,su,0);_(this,ru,0);_(this,wi,null);_(this,ca,null);wt(this,"_editToolbar",null);wt(this,"_initialOptions",Object.create(null));wt(this,"_initialData",null);wt(this,"_isVisible",!0);wt(this,"_uiManager",null);wt(this,"_focusEventsAllowed",!0);_(this,Qh,!1);_(this,Em,Mt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[a,l];const[c,d]=this.parentDimensions;this.x=t.x/c,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Mt.prototype._resizeWithKeyboard,e=Ja.TRANSLATE_SMALL,n=Ja.TRANSLATE_BIG;return Nt(this,"_resizerKeyboardManager",new sf([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Mt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Nt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new BD({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Mt._l10n??(Mt._l10n=t),Mt._l10nResizer||(Mt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Mt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Mt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Qt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,Qh)}set _isDraggable(t){var e;x(this,Qh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Em)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):C(this,At,th).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(u(this,la)?x(this,la,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[a,l]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/a,this.y=(e+s)/l,this.fixAndSetPosition()}translate(t,e){C(this,At,Yv).call(this,this.parentDimensions,t,e)}translateInPage(t,e){u(this,Wn)||x(this,Wn,[this.x,this.y,this.width,this.height]),C(this,At,Yv).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){u(this,Wn)||x(this,Wn,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,a]}=this;if(this.x+=t/s,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[d,f]=this.getBaseTranslation();l+=d,c+=f;const{style:m}=n;m.left=`${(100*l).toFixed(2)}%`,m.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!u(this,Wn)&&(u(this,Wn)[0]!==this.x||u(this,Wn)[1]!==this.y)}get _hasBeenResized(){return!!u(this,Wn)&&(u(this,Wn)[2]!==this.width||u(this,Wn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Mt,s=n/t,a=n/e;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:a,y:l,width:c,height:d}=this;if(c*=n,d*=s,a*=n,l*=s,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(n-c,a)),l=Math.max(0,Math.min(s-d,l));break;case 90:a=Math.max(0,Math.min(n-d,a)),l=Math.min(s,Math.max(c,l));break;case 180:a=Math.min(n,Math.max(c,a)),l=Math.min(s,Math.max(d,l));break;case 270:a=Math.min(n,Math.max(d,a)),l=Math.max(0,Math.min(s-c,l));break}this.x=a/=n,this.y=l/=s;const[f,m]=this.getBaseTranslation();a+=f,l+=m,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return C(n=Mt,Zh,Qv).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return C(n=Mt,Zh,Qv).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,s]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/n).toFixed(2)}%`,u(this,oa)||(a.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),a=!u(this,oa)&&e.endsWith("%");if(s&&a)return;const[l,c]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!u(this,oa)&&!a&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=u(this,ne))==null||t.finish()}async addEditToolbar(){return this._editToolbar||u(this,ua)?this._editToolbar:(this._editToolbar=new Vv(this),this.div.append(this._editToolbar.render()),u(this,ne)&&await this._editToolbar.addAltText(u(this,ne)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=u(this,ne))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,ne)||(fm.initialize(Mt._l10n),x(this,ne,new fm(this)),u(this,ra)&&(u(this,ne).data=u(this,ra),x(this,ra,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=u(this,ne))==null?void 0:t.data}set altTextData(t){u(this,ne)&&(u(this,ne).data=t)}get guessedAltText(){var t;return(t=u(this,ne))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=u(this,ne))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=u(this,ne))==null?void 0:e.serialize(t)}hasAltText(){return!!u(this,ne)&&!u(this,ne).isEmpty()}hasAltTextData(){var t;return((t=u(this,ne))==null?void 0:t.hasData())??!1}render(){var a;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=u(this,iu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),C(this,At,e0).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),dm(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,ca)||x(this,ca,new pm({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,At,F_).bind(this),onPinching:C(this,At,O_).bind(this),onPinchEnd:C(this,At,j_).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),this.div}pointerdown(t){const{isMac:e}=En.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(x(this,la,!0),this._isDraggable){C(this,At,V_).call(this,t);return}C(this,At,t0).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,ps)&&clearTimeout(u(this,ps)),x(this,ps,setTimeout(()=>{var t;x(this,ps,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[a,l]=this.pageDimensions,[c,d]=this.pageTranslation,f=t/s,m=e/s,g=this.x*a,v=this.y*l,A=this.width*a,S=this.height*l;switch(n){case 0:return[g+f+c,l-v-m-S+d,g+f+A+c,l-v-m+d];case 90:return[g+m+c,l-v+f+d,g+m+S+c,l-v+f+A+d];case 180:return[g-f-A+c,l-v+m+d,g-f+c,l-v+m+S+d];case 270:return[g-m-S+c,l-v-f-A+d,g-m+c,l-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,a,l]=t,c=a-n,d=l-s;switch(this.rotation){case 0:return[n,e-l,c,d];case 90:return[n,e-s,d,c];case 180:return[a,e-s,c,d];case 270:return[a,e-l,d,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){x(this,ua,!0)}disableEditMode(){x(this,ua,!1)}isInEditMode(){return u(this,ua)}shouldGetKeyboardEvents(){return u(this,Gs)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return e<l&&s>0&&t<a&&n>0}rebuild(){C(this,At,e0).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Qt("An editor must be serializable")}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});s.rotation=t.rotation,x(s,ra,t.accessibilityData);const[a,l]=s.pageDimensions,[c,d,f,m]=s.getRectInCurrentCoords(t.rect,l);return s.x=c/a,s.y=d/l,s.width=f/a,s.height=m/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=u(this,Qr))==null||t.abort(),x(this,Qr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,ps)&&(clearTimeout(u(this,ps)),x(this,ps,null)),C(this,At,th).call(this),this.removeEditToolbar(),u(this,wi)){for(const n of u(this,wi).values())clearTimeout(n);x(this,wi,null)}this.parent=null,(e=u(this,ca))==null||e.destroy(),x(this,ca,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,At,I_).call(this),u(this,qe).classList.remove("hidden"),dm(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,$s,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=u(this,qe).children;if(!u(this,zi)){x(this,zi,Array.from(e));const l=C(this,At,z_).bind(this),c=C(this,At,B_).bind(this),d=this._uiManager._signal;for(const f of u(this,zi)){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",c,{signal:d}),f.addEventListener("focus",C(this,At,H_).bind(this,m),{signal:d}),f.setAttribute("data-l10n-id",Mt._l10nResizer[m])}}const n=u(this,zi)[0];let s=0;for(const l of e){if(l===n)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(u(this,zi).length/4);if(a!==s){if(a<s)for(let c=0;c<s-a;c++)u(this,qe).append(u(this,qe).firstChild);else if(a>s)for(let c=0;c<a-s;c++)u(this,qe).firstChild.before(u(this,qe).lastChild);let l=0;for(const c of e){const f=u(this,zi)[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Mt._l10nResizer[f])}}C(this,At,n0).call(this,0),x(this,Gs,!0),u(this,qe).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){u(this,Gs)&&C(this,At,Jv).call(this,u(this,Kh),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,At,th).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,a;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(e=this._editToolbar)==null||e.show(),(n=u(this,ne))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,s,a;(t=u(this,qe))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(a=u(this,ne))==null||a.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return u(this,Yh)}set isEditing(t){x(this,Yh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){x(this,oa,!0);const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){u(this,wi)||x(this,wi,new Map);const{action:n}=t;let s=u(this,wi).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),u(this,wi).delete(n),u(this,wi).size===0&&x(this,wi,null)},Mt._telemetryTimeout),u(this,wi).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,iu,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,iu,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};ra=new WeakMap,zi=new WeakMap,ne=new WeakMap,iu=new WeakMap,Yr=new WeakMap,Xh=new WeakMap,oa=new WeakMap,qe=new WeakMap,aa=new WeakMap,$s=new WeakMap,Qr=new WeakMap,Kh=new WeakMap,la=new WeakMap,Wn=new WeakMap,Yh=new WeakMap,ua=new WeakMap,Gs=new WeakMap,ps=new WeakMap,su=new WeakMap,ru=new WeakMap,wi=new WeakMap,ca=new WeakMap,Qh=new WeakMap,Em=new WeakMap,At=new WeakSet,Yv=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Zh=new WeakSet,Qv=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Np=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},I_=function(){if(u(this,qe))return;x(this,qe,document.createElement("div")),u(this,qe).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");u(this,qe).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",C(this,At,N_).bind(this,n),{signal:e}),s.addEventListener("contextmenu",Yi,{signal:e}),s.tabIndex=-1}this.div.prepend(u(this,qe))},N_=function(t,e){var m;e.preventDefault();const{isMac:n}=En.platform;if(e.button!==0||e.ctrlKey&&n)return;(m=u(this,ne))==null||m.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,x(this,aa,[e.screenX,e.screenY]);const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,At,Jv).bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",si,{passive:!1,signal:l}),window.addEventListener("contextmenu",Yi,{signal:l}),x(this,$s,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var g;a.abort(),this.parent.togglePointerEvents(!0),(g=u(this,ne))==null||g.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=c,this.div.style.cursor=d,C(this,At,Fp).call(this)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},Zv=function(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e;const[a,l]=this.parentDimensions;this.setDims(a*n,l*s),this.fixAndSetPosition(),this._onResized()},Fp=function(){if(!u(this,$s))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=u(this,$s);x(this,$s,null);const a=this.x,l=this.y,c=this.width,d=this.height;a===t&&l===e&&c===n&&d===s||this.addCommands({cmd:C(this,At,Zv).bind(this,a,l,c,d),undo:C(this,At,Zv).bind(this,t,e,n,s),mustExec:!0})},Jv=function(t,e){const[n,s]=this.parentDimensions,a=this.x,l=this.y,c=this.width,d=this.height,f=Mt.MIN_SIZE/n,m=Mt.MIN_SIZE/s,g=C(this,At,Np).call(this,this.rotation),v=(Z,K)=>[g[0]*Z+g[2]*K,g[1]*Z+g[3]*K],A=C(this,At,Np).call(this,360-this.rotation),S=(Z,K)=>[A[0]*Z+A[2]*K,A[1]*Z+A[3]*K];let b,T,k=!1,M=!1;switch(t){case"topLeft":k=!0,b=(Z,K)=>[0,0],T=(Z,K)=>[Z,K];break;case"topMiddle":b=(Z,K)=>[Z/2,0],T=(Z,K)=>[Z/2,K];break;case"topRight":k=!0,b=(Z,K)=>[Z,0],T=(Z,K)=>[0,K];break;case"middleRight":M=!0,b=(Z,K)=>[Z,K/2],T=(Z,K)=>[0,K/2];break;case"bottomRight":k=!0,b=(Z,K)=>[Z,K],T=(Z,K)=>[0,0];break;case"bottomMiddle":b=(Z,K)=>[Z/2,K],T=(Z,K)=>[Z/2,0];break;case"bottomLeft":k=!0,b=(Z,K)=>[0,K],T=(Z,K)=>[Z,0];break;case"middleLeft":M=!0,b=(Z,K)=>[0,K/2],T=(Z,K)=>[Z,K/2];break}const L=b(c,d),R=T(c,d);let I=v(...R);const j=Mt._round(a+I[0]),B=Mt._round(l+I[1]);let U=1,Q=1,ct,ot;if(e.fromKeyboard)({deltaX:ct,deltaY:ot}=e);else{const{screenX:Z,screenY:K}=e,[q,lt]=u(this,aa);[ct,ot]=this.screenToPageTranslation(Z-q,K-lt),u(this,aa)[0]=Z,u(this,aa)[1]=K}if([ct,ot]=S(ct/n,ot/s),k){const Z=Math.hypot(c,d);U=Q=Math.max(Math.min(Math.hypot(R[0]-L[0]-ct,R[1]-L[1]-ot)/Z,1/c,1/d),f/c,m/d)}else M?U=Math.max(f,Math.min(1,Math.abs(R[0]-L[0]-ct)))/c:Q=Math.max(m,Math.min(1,Math.abs(R[1]-L[1]-ot)))/d;const Rt=Mt._round(c*U),Ft=Mt._round(d*Q);I=v(...T(Rt,Ft));const _t=j-I[0],Kt=B-I[1];u(this,Wn)||x(this,Wn,[this.x,this.y,this.width,this.height]),this.width=Rt,this.height=Ft,this.x=_t,this.y=Kt,this.setDims(n*Rt,s*Ft),this.fixAndSetPosition(),this._onResizing()},F_=function(){var t;x(this,$s,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=u(this,ne))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},O_=function(t,e,n){let a=.7*(n/e)+1-.7;if(a===1)return;const l=C(this,At,Np).call(this,this.rotation),c=(j,B)=>[l[0]*j+l[2]*B,l[1]*j+l[3]*B],[d,f]=this.parentDimensions,m=this.x,g=this.y,v=this.width,A=this.height,S=Mt.MIN_SIZE/d,b=Mt.MIN_SIZE/f;a=Math.max(Math.min(a,1/v,1/A),S/v,b/A);const T=Mt._round(v*a),k=Mt._round(A*a);if(T===v&&k===A)return;u(this,Wn)||x(this,Wn,[m,g,v,A]);const M=c(v/2,A/2),L=Mt._round(m+M[0]),R=Mt._round(g+M[1]),I=c(T/2,k/2);this.x=L-I[0],this.y=R-I[1],this.width=T,this.height=k,this.setDims(d*T,f*k),this.fixAndSetPosition(),this._onResizing()},j_=function(){var t;(t=u(this,ne))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),C(this,At,Fp).call(this)},t0=function(t){const{isMac:e}=En.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},V_=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:a},c=f=>{s.abort(),x(this,Yr,null),x(this,la,!1),this._uiManager.endDragSession()||C(this,At,t0).call(this,f),n&&this._onStopDragging()};e&&(x(this,su,t.clientX),x(this,ru,t.clientY),x(this,Yr,t.pointerId),x(this,Xh,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._onStartDragging());const{clientX:m,clientY:g,pointerId:v}=f;if(v!==u(this,Yr)){si(f);return}const[A,S]=this.screenToPageTranslation(m-u(this,su),g-u(this,ru));x(this,su,m),x(this,ru,g),this._uiManager.dragSelectedEditors(A,S)},l),window.addEventListener("touchmove",si,l),window.addEventListener("pointerdown",f=>{f.pointerType===u(this,Xh)&&(u(this,ca)||f.isPrimary)&&c(f),si(f)},l));const d=f=>{if(!u(this,Yr)||u(this,Yr)===f.pointerId){c(f);return}si(f)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},e0=function(){if(u(this,Qr)||!this.div)return;x(this,Qr,new AbortController);const t=this._uiManager.combinedSignal(u(this,Qr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},z_=function(t){Mt._resizerKeyboardManager.exec(this,t)},B_=function(t){var e;u(this,Gs)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==u(this,qe)&&C(this,At,th).call(this)},H_=function(t){x(this,Kh,u(this,Gs)?t:"")},n0=function(t){if(u(this,zi))for(const e of u(this,zi))e.tabIndex=t},th=function(){x(this,Gs,!1),C(this,At,n0).call(this,-1),C(this,At,Fp).call(this)},_(Mt,Zh),wt(Mt,"_l10n",null),wt(Mt,"_l10nResizer",null),wt(Mt,"_borderLineWidth",-1),wt(Mt,"_colorManager",new Hv),wt(Mt,"_zIndex",1),wt(Mt,"_telemetryTimeout",1e3);let fe=Mt;class BD extends fe{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const vb=3285377520,mi=4294901760,ss=65535;class U_{constructor(t){this.h1=t?t&4294967295:vb,this.h2=t?t&4294967295:vb}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let b=0,T=t.length;b<T;b++){const k=t.charCodeAt(b);k<=255?e[n++]=k:(e[n++]=k>>>8,e[n++]=k&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,a=n-s*4,l=new Uint32Array(e.buffer,0,s);let c=0,d=0,f=this.h1,m=this.h2;const g=3432918353,v=461845907,A=g&ss,S=v&ss;for(let b=0;b<s;b++)b&1?(c=l[b],c=c*g&mi|c*A&ss,c=c<<15|c>>>17,c=c*v&mi|c*S&ss,f^=c,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[b],d=d*g&mi|d*A&ss,d=d<<15|d>>>17,d=d*v&mi|d*S&ss,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(c=0,a){case 3:c^=e[s*4+2]<<16;case 2:c^=e[s*4+1]<<8;case 1:c^=e[s*4],c=c*g&mi|c*A&ss,c=c<<15|c>>>17,c=c*v&mi|c*S&ss,s&1?f^=c:m^=c}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&mi|t*36045&ss,e=e*4283543511&mi|((e<<16|t>>>16)*2950163797&mi)>>>16,t^=e>>>1,t=t*444984403&mi|t*60499&ss,e=e*3301882366&mi|((e<<16|t>>>16)*3120437893&mi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const i0=Object.freeze({map:null,hash:"",transfer:void 0});var ha,da,ze,_m,$_;class Ow{constructor(){_(this,_m);_(this,ha,!1);_(this,da,null);_(this,ze,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=u(this,ze).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return u(this,ze).get(t)}remove(t){if(u(this,ze).delete(t),u(this,ze).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of u(this,ze).values())if(e instanceof fe)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=u(this,ze).get(t);let s=!1;if(n!==void 0)for(const[a,l]of Object.entries(e))n[a]!==l&&(s=!0,n[a]=l);else s=!0,u(this,ze).set(t,e);s&&C(this,_m,$_).call(this),e instanceof fe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return u(this,ze).has(t)}getAll(){return u(this,ze).size>0?Rw(u(this,ze)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return u(this,ze).size}resetModified(){u(this,ha)&&(x(this,ha,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new G_(this)}get serializable(){if(u(this,ze).size===0)return i0;const t=new Map,e=new U_,n=[],s=Object.create(null);let a=!1;for(const[l,c]of u(this,ze)){const d=c instanceof fe?c.serialize(!1,s):c;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),a||(a=!!d.bitmap))}if(a)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:i0}get editorStats(){let t=null;const e=new Map;for(const n of u(this,ze).values()){if(!(n instanceof fe))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:a}=s;e.has(a)||e.set(a,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const l=t[a]||(t[a]=new Map);for(const[c,d]of Object.entries(s)){if(c==="type")continue;let f=l.get(c);f||(f=new Map,l.set(c,f));const m=f.get(d)??0;f.set(d,m+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){x(this,da,null)}get modifiedIds(){if(u(this,da))return u(this,da);const t=[];for(const e of u(this,ze).values())!(e instanceof fe)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return x(this,da,{ids:new Set(t),hash:t.join(",")})}}ha=new WeakMap,da=new WeakMap,ze=new WeakMap,_m=new WeakSet,$_=function(){u(this,ha)||(x(this,ha,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Jh;class G_ extends Ow{constructor(e){super();_(this,Jh);const{map:n,hash:s,transfer:a}=e.serializable,l=structuredClone(n,a?{transfer:a}:null);x(this,Jh,{map:l,hash:s,transfer:a})}get print(){Qt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,Jh)}get modifiedIds(){return Nt(this,"modifiedIds",{ids:new Set,hash:""})}}Jh=new WeakMap;var ou;class HD{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){_(this,ou,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),u(this,ou).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||u(this,ou).has(t.loadedName))){if(_e(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:a}=t,l=new FontFace(n,s,a);this.addNativeFontFace(l);try{await l.load(),u(this,ou).add(n),e==null||e(t)}catch{Pt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Qt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Pt(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Nt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(fn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Nt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(_e(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Nt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(R,I){return R.charCodeAt(I)<<24|R.charCodeAt(I+1)<<16|R.charCodeAt(I+2)<<8|R.charCodeAt(I+3)&255}function s(R,I,j,B){const U=R.substring(0,I),Q=R.substring(I+j);return U+B+Q}let a,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let f=0;function m(R,I){if(++f>30){Pt("Load test font never loaded."),I();return}if(d.font="30px "+R,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(m.bind(null,R,I))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,g.length,g);const S=16,b=1482184792;let T=n(v,S);for(a=0,l=g.length-3;a<l;a+=4)T=T-b+n(g,a)|0;a<g.length&&(T=T-b+n(g+"XXX",a)|0),v=s(v,S,4,TD(T));const k=`url(data:font/opentype;base64,${btoa(v)});`,M=`@font-face {font-family:"${g}";src:${k}}`;this.insertRule(M);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const R of[t.loadedName,g]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=R,L.append(I)}this._document.body.append(L),m(g,()=>{L.remove(),e.complete()})}}ou=new WeakMap;class UD{constructor(t,{disableFontFace:e=!1,fontExtraProperties:n=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.disableFontFace=e===!0,this.fontExtraProperties=n===!0,this._inspectFont=s}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${DD(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(l){Pt(`getPathGenerator - ignoring character: "${l}".`)}const a=new Path2D(s||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=a}}const xp={DATA:1,ERROR:2},Ee={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wb(){}function In(o){if(o instanceof Ao||o instanceof Fv||o instanceof Eh||o instanceof mb||o instanceof hm||o instanceof hv)return o;switch(o instanceof Error||typeof o=="object"&&o!==null||Qt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new Ao(o.message);case"InvalidPDFException":return new Fv(o.message);case"MissingPDFException":return new Eh(o.message);case"PasswordException":return new mb(o.message,o.code);case"UnexpectedResponseException":return new hm(o.message,o.status);case"UnknownErrorException":return new hv(o.message,o.details)}return new hv(o.message,o.toString())}var au,Ci,W_,q_,X_,Op;class eh{constructor(t,e,n){_(this,Ci);_(this,au,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",C(this,Ci,W_).bind(this),{signal:u(this,au).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(t,e,n,s){const a=this.streamId++,l=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:c,action:t,streamId:a,data:e,desiredSize:f.desiredSize},s),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[a].pullCall=m,d.postMessage({sourceName:l,targetName:c,stream:Ee.PULL,streamId:a,desiredSize:f.desiredSize}),m.promise},cancel:f=>{_e(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[a].cancelCall=m,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:l,targetName:c,stream:Ee.CANCEL,streamId:a,reason:In(f)}),m.promise}},n)}destroy(){var t;(t=u(this,au))==null||t.abort(),x(this,au,null)}}au=new WeakMap,Ci=new WeakSet,W_=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){C(this,Ci,X_).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===xp.DATA)s.resolve(t.data);else if(t.callback===xp.ERROR)s.reject(In(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(l){a.postMessage({sourceName:n,targetName:s,callback:xp.DATA,callbackId:t.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:s,callback:xp.ERROR,callbackId:t.callbackId,reason:In(l)})});return}if(t.streamId){C(this,Ci,q_).call(this,t);return}e(t.data)},q_=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this,c=this.actionHandler[t.action],d={enqueue(f,m=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:s,stream:Ee.ENQUEUE,streamId:e,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:Ee.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){_e(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:Ee.ERROR,streamId:e,reason:In(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(c,t.data,d).then(function(){a.postMessage({sourceName:n,targetName:s,stream:Ee.START_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:Ee.START_COMPLETE,streamId:e,reason:In(f)})})},X_=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case Ee.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(In(t.reason));break;case Ee.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(In(t.reason));break;case Ee.PULL:if(!c){a.postMessage({sourceName:n,targetName:s,stream:Ee.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||wb).then(function(){a.postMessage({sourceName:n,targetName:s,stream:Ee.PULL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:Ee.PULL_COMPLETE,streamId:e,reason:In(f)})});break;case Ee.ENQUEUE:if(_e(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case Ee.CLOSE:if(_e(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),C(this,Ci,Op).call(this,l,e);break;case Ee.ERROR:_e(l,"error should have stream controller"),l.controller.error(In(t.reason)),C(this,Ci,Op).call(this,l,e);break;case Ee.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(In(t.reason)),C(this,Ci,Op).call(this,l,e);break;case Ee.CANCEL:if(!c)break;const d=In(t.reason);Promise.try(c.onCancel||wb,d).then(function(){a.postMessage({sourceName:n,targetName:s,stream:Ee.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:s,stream:Ee.CANCEL_COMPLETE,streamId:e,reason:In(f)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Op=async function(t,e){var n,s,a;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(a=t.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[e]};var td;class K_{constructor({enableHWA:t=!1}){_(this,td,!1);x(this,td,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,td)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Qt("Abstract method `_createCanvas` called.")}}td=new WeakMap;class $D extends K_{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class Y_{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class Q_ extends Y_{async _fetch(t){const e=await Xm(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):qm(e)}}class Z_{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,a){return"none"}destroy(t=!1){}}var fa,lu,Ws,qs,ln,pa,ma,it,rn,nh,Pl,jp,Ml,J_,s0,Rl,ih,sh,r0,rh;class GD extends Z_{constructor({docId:e,ownerDocument:n=globalThis.document}){super();_(this,it);_(this,fa);_(this,lu);_(this,Ws);_(this,qs);_(this,ln);_(this,pa);_(this,ma,0);x(this,qs,e),x(this,ln,n)}addFilter(e){if(!e)return"none";let n=u(this,it,rn).get(e);if(n)return n;const[s,a,l]=C(this,it,jp).call(this,e),c=e.length===1?s:`${s}${a}${l}`;if(n=u(this,it,rn).get(c),n)return u(this,it,rn).set(e,n),n;const d=`g_${u(this,qs)}_transfer_map_${vn(this,ma)._++}`,f=C(this,it,Ml).call(this,d);u(this,it,rn).set(e,f),u(this,it,rn).set(c,f);const m=C(this,it,Rl).call(this,d);return C(this,it,sh).call(this,s,a,l,m),f}addHCMFilter(e,n){var S;const s=`${e}-${n}`,a="base";let l=u(this,it,nh).get(a);if((l==null?void 0:l.key)===s||(l?((S=l.filter)==null||S.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},u(this,it,nh).set(a,l)),!e||!n))return l.url;const c=C(this,it,rh).call(this,e);e=mt.makeHexColor(...c);const d=C(this,it,rh).call(this,n);if(n=mt.makeHexColor(...d),u(this,it,Pl).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return l.url;const f=new Array(256);for(let b=0;b<=255;b++){const T=b/255;f[b]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const m=f.join(","),g=`g_${u(this,qs)}_hcm_filter`,v=l.filter=C(this,it,Rl).call(this,g);C(this,it,sh).call(this,m,m,m,v),C(this,it,s0).call(this,v);const A=(b,T)=>{const k=c[b]/255,M=d[b]/255,L=new Array(T+1);for(let R=0;R<=T;R++)L[R]=k+R/T*(M-k);return L.join(",")};return C(this,it,sh).call(this,A(0,5),A(1,5),A(2,5),v),l.url=C(this,it,Ml).call(this,g),l.url}addAlphaFilter(e){let n=u(this,it,rn).get(e);if(n)return n;const[s]=C(this,it,jp).call(this,[e]),a=`alpha_${s}`;if(n=u(this,it,rn).get(a),n)return u(this,it,rn).set(e,n),n;const l=`g_${u(this,qs)}_alpha_map_${vn(this,ma)._++}`,c=C(this,it,Ml).call(this,l);u(this,it,rn).set(e,c),u(this,it,rn).set(a,c);const d=C(this,it,Rl).call(this,l);return C(this,it,r0).call(this,s,d),c}addLuminosityFilter(e){let n=u(this,it,rn).get(e||"luminosity");if(n)return n;let s,a;if(e?([s]=C(this,it,jp).call(this,[e]),a=`luminosity_${s}`):a="luminosity",n=u(this,it,rn).get(a),n)return u(this,it,rn).set(e,n),n;const l=`g_${u(this,qs)}_luminosity_map_${vn(this,ma)._++}`,c=C(this,it,Ml).call(this,l);u(this,it,rn).set(e,c),u(this,it,rn).set(a,c);const d=C(this,it,Rl).call(this,l);return C(this,it,J_).call(this,d),e&&C(this,it,r0).call(this,s,d),c}addHighlightHCMFilter(e,n,s,a,l){var M;const c=`${n}-${s}-${a}-${l}`;let d=u(this,it,nh).get(e);if((d==null?void 0:d.key)===c||(d?((M=d.filter)==null||M.remove(),d.key=c,d.url="none",d.filter=null):(d={key:c,url:"none",filter:null},u(this,it,nh).set(e,d)),!n||!s))return d.url;const[f,m]=[n,s].map(C(this,it,rh).bind(this));let g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[A,S]=[a,l].map(C(this,it,rh).bind(this));v<g&&([g,v,A,S]=[v,g,S,A]),u(this,it,Pl).style.color="";const b=(L,R,I)=>{const j=new Array(256),B=(v-g)/I,U=L/255,Q=(R-L)/(255*I);let ct=0;for(let ot=0;ot<=I;ot++){const Rt=Math.round(g+ot*B),Ft=U+ot*Q;for(let _t=ct;_t<=Rt;_t++)j[_t]=Ft;ct=Rt+1}for(let ot=ct;ot<256;ot++)j[ot]=j[ct-1];return j.join(",")},T=`g_${u(this,qs)}_hcm_${e}_filter`,k=d.filter=C(this,it,Rl).call(this,T);return C(this,it,s0).call(this,k),C(this,it,sh).call(this,b(A[0],S[0],5),b(A[1],S[1],5),b(A[2],S[2],5),k),d.url=C(this,it,Ml).call(this,T),d.url}destroy(e=!1){var n,s,a,l;e&&((n=u(this,pa))!=null&&n.size)||((s=u(this,Ws))==null||s.parentNode.parentNode.remove(),x(this,Ws,null),(a=u(this,lu))==null||a.clear(),x(this,lu,null),(l=u(this,pa))==null||l.clear(),x(this,pa,null),x(this,ma,0))}}fa=new WeakMap,lu=new WeakMap,Ws=new WeakMap,qs=new WeakMap,ln=new WeakMap,pa=new WeakMap,ma=new WeakMap,it=new WeakSet,rn=function(){return u(this,lu)||x(this,lu,new Map)},nh=function(){return u(this,pa)||x(this,pa,new Map)},Pl=function(){if(!u(this,Ws)){const e=u(this,ln).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=u(this,ln).createElementNS(Is,"svg");s.setAttribute("width",0),s.setAttribute("height",0),x(this,Ws,u(this,ln).createElementNS(Is,"defs")),e.append(s),s.append(u(this,Ws)),u(this,ln).body.append(e)}return u(this,Ws)},jp=function(e){if(e.length===1){const f=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=f[v]/255;const g=m.join(",");return[g,g,g]}const[n,s,a]=e,l=new Array(256),c=new Array(256),d=new Array(256);for(let f=0;f<256;f++)l[f]=n[f]/255,c[f]=s[f]/255,d[f]=a[f]/255;return[l.join(","),c.join(","),d.join(",")]},Ml=function(e){if(u(this,fa)===void 0){x(this,fa,"");const n=u(this,ln).URL;n!==u(this,ln).baseURI&&(Km(n)?Pt('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,fa,n.split("#",1)[0]))}return`url(${u(this,fa)}#${e})`},J_=function(e){const n=u(this,ln).createElementNS(Is,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},s0=function(e){const n=u(this,ln).createElementNS(Is,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Rl=function(e){const n=u(this,ln).createElementNS(Is,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),u(this,it,Pl).append(n),n},ih=function(e,n,s){const a=u(this,ln).createElementNS(Is,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),e.append(a)},sh=function(e,n,s,a){const l=u(this,ln).createElementNS(Is,"feComponentTransfer");a.append(l),C(this,it,ih).call(this,l,"feFuncR",e),C(this,it,ih).call(this,l,"feFuncG",n),C(this,it,ih).call(this,l,"feFuncB",s)},r0=function(e,n){const s=u(this,ln).createElementNS(Is,"feComponentTransfer");n.append(s),C(this,it,ih).call(this,s,"feFuncA",e)},rh=function(e){return u(this,it,Pl).style.color=e,Fw(getComputedStyle(u(this,it,Pl)).getPropertyValue("color"))};class tC{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class eC extends tC{async _fetch(t){const e=await Xm(t,"arraybuffer");return new Uint8Array(e)}}fn&&Pt("Please use the `legacy` build in Node.js environments.");async function nC(o){const e=await process.getBuiltinModule("fs").promises.readFile(o);return new Uint8Array(e)}class WD extends Z_{}class qD extends K_{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class XD extends Y_{async _fetch(t){return nC(t)}}class KD extends tC{async _fetch(t){return nC(t)}}const dn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function o0(o,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),o.clip(s)}class jw{getPattern(){Qt("Abstract method `getPattern` called.")}}class YD extends jw{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let a;if(s===dn.STROKE||s===dn.FILL){const l=e.current.getClippedPathBoundingBox(s,oe(t))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",c,d),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-l[0],-l[1]),n=mt.transform(n,[1,0,0,1,l[0],l[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),o0(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),a=t.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);a.setTransform(g)}else o0(t,this._bbox),a=this._createGradient(t);return a}}function pv(o,t,e,n,s,a,l,c){const d=t.coords,f=t.colors,m=o.data,g=o.width*4;let v;d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=a,a=l,l=v),d[n+1]>d[s+1]&&(v=n,n=s,s=v,v=l,l=c,c=v),d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=a,a=l,l=v);const A=(d[e]+t.offsetX)*t.scaleX,S=(d[e+1]+t.offsetY)*t.scaleY,b=(d[n]+t.offsetX)*t.scaleX,T=(d[n+1]+t.offsetY)*t.scaleY,k=(d[s]+t.offsetX)*t.scaleX,M=(d[s+1]+t.offsetY)*t.scaleY;if(S>=M)return;const L=f[a],R=f[a+1],I=f[a+2],j=f[l],B=f[l+1],U=f[l+2],Q=f[c],ct=f[c+1],ot=f[c+2],Rt=Math.round(S),Ft=Math.round(M);let _t,Kt,Z,K,q,lt,J,F;for(let $=Rt;$<=Ft;$++){if($<T){const vt=$<S?0:(S-$)/(S-T);_t=A-(A-b)*vt,Kt=L-(L-j)*vt,Z=R-(R-B)*vt,K=I-(I-U)*vt}else{let vt;$>M?vt=1:T===M?vt=0:vt=(T-$)/(T-M),_t=b-(b-k)*vt,Kt=j-(j-Q)*vt,Z=B-(B-ct)*vt,K=U-(U-ot)*vt}let ft;$<S?ft=0:$>M?ft=1:ft=(S-$)/(S-M),q=A-(A-k)*ft,lt=L-(L-Q)*ft,J=R-(R-ct)*ft,F=I-(I-ot)*ft;const Ct=Math.round(Math.min(_t,q)),Lt=Math.round(Math.max(_t,q));let St=g*$+Ct*4;for(let vt=Ct;vt<=Lt;vt++)ft=(_t-vt)/(_t-q),ft<0?ft=0:ft>1&&(ft=1),m[St++]=Kt-(Kt-lt)*ft|0,m[St++]=Z-(Z-J)*ft|0,m[St++]=K-(K-F)*ft|0,m[St++]=255}}function QD(o,t,e){const n=t.coords,s=t.colors;let a,l;switch(t.type){case"lattice":const c=t.verticesPerRow,d=Math.floor(n.length/c)-1,f=c-1;for(a=0;a<d;a++){let m=a*c;for(let g=0;g<f;g++,m++)pv(o,e,n[m],n[m+1],n[m+c],s[m],s[m+1],s[m+c]),pv(o,e,n[m+c+1],n[m+1],n[m+c],s[m+c+1],s[m+1],s[m+c])}break;case"triangles":for(a=0,l=n.length;a<l;a+=3)pv(o,e,n[a],n[a+1],n[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class ZD extends jw{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-c,m=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),A=f/g,S=m/v,b={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/A,scaleY:1/S},T=g+4,k=v+4,M=n.getCanvas("mesh",T,k),L=M.context,R=L.createImageData(g,v);if(e){const j=R.data;for(let B=0,U=j.length;B<U;B+=4)j[B]=e[0],j[B+1]=e[1],j[B+2]=e[2],j[B+3]=255}for(const j of this._figures)QD(R,j,b);return L.putImageData(R,2,2),{canvas:M.canvas,offsetX:c-2*A,offsetY:d-2*S,scaleX:A,scaleY:S}}getPattern(t,e,n,s){o0(t,this._bbox);let a;if(s===dn.SHADING)a=mt.singularValueDecompose2dScale(oe(t));else if(a=mt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const c=mt.singularValueDecompose2dScale(this.matrix);a=[a[0]*c[0],a[1]*c[1]]}const l=this._createMeshCanvas(a,s===dn.SHADING?null:this._background,e.cachedCanvases);return s!==dn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class JD extends jw{getPattern(){return"hotpink"}}function tI(o){switch(o[0]){case"RadialAxial":return new YD(o);case"Mesh":return new ZD(o);case"Dummy":return new JD}throw new Error(`Unknown IR type: ${o[0]}`)}const Ab={COLORED:1,UNCOLORED:2},Cm=class Cm{constructor(t,e,n,s,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:s,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),Wm("TilingType: "+a);const m=e[0],g=e[1],v=e[2],A=e[3],S=v-m,b=A-g,T=mt.singularValueDecompose2dScale(this.matrix),k=mt.singularValueDecompose2dScale(this.baseTransform),M=T[0]*k[0],L=T[1]*k[1];let R=S,I=b,j=!1,B=!1;const U=Math.ceil(d*M),Q=Math.ceil(f*L),ct=Math.ceil(S*M),ot=Math.ceil(b*L);U>=ct?R=d:j=!0,Q>=ot?I=f:B=!0;const Rt=this.getSizeAndScale(R,this.ctx.canvas.width,M),Ft=this.getSizeAndScale(I,this.ctx.canvas.height,L),_t=t.cachedCanvases.getCanvas("pattern",Rt.size,Ft.size),Kt=_t.context,Z=c.createCanvasGraphics(Kt);if(Z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Z,s,l),Kt.translate(-Rt.scale*m,-Ft.scale*g),Z.transform(Rt.scale,0,0,Ft.scale,0,0),Kt.save(),this.clipBbox(Z,m,g,v,A),Z.baseTransform=oe(Z.ctx),Z.executeOperatorList(n),Z.endDrawing(),Kt.restore(),j||B){const K=_t.canvas;j&&(R=d),B&&(I=f);const q=this.getSizeAndScale(R,this.ctx.canvas.width,M),lt=this.getSizeAndScale(I,this.ctx.canvas.height,L),J=q.size,F=lt.size,$=t.cachedCanvases.getCanvas("pattern-workaround",J,F),ft=$.context,Ct=j?Math.floor(S/d):0,Lt=B?Math.floor(b/f):0;for(let St=0;St<=Ct;St++)for(let vt=0;vt<=Lt;vt++)ft.drawImage(K,J*St,F*vt,J,F,0,0,J,F);return{canvas:$.canvas,scaleX:q.scale,scaleY:lt.scale,offsetX:m,offsetY:g}}return{canvas:_t.canvas,scaleX:Rt.scale,scaleY:Ft.scale,offsetX:m,offsetY:g}}getSizeAndScale(t,e,n){const s=Math.max(Cm.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=s?a=s:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,s,a){const l=s-e,c=a-n;t.ctx.rect(e,n,l,c),t.current.updateRectMinMax(oe(t.ctx),[e,n,s,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,a=t.current;switch(e){case Ab.COLORED:const l=this.ctx;s.fillStyle=l.fillStyle,s.strokeStyle=l.strokeStyle,a.fillColor=l.fillStyle,a.strokeColor=l.strokeStyle;break;case Ab.UNCOLORED:const c=mt.makeHexColor(n[0],n[1],n[2]);s.fillStyle=c,s.strokeStyle=c,a.fillColor=c,a.strokeColor=c;break;default:throw new CD(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,s){let a=n;s!==dn.SHADING&&(a=mt.transform(a,e.baseTransform),this.matrix&&(a=mt.transform(a,this.matrix)));const l=this.createPatternCanvas(e);let c=new DOMMatrix(a);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const d=t.createPattern(l.canvas,"repeat");return d.setTransform(c),d}};wt(Cm,"MAX_PATTERN_SIZE",3e3);let a0=Cm;function eI({src:o,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const c=En.isLittleEndian?4278190080:255,[d,f]=l?[a,c]:[c,a],m=n>>3,g=n&7,v=o.length;e=new Uint32Array(e.buffer);let A=0;for(let S=0;S<s;S++){for(const T=t+m;t<T;t++){const k=t<v?o[t]:255;e[A++]=k&128?f:d,e[A++]=k&64?f:d,e[A++]=k&32?f:d,e[A++]=k&16?f:d,e[A++]=k&8?f:d,e[A++]=k&4?f:d,e[A++]=k&2?f:d,e[A++]=k&1?f:d}if(g===0)continue;const b=t<v?o[t++]:255;for(let T=0;T<g;T++)e[A++]=b&1<<7-T?f:d}return{srcPos:t,destPos:A}}const xb=16,Sb=100,nI=15,bb=10,Eb=1e3,Vn=16;function iI(o,t){if(o._removeMirroring)throw new Error("Context is already forwarding operations.");o.__originalSave=o.save,o.__originalRestore=o.restore,o.__originalRotate=o.rotate,o.__originalScale=o.scale,o.__originalTranslate=o.translate,o.__originalTransform=o.transform,o.__originalSetTransform=o.setTransform,o.__originalResetTransform=o.resetTransform,o.__originalClip=o.clip,o.__originalMoveTo=o.moveTo,o.__originalLineTo=o.lineTo,o.__originalBezierCurveTo=o.bezierCurveTo,o.__originalRect=o.rect,o.__originalClosePath=o.closePath,o.__originalBeginPath=o.beginPath,o._removeMirroring=()=>{o.save=o.__originalSave,o.restore=o.__originalRestore,o.rotate=o.__originalRotate,o.scale=o.__originalScale,o.translate=o.__originalTranslate,o.transform=o.__originalTransform,o.setTransform=o.__originalSetTransform,o.resetTransform=o.__originalResetTransform,o.clip=o.__originalClip,o.moveTo=o.__originalMoveTo,o.lineTo=o.__originalLineTo,o.bezierCurveTo=o.__originalBezierCurveTo,o.rect=o.__originalRect,o.closePath=o.__originalClosePath,o.beginPath=o.__originalBeginPath,delete o._removeMirroring},o.save=function(){t.save(),this.__originalSave()},o.restore=function(){t.restore(),this.__originalRestore()},o.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},o.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},o.transform=function(n,s,a,l,c,d){t.transform(n,s,a,l,c,d),this.__originalTransform(n,s,a,l,c,d)},o.setTransform=function(n,s,a,l,c,d){t.setTransform(n,s,a,l,c,d),this.__originalSetTransform(n,s,a,l,c,d)},o.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},o.rotate=function(n){t.rotate(n),this.__originalRotate(n)},o.clip=function(n){t.clip(n),this.__originalClip(n)},o.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},o.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},o.bezierCurveTo=function(e,n,s,a,l,c){t.bezierCurveTo(e,n,s,a,l,c),this.__originalBezierCurveTo(e,n,s,a,l,c)},o.rect=function(e,n,s,a){t.rect(e,n,s,a),this.__originalRect(e,n,s,a)},o.closePath=function(){t.closePath(),this.__originalClosePath()},o.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class sI{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Sp(o,t,e,n,s,a,l,c,d,f){const[m,g,v,A,S,b]=oe(o);if(g===0&&v===0){const M=l*m+S,L=Math.round(M),R=c*A+b,I=Math.round(R),j=(l+d)*m+S,B=Math.abs(Math.round(j)-L)||1,U=(c+f)*A+b,Q=Math.abs(Math.round(U)-I)||1;return o.setTransform(Math.sign(m),0,0,Math.sign(A),L,I),o.drawImage(t,e,n,s,a,0,0,B,Q),o.setTransform(m,g,v,A,S,b),[B,Q]}if(m===0&&A===0){const M=c*v+S,L=Math.round(M),R=l*g+b,I=Math.round(R),j=(c+f)*v+S,B=Math.abs(Math.round(j)-L)||1,U=(l+d)*g+b,Q=Math.abs(Math.round(U)-I)||1;return o.setTransform(0,Math.sign(g),Math.sign(v),0,L,I),o.drawImage(t,e,n,s,a,0,0,Q,B),o.setTransform(m,g,v,A,S,b),[Q,B]}o.drawImage(t,e,n,s,a,l,c,d,f);const T=Math.hypot(m,g),k=Math.hypot(v,A);return[T*d,k*f]}function rI(o){const{width:t,height:e}=o;if(t>Eb||e>Eb)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1;let l=new Uint8Array(a*(e+1)),c,d,f;const m=t+7&-8;let g=new Uint8Array(m*e),v=0;for(const k of o.data){let M=128;for(;M>0;)g[v++]=k&M?0:255,M>>=1}let A=0;for(v=0,g[v]!==0&&(l[0]=1,++A),d=1;d<t;d++)g[v]!==g[v+1]&&(l[d]=g[v]?2:1,++A),v++;for(g[v]!==0&&(l[d]=2,++A),c=1;c<e;c++){v=c*m,f=c*a,g[v-m]!==g[v]&&(l[f]=g[v]?1:8,++A);let k=(g[v]?4:0)+(g[v-m]?8:0);for(d=1;d<t;d++)k=(k>>2)+(g[v+1]?4:0)+(g[v-m+1]?8:0),s[k]&&(l[f+d]=s[k],++A),v++;if(g[v-m]!==g[v]&&(l[f+d]=g[v]?2:4,++A),A>n)return null}for(v=m*(e-1),f=c*a,g[v]!==0&&(l[f]=8,++A),d=1;d<t;d++)g[v]!==g[v+1]&&(l[f+d]=g[v]?4:8,++A),v++;if(g[v]!==0&&(l[f+d]=4,++A),A>n)return null;const S=new Int32Array([0,a,-1,0,-a,0,0,0,1]),b=new Path2D;for(c=0;A&&c<=e;c++){let k=c*a;const M=k+t;for(;k<M&&!l[k];)k++;if(k===M)continue;b.moveTo(k%a,c);const L=k;let R=l[k];do{const I=S[R];do k+=I;while(!l[k]);const j=l[k];j!==5&&j!==10?(R=j,l[k]=0):(R=j&51*R>>4,l[k]&=R>>2|R<<2),b.lineTo(k%a,k/a|0),l[k]||--A}while(L!==k);--c}return g=null,l=null,function(k){k.save(),k.scale(1/t,-1/e),k.translate(0,-e),k.fill(b),k.beginPath(),k.restore()}}class _b{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=d_,this.textMatrixScale=1,this.fontMatrix=Nv,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=sn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=mt.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=mt.applyTransform(e,t),s=mt.applyTransform(e.slice(2),t),a=mt.applyTransform([e[0],e[3]],t),l=mt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],s[0],a[0],l[0]),this.minY=Math.min(this.minY,n[1],s[1],a[1],l[1]),this.maxX=Math.max(this.maxX,n[0],s[0],a[0],l[0]),this.maxY=Math.max(this.maxY,n[1],s[1],a[1],l[1])}updateScalingPathMinMax(t,e){mt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,s,a,l,c,d,f,m){const g=mt.bezierBoundingBox(e,n,s,a,l,c,d,f,m);m||this.updateRectMinMax(t,g)}getPathBoundingBox(t=dn.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===dn.STROKE){e||Qt("Stroke bounding box must include transform.");const s=mt.singularValueDecompose2dScale(e),a=s[0]*this.lineWidth/2,l=s[1]*this.lineWidth/2;n[0]-=a,n[1]-=l,n[2]+=a,n[3]+=l}return n}updateClipFromPath(){const t=mt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=dn.FILL,e=null){return mt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Cb(o,t){if(t instanceof ImageData){o.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%Vn,a=(e-s)/Vn,l=s===0?a:a+1,c=o.createImageData(n,Vn);let d=0,f;const m=t.data,g=c.data;let v,A,S,b;if(t.kind===kp.GRAYSCALE_1BPP){const T=m.byteLength,k=new Uint32Array(g.buffer,0,g.byteLength>>2),M=k.length,L=n+7>>3,R=4294967295,I=En.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(S=v<a?Vn:s,f=0,A=0;A<S;A++){const j=T-d;let B=0;const U=j>L?n:j*8-7,Q=U&-8;let ct=0,ot=0;for(;B<Q;B+=8)ot=m[d++],k[f++]=ot&128?R:I,k[f++]=ot&64?R:I,k[f++]=ot&32?R:I,k[f++]=ot&16?R:I,k[f++]=ot&8?R:I,k[f++]=ot&4?R:I,k[f++]=ot&2?R:I,k[f++]=ot&1?R:I;for(;B<U;B++)ct===0&&(ot=m[d++],ct=128),k[f++]=ot&ct?R:I,ct>>=1}for(;f<M;)k[f++]=0;o.putImageData(c,0,v*Vn)}}else if(t.kind===kp.RGBA_32BPP){for(A=0,b=n*Vn*4,v=0;v<a;v++)g.set(m.subarray(d,d+b)),d+=b,o.putImageData(c,0,A),A+=Vn;v<l&&(b=n*s*4,g.set(m.subarray(d,d+b)),o.putImageData(c,0,A))}else if(t.kind===kp.RGB_24BPP)for(S=Vn,b=n*S,v=0;v<l;v++){for(v>=a&&(S=s,b=n*S),f=0,A=b;A--;)g[f++]=m[d++],g[f++]=m[d++],g[f++]=m[d++],g[f++]=255;o.putImageData(c,0,v*Vn)}else throw new Error(`bad image kind: ${t.kind}`)}function Tb(o,t){if(t.bitmap){o.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%Vn,a=(e-s)/Vn,l=s===0?a:a+1,c=o.createImageData(n,Vn);let d=0;const f=t.data,m=c.data;for(let g=0;g<l;g++){const v=g<a?Vn:s;({srcPos:d}=eI({src:f,srcPos:d,dest:m,width:n,height:v,nonBlackColor:0})),o.putImageData(c,0,g*Vn)}}function $c(o,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)o[n]!==void 0&&(t[n]=o[n]);o.setLineDash!==void 0&&(t.setLineDash(o.getLineDash()),t.lineDashOffset=o.lineDashOffset)}function bp(o){if(o.strokeStyle=o.fillStyle="#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",o.setLineDash!==void 0&&(o.setLineDash([]),o.lineDashOffset=0),!fn){const{filter:t}=o;t!=="none"&&t!==""&&(o.filter="none")}}function kb(o,t){if(t)return!0;const e=mt.singularValueDecompose2dScale(o);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*xo.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const oI=["butt","round","square"],aI=["miter","round","bevel"],lI={},Pb={};var Qi,l0,u0,c0;const Uw=class Uw{constructor(t,e,n,s,a,{optionalContentConfig:l,markedContentStack:c=null},d,f){_(this,Qi);this.ctx=t,this.current=new _b(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new sI(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=c,n){const d=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...oe(this.compositeCtx))}this.ctx.save(),bp(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=oe(this.ctx)}executeOperatorList(t,e,n,s){const a=t.argsArray,l=t.fnArray;let c=e||0;const d=a.length;if(d===c)return c;const f=d-c>bb&&typeof n=="function",m=f?Date.now()+nI:0;let g=0;const v=this.commonObjs,A=this.objs;let S;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,n),c;if(S=l[c],S!==Fi.dependency)this[S].apply(this,a[c]);else for(const b of a[c]){const T=b.startsWith("g_")?v:A;if(!T.has(b))return T.get(b,n),c}if(c++,c===d)return c;if(f&&++g>bb){if(Date.now()>m)return n(),c;g=0}}}endDrawing(){C(this,Qi,l0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),C(this,Qi,u0).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),c=n,d=s,f="prescale1",m,g;for(;a>2&&c>1||l>2&&d>1;){let v=c,A=d;a>2&&c>1&&(v=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/v),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),m=this.cachedCanvases.getCanvas(f,v,A),g=m.context,g.clearRect(0,0,v,A),g.drawImage(t,0,0,c,d,0,0,v,A),t=m.canvas,c=v,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:d}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,a=this.current.fillColor,l=this.current.patternFill,c=oe(e);let d,f,m,g;if((t.bitmap||t.data)&&t.count>1){const U=t.bitmap||t.data.buffer;f=JSON.stringify(l?c:[c.slice(0,4),a]),d=this._cachedBitmapsMap.get(U),d||(d=new Map,this._cachedBitmapsMap.set(U,d));const Q=d.get(f);if(Q&&!l){const ct=Math.round(Math.min(c[0],c[2])+c[4]),ot=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:Q,offsetX:ct,offsetY:ot}}m=Q}m||(g=this.cachedCanvases.getCanvas("maskCanvas",n,s),Tb(g.context,t));let v=mt.transform(c,[1/n,0,0,-1/s,0,0]);v=mt.transform(v,[1,0,0,1,0,-s]);const[A,S,b,T]=mt.getAxialAlignedBoundingBox([0,0,n,s],v),k=Math.round(b-A)||1,M=Math.round(T-S)||1,L=this.cachedCanvases.getCanvas("fillCanvas",k,M),R=L.context,I=A,j=S;R.translate(-I,-j),R.transform(...v),m||(m=this._scaleImage(g.canvas,is(R)),m=m.img,d&&l&&d.set(f,m)),R.imageSmoothingEnabled=kb(oe(R),t.interpolate),Sp(R,m,0,0,m.width,m.height,0,0,n,s),R.globalCompositeOperation="source-in";const B=mt.transform(is(R),[1,0,0,1,-I,-j]);return R.fillStyle=l?a.getPattern(e,this,B,dn.FILL):a,R.fillRect(0,0,n,s),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,L.canvas)),{canvas:L.canvas,offsetX:Math.round(I),offsetY:Math.round(j)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=oI[t]}setLineJoin(t){this.ctx.lineJoin=aI[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const a=this.ctx;a.setTransform(...oe(this.suspendedCtx)),$c(this.suspendedCtx,a),iI(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),$c(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const a=s[0],l=s[1],c=s[2]-a,d=s[3]-l;c===0||d===0||(this.genericComposeSMask(e.context,n,c,d,e.subtype,e.backdrop,e.transferMap,a,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,a,l,c,d,f,m,g){let v=t.canvas,A=d-m,S=f-g;if(l){const T=mt.makeHexColor(...l);if(A<0||S<0||A+n>v.width||S+s>v.height){const k=this.cachedCanvases.getCanvas("maskExtension",n,s),M=k.context;M.drawImage(v,-A,-S),M.globalCompositeOperation="destination-atop",M.fillStyle=T,M.fillRect(0,0,n,s),M.globalCompositeOperation="source-over",v=k.canvas,A=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(A,S,n,s),t.clip(k),t.globalCompositeOperation="destination-atop",t.fillStyle=T,t.fillRect(A,S,n,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const b=new Path2D;b.rect(d,f,n,s),e.clip(b),e.globalCompositeOperation="destination-in",e.drawImage(v,A,S,n,s,d,f,n,s),e.restore()}save(){this.inSMaskMode?($c(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),$c(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,s,a,l){this.ctx.transform(t,e,n,s,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const s=this.ctx,a=this.current;let l=a.x,c=a.y,d,f;const m=oe(s),g=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,v=g?n.slice(0):null;for(let A=0,S=0,b=t.length;A<b;A++)switch(t[A]|0){case Fi.rectangle:l=e[S++],c=e[S++];const T=e[S++],k=e[S++],M=l+T,L=c+k;s.moveTo(l,c),T===0||k===0?s.lineTo(M,L):(s.lineTo(M,c),s.lineTo(M,L),s.lineTo(l,L)),g||a.updateRectMinMax(m,[l,c,M,L]),s.closePath();break;case Fi.moveTo:l=e[S++],c=e[S++],s.moveTo(l,c),g||a.updatePathMinMax(m,l,c);break;case Fi.lineTo:l=e[S++],c=e[S++],s.lineTo(l,c),g||a.updatePathMinMax(m,l,c);break;case Fi.curveTo:d=l,f=c,l=e[S+4],c=e[S+5],s.bezierCurveTo(e[S],e[S+1],e[S+2],e[S+3],l,c),a.updateCurvePathMinMax(m,d,f,e[S],e[S+1],e[S+2],e[S+3],l,c,v),S+=6;break;case Fi.curveTo2:d=l,f=c,s.bezierCurveTo(l,c,e[S],e[S+1],e[S+2],e[S+3]),a.updateCurvePathMinMax(m,d,f,l,c,e[S],e[S+1],e[S+2],e[S+3],v),l=e[S+2],c=e[S+3],S+=4;break;case Fi.curveTo3:d=l,f=c,l=e[S+2],c=e[S+3],s.bezierCurveTo(e[S],e[S+1],l,c,l,c),a.updateCurvePathMinMax(m,d,f,e[S],e[S+1],l,c,l,c,v),S+=4;break;case Fi.closePath:s.closePath();break}g&&a.updateScalingPathMinMax(m,v),a.setCurrentPoint(l,c)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,is(e),dn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let a=!1;s&&(e.save(),e.fillStyle=n.getPattern(e,this,is(e),dn.FILL),a=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),a&&e.restore(),t&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=lI}eoClip(){this.pendingClip=Pb}beginText(){this.current.textMatrix=d_,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const n=new Path2D,s=e.getTransform().invertSelf();for(const{transform:a,x:l,y:c,fontSize:d,path:f}of t)n.addPath(f,new DOMMatrix(a).preMultiplySelf(s).translate(l,c).scale(d,-d));e.clip(n),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||Nv,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Pt("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const a=n.loadedName||"sans-serif",l=((m=n.systemFontInfo)==null?void 0:m.css)||`"${a}", ${n.fallbackName}`;let c="normal";n.black?c="900":n.bold&&(c="bold");const d=n.italic?"italic":"normal";let f=e;e<xb?f=xb:e>Sb&&(f=Sb),this.current.fontSizeScale=e/f,this.ctx.font=`${d} ${c} ${f}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,s,a,l){this.current.textMatrix=[t,e,n,s,a,l],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,s,a){const l=this.ctx,c=this.current,d=c.font,f=c.textRenderingMode,m=c.fontSize/c.fontSizeScale,g=f&sn.FILL_STROKE_MASK,v=!!(f&sn.ADD_TO_PATH_FLAG),A=c.patternFill&&!d.missingFile,S=c.patternStroke&&!d.missingFile;let b;if((d.disableFontFace||v||A||S)&&(b=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||A||S){if(l.save(),l.translate(e,n),l.scale(m,-m),g===sn.FILL||g===sn.FILL_STROKE)if(s){const T=l.getTransform();l.setTransform(...s),l.fill(C(this,Qi,c0).call(this,b,T,s))}else l.fill(b);if(g===sn.STROKE||g===sn.FILL_STROKE)if(a){const T=l.getTransform();l.setTransform(...a),l.stroke(C(this,Qi,c0).call(this,b,T,a))}else l.lineWidth/=m,l.stroke(b);l.restore()}else(g===sn.FILL||g===sn.FILL_STROKE)&&l.fillText(t,e,n),(g===sn.STROKE||g===sn.FILL_STROKE)&&l.strokeText(t,e,n);v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:oe(l),x:e,y:n,fontSize:m,path:b})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return Nt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const a=this.ctx,l=e.fontSizeScale,c=e.charSpacing,d=e.wordSpacing,f=e.fontDirection,m=e.textHScale*f,g=t.length,v=n.vertical,A=v?1:-1,S=n.defaultVMetrics,b=s*e.fontMatrix[0],T=e.textRenderingMode===sn.FILL&&!n.disableFontFace&&!e.patternFill;a.save(),a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),f>0?a.scale(m,-1):a.scale(m,1);let k,M;if(e.patternFill){a.save();const B=e.fillColor.getPattern(a,this,is(a),dn.FILL);k=oe(a),a.restore(),a.fillStyle=B}if(e.patternStroke){a.save();const B=e.strokeColor.getPattern(a,this,is(a),dn.STROKE);M=oe(a),a.restore(),a.strokeStyle=B}let L=e.lineWidth;const R=e.textMatrixScale;if(R===0||L===0){const B=e.textRenderingMode&sn.FILL_STROKE_MASK;(B===sn.STROKE||B===sn.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=R;if(l!==1&&(a.scale(l,l),L/=l),a.lineWidth=L,n.isInvalidPDFjsFont){const B=[];let U=0;for(const Q of t)B.push(Q.unicode),U+=Q.width;a.fillText(B.join(""),0,0),e.x+=U*b*m,a.restore(),this.compose();return}let I=0,j;for(j=0;j<g;++j){const B=t[j];if(typeof B=="number"){I+=A*B*s/1e3;continue}let U=!1;const Q=(B.isSpace?d:0)+c,ct=B.fontChar,ot=B.accent;let Rt,Ft,_t=B.width;if(v){const Z=B.vmetric||S,K=-(B.vmetric?Z[1]:_t*.5)*b,q=Z[2]*b;_t=Z?-Z[0]:_t,Rt=K/l,Ft=(I+q)/l}else Rt=I/l,Ft=0;if(n.remeasure&&_t>0){const Z=a.measureText(ct).width*1e3/s*l;if(_t<Z&&this.isFontSubpixelAAEnabled){const K=_t/Z;U=!0,a.save(),a.scale(K,1),Rt/=K}else _t!==Z&&(Rt+=(_t-Z)/2e3*s/l)}if(this.contentVisible&&(B.isInFont||n.missingFile)){if(T&&!ot)a.fillText(ct,Rt,Ft);else if(this.paintChar(ct,Rt,Ft,k,M),ot){const Z=Rt+s*ot.offset.x/l,K=Ft-s*ot.offset.y/l;this.paintChar(ot.fontChar,Z,K,k,M)}}const Kt=v?_t*b-Q*f:_t*b+Q*f;I+=Kt,U&&a.restore()}v?e.y-=I:e.x+=I*m,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,a=n.fontSize,l=n.fontDirection,c=s.vertical?1:-1,d=n.charSpacing,f=n.wordSpacing,m=n.textHScale*l,g=n.fontMatrix||Nv,v=t.length,A=n.textRenderingMode===sn.INVISIBLE;let S,b,T,k;if(!(A||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(m,l),S=0;S<v;++S){if(b=t[S],typeof b=="number"){k=c*b*a/1e3,this.ctx.translate(k,0),n.x+=k*m;continue}const M=(b.isSpace?f:0)+d,L=s.charProcOperatorList[b.operatorListId];if(!L){Pt(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),e.scale(a,a),e.transform(...g),this.executeOperatorList(L),this.restore()),T=mt.applyTransform([b.width,0],g)[0]*a+M,e.translate(T,0),n.x+=T*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,a,l){this.ctx.rect(n,s,a-n,l-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],s=this.baseTransform||oe(this.ctx),a={createCanvasGraphics:l=>new Uw(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new a0(t,n,this.ctx,a,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=mt.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=mt.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=tI(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,is(e),dn.SHADING);const s=is(e);if(s){const{width:a,height:l}=e.canvas,[c,d,f,m]=mt.getAxialAlignedBoundingBox([0,0,a,l],s);this.ctx.fillRect(c,d,f-c,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Qt("Should not call beginInlineImage")}beginImageData(){Qt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=oe(this.ctx),e)){const n=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],n,s),this.current.updateRectMinMax(oe(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Wm("TODO: Support non-isolated groups."),t.knockout&&Pt("Knockout groups not supported.");const n=oe(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=mt.getAxialAlignedBoundingBox(t.bbox,oe(e));const a=[0,0,e.canvas.width,e.canvas.height];s=mt.intersect(s,a)||[0,0,0,0];const l=Math.floor(s[0]),c=Math.floor(s[1]),d=Math.max(Math.ceil(s[2])-l,1),f=Math.max(Math.ceil(s[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,f]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,d,f),v=g.context;v.translate(-l,-c),v.transform(...n),t.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,c),e.save()),$c(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=oe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const a=mt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,n,s,a){if(C(this,Qi,l0).call(this),bp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const l=e[2]-e[0],c=e[3]-e[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=l,e[3]=c;const[d,f]=mt.singularValueDecompose2dScale(oe(this.ctx)),{viewportScale:m}=this,g=Math.ceil(l*this.outputScaleX*m),v=Math.ceil(c*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(g,v);const{canvas:A,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(t,A),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(d,0,0,-f,0,c*f),bp(this.ctx)}else bp(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],l,c),this.ctx.clip(),this.ctx.beginPath()}this.current=new _b(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),C(this,Qi,u0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=rI(t)),s.compiled)){s.compiled(n);return}const a=this._createMaskCanvas(t),l=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,a,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const d=oe(c);c.transform(e,n,s,a,0,0);const f=this._createMaskCanvas(t);c.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let m=0,g=l.length;m<g;m+=2){const v=mt.transform(d,[e,n,s,a,l[m],l[m+1]]),[A,S]=mt.applyTransform([0,0],v);c.drawImage(f.canvas,A,S)}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const a of t){const{data:l,width:c,height:d,transform:f}=a,m=this.cachedCanvases.getCanvas("maskCanvas",c,d),g=m.context;g.save();const v=this.getObject(l,a);Tb(g,v),g.globalCompositeOperation="source-in",g.fillStyle=s?n.getPattern(g,this,is(e),dn.FILL):n,g.fillRect(0,0,c,d),g.restore(),e.save(),e.transform(...f),e.scale(1,-1),Sp(e,m.canvas,0,0,c,d,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){Pt("Dependent image isn't ready yet");return}const l=a.width,c=a.height,d=[];for(let f=0,m=s.length;f<m;f+=2)d.push({transform:[e,0,0,n,s[f],s[f+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(a,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,s),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;if(this.save(),!fn){const{filter:c}=s;c!=="none"&&c!==""&&(s.filter="none")}s.scale(1/e,-1/n);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Cb(d,t),a=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(a,is(s));s.imageSmoothingEnabled=kb(oe(s),t.interpolate),Sp(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const a=t.width,l=t.height,d=this.cachedCanvases.getCanvas("inlineImage",a,l).context;Cb(d,t),s=this.applyTransferMapsToCanvas(d)}for(const a of e)n.save(),n.transform(...a.transform),n.scale(1,-1),Sp(n,s,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===Pb?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=oe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:a}=this.ctx.getTransform();let l,c;if(n===0&&s===0){const d=Math.abs(e),f=Math.abs(a);if(d===f)if(t===0)l=c=1/d;else{const m=d*t;l=c=m<1?1/m:1}else if(t===0)l=1/d,c=1/f;else{const m=d*t,g=f*t;l=m<1?1/m:1,c=g<1?1/g:1}}else{const d=Math.abs(e*a-n*s),f=Math.hypot(e,n),m=Math.hypot(s,a);if(t===0)l=m/d,c=f/d;else{const g=t*d;l=m>g?m/g:1,c=f>g?f/g:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[s,a]=this.getScaleForStroking();if(e.lineWidth=n||1,s===1&&a===1){e.stroke();return}const l=e.getLineDash();if(t&&e.save(),e.scale(s,a),l.length>0){const c=Math.max(s,a);e.setLineDash(l.map(d=>d/c)),e.lineDashOffset/=c}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Qi=new WeakSet,l0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},u0=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},c0=function(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s};let $l=Uw;for(const o in Fi)$l.prototype[o]!==void 0&&($l.prototype[Fi[o]]=$l.prototype[o]);var ed,nd;class cr{static get workerPort(){return u(this,ed)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,ed,t)}static get workerSrc(){return u(this,nd)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,nd,t)}}ed=new WeakMap,nd=new WeakMap,_(cr,ed,null),_(cr,nd,"");var ga,id;class uI{constructor({parsedData:t,rawData:e}){_(this,ga);_(this,id);x(this,ga,t),x(this,id,e)}getRaw(){return u(this,id)}get(t){return u(this,ga).get(t)??null}getAll(){return Rw(u(this,ga))}has(t){return u(this,ga).has(t)}}ga=new WeakMap,id=new WeakMap;const Ll=Symbol("INTERNAL");var sd,rd,od,uu;class cI{constructor(t,{name:e,intent:n,usage:s,rbGroups:a}){_(this,sd,!1);_(this,rd,!1);_(this,od,!1);_(this,uu,!0);x(this,sd,!!(t&ni.DISPLAY)),x(this,rd,!!(t&ni.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=a}get visible(){if(u(this,od))return u(this,uu);if(!u(this,uu))return!1;const{print:t,view:e}=this.usage;return u(this,sd)?(e==null?void 0:e.viewState)!=="OFF":u(this,rd)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Ll&&Qt("Internal method `_setVisible` called."),x(this,od,n),x(this,uu,e)}}sd=new WeakMap,rd=new WeakMap,od=new WeakMap,uu=new WeakMap;var Zr,Wt,cu,hu,ad,h0;class hI{constructor(t,e=ni.DISPLAY){_(this,ad);_(this,Zr,null);_(this,Wt,new Map);_(this,cu,null);_(this,hu,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,hu,t.order);for(const n of t.groups)u(this,Wt).set(n.id,new cI(e,n));if(t.baseState==="OFF")for(const n of u(this,Wt).values())n._setVisible(Ll,!1);for(const n of t.on)u(this,Wt).get(n)._setVisible(Ll,!0);for(const n of t.off)u(this,Wt).get(n)._setVisible(Ll,!1);x(this,cu,this.getHash())}}isVisible(t){if(u(this,Wt).size===0)return!0;if(!t)return Wm("Optional content group not defined."),!0;if(t.type==="OCG")return u(this,Wt).has(t.id)?u(this,Wt).get(t.id).visible:(Pt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return C(this,ad,h0).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!u(this,Wt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(u(this,Wt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!u(this,Wt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(!u(this,Wt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!u(this,Wt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(!u(this,Wt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!u(this,Wt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(u(this,Wt).get(e).visible)return!1}return!0}return Pt(`Unknown optional content policy ${t.policy}.`),!0}return Pt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var a;const s=u(this,Wt).get(t);if(!s){Pt(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const l of s.rbGroups)for(const c of l)c!==t&&((a=u(this,Wt).get(c))==null||a._setVisible(Ll,!1,!0));s._setVisible(Ll,!!e,!0),x(this,Zr,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const a=u(this,Wt).get(s);if(a)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!a.visible,e);break}}x(this,Zr,null)}get hasInitialVisibility(){return u(this,cu)===null||this.getHash()===u(this,cu)}getOrder(){return u(this,Wt).size?u(this,hu)?u(this,hu).slice():[...u(this,Wt).keys()]:null}getGroups(){return u(this,Wt).size>0?Rw(u(this,Wt)):null}getGroup(t){return u(this,Wt).get(t)||null}getHash(){if(u(this,Zr)!==null)return u(this,Zr);const t=new U_;for(const[e,n]of u(this,Wt))t.update(`${e}:${n.visible}`);return x(this,Zr,t.hexdigest())}}Zr=new WeakMap,Wt=new WeakMap,cu=new WeakMap,hu=new WeakMap,ad=new WeakSet,h0=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const a=t[s];let l;if(Array.isArray(a))l=C(this,ad,h0).call(this,a);else if(u(this,Wt).has(a))l=u(this,Wt).get(a).visible;else return Pt(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class dI{constructor(t,{disableRange:e=!1,disableStream:n=!1}){_e(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:l,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,(a==null?void 0:a.length)>0){const d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(n),!0)});_e(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,a;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(a=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||a.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){_e(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new fI(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new pI(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class fI{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=Iw(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class pI{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function mI(o){let t=!0,e=n("filename\\*","i").exec(o);if(e){e=e[1];let m=c(e);return m=unescape(m),m=d(m),m=f(m),a(m)}if(e=l(o),e){const m=f(e);return a(m)}if(e=n("filename","i").exec(o),e){e=e[1];let m=c(e);return m=f(m),a(m)}function n(m,g){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(m,g){if(m){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(m,{fatal:!0}),A=qm(g);g=v.decode(A),t=!1}catch{}}return g}function a(m){return t&&/[\x80-\xff]/.test(m)&&(m=s("utf-8",m),t&&(m=s("iso-8859-1",m))),m}function l(m){const g=[];let v;const A=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=A.exec(m))!==null;){let[,b,T,k]=v;if(b=parseInt(b,10),b in g){if(b===0)break;continue}g[b]=[T,k]}const S=[];for(let b=0;b<g.length&&b in g;++b){let[T,k]=g[b];k=c(k),T&&(k=unescape(k),b===0&&(k=d(k))),S.push(k)}return S.join("")}function c(m){if(m.startsWith('"')){const g=m.slice(1).split('\\"');for(let v=0;v<g.length;++v){const A=g[v].indexOf('"');A!==-1&&(g[v]=g[v].slice(0,A),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}m=g.join('"')}return m}function d(m){const g=m.indexOf("'");if(g===-1)return m;const v=m.slice(0,g),S=m.slice(g+1).replace(/^[^']*'/,"");return s(v,S)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,A,S){if(A==="q"||A==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,T){return String.fromCharCode(parseInt(T,16))}),s(v,S);try{S=atob(S)}catch{}return s(v,S)})}return""}function iC(o,t){const e=new Headers;if(!o||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function Ym(o){try{return new URL(o).origin}catch{}return null}function sC({responseHeaders:o,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(o.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*e)||n||!t||o.get("Accept-Ranges")!=="bytes"||(o.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function rC(o){const t=o.get("Content-Disposition");if(t){let e=mI(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Iw(e))return e}return null}function Qm(o,t){return o===404||o===0&&t.startsWith("file:")?new Eh('Missing PDF "'+t+'".'):new hm(`Unexpected server response (${o}) while retrieving PDF "${t}".`,o)}function oC(o){return o===200||o===206}function aC(o,t,e){return{method:"GET",headers:o,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function lC(o){return o instanceof Uint8Array?o.buffer:o instanceof ArrayBuffer?o:(Pt(`getArrayBuffer - unexpected data format: ${o}`),new Uint8Array(o).buffer)}class Mb{constructor(t){wt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=iC(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return _e(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new gI(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new yI(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class gI{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,aC(n,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=Ym(a.url),!oC(a.status))throw Qm(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:c,suggestedLength:d}=sC({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=rC(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ao("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:lC(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class yI{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${n-1}`);const l=s.url;fetch(l,aC(a,this._withCredentials,this._abortController)).then(c=>{const d=Ym(c.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!oC(c.status))throw Qm(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:lC(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const mv=200,gv=206;function vI(o){const t=o.response;return typeof t!="string"?t:qm(t).buffer}class wI{constructor({url:t,httpHeaders:e,withCredentials:n}){wt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=iC(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,l]of this.headers)e.setRequestHeader(a,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=gv):s.expectedStatus=mv,e.responseType="arraybuffer",_e(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var s;const n=this.pendingRequests[t];n&&((s=n.onProgress)==null||s.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){n.onError(s.status);return}const a=s.status||mv;if(!(a===mv&&n.expectedStatus===gv)&&a!==n.expectedStatus){n.onError(s.status);return}const c=vI(s);if(a===gv){const d=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:c}):(Pt('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class AI{constructor(t){this._source=t,this._manager=new wI(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return _e(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new xI(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new SI(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class xI{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Ym(e.responseURL);const n=e.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...f]=c.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:l}=sC({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=rC(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Qm(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class SI{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Ym((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Qm(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const bI=/^[a-z][a-z0-9\-+.]+:/i;function EI(o){if(bI.test(o))return new URL(o);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(o))}class _I{constructor(t){this.source=t,this.url=EI(t.url),_e(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return _e(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new CI(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new TI(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class CI{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new Eh(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ao("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class TI{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const kI=1e5,Dn=30,PI=.8;var Ib,Jr,On,ld,ud,ya,Xs,cd,hd,va,du,fu,to,pu,dd,mu,wa,fd,pd,Aa,xa,md,eo,gu,yr,uC,cC,d0,oi,Vp,f0,hC,dC;const Me=class Me{constructor({textContentSource:t,container:e,viewport:n}){_(this,yr);_(this,Jr,Promise.withResolvers());_(this,On,null);_(this,ld,!1);_(this,ud,!!((Ib=globalThis.FontInspector)!=null&&Ib.enabled));_(this,ya,null);_(this,Xs,null);_(this,cd,0);_(this,hd,0);_(this,va,null);_(this,du,null);_(this,fu,0);_(this,to,0);_(this,pu,Object.create(null));_(this,dd,[]);_(this,mu,null);_(this,wa,[]);_(this,fd,new WeakMap);_(this,pd,null);var d;if(t instanceof ReadableStream)x(this,mu,t);else if(typeof t=="object")x(this,mu,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,On,x(this,du,e)),x(this,to,n.scale*(globalThis.devicePixelRatio||1)),x(this,fu,n.rotation),x(this,Xs,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:l,pageY:c}=n.rawDims;x(this,pd,[1,0,0,-1,-l,c+a]),x(this,hd,s),x(this,cd,a),C(d=Me,oi,hC).call(d),Za(e,n),u(this,Jr).promise.finally(()=>{u(Me,gu).delete(this),x(this,Xs,null),x(this,pu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=En.platform;return Nt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{u(this,va).read().then(({value:e,done:n})=>{if(n){u(this,Jr).resolve();return}u(this,ya)??x(this,ya,e.lang),Object.assign(u(this,pu),e.styles),C(this,yr,uC).call(this,e.items),t()},u(this,Jr).reject)};return x(this,va,u(this,mu).getReader()),u(Me,gu).add(this),t(),u(this,Jr).promise}update({viewport:t,onBefore:e=null}){var a;const n=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==u(this,fu)&&(e==null||e(),x(this,fu,s),Za(u(this,du),{rotation:s})),n!==u(this,to)){e==null||e(),x(this,to,n);const l={div:null,properties:null,ctx:C(a=Me,oi,Vp).call(a,u(this,ya))};for(const c of u(this,wa))l.properties=u(this,fd).get(c),l.div=c,C(this,yr,d0).call(this,l)}}cancel(){var e;const t=new Ao("TextLayer task cancelled.");(e=u(this,va))==null||e.cancel(t).catch(()=>{}),x(this,va,null),u(this,Jr).reject(t)}get textDivs(){return u(this,wa)}get textContentItemsStr(){return u(this,dd)}static cleanup(){if(!(u(this,gu).size>0)){u(this,Aa).clear();for(const{canvas:t}of u(this,xa).values())t.remove();u(this,xa).clear()}}};Jr=new WeakMap,On=new WeakMap,ld=new WeakMap,ud=new WeakMap,ya=new WeakMap,Xs=new WeakMap,cd=new WeakMap,hd=new WeakMap,va=new WeakMap,du=new WeakMap,fu=new WeakMap,to=new WeakMap,pu=new WeakMap,dd=new WeakMap,mu=new WeakMap,wa=new WeakMap,fd=new WeakMap,pd=new WeakMap,Aa=new WeakMap,xa=new WeakMap,md=new WeakMap,eo=new WeakMap,gu=new WeakMap,yr=new WeakSet,uC=function(t){var s,a;if(u(this,ld))return;(a=u(this,Xs)).ctx??(a.ctx=C(s=Me,oi,Vp).call(s,u(this,ya)));const e=u(this,wa),n=u(this,dd);for(const l of t){if(e.length>kI){Pt("Ignoring additional textDivs for performance reasons."),x(this,ld,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const c=u(this,On);x(this,On,document.createElement("span")),u(this,On).classList.add("markedContent"),l.id!==null&&u(this,On).setAttribute("id",`${l.id}`),c.append(u(this,On))}else l.type==="endMarkedContent"&&x(this,On,u(this,On).parentNode);continue}n.push(l.str),C(this,yr,cC).call(this,l)}},cC=function(t){var b;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};u(this,wa).push(e);const s=mt.transform(u(this,pd),t.transform);let a=Math.atan2(s[1],s[0]);const l=u(this,pu)[t.fontName];l.vertical&&(a+=Math.PI/2);let c=u(this,ud)&&l.fontSubstitution||l.fontFamily;c=Me.fontFamilyMap.get(c)||c;const d=Math.hypot(s[2],s[3]),f=d*C(b=Me,oi,dC).call(b,c,u(this,ya));let m,g;a===0?(m=s[4],g=s[5]-f):(m=s[4]+f*Math.sin(a),g=s[5]-f*Math.cos(a));const v="calc(var(--scale-factor)*",A=e.style;u(this,On)===u(this,du)?(A.left=`${(100*m/u(this,hd)).toFixed(2)}%`,A.top=`${(100*g/u(this,cd)).toFixed(2)}%`):(A.left=`${v}${m.toFixed(2)}px)`,A.top=`${v}${g.toFixed(2)}px)`),A.fontSize=`${v}${(u(Me,eo)*d).toFixed(2)}px)`,A.fontFamily=c,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,u(this,ud)&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const T=Math.abs(t.transform[0]),k=Math.abs(t.transform[3]);T!==k&&Math.max(T,k)/Math.min(T,k)>1.5&&(S=!0)}if(S&&(n.canvasWidth=l.vertical?t.height:t.width),u(this,fd).set(e,n),u(this,Xs).div=e,u(this,Xs).properties=n,C(this,yr,d0).call(this,u(this,Xs)),n.hasText&&u(this,On).append(e),n.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),u(this,On).append(T)}},d0=function(t){var c;const{div:e,properties:n,ctx:s}=t,{style:a}=e;let l="";if(u(Me,eo)>1&&(l=`scale(${1/u(Me,eo)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=a,{canvasWidth:f,fontSize:m}=n;C(c=Me,oi,f0).call(c,s,m*u(this,to),d);const{width:g}=s.measureText(e.textContent);g>0&&(l=`scaleX(${f*u(this,to)/g}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(a.transform=l)},oi=new WeakSet,Vp=function(t=null){let e=u(this,xa).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,xa).set(t,e),u(this,md).set(e,{size:0,family:""})}return e},f0=function(t,e,n){const s=u(this,md).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},hC=function(){if(u(this,eo)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),x(this,eo,t.getBoundingClientRect().height),t.remove()},dC=function(t,e){const n=u(this,Aa).get(t);if(n)return n;const s=C(this,oi,Vp).call(this,e);s.canvas.width=s.canvas.height=Dn,C(this,oi,f0).call(this,s,Dn,t);const a=s.measureText("");let l=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);if(l){const m=l/(l+c);return u(this,Aa).set(t,m),s.canvas.width=s.canvas.height=0,m}s.strokeStyle="red",s.clearRect(0,0,Dn,Dn),s.strokeText("g",0,0);let d=s.getImageData(0,0,Dn,Dn).data;c=0;for(let m=d.length-1-3;m>=0;m-=4)if(d[m]>0){c=Math.ceil(m/4/Dn);break}s.clearRect(0,0,Dn,Dn),s.strokeText("A",0,Dn),d=s.getImageData(0,0,Dn,Dn).data,l=0;for(let m=0,g=d.length;m<g;m+=4)if(d[m]>0){l=Dn-Math.floor(m/4/Dn);break}s.canvas.width=s.canvas.height=0;const f=l?l/(l+c):PI;return u(this,Aa).set(t,f),f},_(Me,oi),_(Me,Aa,new Map),_(Me,xa,new Map),_(Me,md,new WeakMap),_(Me,eo,null),_(Me,gu,new Set);let _h=Me;class Ch{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(a){var d;if(!a)return;let l=null;const c=a.name;if(c==="#text")l=a.value;else if(Ch.shouldBuildText(c))(d=a==null?void 0:a.attributes)!=null&&d.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&e.push({str:l}),!!a.children)for(const f of a.children)s(f)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const MI=65536,RI=100,LI=5e3,DI=fn?qD:$D,II=fn?XD:Q_,NI=fn?WD:GD,FI=fn?KD:eC;function OI(o={}){typeof o=="string"||o instanceof URL?o={url:o}:(o instanceof ArrayBuffer||ArrayBuffer.isView(o))&&(o={data:o});const t=new p0,{docId:e}=t,n=o.url?jI(o.url):null,s=o.data?VI(o.data):null,a=o.httpHeaders||null,l=o.withCredentials===!0,c=o.password??null,d=o.range instanceof fC?o.range:null,f=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:MI;let m=o.worker instanceof Gl?o.worker:null;const g=o.verbosity,v=typeof o.docBaseUrl=="string"&&!Km(o.docBaseUrl)?o.docBaseUrl:null,A=typeof o.cMapUrl=="string"?o.cMapUrl:null,S=o.cMapPacked!==!1,b=o.CMapReaderFactory||II,T=typeof o.standardFontDataUrl=="string"?o.standardFontDataUrl:null,k=o.StandardFontDataFactory||FI,M=o.stopAtErrors!==!0,L=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,R=o.isEvalSupported!==!1,I=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!fn,j=typeof o.isImageDecoderSupported=="boolean"?o.isImageDecoderSupported:!fn&&(En.platform.isFirefox||!globalThis.chrome),B=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,U=typeof o.disableFontFace=="boolean"?o.disableFontFace:fn,Q=o.fontExtraProperties===!0,ct=o.enableXfa===!0,ot=o.ownerDocument||globalThis.document,Rt=o.disableRange===!0,Ft=o.disableStream===!0,_t=o.disableAutoFetch===!0,Kt=o.pdfBug===!0,Z=o.CanvasFactory||DI,K=o.FilterFactory||NI,q=o.enableHWA===!0,lt=d?d.length:o.length??NaN,J=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!fn&&!U,F=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:b===Q_&&k===eC&&A&&T&&Qc(A,document.baseURI)&&Qc(T,document.baseURI),$=null;SD(g);const ft={canvasFactory:new Z({ownerDocument:ot,enableHWA:q}),filterFactory:new K({docId:e,ownerDocument:ot}),cMapReaderFactory:F?null:new b({baseUrl:A,isCompressed:S}),standardFontDataFactory:F?null:new k({baseUrl:T})};if(!m){const St={verbosity:g,port:cr.workerPort};m=St.port?Gl.fromPort(St):new Gl(St),t._worker=m}const Ct={docId:e,apiVersion:"4.10.38",data:s,password:c,disableAutoFetch:_t,rangeChunkSize:f,length:lt,docBaseUrl:v,enableXfa:ct,evaluatorOptions:{maxImageSize:L,disableFontFace:U,ignoreErrors:M,isEvalSupported:R,isOffscreenCanvasSupported:I,isImageDecoderSupported:j,canvasMaxAreaInBytes:B,fontExtraProperties:Q,useSystemFonts:J,cMapUrl:F?A:null,standardFontDataUrl:F?T:null}},Lt={disableFontFace:U,fontExtraProperties:Q,ownerDocument:ot,pdfBug:Kt,styleElement:$,loadingParams:{disableAutoFetch:_t,enableXfa:ct}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const St=m.messageHandler.sendWithPromise("GetDocRequest",Ct,s?[s.buffer]:null);let vt;if(d)vt=new dI(d,{disableRange:Rt,disableStream:Ft});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Ot;if(fn)if(Qc(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ot=Mb}else Ot=_I;else Ot=Qc(n)?Mb:AI;vt=new Ot({url:n,length:lt,httpHeaders:a,withCredentials:l,rangeChunkSize:f,disableRange:Rt,disableStream:Ft})}return St.then(Ot=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Yt=new eh(e,Ot,m.port),mn=new UI(Yt,t,vt,Lt,ft);t._transport=mn,Yt.send("Ready",null)})}).catch(t._capability.reject),t}function jI(o){if(o instanceof URL)return o.href;try{return new URL(o,window.location).href}catch{if(fn&&typeof o=="string")return o}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function VI(o){if(fn&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return qm(o);if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="object"&&!isNaN(o==null?void 0:o.length))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Rb(o){return typeof o=="object"&&Number.isInteger(o==null?void 0:o.num)&&o.num>=0&&Number.isInteger(o==null?void 0:o.gen)&&o.gen>=0}var Tm;const km=class km{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${vn(km,Tm)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}};Tm=new WeakMap,_(km,Tm,0);let p0=km;class fC{constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Qt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class zI{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Nt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var no,Ks,Ei,Dl,zp;class BI{constructor(t,e,n,s=!1){_(this,Ei);_(this,no,null);_(this,Ks,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new yb:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new pC,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}={}){return new nf({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Nt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:s=Vr.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:g=!1}){var R,I;(R=this._stats)==null||R.time("Overall");const v=this._transport.getRenderingIntent(n,s,m,g),{renderingIntent:A,cacheKey:S}=v;x(this,Ks,!1),C(this,Ei,zp).call(this),c||(c=this._transport.getOptionalContentConfig(A));let b=this._intentStates.get(S);b||(b=Object.create(null),this._intentStates.set(S,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const T=!!(A&ni.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(v));const k=j=>{var B;b.renderTasks.delete(M),(this._maybeCleanupAfterRender||T)&&x(this,Ks,!0),C(this,Ei,Dl).call(this,!T),j?(M.capability.reject(j),this._abortOperatorList({intentState:b,reason:j instanceof Error?j:new Error(j)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new g0({callback:k,params:{canvasContext:t,viewport:e,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:f});(b.renderTasks||(b.renderTasks=new Set)).add(M);const L=M.task;return Promise.all([b.displayReadyCapability.promise,c]).then(([j,B])=>{var U;if(this.destroyed){k();return}if((U=this._stats)==null||U.time("Rendering"),!(B.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:j,optionalContentConfig:B}),M.operatorListChanged()}).catch(k),L}getOperatorList({intent:t="display",annotationMode:e=Vr.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var f;function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,n,s,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Ch.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function a(){l.read().then(function({value:d,done:f}){if(f){n(c);return}c.lang??(c.lang=d.lang),Object.assign(c.styles,d.styles),c.items.push(...d.items),a()},s)}const l=e.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),x(this,Ks,!1),C(this,Ei,zp).call(this),Promise.all(t)}cleanup(t=!1){x(this,Ks,!0);const e=C(this,Ei,Dl).call(this,!1);return t&&e&&this._stats&&(this._stats=new yb),e}_startRenderPage(t,e){var s,a;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&C(this,Ei,Dl).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:a,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:s},l).getReader(),f=this._intentStates.get(e);f.streamReader=d;const m=()=>{d.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),m())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();C(this,Ei,Dl).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Dw){let s=RI;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Ao(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}no=new WeakMap,Ks=new WeakMap,Ei=new WeakSet,Dl=function(t=!1){if(C(this,Ei,zp).call(this),!u(this,Ks)||this.destroyed)return!1;if(t)return x(this,no,setTimeout(()=>{x(this,no,null),C(this,Ei,Dl).call(this,!1)},LI)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,Ks,!1),!0},zp=function(){u(this,no)&&(clearTimeout(u(this,no)),x(this,no,null))};var Ys,Pm;class HI{constructor(){_(this,Ys,new Map);_(this,Pm,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};u(this,Pm).then(()=>{for(const[s]of u(this,Ys))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Pt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);s=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}u(this,Ys).set(e,s)}removeEventListener(t,e){const n=u(this,Ys).get(e);n==null||n(),u(this,Ys).delete(e)}terminate(){for(const[,t]of u(this,Ys))t==null||t();u(this,Ys).clear()}}Ys=new WeakMap,Pm=new WeakMap;var Mm,Sa,ba,yu,Bp,vu,Hp;const re=class re{constructor({name:t=null,port:e=null,verbosity:n=bD()}={}){_(this,yu);var s;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=u(re,ba))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(u(re,ba)||x(re,ba,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new eh("main","worker",t),this._messageHandler.on("ready",function(){}),C(this,yu,Bp).call(this)}_initialize(){if(u(re,Sa)||u(re,vu,Hp)){this._setupFakeWorker();return}let{workerSrc:t}=re;try{re._isSameOrigin(window.location.href,t)||(t=re._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new eh("main","worker",e),s=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:a.signal}),n.on("test",c=>{if(a.abort(),this.destroyed||!c){s();return}this._messageHandler=n,this._port=e,this._webWorker=e,C(this,yu,Bp).call(this)}),n.on("ready",c=>{if(a.abort(),this.destroyed){s();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{Wm("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){u(re,Sa)||(Pt("Setting up fake worker."),x(re,Sa,!0)),re._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new HI;this._port=e;const n=`fake${vn(re,Mm)._++}`,s=new eh(n+"_worker",n,e);t.setup(s,e),this._messageHandler=new eh(n,n+"_worker",e),C(this,yu,Bp).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=u(re,ba))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=u(this,ba))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new re(t)}static get workerSrc(){if(cr.workerSrc)return cr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Nt(this,"_setupFakeWorkerGlobal",(async()=>u(this,vu,Hp)?u(this,vu,Hp):(await import(this.workerSrc)).WorkerMessageHandler)())}};Mm=new WeakMap,Sa=new WeakMap,ba=new WeakMap,yu=new WeakSet,Bp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},vu=new WeakSet,Hp=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},_(re,vu),_(re,Mm,0),_(re,Sa,!1),_(re,ba),fn&&(x(re,Sa,!0),cr.workerSrc||(cr.workerSrc="./pdf.worker.mjs")),re._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(e,n);return n.origin===s.origin},re._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Gl=re;var Qs,ms,wu,Au,Zs,Ea,oh;class UI{constructor(t,e,n,s,a){_(this,Ea);_(this,Qs,new Map);_(this,ms,new Map);_(this,wu,new Map);_(this,Au,new Map);_(this,Zs,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new pC,this.fontLoader=new HD({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Nt(this,"annotationStorage",new Ow)}getRenderingIntent(t,e=Vr.ENABLE,n=null,s=!1,a=!1){let l=ni.DISPLAY,c=i0;switch(t){case"any":l=ni.ANY;break;case"display":break;case"print":l=ni.PRINT;break;default:Pt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&ni.PRINT&&n instanceof G_?n:this.annotationStorage;switch(e){case Vr.DISABLE:l+=ni.ANNOTATIONS_DISABLE;break;case Vr.ENABLE:break;case Vr.ENABLE_FORMS:l+=ni.ANNOTATIONS_FORMS;break;case Vr.ENABLE_STORAGE:l+=ni.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Pt(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(l+=ni.IS_EDITING),a&&(l+=ni.OPLIST);const{ids:f,hash:m}=d.modifiedIds,g=[l,c.hash,m];return{renderingIntent:l,cacheKey:g.join("_"),annotationStorageSerializable:c,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,Zs))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of u(this,ms).values())t.push(s._destroy());u(this,ms).clear(),u(this,wu).clear(),u(this,Au).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,a;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Qs).clear(),this.filterFactory.destroy(),_h.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Ao("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{_e(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){s.close();return}_e(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:l}=this._fullReader;return(!s||!a)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),this._fullReader.onProgress=d=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:s,isRangeSupported:a,contentLength:l}}),t.on("GetRangeReader",(n,s)=>{_e(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:l,done:c}){if(c){s.close();return}_e(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{a.cancel(l),s.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new zI(n,this))}),t.on("DocException",n=>{e._capability.reject(In(n))}),t.on("PasswordRequest",n=>{x(this,Zs,Promise.withResolvers());try{if(!e.onPassword)throw In(n);const s=a=>{a instanceof Error?u(this,Zs).reject(a):u(this,Zs).resolve({password:a})};e.onPassword(s,n.code)}catch(s){u(this,Zs).reject(s)}return u(this,Zs).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,ms).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,a])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:c,fontExtraProperties:d,pdfBug:f}=this._params;if("error"in a){const A=a.error;Pt(`Error during font loading: ${A}`),this.commonObjs.resolve(n,A);break}const m=f&&((l=globalThis.FontInspector)!=null&&l.enabled)?(A,S)=>globalThis.FontInspector.fontAdded(A,S):null,g=new UD(a,{disableFontFace:c,fontExtraProperties:d,inspectFont:m});this.fontLoader.bind(g).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&g.data&&(g.data=null),this.commonObjs.resolve(n,g)});break;case"CopyLocalImage":const{imageRef:v}=a;_e(v,"The imageRef must be defined.");for(const A of u(this,ms).values())for(const[,S]of A.objs)if((S==null?void 0:S.ref)===v)return S.dataLen?(this.commonObjs.resolve(n,structuredClone(S)),S.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,a,l])=>{var d;if(this.destroyed)return;const c=u(this,ms).get(s);if(!c.objs.has(n)){if(c._intentStates.size===0){(d=l==null?void 0:l.bitmap)==null||d.close();return}switch(a){case"Image":c.objs.resolve(n,l),(l==null?void 0:l.dataLen)>vD&&(c._maybeCleanupAfterRender=!0);break;case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=u(this,wu).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&u(this,Au).set(a.refStr,t);const l=new BI(e,a,this,this._params.pdfBug);return u(this,ms).set(e,l),l});return u(this,wu).set(e,s),s}getPageIndex(t){return Rb(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return C(this,Ea,oh).call(this,"GetFieldObjects")}hasJSActions(){return C(this,Ea,oh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return C(this,Ea,oh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return C(this,Ea,oh).call(this,"GetOptionalContentConfig").then(e=>new hI(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=u(this,Qs).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var a,l;return{info:s[0],metadata:s[1]?new uI(s[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}});return u(this,Qs).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of u(this,ms).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),u(this,Qs).clear(),this.filterFactory.destroy(!0),_h.cleanup()}}cachedPageNumber(t){if(!Rb(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return u(this,Au).get(e)??null}}Qs=new WeakMap,ms=new WeakMap,wu=new WeakMap,Au=new WeakMap,Zs=new WeakMap,Ea=new WeakSet,oh=function(t,e=null){const n=u(this,Qs).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return u(this,Qs).set(t,s),s};const Gc=Symbol("INITIAL_DATA");var qn,gd,m0;class pC{constructor(){_(this,gd);_(this,qn,Object.create(null))}get(t,e=null){if(e){const s=C(this,gd,m0).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=u(this,qn)[t];if(!n||n.data===Gc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=u(this,qn)[t];return!!e&&e.data!==Gc}delete(t){const e=u(this,qn)[t];return!e||e.data===Gc?!1:(delete u(this,qn)[t],!0)}resolve(t,e=null){const n=C(this,gd,m0).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in u(this,qn)){const{data:n}=u(this,qn)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}x(this,qn,Object.create(null))}*[Symbol.iterator](){for(const t in u(this,qn)){const{data:e}=u(this,qn)[t];e!==Gc&&(yield[t,e])}}}qn=new WeakMap,gd=new WeakSet,m0=function(t){var e;return(e=u(this,qn))[t]||(e[t]={...Promise.withResolvers(),data:Gc})};var io;class $I{constructor(t){_(this,io,null);x(this,io,t),this.onContinue=null}get promise(){return u(this,io).capability.promise}cancel(t=0){u(this,io).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=u(this,io).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=u(this,io);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}io=new WeakMap;var so,_a;const Go=class Go{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:a,operatorList:l,pageIndex:c,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:g=!1,pageColors:v=null}){_(this,so,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new $I(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,d;if(this.cancelled)return;if(this._canvas){if(u(Go,_a).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Go,_a).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:a,background:l}=this.params;this.gfx=new $l(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,so)&&(window.cancelAnimationFrame(u(this,so)),x(this,so,null)),u(Go,_a).delete(this._canvas),this.callback(t||new Dw(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,so,window.requestAnimationFrame(()=>{x(this,so,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Go,_a).delete(this._canvas),this.callback())))}};so=new WeakMap,_a=new WeakMap,_(Go,_a,new WeakSet);let g0=Go;const GI="4.10.38",WI="f9bea397f";function Lb(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function Wc(o){return Math.max(0,Math.min(255,255*o))}class Db{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Wc(t),[t,t,t]}static G_HTML([t]){const e=Lb(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Wc)}static RGB_HTML(t){return`#${t.map(Lb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[Wc(1-Math.min(1,t+s)),Wc(1-Math.min(1,n+s)),Wc(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,a=1-e,l=1-n,c=Math.min(s,a,l);return["CMYK",s,a,l,c]}}class qI{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Qt("Abstract method `_createSVG` called.")}}class Vw extends qI{_createSVG(t){return document.createElementNS(Is,t)}}class mC{static setupStorage(t,e,n,s,a){const l=s.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),a==="print")break;t.addEventListener("input",c=>{s.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",c=>{s.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),a==="print")break;t.addEventListener("input",c=>{s.setValue(e,{value:c.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const d=c.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;s.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:a}){const{attributes:l}=e,c=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!c||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}c&&a.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){var g,v;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,a=t.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:a,linkService:n});const c=a!=="richText",d=t.div;if(d.append(l),t.viewport){const A=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=A}c&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const A=document.createTextNode(s.value);l.append(A),c&&Ch.shouldBuildText(s.name)&&f.push(A)}return{textDivs:f}}const m=[[s,-1,l]];for(;m.length>0;){const[A,S,b]=m.at(-1);if(S+1===A.children.length){m.pop();continue}const T=A.children[++m.at(-1)[1]];if(T===null)continue;const{name:k}=T;if(k==="#text"){const L=document.createTextNode(T.value);f.push(L),b.append(L);continue}const M=(g=T==null?void 0:T.attributes)!=null&&g.xmlns?document.createElementNS(T.attributes.xmlns,k):document.createElement(k);if(b.append(M),T.attributes&&this.setAttributes({html:M,element:T,storage:e,intent:a,linkService:n}),((v=T.children)==null?void 0:v.length)>0)m.push([T,-1,M]);else if(T.value){const L=document.createTextNode(T.value);c&&Ch.shouldBuildText(k)&&f.push(L),M.append(L)}}for(const A of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const rf=1e3,XI=9,tl=new WeakSet;function yo(o){return{width:o[2]-o[0],height:o[3]-o[1]}}class KI{static create(t){switch(t.data.annotationType){case Pe.LINK:return new gC(t);case Pe.TEXT:return new YI(t);case Pe.WIDGET:switch(t.data.fieldType){case"Tx":return new QI(t);case"Btn":return t.data.radioButton?new wC(t):t.data.checkBox?new JI(t):new tN(t);case"Ch":return new eN(t);case"Sig":return new ZI(t)}return new il(t);case Pe.POPUP:return new v0(t);case Pe.FREETEXT:return new EC(t);case Pe.LINE:return new iN(t);case Pe.SQUARE:return new sN(t);case Pe.CIRCLE:return new rN(t);case Pe.POLYLINE:return new _C(t);case Pe.CARET:return new aN(t);case Pe.INK:return new zw(t);case Pe.POLYGON:return new oN(t);case Pe.HIGHLIGHT:return new CC(t);case Pe.UNDERLINE:return new lN(t);case Pe.SQUIGGLY:return new uN(t);case Pe.STRIKEOUT:return new cN(t);case Pe.STAMP:return new TC(t);case Pe.FILEATTACHMENT:return new hN(t);default:return new Se(t)}}}var Ca,xu,Su,yd,y0;const $w=class $w{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){_(this,yd);_(this,Ca,null);_(this,xu,!1);_(this,Su,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return $w._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;u(this,Ca)||x(this,Ca,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&C(this,yd,y0).call(this,e),(n=u(this,Su))==null||n.popup.updateEdited(t)}resetEdited(){var t;u(this,Ca)&&(C(this,yd,y0).call(this,u(this,Ca).rect),(t=u(this,Su))==null||t.popup.resetEdited(),x(this,Ca,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),this instanceof il||(a.tabIndex=rf);const{style:l}=a;if(l.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof v0){const{rotation:b}=e;return!e.hasOwnCanvas&&b!==0&&this.setRotation(b,a),a}const{width:c,height:d}=yo(e.rect);if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const b=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(b>0||T>0){const M=`calc(${b}px * var(--scale-factor)) / calc(${T}px * var(--scale-factor))`;l.borderRadius=M}else if(this instanceof wC){const M=`calc(${c}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;l.borderRadius=M}switch(e.borderStyle.style){case Uc.SOLID:l.borderStyle="solid";break;case Uc.DASHED:l.borderStyle="dashed";break;case Uc.BEVELED:Pt("Unimplemented border style: beveled");break;case Uc.INSET:Pt("Unimplemented border style: inset");break;case Uc.UNDERLINE:l.borderBottomStyle="solid";break}const k=e.borderColor||null;k?(x(this,xu,!0),l.borderColor=mt.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):l.borderWidth=0}const f=mt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:g,pageX:v,pageY:A}=s.rawDims;l.left=`${100*(f[0]-v)/m}%`,l.top=`${100*(f[1]-A)/g}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(l.width=`${100*c/m}%`,l.height=`${100*d/g}%`):this.setRotation(S,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:a,height:l}=yo(this.data.rect);let c,d;t%180===0?(c=100*a/n,d=100*l/s):(c=100*l/n,d=100*a/s),e.style.width=`${c}%`,e.style.height=`${d}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const a=s.detail[e],l=a[0],c=a.slice(1);s.target.style[n]=Db[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:Db[`${l}_rgb`](c)})};return Nt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const a=t[s]||n[s];a==null||a(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,a]of Object.entries(e)){const l=n[s];if(l){const c={detail:{[s]:a},target:t};l(c),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,a]=this.data.rect.map(b=>Math.fround(b));if(t.length===8){const[b,T,k,M]=t.subarray(2,6);if(s===b&&a===T&&e===k&&n===M)return}const{style:l}=this.container;let c;if(u(this,xu)){const{borderColor:b,borderWidth:T}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const d=s-e,f=a-n,{svgFactory:m}=this,g=m.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const v=m.createElement("defs");g.append(v);const A=m.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),v.append(A);for(let b=2,T=t.length;b<T;b+=8){const k=t[b],M=t[b+1],L=t[b+2],R=t[b+3],I=m.createElement("rect"),j=(L-e)/d,B=(a-M)/f,U=(k-L)/d,Q=(M-R)/f;I.setAttribute("x",j),I.setAttribute("y",B),I.setAttribute("width",U),I.setAttribute("height",Q),A.append(I),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${B}" width="${U}" height="${Q}"/>`)}u(this,xu)&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(g),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:t}=this,e=x(this,Su,new v0({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Qt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:a,id:l,exportValues:c}of s){if(a===-1||l===e)continue;const d=typeof c=="string"?c:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!tl.has(f)){Pt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:f})}return n}for(const s of document.getElementsByName(t)){const{exportValue:a}=s,l=s.getAttribute("data-element-id");l!==e&&tl.has(s)&&n.push({id:l,exportValue:a,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Ca=new WeakMap,xu=new WeakMap,Su=new WeakMap,yd=new WeakSet,y0=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:d}}}}=this;n==null||n.splice(0,4,...t);const{width:f,height:m}=yo(t);e.left=`${100*(t[0]-c)/a}%`,e.top=`${100*(l-t[3]+d)/l}%`,s===0?(e.width=`${100*f/a}%`,e.height=`${100*m/l}%`):this.setRotation(s)};let Se=$w;var ii,Bo,yC,vC;class gC extends Se{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});_(this,ii);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let a=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(s,e.action),a=!0):e.attachment?(C(this,ii,yC).call(this,s,e.attachment,e.attachmentDest),a=!0):e.setOCGState?(C(this,ii,vC).call(this,s,e.setOCGState),a=!0):e.dest?(this._bindLink(s,e.dest),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),a=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&C(this,ii,Bo).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),C(this,ii,Bo).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const l=s.get(a);l&&(e[l]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}e.onclick||(e.onclick=()=>!1),C(this,ii,Bo).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),C(this,ii,Bo).call(this),!this._fieldObjects){Pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var g;s==null||s();const{fields:a,refs:l,include:c}=n,d=[];if(a.length!==0||l.length!==0){const v=new Set(l);for(const A of a){const S=this._fieldObjects[A]||[];for(const{id:b}of S)v.add(b)}for(const A of Object.values(this._fieldObjects))for(const S of A)v.has(S.id)===c&&d.push(S)}else for(const v of Object.values(this._fieldObjects))d.push(...v);const f=this.annotationStorage,m=[];for(const v of d){const{id:A}=v;switch(m.push(A),v.type){case"text":{const b=v.defaultValue||"";f.setValue(A,{value:b});break}case"checkbox":case"radiobutton":{const b=v.defaultValue===v.exportValues;f.setValue(A,{value:b});break}case"combobox":case"listbox":{const b=v.defaultValue||"";f.setValue(A,{value:b});break}default:continue}const S=document.querySelector(`[data-element-id="${A}"]`);if(S){if(!tl.has(S)){Pt(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}ii=new WeakSet,Bo=function(){this.container.setAttribute("data-internal-link","")},yC=function(e,n,s=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,s),!1},C(this,ii,Bo).call(this)},vC=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),C(this,ii,Bo).call(this)};class YI extends Se{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class il extends Se{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return En.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,a){n.includes("mouse")?t.addEventListener(n,l=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{var c;if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l)}}))})}_setEventListeners(t,e,n,s){var a,l,c;for(const[d,f]of n)(f==="Action"||(a=this.data.actions)!=null&&a[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,f,s),f==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":mt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||XI,a=t.style;let l;const c=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c),m=Math.round(f/(cv*s))||1,g=f/m;l=Math.min(s,d(g/cv))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(s,d(f/cv))}a.fontSize=`calc(${l}px * var(--scale-factor))`,a.color=mt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class QI extends il{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const a=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),a.setValue(l.id,{[s]:n})}render(){var s,a;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=t.getValue(e,{value:this.data.fieldValue});let c=l.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&c.length>d&&(c=c.slice(0,d));let f=l.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:c,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??c,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??c),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),tl.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=rf,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",v=>{t.setValue(e,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",v=>{const A=this.data.defaultFieldValue??"";n.value=m.userValue=A,m.formattedValue=null});let g=v=>{const{formattedValue:A}=m;A!=null&&(v.target.value=A),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",A=>{var b;if(m.focused)return;const{target:S}=A;m.userValue&&(S.value=m.userValue),m.lastCommittedValue=S.value,m.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const S={value(b){m.userValue=b.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),b.target.value=m.userValue},formattedValue(b){const{formattedValue:T}=b.detail;m.formattedValue=T,T!=null&&b.target!==document.activeElement&&(b.target.value=T),t.setValue(e,{formattedValue:T})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var L;const{charLimit:T}=b.detail,{target:k}=b;if(T===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",T);let M=m.userValue;!M||M.length<=T||(M=M.slice(0,T),k.value=m.userValue=M,t.setValue(e,{value:M}),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(S,A)}),n.addEventListener("keydown",A=>{var T;m.commitKey=1;let S=-1;if(A.key==="Escape"?S=0:A.key==="Enter"&&!this.data.multiLine?S=2:A.key==="Tab"&&(m.commitKey=3),S===-1)return;const{value:b}=A.target;m.lastCommittedValue!==b&&(m.lastCommittedValue=b,m.userValue=b,(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:S,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const v=g;g=null,n.addEventListener("blur",A=>{var b,T;if(!m.focused||!A.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(m.focused=!1);const{value:S}=A.target;m.userValue=S,m.lastCommittedValue!==S&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:m.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}})),v(A)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",A=>{var I;m.lastCommittedValue=null;const{data:S,target:b}=A,{value:T,selectionStart:k,selectionEnd:M}=b;let L=k,R=M;switch(A.inputType){case"deleteWordBackward":{const j=T.substring(0,k).match(/\w*[^\w]*$/);j&&(L-=j[0].length);break}case"deleteWordForward":{const j=T.substring(k).match(/^[^\w]*\w*/);j&&(R+=j[0].length);break}case"deleteContentBackward":k===M&&(L-=1);break;case"deleteContentForward":k===M&&(R+=1);break}A.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:S||"",willCommit:!1,selStart:L,selEnd:R}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${A}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class ZI extends il{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class JI extends il{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return tl.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=rf,a.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const f of this._getElementsByName(c,n)){const m=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(n,{value:d})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue||"Off";l.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const c={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class wC extends il{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const a=document.createElement("input");if(tl.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=rf,a.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const f of this._getElementsByName(c,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue;l.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;a.addEventListener("updatefromsandbox",c=>{const d={value:f=>{const m=l===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=m&&g.id===n;g.domElement&&(g.domElement.checked=v),t.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class tN extends gC{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class eN extends il{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");tl.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=rf;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",m=>{const g=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===g});for(const m of this.data.options){const g=document.createElement("option");g.textContent=m.displayValue,g.value=m.exportValue,n.value.includes(m.exportValue)&&(g.setAttribute("selected",!0),a=!1),s.append(g)}let l=null;if(a){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),s.prepend(m),l=()=>{m.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const c=m=>{const g=m?"value":"textContent",{options:v,multiple:A}=s;return A?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let d=c(!1);const f=m=>{const g=m.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",m=>{const g={value(v){l==null||l();const A=v.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const b of s.options)b.selected=S.has(b.value);t.setValue(e,{value:c(!0)}),d=c(!1)},multipleSelection(v){s.multiple=!0},remove(v){const A=s.options,S=v.detail.remove;A[S].selected=!1,s.remove(S),A.length>0&&Array.prototype.findIndex.call(A,T=>T.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:c(!0),items:f(v)}),d=c(!1)},clear(v){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),d=c(!1)},insert(v){const{index:A,displayValue:S,exportValue:b}=v.detail.insert,T=s.children[A],k=document.createElement("option");k.textContent=S,k.value=b,T?T.before(k):s.append(k),t.setValue(e,{value:c(!0),items:f(v)}),d=c(!1)},items(v){const{items:A}=v.detail;for(;s.length!==0;)s.remove(0);for(const S of A){const{displayValue:b,exportValue:T}=S,k=document.createElement("option");k.textContent=b,k.value=T,s.append(k)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:c(!0),items:f(v)}),d=c(!1)},indices(v){const A=new Set(v.detail.indices);for(const S of v.target.options)S.selected=A.has(S.index);t.setValue(e,{value:c(!0)}),d=c(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,m)}),s.addEventListener("input",m=>{var A;const g=c(!0),v=c(!1);t.setValue(e,{value:g}),m.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):s.addEventListener("input",function(m){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class v0 extends Se{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Se._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new nN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${Lw}${n}`).join(",")),this.container}}var bu,Rm,Lm,Eu,Ta,me,Js,_u,vd,wd,Cu,tr,Bi,er,Ad,nr,xd,ka,Pa,Xt,Up,w0,AC,xC,SC,bC,$p,Gp,A0;class nN{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:a,contentsObj:l,richText:c,parent:d,rect:f,parentRect:m,open:g}){_(this,Xt);_(this,bu,C(this,Xt,SC).bind(this));_(this,Rm,C(this,Xt,A0).bind(this));_(this,Lm,C(this,Xt,Gp).bind(this));_(this,Eu,C(this,Xt,$p).bind(this));_(this,Ta,null);_(this,me,null);_(this,Js,null);_(this,_u,null);_(this,vd,null);_(this,wd,null);_(this,Cu,null);_(this,tr,!1);_(this,Bi,null);_(this,er,null);_(this,Ad,null);_(this,nr,null);_(this,xd,null);_(this,ka,null);_(this,Pa,!1);var v;x(this,me,t),x(this,xd,s),x(this,Js,l),x(this,nr,c),x(this,wd,d),x(this,Ta,e),x(this,Ad,f),x(this,Cu,m),x(this,vd,n),x(this,_u,Nw.toDateObject(a)),this.trigger=n.flatMap(A=>A.getElementsToTriggerPopup());for(const A of this.trigger)A.addEventListener("click",u(this,Eu)),A.addEventListener("mouseenter",u(this,Lm)),A.addEventListener("mouseleave",u(this,Rm)),A.classList.add("popupTriggerArea");for(const A of n)(v=A.container)==null||v.addEventListener("keydown",u(this,bu));u(this,me).hidden=!0,g&&C(this,Xt,$p).call(this)}render(){if(u(this,Bi))return;const t=x(this,Bi,document.createElement("div"));if(t.className="popup",u(this,Ta)){const a=t.style.outlineColor=mt.makeHexColor(...u(this,Ta));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:t.style.backgroundColor=mt.makeHexColor(...u(this,Ta).map(c=>Math.floor(.7*(255-c)+c)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=u(this,xd),t.append(e),u(this,_u)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,_u).valueOf()})),e.append(a)}const s=u(this,Xt,Up);if(s)mC.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(u(this,Js));t.append(a)}u(this,me).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let a=0,l=s.length;a<l;++a){const c=s[a];n.append(document.createTextNode(c)),a<l-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;u(this,ka)||x(this,ka,{contentsObj:u(this,Js),richText:u(this,nr)}),t&&x(this,er,null),e&&(x(this,nr,C(this,Xt,xC).call(this,e)),x(this,Js,null)),(n=u(this,Bi))==null||n.remove(),x(this,Bi,null)}resetEdited(){var t;u(this,ka)&&({contentsObj:vn(this,Js)._,richText:vn(this,nr)._}=u(this,ka),x(this,ka,null),(t=u(this,Bi))==null||t.remove(),x(this,Bi,null),x(this,er,null))}forceHide(){x(this,Pa,this.isVisible),u(this,Pa)&&(u(this,me).hidden=!0)}maybeShow(){u(this,Pa)&&(u(this,Bi)||C(this,Xt,Gp).call(this),x(this,Pa,!1),u(this,me).hidden=!1)}get isVisible(){return u(this,me).hidden===!1}}bu=new WeakMap,Rm=new WeakMap,Lm=new WeakMap,Eu=new WeakMap,Ta=new WeakMap,me=new WeakMap,Js=new WeakMap,_u=new WeakMap,vd=new WeakMap,wd=new WeakMap,Cu=new WeakMap,tr=new WeakMap,Bi=new WeakMap,er=new WeakMap,Ad=new WeakMap,nr=new WeakMap,xd=new WeakMap,ka=new WeakMap,Pa=new WeakMap,Xt=new WeakSet,Up=function(){const t=u(this,nr),e=u(this,Js);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&u(this,nr).html||null},w0=function(){var t,e,n;return((n=(e=(t=u(this,Xt,Up))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},AC=function(){var t,e,n;return((n=(e=(t=u(this,Xt,Up))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},xC=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:u(this,Xt,AC),fontSize:u(this,Xt,w0)?`calc(${u(this,Xt,w0)}px * var(--scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:s});return n},SC=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&u(this,tr))&&C(this,Xt,$p).call(this)},bC=function(){if(u(this,er)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:a}}}=u(this,wd);let l=!!u(this,Cu),c=l?u(this,Cu):u(this,Ad);for(const S of u(this,vd))if(!c||mt.intersect(S.data.rect,c)!==null){c=S.data.rect,l=!0;break}const d=mt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),m=l?c[2]-c[0]+5:0,g=d[0]+m,v=d[1];x(this,er,[100*(g-s)/e,100*(v-a)/n]);const{style:A}=u(this,me);A.left=`${u(this,er)[0]}%`,A.top=`${u(this,er)[1]}%`},$p=function(){x(this,tr,!u(this,tr)),u(this,tr)?(C(this,Xt,Gp).call(this),u(this,me).addEventListener("click",u(this,Eu)),u(this,me).addEventListener("keydown",u(this,bu))):(C(this,Xt,A0).call(this),u(this,me).removeEventListener("click",u(this,Eu)),u(this,me).removeEventListener("keydown",u(this,bu)))},Gp=function(){u(this,Bi)||this.render(),this.isVisible?u(this,tr)&&u(this,me).classList.add("focused"):(C(this,Xt,bC).call(this),u(this,me).hidden=!1,u(this,me).style.zIndex=parseInt(u(this,me).style.zIndex)+1e3)},A0=function(){u(this,me).classList.remove("focused"),!(u(this,tr)||!this.isVisible)&&(u(this,me).hidden=!0,u(this,me).style.zIndex=parseInt(u(this,me).style.zIndex)-1e3)};class EC extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=kt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Sd;class iN extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Sd,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:s}=yo(e.rect),a=this.svgFactory.create(n,s,!0),l=x(this,Sd,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Sd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sd=new WeakMap;var bd;class sN extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,bd,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:s}=yo(e.rect),a=this.svgFactory.create(n,s,!0),l=e.borderStyle.width,c=x(this,bd,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",n-l),c.setAttribute("height",s-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}bd=new WeakMap;var Ed;class rN extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Ed,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:s}=yo(e.rect),a=this.svgFactory.create(n,s,!0),l=e.borderStyle.width,c=x(this,Ed,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",n/2),c.setAttribute("cy",s/2),c.setAttribute("rx",n/2-l/2),c.setAttribute("ry",s/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Ed)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ed=new WeakMap;var _d;class _C extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,_d,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:a}}=this;if(!n)return this.container;const{width:l,height:c}=yo(e),d=this.svgFactory.create(l,c,!0);let f=[];for(let g=0,v=n.length;g<v;g+=2){const A=n[g]-e[0],S=e[3]-n[g+1];f.push(`${A},${S}`)}f=f.join(" ");const m=x(this,_d,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",f),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),d.append(m),this.container.append(d),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,_d)}addHighlightArea(){this.container.classList.add("highlightArea")}}_d=new WeakMap;class oN extends _C{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class aN extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Cd,Ma,Td,x0;class zw extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Td);_(this,Cd,null);_(this,Ma,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?kt.HIGHLIGHT:kt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:s,borderStyle:a,popupRef:l}}=this,{transform:c,width:d,height:f}=C(this,Td,x0).call(this,n,e),m=this.svgFactory.create(d,f,!0),g=x(this,Cd,this.svgFactory.createElement("svg:g"));m.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",c);for(let v=0,A=s.length;v<A;v++){const S=this.svgFactory.createElement(this.svgElementName);u(this,Ma).push(S),S.setAttribute("points",s[v].join(",")),g.append(S)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:s,rect:a}=e,l=u(this,Cd);if(n>=0&&l.setAttribute("stroke-width",n||1),s)for(let c=0,d=u(this,Ma).length;c<d;c++)u(this,Ma)[c].setAttribute("points",s[c].join(","));if(a){const{transform:c,width:d,height:f}=C(this,Td,x0).call(this,this.data.rotation,a);l.parentElement.setAttribute("viewBox",`0 0 ${d} ${f}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return u(this,Ma)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cd=new WeakMap,Ma=new WeakMap,Td=new WeakSet,x0=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class CC extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=kt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class lN extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class uN extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class cN extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class TC extends Se{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=kt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var kd,Pd,S0;class hN extends Se{constructor(e){var s;super(e,{isRenderable:!0});_(this,Pd);_(this,kd,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",C(this,Pd,S0).bind(this)),x(this,kd,s);const{isMac:a}=En.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&C(this,Pd,S0).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return u(this,kd)}addHighlightArea(){this.container.classList.add("highlightArea")}}kd=new WeakMap,Pd=new WeakSet,S0=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Md,Ra,La,Rd,el,kC,b0;class dN{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:a,viewport:l,structTreeLayer:c}){_(this,el);_(this,Md,null);_(this,Ra,null);_(this,La,new Map);_(this,Rd,null);this.div=t,x(this,Md,e),x(this,Ra,n),x(this,Rd,c||null),this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return u(this,La).size>0}async render(t){var l;const{annotations:e}=t,n=this.div;Za(n,this.viewport);const s=new Map,a={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Vw,annotationStorage:t.annotationStorage||new Ow,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const d=c.annotationType===Pe.POPUP;if(d){const g=s.get(c.id);if(!g)continue;a.elements=g}else{const{width:g,height:v}=yo(c.rect);if(g<=0||v<=0)continue}a.data=c;const f=KI.create(a);if(!f.isRenderable)continue;if(!d&&c.popupRef){const g=s.get(c.popupRef);g?g.push(f):s.set(c.popupRef,[f])}const m=f.render();c.hidden&&(m.style.visibility="hidden"),await C(this,el,kC).call(this,m,c.id),f._isEditable&&(u(this,La).set(f.data.id,f),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(f))}C(this,el,b0).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Za(e,{rotation:t.rotation}),C(this,el,b0).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(u(this,La).values())}getEditableAnnotation(t){return u(this,La).get(t)}}Md=new WeakMap,Ra=new WeakMap,La=new WeakMap,Rd=new WeakMap,el=new WeakSet,kC=async function(t,e){var l,c;const n=t.firstChild||t,s=n.id=`${Lw}${e}`,a=await((l=u(this,Rd))==null?void 0:l.getAriaAttributes(s));if(a)for(const[d,f]of a)n.setAttribute(d,f);this.div.append(t),(c=u(this,Md))==null||c.moveElementInDOM(this.div,t,n,!1)},b0=function(){if(!u(this,Ra))return;const t=this.div;for(const[e,n]of u(this,Ra)){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):s.append(n)}u(this,Ra).clear()};const Ep=/\r\n?|\n/g;var Hi,Xn,Ld,Da,Kn,Ce,PC,MC,RC,Wp,pr,qp,Xp,LC,_0,DC;const Jt=class Jt extends fe{constructor(e){super({...e,name:"freeTextEditor"});_(this,Ce);_(this,Hi);_(this,Xn,"");_(this,Ld,`${this.id}-editor`);_(this,Da,null);_(this,Kn);x(this,Hi,e.color||Jt._defaultColor||fe._defaultLineColor),x(this,Kn,e.fontSize||Jt._defaultFontSize)}static get _keyboardManager(){const e=Jt.prototype,n=l=>l.isEmpty(),s=Ja.TRANSLATE_SMALL,a=Ja.TRANSLATE_BIG;return Nt(this,"_keyboardManager",new sf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(e,n){fe.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case jt.FREETEXT_SIZE:Jt._defaultFontSize=n;break;case jt.FREETEXT_COLOR:Jt._defaultColor=n;break}}updateParams(e,n){switch(e){case jt.FREETEXT_SIZE:C(this,Ce,PC).call(this,n);break;case jt.FREETEXT_COLOR:C(this,Ce,MC).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jt.FREETEXT_SIZE,Jt._defaultFontSize],[jt.FREETEXT_COLOR,Jt._defaultColor||fe._defaultLineColor]]}get propertiesToUpdate(){return[[jt.FREETEXT_SIZE,u(this,Kn)],[jt.FREETEXT_COLOR,u(this,Hi)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Jt._internalPadding*e,-(Jt._internalPadding+u(this,Kn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(kt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,Da,new AbortController);const e=this._uiManager.combinedSignal(u(this,Da));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Ld)),this._isDraggable=!0,(e=u(this,Da))==null||e.abort(),x(this,Da,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=u(this,Xn),n=x(this,Xn,C(this,Ce,RC).call(this).trimEnd());if(e===n)return;const s=a=>{if(x(this,Xn,a),!a){this.remove();return}C(this,Ce,Xp).call(this),this._uiManager.rebuild(this),C(this,Ce,Wp).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),C(this,Ce,Wp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Jt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Ld)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${u(this,Kn)}px * var(--scale-factor))`,s.color=u(this,Hi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),dm(this,this.div,["dblclick","keydown"]),this.width){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[m,g]=this.pageDimensions,[v,A]=this.pageTranslation;let S,b;switch(this.rotation){case 0:S=e+(c[0]-v)/m,b=n+this.height-(c[1]-A)/g;break;case 90:S=e+(c[0]-v)/m,b=n-(c[1]-A)/g,[d,f]=[f,-d];break;case 180:S=e-this.width+(c[0]-v)/m,b=n-(c[1]-A)/g,[d,f]=[-d,-f];break;case 270:S=e+(c[0]-v-this.height*g)/m,b=n+(c[1]-A-this.width*m)/g,[d,f]=[-f,d];break}this.setAt(S*a,b*l,d,f)}else this.setAt(e*a,n*l,this.width*a,this.height*l);C(this,Ce,Xp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var S,b,T;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const a=C(S=Jt,pr,_0).call(S,n.getData("text")||"").replaceAll(Ep,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:d,startOffset:f}=c,m=[],g=[];if(d.nodeType===Node.TEXT_NODE){const k=d.parentElement;if(g.push(d.nodeValue.slice(f).replaceAll(Ep,"")),k!==this.editorDiv){let M=m;for(const L of this.editorDiv.childNodes){if(L===k){M=g;continue}M.push(C(b=Jt,pr,qp).call(b,L))}}m.push(d.nodeValue.slice(0,f).replaceAll(Ep,""))}else if(d===this.editorDiv){let k=m,M=0;for(const L of this.editorDiv.childNodes)M++===f&&(k=g),k.push(C(T=Jt,pr,qp).call(T,L))}x(this,Xn,`${m.join(`
`)}${a}${g.join(`
`)}`),C(this,Ce,Xp).call(this);const v=new Range;let A=m.reduce((k,M)=>k+M.length,0);for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const M=k.nodeValue.length;if(A<=M){v.setStart(k,A),v.setEnd(k,A);break}A-=M}l.removeAllRanges(),l.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,s){var c;let a=null;if(e instanceof EC){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:m,rotation:g,id:v,popupRef:A},textContent:S,textPosition:b,parent:{page:{pageNumber:T}}}=e;if(!S||S.length===0)return null;a=e={annotationType:kt.FREETEXT,color:Array.from(f),fontSize:d,value:S.join(`
`),position:b,pageIndex:T-1,rect:m.slice(0),rotation:g,id:v,deleted:!1,popupRef:A}}const l=await super.deserialize(e,n,s);return x(l,Kn,e.fontSize),x(l,Hi,mt.makeHexColor(...e.color)),x(l,Xn,C(c=Jt,pr,_0).call(c,e.value)),l.annotationElementId=e.id||null,l._initialData=a,l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Jt._internalPadding*this.parentScale,s=this.getRect(n,n),a=fe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,Hi)),l={annotationType:kt.FREETEXT,color:a,fontSize:u(this,Kn),value:C(this,Ce,LC).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!C(this,Ce,DC).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${u(this,Kn)}px * var(--scale-factor))`,s.color=u(this,Hi),n.replaceChildren();for(const l of u(this,Xn).split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),n.append(c)}const a=Jt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(a,a),popupContent:u(this,Xn)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Hi=new WeakMap,Xn=new WeakMap,Ld=new WeakMap,Da=new WeakMap,Kn=new WeakMap,Ce=new WeakSet,PC=function(e){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-u(this,Kn))*this.parentScale),x(this,Kn,a),C(this,Ce,Wp).call(this)},s=u(this,Kn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},MC=function(e){const n=a=>{x(this,Hi,this.editorDiv.style.color=a)},s=u(this,Hi);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},RC=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(e.push(C(s=Jt,pr,qp).call(s,a)),n=a);return e.join(`
`)},Wp=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,c=l.style.display,d=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},pr=new WeakSet,qp=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Ep,"")},Xp=function(){if(this.editorDiv.replaceChildren(),!!u(this,Xn))for(const e of u(this,Xn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},LC=function(){return u(this,Xn).replaceAll(""," ")},_0=function(e){return e.replaceAll(" ","")},DC=function(e){const{value:n,fontSize:s,color:a,pageIndex:l}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((c,d)=>c!==a[d])||e.pageIndex!==l},_(Jt,pr),wt(Jt,"_freeTextDefaultContent",""),wt(Jt,"_internalPadding",0),wt(Jt,"_defaultColor",null),wt(Jt,"_defaultFontSize",10),wt(Jt,"_type","freetext"),wt(Jt,"_editorType",kt.FREETEXT);let E0=Jt;class rt{toSVGPath(){Qt("Abstract method `toSVGPath` must be implemented.")}get box(){Qt("Abstract getter `box` must be implemented.")}serialize(t,e){Qt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,a,l){l||(l=new Float32Array(t.length));for(let c=0,d=t.length;c<d;c+=2)l[c]=e+t[c]*s,l[c+1]=n+t[c+1]*a;return l}static _rescaleAndSwap(t,e,n,s,a,l){l||(l=new Float32Array(t.length));for(let c=0,d=t.length;c<d;c+=2)l[c]=e+t[c+1]*s,l[c+1]=n+t[c]*a;return l}static _translate(t,e,n,s){s||(s=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)s[a]=e+t[a],s[a+1]=n+t[a+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,a){switch(a){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,a,l){return[(t+5*n)/6,(e+5*s)/6,(5*n+a)/6,(5*s+l)/6,(n+a)/2,(s+l)/2]}}wt(rt,"PRECISION",1e-4);var Yn,Ui,Tu,ku,gs,It,Ia,Na,Dd,Id,Pu,Mu,ro,Nd,Dm,Im,De,ah,IC,NC,FC,OC,jC,VC;const js=class js{constructor({x:t,y:e},n,s,a,l,c=0){_(this,De);_(this,Yn);_(this,Ui,[]);_(this,Tu);_(this,ku);_(this,gs,[]);_(this,It,new Float32Array(18));_(this,Ia);_(this,Na);_(this,Dd);_(this,Id);_(this,Pu);_(this,Mu);_(this,ro,[]);x(this,Yn,n),x(this,Mu,a*s),x(this,ku,l),u(this,It).set([NaN,NaN,NaN,NaN,t,e],6),x(this,Tu,c),x(this,Id,u(js,Nd)*s),x(this,Dd,u(js,Im)*s),x(this,Pu,s),u(this,ro).push(t,e)}isEmpty(){return isNaN(u(this,It)[8])}add({x:t,y:e}){var Q;x(this,Ia,t),x(this,Na,e);const[n,s,a,l]=u(this,Yn);let[c,d,f,m]=u(this,It).subarray(8,12);const g=t-f,v=e-m,A=Math.hypot(g,v);if(A<u(this,Dd))return!1;const S=A-u(this,Id),b=S/A,T=b*g,k=b*v;let M=c,L=d;c=f,d=m,f+=T,m+=k,(Q=u(this,ro))==null||Q.push(t,e);const R=-k/S,I=T/S,j=R*u(this,Mu),B=I*u(this,Mu);return u(this,It).set(u(this,It).subarray(2,8),0),u(this,It).set([f+j,m+B],4),u(this,It).set(u(this,It).subarray(14,18),12),u(this,It).set([f-j,m-B],16),isNaN(u(this,It)[6])?(u(this,gs).length===0&&(u(this,It).set([c+j,d+B],2),u(this,gs).push(NaN,NaN,NaN,NaN,(c+j-n)/a,(d+B-s)/l),u(this,It).set([c-j,d-B],14),u(this,Ui).push(NaN,NaN,NaN,NaN,(c-j-n)/a,(d-B-s)/l)),u(this,It).set([M,L,c,d,f,m],6),!this.isEmpty()):(u(this,It).set([M,L,c,d,f,m],6),Math.abs(Math.atan2(L-d,M-c)-Math.atan2(k,T))<Math.PI/2?([c,d,f,m]=u(this,It).subarray(2,6),u(this,gs).push(NaN,NaN,NaN,NaN,((c+f)/2-n)/a,((d+m)/2-s)/l),[c,d,M,L]=u(this,It).subarray(14,18),u(this,Ui).push(NaN,NaN,NaN,NaN,((M+c)/2-n)/a,((L+d)/2-s)/l),!0):([M,L,c,d,f,m]=u(this,It).subarray(0,6),u(this,gs).push(((M+5*c)/6-n)/a,((L+5*d)/6-s)/l,((5*c+f)/6-n)/a,((5*d+m)/6-s)/l,((c+f)/2-n)/a,((d+m)/2-s)/l),[f,m,c,d,M,L]=u(this,It).subarray(12,18),u(this,Ui).push(((M+5*c)/6-n)/a,((L+5*d)/6-s)/l,((5*c+f)/6-n)/a,((5*d+m)/6-s)/l,((c+f)/2-n)/a,((d+m)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=u(this,gs),e=u(this,Ui);if(isNaN(u(this,It)[6])&&!this.isEmpty())return C(this,De,IC).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);C(this,De,FC).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return C(this,De,NC).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,a,l){return new zC(t,e,n,s,a,l)}getOutlines(){var g;const t=u(this,gs),e=u(this,Ui),n=u(this,It),[s,a,l,c]=u(this,Yn),d=new Float32Array((((g=u(this,ro))==null?void 0:g.length)??0)+2);for(let v=0,A=d.length-2;v<A;v+=2)d[v]=(u(this,ro)[v]-s)/l,d[v+1]=(u(this,ro)[v+1]-a)/c;if(d[d.length-2]=(u(this,Ia)-s)/l,d[d.length-1]=(u(this,Na)-a)/c,isNaN(n[6])&&!this.isEmpty())return C(this,De,OC).call(this,d);const f=new Float32Array(u(this,gs).length+24+u(this,Ui).length);let m=t.length;for(let v=0;v<m;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}m=C(this,De,VC).call(this,f,m);for(let v=e.length-6;v>=6;v-=6)for(let A=0;A<6;A+=2){if(isNaN(e[v+A])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[v+A],f[m+1]=e[v+A+1],m+=2}return C(this,De,jC).call(this,f,m),this.newFreeDrawOutline(f,d,u(this,Yn),u(this,Pu),u(this,Tu),u(this,ku))}};Yn=new WeakMap,Ui=new WeakMap,Tu=new WeakMap,ku=new WeakMap,gs=new WeakMap,It=new WeakMap,Ia=new WeakMap,Na=new WeakMap,Dd=new WeakMap,Id=new WeakMap,Pu=new WeakMap,Mu=new WeakMap,ro=new WeakMap,Nd=new WeakMap,Dm=new WeakMap,Im=new WeakMap,De=new WeakSet,ah=function(){const t=u(this,It).subarray(4,6),e=u(this,It).subarray(16,18),[n,s,a,l]=u(this,Yn);return[(u(this,Ia)+(t[0]-e[0])/2-n)/a,(u(this,Na)+(t[1]-e[1])/2-s)/l,(u(this,Ia)+(e[0]-t[0])/2-n)/a,(u(this,Na)+(e[1]-t[1])/2-s)/l]},IC=function(){const[t,e,n,s]=u(this,Yn),[a,l,c,d]=C(this,De,ah).call(this);return`M${(u(this,It)[2]-t)/n} ${(u(this,It)[3]-e)/s} L${(u(this,It)[4]-t)/n} ${(u(this,It)[5]-e)/s} L${a} ${l} L${c} ${d} L${(u(this,It)[16]-t)/n} ${(u(this,It)[17]-e)/s} L${(u(this,It)[14]-t)/n} ${(u(this,It)[15]-e)/s} Z`},NC=function(t){const e=u(this,Ui);t.push(`L${e[4]} ${e[5]} Z`)},FC=function(t){const[e,n,s,a]=u(this,Yn),l=u(this,It).subarray(4,6),c=u(this,It).subarray(16,18),[d,f,m,g]=C(this,De,ah).call(this);t.push(`L${(l[0]-e)/s} ${(l[1]-n)/a} L${d} ${f} L${m} ${g} L${(c[0]-e)/s} ${(c[1]-n)/a}`)},OC=function(t){const e=u(this,It),[n,s,a,l]=u(this,Yn),[c,d,f,m]=C(this,De,ah).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-s)/l,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-s)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-s)/l,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-s)/l],0),this.newFreeDrawOutline(g,t,u(this,Yn),u(this,Pu),u(this,Tu),u(this,ku))},jC=function(t,e){const n=u(this,Ui);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},VC=function(t,e){const n=u(this,It).subarray(4,6),s=u(this,It).subarray(16,18),[a,l,c,d]=u(this,Yn),[f,m,g,v]=C(this,De,ah).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/c,(n[1]-l)/d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(s[0]-a)/c,(s[1]-l)/d],e),e+=24},_(js,Nd,8),_(js,Dm,2),_(js,Im,u(js,Nd)+u(js,Dm));let mm=js;var Ru,Fa,ir,Fd,Qn,Od,Ae,Nm,BC;class zC extends rt{constructor(e,n,s,a,l,c){super();_(this,Nm);_(this,Ru);_(this,Fa,new Float32Array(4));_(this,ir);_(this,Fd);_(this,Qn);_(this,Od);_(this,Ae);x(this,Ae,e),x(this,Qn,n),x(this,Ru,s),x(this,Od,a),x(this,ir,l),x(this,Fd,c),this.lastPoint=[NaN,NaN],C(this,Nm,BC).call(this,c);const[d,f,m,g]=u(this,Fa);for(let v=0,A=e.length;v<A;v+=2)e[v]=(e[v]-d)/m,e[v+1]=(e[v+1]-f)/g;for(let v=0,A=n.length;v<A;v+=2)n[v]=(n[v]-d)/m,n[v+1]=(n[v+1]-f)/g}toSVGPath(){const e=[`M${u(this,Ae)[4]} ${u(this,Ae)[5]}`];for(let n=6,s=u(this,Ae).length;n<s;n+=6){if(isNaN(u(this,Ae)[n])){e.push(`L${u(this,Ae)[n+4]} ${u(this,Ae)[n+5]}`);continue}e.push(`C${u(this,Ae)[n]} ${u(this,Ae)[n+1]} ${u(this,Ae)[n+2]} ${u(this,Ae)[n+3]} ${u(this,Ae)[n+4]} ${u(this,Ae)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,a],l){const c=s-e,d=a-n;let f,m;switch(l){case 0:f=rt._rescale(u(this,Ae),e,a,c,-d),m=rt._rescale(u(this,Qn),e,a,c,-d);break;case 90:f=rt._rescaleAndSwap(u(this,Ae),e,n,c,d),m=rt._rescaleAndSwap(u(this,Qn),e,n,c,d);break;case 180:f=rt._rescale(u(this,Ae),s,n,-c,d),m=rt._rescale(u(this,Qn),s,n,-c,d);break;case 270:f=rt._rescaleAndSwap(u(this,Ae),s,a,-c,-d),m=rt._rescaleAndSwap(u(this,Qn),s,a,-c,-d);break}return{outline:Array.from(f),points:[Array.from(m)]}}get box(){return u(this,Fa)}newOutliner(e,n,s,a,l,c=0){return new mm(e,n,s,a,l,c)}getNewOutline(e,n){const[s,a,l,c]=u(this,Fa),[d,f,m,g]=u(this,Ru),v=l*m,A=c*g,S=s*m+d,b=a*g+f,T=this.newOutliner({x:u(this,Qn)[0]*v+S,y:u(this,Qn)[1]*A+b},u(this,Ru),u(this,Od),e,u(this,Fd),n??u(this,ir));for(let k=2;k<u(this,Qn).length;k+=2)T.add({x:u(this,Qn)[k]*v+S,y:u(this,Qn)[k+1]*A+b});return T.getOutlines()}}Ru=new WeakMap,Fa=new WeakMap,ir=new WeakMap,Fd=new WeakMap,Qn=new WeakMap,Od=new WeakMap,Ae=new WeakMap,Nm=new WeakSet,BC=function(e){const n=u(this,Ae);let s=n[4],a=n[5],l=s,c=a,d=s,f=a,m=s,g=a;const v=e?Math.max:Math.min;for(let S=6,b=n.length;S<b;S+=6){if(isNaN(n[S]))l=Math.min(l,n[S+4]),c=Math.min(c,n[S+5]),d=Math.max(d,n[S+4]),f=Math.max(f,n[S+5]),g<n[S+5]?(m=n[S+4],g=n[S+5]):g===n[S+5]&&(m=v(m,n[S+4]));else{const T=mt.bezierBoundingBox(s,a,...n.slice(S,S+6));l=Math.min(l,T[0]),c=Math.min(c,T[1]),d=Math.max(d,T[2]),f=Math.max(f,T[3]),g<T[3]?(m=T[2],g=T[3]):g===T[3]&&(m=v(m,T[2]))}s=n[S+4],a=n[S+5]}const A=u(this,Fa);A[0]=l-u(this,ir),A[1]=c-u(this,ir),A[2]=d-l+2*u(this,ir),A[3]=f-c+2*u(this,ir),this.lastPoint=[m,g]};var jd,Vd,oo,$i,Cn,HC,Kp,UC,$C,T0;class C0{constructor(t,e=0,n=0,s=!0){_(this,Cn);_(this,jd);_(this,Vd);_(this,oo,[]);_(this,$i,[]);let a=1/0,l=-1/0,c=1/0,d=-1/0;const f=10**-4;for(const{x:T,y:k,width:M,height:L}of t){const R=Math.floor((T-e)/f)*f,I=Math.ceil((T+M+e)/f)*f,j=Math.floor((k-e)/f)*f,B=Math.ceil((k+L+e)/f)*f,U=[R,j,B,!0],Q=[I,j,B,!1];u(this,oo).push(U,Q),a=Math.min(a,R),l=Math.max(l,I),c=Math.min(c,j),d=Math.max(d,B)}const m=l-a+2*n,g=d-c+2*n,v=a-n,A=c-n,S=u(this,oo).at(s?-1:-2),b=[S[0],S[2]];for(const T of u(this,oo)){const[k,M,L]=T;T[0]=(k-v)/m,T[1]=(M-A)/g,T[2]=(L-A)/g}x(this,jd,new Float32Array([v,A,m,g])),x(this,Vd,b)}getOutlines(){u(this,oo).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of u(this,oo))e[3]?(t.push(...C(this,Cn,T0).call(this,e)),C(this,Cn,UC).call(this,e)):(C(this,Cn,$C).call(this,e),t.push(...C(this,Cn,T0).call(this,e)));return C(this,Cn,HC).call(this,t)}}jd=new WeakMap,Vd=new WeakMap,oo=new WeakMap,$i=new WeakMap,Cn=new WeakSet,HC=function(t){const e=[],n=new Set;for(const l of t){const[c,d,f]=l;e.push([c,d,l],[c,f,l])}e.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=e.length;l<c;l+=2){const d=e[l][2],f=e[l+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const s=[];let a;for(;n.size>0;){const l=n.values().next().value;let[c,d,f,m,g]=l;n.delete(l);let v=c,A=d;for(a=[c,f],s.push(a);;){let S;if(n.has(m))S=m;else if(n.has(g))S=g;else break;n.delete(S),[c,d,f,m,g]=S,v!==c&&(a.push(v,A,c,A===d?d:f),v=c),A=A===d?f:d}a.push(v,A)}return new fN(s,u(this,jd),u(this,Vd))},Kp=function(t){const e=u(this,$i);let n=0,s=e.length-1;for(;n<=s;){const a=n+s>>1,l=e[a][0];if(l===t)return a;l<t?n=a+1:s=a-1}return s+1},UC=function([,t,e]){const n=C(this,Cn,Kp).call(this,t);u(this,$i).splice(n,0,[t,e])},$C=function([,t,e]){const n=C(this,Cn,Kp).call(this,t);for(let s=n;s<u(this,$i).length;s++){const[a,l]=u(this,$i)[s];if(a!==t)break;if(a===t&&l===e){u(this,$i).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[a,l]=u(this,$i)[s];if(a!==t)break;if(a===t&&l===e){u(this,$i).splice(s,1);return}}},T0=function(t){const[e,n,s]=t,a=[[e,n,s]],l=C(this,Cn,Kp).call(this,s);for(let c=0;c<l;c++){const[d,f]=u(this,$i)[c];for(let m=0,g=a.length;m<g;m++){const[,v,A]=a[m];if(!(f<=v||A<=d)){if(v>=d){if(A>f)a[m][1]=f;else{if(g===1)return[];a.splice(m,1),m--,g--}continue}a[m][2]=d,A>f&&a.push([e,f,A])}}}return a};var zd,Lu;class fN extends rt{constructor(e,n,s){super();_(this,zd);_(this,Lu);x(this,Lu,e),x(this,zd,n),this.lastPoint=s}toSVGPath(){const e=[];for(const n of u(this,Lu)){let[s,a]=n;e.push(`M${s} ${a}`);for(let l=2;l<n.length;l+=2){const c=n[l],d=n[l+1];c===s?(e.push(`V${d}`),a=d):d===a&&(e.push(`H${c}`),s=c)}e.push("Z")}return e.join(" ")}serialize([e,n,s,a],l){const c=[],d=s-e,f=a-n;for(const m of u(this,Lu)){const g=new Array(m.length);for(let v=0;v<m.length;v+=2)g[v]=e+m[v]*d,g[v+1]=a-m[v+1]*f;c.push(g)}return c}get box(){return u(this,zd)}get classNamesForOutlining(){return["highlightOutline"]}}zd=new WeakMap,Lu=new WeakMap;class k0 extends mm{newFreeDrawOutline(t,e,n,s,a,l){return new pN(t,e,n,s,a,l)}}class pN extends zC{newOutliner(t,e,n,s,a,l=0){return new k0(t,e,n,s,a,l)}}var Gi,Oa,Du,Le,Bd,Iu,Hd,Ud,ao,Wi,Nu,$d,qt,P0,M0,R0,Ho,GC,jr;const Nn=class Nn{constructor({editor:t=null,uiManager:e=null}){_(this,qt);_(this,Gi,null);_(this,Oa,null);_(this,Du);_(this,Le,null);_(this,Bd,!1);_(this,Iu,!1);_(this,Hd,null);_(this,Ud);_(this,ao,null);_(this,Wi,null);_(this,Nu);var n;t?(x(this,Iu,!1),x(this,Nu,jt.HIGHLIGHT_COLOR),x(this,Hd,t)):(x(this,Iu,!0),x(this,Nu,jt.HIGHLIGHT_DEFAULT_COLOR)),x(this,Wi,(t==null?void 0:t._uiManager)||e),x(this,Ud,u(this,Wi)._eventBus),x(this,Du,(t==null?void 0:t.color)||((n=u(this,Wi))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),u(Nn,$d)||x(Nn,$d,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Nt(this,"_keyboardManager",new sf([[["Escape","mac+Escape"],Nn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Nn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Nn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Nn.prototype._moveToPrevious],[["Home","mac+Home"],Nn.prototype._moveToBeginning],[["End","mac+End"],Nn.prototype._moveToEnd]]))}renderButton(){const t=x(this,Gi,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=u(this,Wi)._signal;t.addEventListener("click",C(this,qt,Ho).bind(this),{signal:e}),t.addEventListener("keydown",C(this,qt,R0).bind(this),{signal:e});const n=x(this,Oa,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=u(this,Du),t.append(n),t}renderMainDropdown(){const t=x(this,Le,C(this,qt,P0).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===u(this,Gi)){C(this,qt,Ho).call(this,t);return}const e=t.target.getAttribute("data-color");e&&C(this,qt,M0).call(this,e,t)}_moveToNext(t){var e,n;if(!u(this,qt,jr)){C(this,qt,Ho).call(this,t);return}if(t.target===u(this,Gi)){(e=u(this,Le).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=u(this,Le))==null?void 0:e.firstChild)||t.target===u(this,Gi)){u(this,qt,jr)&&this._hideDropdownFromKeyboard();return}u(this,qt,jr)||C(this,qt,Ho).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!u(this,qt,jr)){C(this,qt,Ho).call(this,t);return}(e=u(this,Le).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!u(this,qt,jr)){C(this,qt,Ho).call(this,t);return}(e=u(this,Le).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=u(this,Le))==null||t.classList.add("hidden"),(e=u(this,ao))==null||e.abort(),x(this,ao,null)}_hideDropdownFromKeyboard(){var t;if(!u(this,Iu)){if(!u(this,qt,jr)){(t=u(this,Hd))==null||t.unselect();return}this.hideDropdown(),u(this,Gi).focus({preventScroll:!0,focusVisible:u(this,Bd)})}}updateColor(t){if(u(this,Oa)&&(u(this,Oa).style.backgroundColor=t),!u(this,Le))return;const e=u(this,Wi).highlightColors.values();for(const n of u(this,Le).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=u(this,Gi))==null||t.remove(),x(this,Gi,null),x(this,Oa,null),(e=u(this,Le))==null||e.remove(),x(this,Le,null)}};Gi=new WeakMap,Oa=new WeakMap,Du=new WeakMap,Le=new WeakMap,Bd=new WeakMap,Iu=new WeakMap,Hd=new WeakMap,Ud=new WeakMap,ao=new WeakMap,Wi=new WeakMap,Nu=new WeakMap,$d=new WeakMap,qt=new WeakSet,P0=function(){const t=document.createElement("div"),e=u(this,Wi)._signal;t.addEventListener("contextmenu",Yi,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of u(this,Wi).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=n,a.setAttribute("data-l10n-id",u(Nn,$d)[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=s,a.setAttribute("aria-selected",s===u(this,Du)),a.addEventListener("click",C(this,qt,M0).bind(this,s),{signal:e}),t.append(a)}return t.addEventListener("keydown",C(this,qt,R0).bind(this),{signal:e}),t},M0=function(t,e){e.stopPropagation(),u(this,Ud).dispatch("switchannotationeditorparams",{source:this,type:u(this,Nu),value:t})},R0=function(t){Nn._keyboardManager.exec(this,t)},Ho=function(t){if(u(this,qt,jr)){this.hideDropdown();return}if(x(this,Bd,t.detail===0),u(this,ao)||(x(this,ao,new AbortController),window.addEventListener("pointerdown",C(this,qt,GC).bind(this),{signal:u(this,Wi).combinedSignal(u(this,ao))})),u(this,Le)){u(this,Le).classList.remove("hidden");return}const e=x(this,Le,C(this,qt,P0).call(this));u(this,Gi).append(e)},GC=function(t){var e;(e=u(this,Le))!=null&&e.contains(t.target)||this.hideDropdown()},jr=function(){return u(this,Le)&&!u(this,Le).classList.contains("hidden")},_(Nn,$d,null);let gm=Nn;var Fu,Gd,sr,ja,Ou,jn,Wd,qd,Va,Ai,Zn,Xe,ju,rr,un,Vu,xi,Xd,Tt,L0,Yp,WC,qC,XC,D0,Uo,_i,Il,KC,Qp,lh,YC,QC,ZC,JC,tT;const Ut=class Ut extends fe{constructor(e){super({...e,name:"highlightEditor"});_(this,Tt);_(this,Fu,null);_(this,Gd,0);_(this,sr);_(this,ja,null);_(this,Ou,null);_(this,jn,null);_(this,Wd,null);_(this,qd,0);_(this,Va,null);_(this,Ai,null);_(this,Zn,null);_(this,Xe,!1);_(this,ju,null);_(this,rr);_(this,un,null);_(this,Vu,"");_(this,xi);_(this,Xd,"");this.color=e.color||Ut._defaultColor,x(this,xi,e.thickness||Ut._defaultThickness),x(this,rr,e.opacity||Ut._defaultOpacity),x(this,sr,e.boxes||null),x(this,Xd,e.methodOfCreation||""),x(this,Vu,e.text||""),this._isDraggable=!1,e.highlightId>-1?(x(this,Xe,!0),C(this,Tt,Yp).call(this,e),C(this,Tt,Uo).call(this)):u(this,sr)&&(x(this,Fu,e.anchorNode),x(this,Gd,e.anchorOffset),x(this,Wd,e.focusNode),x(this,qd,e.focusOffset),C(this,Tt,L0).call(this),C(this,Tt,Uo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Ut.prototype;return Nt(this,"_keyboardManager",new sf([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,Xe)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,xi),methodOfCreation:u(this,Xd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;fe.initialize(e,n),Ut._defaultColor||(Ut._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case jt.HIGHLIGHT_DEFAULT_COLOR:Ut._defaultColor=n;break;case jt.HIGHLIGHT_THICKNESS:Ut._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return u(this,ju)}updateParams(e,n){switch(e){case jt.HIGHLIGHT_COLOR:C(this,Tt,WC).call(this,n);break;case jt.HIGHLIGHT_THICKNESS:C(this,Tt,qC).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jt.HIGHLIGHT_DEFAULT_COLOR,Ut._defaultColor],[jt.HIGHLIGHT_THICKNESS,Ut._defaultThickness]]}get propertiesToUpdate(){return[[jt.HIGHLIGHT_COLOR,this.color||Ut._defaultColor],[jt.HIGHLIGHT_THICKNESS,u(this,xi)||Ut._defaultThickness],[jt.HIGHLIGHT_FREE,u(this,Xe)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(x(this,Ou,new gm({editor:this})),e.addColorPicker(u(this,Ou))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,Tt,lh).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,C(this,Tt,lh).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){C(this,Tt,D0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Tt,Uo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?C(this,Tt,D0).call(this):e&&(C(this,Tt,Uo).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var a,l,c;const{drawLayer:n}=this.parent;let s;u(this,Xe)?(e=(e-this.rotation+360)%360,s=C(a=Ut,_i,Il).call(a,u(this,Ai).box,e)):s=C(l=Ut,_i,Il).call(l,[this.x,this.y,this.width,this.height],e),n.updateProperties(u(this,Zn),{bbox:s,root:{"data-main-rotation":e}}),n.updateProperties(u(this,un),{bbox:C(c=Ut,_i,Il).call(c,u(this,jn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();u(this,Vu)&&(e.setAttribute("aria-label",u(this,Vu)),e.setAttribute("role","mark")),u(this,Xe)?e.classList.add("free"):this.div.addEventListener("keydown",C(this,Tt,KC).bind(this),{signal:this._uiManager._signal});const n=x(this,Va,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,ja);const[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),dm(this,u(this,Va),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(u(this,un),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(u(this,un),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:C(this,Tt,Qp).call(this,!0);break;case 1:case 3:C(this,Tt,Qp).call(this,!1);break}}select(){var e;super.select(),u(this,un)&&((e=this.parent)==null||e.drawLayer.updateProperties(u(this,un),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),u(this,un)&&((e=this.parent)==null||e.drawLayer.updateProperties(u(this,un),{rootClass:{selected:!1}}),u(this,Xe)||C(this,Tt,Qp).call(this,!1))}get _mustFixPosition(){return!u(this,Xe)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Zn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(u(this,un),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:s,x:a,y:l}){const{x:c,y:d,width:f,height:m}=s.getBoundingClientRect(),g=new AbortController,v=e.combinedSignal(g),A=S=>{g.abort(),C(this,_i,JC).call(this,e,S)};window.addEventListener("blur",A,{signal:v}),window.addEventListener("pointerup",A,{signal:v}),window.addEventListener("pointerdown",si,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Yi,{signal:v}),s.addEventListener("pointermove",C(this,_i,ZC).bind(this,e),{signal:v}),this._freeHighlight=new k0({x:a,y:l},[c,d,f,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,s){var b,T,k,M;let a=null;if(e instanceof CC){const{data:{quadPoints:L,rect:R,rotation:I,id:j,color:B,opacity:U,popupRef:Q},parent:{page:{pageNumber:ct}}}=e;a=e={annotationType:kt.HIGHLIGHT,color:Array.from(B),opacity:U,quadPoints:L,boxes:null,pageIndex:ct-1,rect:R.slice(0),rotation:I,id:j,deleted:!1,popupRef:Q}}else if(e instanceof zw){const{data:{inkLists:L,rect:R,rotation:I,id:j,color:B,borderStyle:{rawWidth:U},popupRef:Q},parent:{page:{pageNumber:ct}}}=e;a=e={annotationType:kt.HIGHLIGHT,color:Array.from(B),thickness:U,inkLists:L,boxes:null,pageIndex:ct-1,rect:R.slice(0),rotation:I,id:j,deleted:!1,popupRef:Q}}const{color:l,quadPoints:c,inkLists:d,opacity:f}=e,m=await super.deserialize(e,n,s);m.color=mt.makeHexColor(...l),x(m,rr,f||1),d&&x(m,xi,e.thickness),m.annotationElementId=e.id||null,m._initialData=a;const[g,v]=m.pageDimensions,[A,S]=m.pageTranslation;if(c){const L=x(m,sr,[]);for(let R=0;R<c.length;R+=8)L.push({x:(c[R]-A)/g,y:1-(c[R+1]-S)/v,width:(c[R+2]-c[R])/g,height:(c[R+1]-c[R+5])/v});C(b=m,Tt,L0).call(b),C(T=m,Tt,Uo).call(T),m.rotate(m.rotation)}else if(d){x(m,Xe,!0);const L=d[0],R={x:L[0]-A,y:v-(L[1]-S)},I=new k0(R,[0,0,g,v],1,u(m,xi)/2,!0,.001);for(let U=0,Q=L.length;U<Q;U+=2)R.x=L[U]-A,R.y=v-(L[U+1]-S),I.add(R);const{id:j,clipPathId:B}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:I.toSVGPath()}},!0,!0);C(k=m,Tt,Yp).call(k,{highlightOutlines:I.getOutlines(),highlightId:j,clipPathId:B}),C(M=m,Tt,Uo).call(M)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=fe._colorManager.convert(this.color),a={annotationType:kt.HIGHLIGHT,color:s,opacity:u(this,rr),thickness:u(this,xi),quadPoints:C(this,Tt,YC).call(this),outlines:C(this,Tt,QC).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:C(this,Tt,lh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!C(this,Tt,tT).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Fu=new WeakMap,Gd=new WeakMap,sr=new WeakMap,ja=new WeakMap,Ou=new WeakMap,jn=new WeakMap,Wd=new WeakMap,qd=new WeakMap,Va=new WeakMap,Ai=new WeakMap,Zn=new WeakMap,Xe=new WeakMap,ju=new WeakMap,rr=new WeakMap,un=new WeakMap,Vu=new WeakMap,xi=new WeakMap,Xd=new WeakMap,Tt=new WeakSet,L0=function(){const e=new C0(u(this,sr),.001);x(this,Ai,e.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,Ai).box;const n=new C0(u(this,sr),.0025,.001,this._uiManager.direction==="ltr");x(this,jn,n.getOutlines());const{lastPoint:s}=u(this,jn);x(this,ju,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Yp=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var g,v;if(x(this,Ai,e),x(this,jn,e.getNewOutline(u(this,xi)/2+1.5,.0025)),n>=0)x(this,Zn,n),x(this,ja,s),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),x(this,un,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,jn).box,path:{d:u(this,jn).toSVGPath()}},!0));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Zn),{bbox:C(g=Ut,_i,Il).call(g,u(this,Ai).box,(A-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,un),{bbox:C(v=Ut,_i,Il).call(v,u(this,jn).box,A),path:{d:u(this,jn).toSVGPath()}})}const[l,c,d,f]=e.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=d,this.height=f;break;case 90:{const[A,S]=this.parentDimensions;this.x=c,this.y=1-l,this.width=d*S/A,this.height=f*A/S;break}case 180:this.x=1-l,this.y=1-c,this.width=d,this.height=f;break;case 270:{const[A,S]=this.parentDimensions;this.x=1-c,this.y=l,this.width=d*S/A,this.height=f*A/S;break}}const{lastPoint:m}=u(this,jn);x(this,ju,[(m[0]-l)/d,(m[1]-c)/f])},WC=function(e){const n=(l,c)=>{var d,f;this.color=l,x(this,rr,c),(d=this.parent)==null||d.drawLayer.updateProperties(u(this,Zn),{root:{fill:l,"fill-opacity":c}}),(f=u(this,Ou))==null||f.updateColor(l)},s=this.color,a=u(this,rr);this.addCommands({cmd:n.bind(this,e,Ut._defaultOpacity),undo:n.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},qC=function(e){const n=u(this,xi),s=a=>{x(this,xi,a),C(this,Tt,XC).call(this,a)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},XC=function(e){if(!u(this,Xe))return;C(this,Tt,Yp).call(this,{highlightOutlines:u(this,Ai).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},D0=function(){u(this,Zn)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Zn)),x(this,Zn,null),this.parent.drawLayer.remove(u(this,un)),x(this,un,null))},Uo=function(e=this.parent){u(this,Zn)===null&&({id:vn(this,Zn)._,clipPathId:vn(this,ja)._}=e.drawLayer.draw({bbox:u(this,Ai).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":u(this,rr)},rootClass:{highlight:!0,free:u(this,Xe)},path:{d:u(this,Ai).toSVGPath()}},!1,!0),x(this,un,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,Xe)},bbox:u(this,jn).box,path:{d:u(this,jn).toSVGPath()}},u(this,Xe))),u(this,Va)&&(u(this,Va).style.clipPath=u(this,ja)))},_i=new WeakSet,Il=function([e,n,s,a],l){switch(l){case 90:return[1-n-a,e,a,s];case 180:return[1-e-s,1-n-a,s,a];case 270:return[n,1-e-s,a,s]}return[e,n,s,a]},KC=function(e){Ut._keyboardManager.exec(this,e)},Qp=function(e){if(!u(this,Fu))return;const n=window.getSelection();e?n.setPosition(u(this,Fu),u(this,Gd)):n.setPosition(u(this,Wd),u(this,qd))},lh=function(){return u(this,Xe)?this.rotation:0},YC=function(){if(u(this,Xe))return null;const[e,n]=this.pageDimensions,[s,a]=this.pageTranslation,l=u(this,sr),c=new Float32Array(l.length*8);let d=0;for(const{x:f,y:m,width:g,height:v}of l){const A=f*e+s,S=(1-m)*n+a;c[d]=c[d+4]=A,c[d+1]=c[d+3]=S,c[d+2]=c[d+6]=A+g*e,c[d+5]=c[d+7]=S-v*n,d+=8}return c},QC=function(e){return u(this,Ai).serialize(e,C(this,Tt,lh).call(this))},ZC=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},JC=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},tT=function(e){const{color:n}=this._initialData;return e.color.some((s,a)=>s!==n[a])},_(Ut,_i),wt(Ut,"_defaultColor",null),wt(Ut,"_defaultOpacity",1),wt(Ut,"_defaultThickness",12),wt(Ut,"_type","highlight"),wt(Ut,"_editorType",kt.HIGHLIGHT),wt(Ut,"_freeHighlightId",-1),wt(Ut,"_freeHighlight",null),wt(Ut,"_freeHighlightClipId","");let ym=Ut;var za;class mN{constructor(){_(this,za,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))this.updateProperty(e,n)}updateSVGProperty(t,e){u(this,za)[t]=e}toSVGProperties(){const t=u(this,za);return x(this,za,Object.create(null)),{root:t}}reset(){x(this,za,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Qt("Not implemented")}}za=new WeakMap;var Jn,zu,Be,Ba,Ha,lo,uo,co,Ua,zt,N0,F0,O0,uh,eT,Zp,ch,Nl;const at=class at extends fe{constructor(e){super(e);_(this,zt);_(this,Jn,null);_(this,zu);wt(this,"_drawId",null);x(this,zu,e.mustBeCommitted||!1),e.drawOutlines&&(C(this,zt,N0).call(this,e),C(this,zt,uh).call(this))}static _mergeSVGProperties(e,n){const s=new Set(Object.keys(e));for(const[a,l]of Object.entries(n))s.has(a)?Object.assign(e[a],l):e[a]=l;return e}static getDefaultDrawingOptions(e){Qt("Not implemented")}static get typesMap(){Qt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(u(at,Be).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)e.push([s,n[a]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[s,a]of this.constructor.typesMap)e.push([s,n[a]]);return e}_updateProperty(e,n,s){const a=this._drawingOptions,l=a[n],c=d=>{var m;a.updateProperty(n,d);const f=u(this,Jn).updateProperty(n,d);f&&C(this,zt,ch).call(this,f),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(u(this,Jn).getPathResizingSVGProperties(C(this,zt,Zp).call(this)),{bbox:C(this,zt,Nl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(u(this,Jn).getPathResizedSVGProperties(C(this,zt,Zp).call(this)),{bbox:C(this,zt,Nl).call(this)}))}_onTranslating(e,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:C(this,zt,Nl).call(this,e,n)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(u(this,Jn).getPathTranslatedSVGProperties(C(this,zt,Zp).call(this),this.parentDimensions),{bbox:C(this,zt,Nl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,zu)&&(x(this,zu,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){C(this,zt,O0).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,zt,uh).call(this),C(this,zt,ch).call(this,u(this,Jn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),C(this,zt,O0).call(this)):e&&(this._uiManager.addShouldRescale(this),C(this,zt,uh).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties({bbox:C(this,zt,Nl).call(this)},u(this,Jn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,zt,ch).call(this,u(this,Jn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const n=document.createElement("div");e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,n,s,a,l){Qt("Not implemented")}static startDrawing(e,n,s,a){var T;const{target:l,offsetX:c,offsetY:d,pointerId:f,pointerType:m}=a;if(u(at,uo)&&u(at,uo)!==m)return;const{viewport:{rotation:g}}=e,{width:v,height:A}=l.getBoundingClientRect(),S=x(at,Ba,new AbortController),b=e.combinedSignal(S);if(u(at,lo)||x(at,lo,f),u(at,uo)??x(at,uo,m),window.addEventListener("pointerup",k=>{var M;u(at,lo)===k.pointerId?this._endDraw(k):(M=u(at,co))==null||M.delete(k.pointerId)},{signal:b}),window.addEventListener("pointercancel",k=>{var M;u(at,lo)===k.pointerId?this._currentParent.endDrawingSession():(M=u(at,co))==null||M.delete(k.pointerId)},{signal:b}),window.addEventListener("pointerdown",k=>{u(at,uo)===k.pointerType&&((u(at,co)||x(at,co,new Set)).add(k.pointerId),u(at,Be).isCancellable()&&(u(at,Be).removeLastElement(),u(at,Be).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Yi,{signal:b}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),l.addEventListener("touchmove",k=>{k.timeStamp===u(at,Ua)&&si(k)},{signal:b}),e.toggleDrawing(),(T=n._editorUndoBar)==null||T.hide(),u(at,Be)){e.drawLayer.updateProperties(this._currentDrawId,u(at,Be).startNew(c,d,v,A,g));return}n.updateUIForDefaultProperties(this),x(at,Be,this.createDrawerInstance(c,d,v,A,g)),x(at,Ha,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(u(at,Ha).toSVGProperties(),u(at,Be).defaultSVGProperties),!0,!1)}static _drawMove(e){var l;if(x(at,Ua,-1),!u(at,Be))return;const{offsetX:n,offsetY:s,pointerId:a}=e;if(u(at,lo)===a){if(((l=u(at,co))==null?void 0:l.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(at,Be).add(n,s)),x(at,Ua,e.timeStamp),si(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,x(at,Be,null),x(at,Ha,null),x(at,uo,null),x(at,Ua,NaN)),u(at,Ba)&&(u(at,Ba).abort(),x(at,Ba,null),x(at,lo,NaN),x(at,co,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e&&n.drawLayer.updateProperties(this._currentDrawId,u(at,Be).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=u(at,Be),a=this._currentDrawId,l=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,s.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:jt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(jt.DRAW_STEP),!u(at,Be).isEmpty()){const{pageDimensions:[s,a],scale:l}=n,c=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(at,Be).getOutlines(s*l,a*l,l,this._INNER_MARGIN),drawingOptions:u(at,Ha),mustBeCommitted:!e});return this._cleanup(!0),c}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,s,a,l,c){Qt("Not implemented")}static async deserialize(e,n,s){var g,v;const{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:d}}=n.viewport,f=this.deserializeDraw(c,d,a,l,this._INNER_MARGIN,e),m=await super.deserialize(e,n,s);return m.createDrawingOptions(e),C(g=m,zt,N0).call(g,{drawOutlines:f}),C(v=m,zt,uh).call(v),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[n,s]=this.pageTranslation,[a,l]=this.pageDimensions;return u(this,Jn).serialize([n,s,a,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Jn=new WeakMap,zu=new WeakMap,Be=new WeakMap,Ba=new WeakMap,Ha=new WeakMap,lo=new WeakMap,uo=new WeakMap,co=new WeakMap,Ua=new WeakMap,zt=new WeakSet,N0=function({drawOutlines:e,drawId:n,drawingOptions:s}){x(this,Jn,e),this._drawingOptions||(this._drawingOptions=s),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=C(this,zt,F0).call(this,e,this.parent),C(this,zt,ch).call(this,e.box)},F0=function(e,n){const{id:s}=n.drawLayer.draw(at._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},O0=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},uh=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,zt,F0).call(this,u(this,Jn),e)}},eT=function([e,n,s,a]){const{parentDimensions:[l,c],rotation:d}=this;switch(d){case 90:return[n,1-e,s*(c/l),a*(l/c)];case 180:return[1-e,1-n,s,a];case 270:return[1-n,e,s*(c/l),a*(l/c)];default:return[e,n,s,a]}},Zp=function(){const{x:e,y:n,width:s,height:a,parentDimensions:[l,c],rotation:d}=this;switch(d){case 90:return[1-n,e,s*(l/c),a*(c/l)];case 180:return[1-e,1-n,s,a];case 270:return[n,1-e,s*(l/c),a*(c/l)];default:return[e,n,s,a]}},ch=function(e){if([this.x,this.y,this.width,this.height]=C(this,zt,eT).call(this,e),this.div){this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}this._onResized()},Nl=function(){const{x:e,y:n,width:s,height:a,rotation:l,parentRotation:c,parentDimensions:[d,f]}=this;switch((l*4+c)/90){case 1:return[1-n-a,e,a,s];case 2:return[1-e-s,1-n-a,s,a];case 3:return[n,1-e-s,a,s];case 4:return[e,n-s*(d/f),a*(f/d),s*(d/f)];case 5:return[1-n,e,s*(d/f),a*(f/d)];case 6:return[1-e-a*(f/d),1-n,a*(f/d),s*(d/f)];case 7:return[n-s*(d/f),1-e-a*(f/d),s*(d/f),a*(f/d)];case 8:return[e-s,n-a,s,a];case 9:return[1-n,e-s,a,s];case 10:return[1-e,1-n,s,a];case 11:return[n-a,1-e,a,s];case 12:return[e-a*(f/d),n,a*(f/d),s*(d/f)];case 13:return[1-n-s*(d/f),e-a*(f/d),s*(d/f),a*(f/d)];case 14:return[1-e,1-n-s*(d/f),a*(f/d),s*(d/f)];case 15:return[n,1-e,s*(d/f),a*(f/d)];default:return[e,n,s,a]}},wt(at,"_currentDrawId",-1),wt(at,"_currentParent",null),_(at,Be,null),_(at,Ba,null),_(at,Ha,null),_(at,lo,NaN),_(at,uo,null),_(at,co,null),_(at,Ua,NaN),wt(at,"_INNER_MARGIN",3);let I0=at;var ys,He,Ue,$a,Bu,xn,Ke,Si,Ga,Wa,qa,Hu,Jp;class gN{constructor(t,e,n,s,a,l){_(this,Hu);_(this,ys,new Float64Array(6));_(this,He);_(this,Ue);_(this,$a);_(this,Bu);_(this,xn);_(this,Ke,"");_(this,Si,0);_(this,Ga,new vm);_(this,Wa);_(this,qa);x(this,Wa,n),x(this,qa,s),x(this,$a,a),x(this,Bu,l),[t,e]=C(this,Hu,Jp).call(this,t,e);const c=x(this,He,[NaN,NaN,NaN,NaN,t,e]);x(this,xn,[t,e]),x(this,Ue,[{line:c,points:u(this,xn)}]),u(this,ys).set(c,0)}updateProperty(t,e){t==="stroke-width"&&x(this,Bu,e)}isEmpty(){return!u(this,Ue)||u(this,Ue).length===0}isCancellable(){return u(this,xn).length<=10}add(t,e){[t,e]=C(this,Hu,Jp).call(this,t,e);const[n,s,a,l]=u(this,ys).subarray(2,6),c=t-a,d=e-l;return Math.hypot(u(this,Wa)*c,u(this,qa)*d)<=2?null:(u(this,xn).push(t,e),isNaN(n)?(u(this,ys).set([a,l,t,e],2),u(this,He).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(u(this,ys)[0])&&u(this,He).splice(6,6),u(this,ys).set([n,s,a,l,t,e],0),u(this,He).push(...rt.createBezierPoints(n,s,a,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(u(this,xn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,a){x(this,Wa,n),x(this,qa,s),x(this,$a,a),[t,e]=C(this,Hu,Jp).call(this,t,e);const l=x(this,He,[NaN,NaN,NaN,NaN,t,e]);x(this,xn,[t,e]);const c=u(this,Ue).at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),u(this,Ue).push({line:l,points:u(this,xn)}),u(this,ys).set(l,0),x(this,Si,0),this.toSVGPath(),null}getLastElement(){return u(this,Ue).at(-1)}setLastElement(t){return u(this,Ue)?(u(this,Ue).push(t),x(this,He,t.line),x(this,xn,t.points),x(this,Si,0),{path:{d:this.toSVGPath()}}):u(this,Ga).setLastElement(t)}removeLastElement(){if(!u(this,Ue))return u(this,Ga).removeLastElement();u(this,Ue).pop(),x(this,Ke,"");for(let t=0,e=u(this,Ue).length;t<e;t++){const{line:n,points:s}=u(this,Ue)[t];x(this,He,n),x(this,xn,s),x(this,Si,0),this.toSVGPath()}return{path:{d:u(this,Ke)}}}toSVGPath(){const t=rt.svgRound(u(this,He)[4]),e=rt.svgRound(u(this,He)[5]);if(u(this,xn).length===2)return x(this,Ke,`${u(this,Ke)} M ${t} ${e} Z`),u(this,Ke);if(u(this,xn).length<=6){const s=u(this,Ke).lastIndexOf("M");x(this,Ke,`${u(this,Ke).slice(0,s)} M ${t} ${e}`),x(this,Si,6)}if(u(this,xn).length===4){const s=rt.svgRound(u(this,He)[10]),a=rt.svgRound(u(this,He)[11]);return x(this,Ke,`${u(this,Ke)} L ${s} ${a}`),x(this,Si,12),u(this,Ke)}const n=[];u(this,Si)===0&&(n.push(`M ${t} ${e}`),x(this,Si,6));for(let s=u(this,Si),a=u(this,He).length;s<a;s+=6){const[l,c,d,f,m,g]=u(this,He).slice(s,s+6).map(rt.svgRound);n.push(`C${l} ${c} ${d} ${f} ${m} ${g}`)}return x(this,Ke,u(this,Ke)+n.join(" ")),x(this,Si,u(this,He).length),u(this,Ke)}getOutlines(t,e,n,s){const a=u(this,Ue).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),u(this,Ga).build(u(this,Ue),t,e,n,u(this,$a),u(this,Bu),s),x(this,ys,null),x(this,He,null),x(this,Ue,null),x(this,Ke,null),u(this,Ga)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ys=new WeakMap,He=new WeakMap,Ue=new WeakMap,$a=new WeakMap,Bu=new WeakMap,xn=new WeakMap,Ke=new WeakMap,Si=new WeakMap,Ga=new WeakMap,Wa=new WeakMap,qa=new WeakMap,Hu=new WeakSet,Jp=function(t,e){return rt._normalizePoint(t,e,u(this,Wa),u(this,qa),u(this,$a))};var Sn,Kd,Yd,ti,vs,ws,Uu,$u,Gu,Ze,Fs,nT,iT,sT;const Gw=class Gw extends rt{constructor(){super(...arguments);_(this,Ze);_(this,Sn);_(this,Kd,0);_(this,Yd);_(this,ti);_(this,vs);_(this,ws);_(this,Uu);_(this,$u);_(this,Gu)}build(e,n,s,a,l,c,d){x(this,vs,n),x(this,ws,s),x(this,Uu,a),x(this,$u,l),x(this,Gu,c),x(this,Yd,d??0),x(this,ti,e),C(this,Ze,iT).call(this)}setLastElement(e){return u(this,ti).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,ti).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of u(this,ti)){if(e.push(`M${rt.svgRound(n[4])} ${rt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12){e.push(`L${rt.svgRound(n[10])} ${rt.svgRound(n[11])}`);continue}for(let s=6,a=n.length;s<a;s+=6){const[l,c,d,f,m,g]=n.subarray(s,s+6).map(rt.svgRound);e.push(`C${l} ${c} ${d} ${f} ${m} ${g}`)}}return e.join("")}serialize([e,n,s,a],l){const c=[],d=[],[f,m,g,v]=C(this,Ze,nT).call(this);let A,S,b,T,k,M,L,R,I;switch(u(this,$u)){case 0:I=rt._rescale,A=e,S=n+a,b=s,T=-a,k=e+f*s,M=n+(1-m-v)*a,L=e+(f+g)*s,R=n+(1-m)*a;break;case 90:I=rt._rescaleAndSwap,A=e,S=n,b=s,T=a,k=e+m*s,M=n+f*a,L=e+(m+v)*s,R=n+(f+g)*a;break;case 180:I=rt._rescale,A=e+s,S=n,b=-s,T=a,k=e+(1-f-g)*s,M=n+m*a,L=e+(1-f)*s,R=n+(m+v)*a;break;case 270:I=rt._rescaleAndSwap,A=e+s,S=n+a,b=-s,T=-a,k=e+(1-m-v)*s,M=n+(1-f-g)*a,L=e+(1-m)*s,R=n+(1-f)*a;break}for(const{line:j,points:B}of u(this,ti))c.push(I(j,A,S,b,T,l?new Array(j.length):null)),d.push(I(B,A,S,b,T,l?new Array(B.length):null));return{lines:c,points:d,rect:[k,M,L,R]}}static deserialize(e,n,s,a,l,{paths:{lines:c,points:d},rotation:f,thickness:m}){const g=[];let v,A,S,b,T;switch(f){case 0:T=rt._rescale,v=-e/s,A=n/a+1,S=1/s,b=-1/a;break;case 90:T=rt._rescaleAndSwap,v=-n/a,A=-e/s,S=1/a,b=1/s;break;case 180:T=rt._rescale,v=e/s+1,A=-n/a,S=-1/s,b=1/a;break;case 270:T=rt._rescaleAndSwap,v=n/a+1,A=e/s+1,S=-1/a,b=-1/s;break}if(!c){c=[];for(const M of d){const L=M.length;if(L===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(L===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const R=new Float32Array(3*(L-2));c.push(R);let[I,j,B,U]=M.subarray(0,4);R.set([NaN,NaN,NaN,NaN,I,j],0);for(let Q=4;Q<L;Q+=2){const ct=M[Q],ot=M[Q+1];R.set(rt.createBezierPoints(I,j,B,U,ct,ot),(Q-2)*3),[I,j,B,U]=[B,U,ct,ot]}}}for(let M=0,L=c.length;M<L;M++)g.push({line:T(c[M].map(R=>R??NaN),v,A,S,b),points:T(d[M].map(R=>R??NaN),v,A,S,b)});const k=new Gw;return k.build(g,s,a,1,f,m,l),k}get box(){return u(this,Sn)}updateProperty(e,n){return e==="stroke-width"?C(this,Ze,sT).call(this,n):null}updateParentDimensions([e,n],s){const[a,l]=C(this,Ze,Fs).call(this);x(this,vs,e),x(this,ws,n),x(this,Uu,s);const[c,d]=C(this,Ze,Fs).call(this),f=c-a,m=d-l,g=u(this,Sn);return g[0]-=f,g[1]-=m,g[2]+=2*f,g[3]+=2*m,g}updateRotation(e){return x(this,Kd,e),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,Sn).map(rt.svgRound).join(" ")}get defaultProperties(){const[e,n]=u(this,Sn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${rt.svgRound(e)} ${rt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=u(this,Sn);let s=0,a=0,l=0,c=0,d=0,f=0;switch(u(this,Kd)){case 90:a=n/e,l=-e/n,d=e;break;case 180:s=-1,c=-1,d=e,f=n;break;case 270:a=-n/e,l=e/n,f=n;break;default:return""}return`matrix(${s} ${a} ${l} ${c} ${rt.svgRound(d)} ${rt.svgRound(f)})`}getPathResizingSVGProperties([e,n,s,a]){const[l,c]=C(this,Ze,Fs).call(this),[d,f,m,g]=u(this,Sn);if(Math.abs(m-l)<=rt.PRECISION||Math.abs(g-c)<=rt.PRECISION){const T=e+s/2-(d+m/2),k=n+a/2-(f+g/2);return{path:{"transform-origin":`${rt.svgRound(e)} ${rt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${T} ${k})`}}}const v=(s-2*l)/(m-2*l),A=(a-2*c)/(g-2*c),S=m/s,b=g/a;return{path:{"transform-origin":`${rt.svgRound(d)} ${rt.svgRound(f)}`,transform:`${this.rotationTransform} scale(${S} ${b}) translate(${rt.svgRound(l)} ${rt.svgRound(c)}) scale(${v} ${A}) translate(${rt.svgRound(-l)} ${rt.svgRound(-c)})`}}}getPathResizedSVGProperties([e,n,s,a]){const[l,c]=C(this,Ze,Fs).call(this),d=u(this,Sn),[f,m,g,v]=d;if(d[0]=e,d[1]=n,d[2]=s,d[3]=a,Math.abs(g-l)<=rt.PRECISION||Math.abs(v-c)<=rt.PRECISION){const k=e+s/2-(f+g/2),M=n+a/2-(m+v/2);for(const{line:L,points:R}of u(this,ti))rt._translate(L,k,M,L),rt._translate(R,k,M,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${rt.svgRound(e)} ${rt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const A=(s-2*l)/(g-2*l),S=(a-2*c)/(v-2*c),b=-A*(f+l)+e+l,T=-S*(m+c)+n+c;if(A!==1||S!==1||b!==0||T!==0)for(const{line:k,points:M}of u(this,ti))rt._rescale(k,b,T,A,S,k),rt._rescale(M,b,T,A,S,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${rt.svgRound(e)} ${rt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],s){const[a,l]=s,c=u(this,Sn),d=e-c[0],f=n-c[1];if(u(this,vs)===a&&u(this,ws)===l)for(const{line:m,points:g}of u(this,ti))rt._translate(m,d,f,m),rt._translate(g,d,f,g);else{const m=u(this,vs)/a,g=u(this,ws)/l;x(this,vs,a),x(this,ws,l);for(const{line:v,points:A}of u(this,ti))rt._rescale(v,d,f,m,g,v),rt._rescale(A,d,f,m,g,A);c[2]*=m,c[3]*=g}return c[0]=e,c[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${rt.svgRound(e)} ${rt.svgRound(n)}`}}}get defaultSVGProperties(){const e=u(this,Sn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${rt.svgRound(e[0])} ${rt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};Sn=new WeakMap,Kd=new WeakMap,Yd=new WeakMap,ti=new WeakMap,vs=new WeakMap,ws=new WeakMap,Uu=new WeakMap,$u=new WeakMap,Gu=new WeakMap,Ze=new WeakSet,Fs=function(e=u(this,Gu)){const n=u(this,Yd)+e/2*u(this,Uu);return u(this,$u)%180===0?[n/u(this,vs),n/u(this,ws)]:[n/u(this,ws),n/u(this,vs)]},nT=function(){const[e,n,s,a]=u(this,Sn),[l,c]=C(this,Ze,Fs).call(this,0);return[e+l,n+c,s-2*l,a-2*c]},iT=function(){const e=x(this,Sn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of u(this,ti)){if(a.length<=12){for(let d=4,f=a.length;d<f;d+=6){const[m,g]=a.subarray(d,d+2);e[0]=Math.min(e[0],m),e[1]=Math.min(e[1],g),e[2]=Math.max(e[2],m),e[3]=Math.max(e[3],g)}continue}let l=a[4],c=a[5];for(let d=6,f=a.length;d<f;d+=6){const[m,g,v,A,S,b]=a.subarray(d,d+6);mt.bezierBoundingBox(l,c,m,g,v,A,S,b,e),l=S,c=b}}const[n,s]=C(this,Ze,Fs).call(this);e[0]=Math.min(1,Math.max(0,e[0]-n)),e[1]=Math.min(1,Math.max(0,e[1]-s)),e[2]=Math.min(1,Math.max(0,e[2]+n)),e[3]=Math.min(1,Math.max(0,e[3]+s)),e[2]-=e[0],e[3]-=e[1]},sT=function(e){const[n,s]=C(this,Ze,Fs).call(this);x(this,Gu,e);const[a,l]=C(this,Ze,Fs).call(this),[c,d]=[a-n,l-s],f=u(this,Sn);return f[0]-=c,f[1]-=d,f[2]+=2*c,f[3]+=2*d,f};let vm=Gw;var Wu;const Ww=class Ww extends mN{constructor(e){super();_(this,Wu);x(this,Wu,e),super.updateProperties({fill:"none",stroke:fe._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=u(this,Wu).realScale),super.updateSVGProperty(e,n)}clone(){const e=new Ww(u(this,Wu));return e.updateAll(this),e}};Wu=new WeakMap;let j0=Ww;var Fm,rT;const Hl=class Hl extends I0{constructor(e){super({...e,name:"inkEditor"});_(this,Fm);this._willKeepAspectRatio=!0}static initialize(e,n){fe.initialize(e,n),this._defaultDrawingOptions=new j0(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Nt(this,"typesMap",new Map([[jt.INK_THICKNESS,"stroke-width"],[jt.INK_COLOR,"stroke"],[jt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,s,a,l){return new gN(e,n,s,a,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,s,a,l,c){return vm.deserialize(e,n,s,a,l,c)}static async deserialize(e,n,s){let a=null;if(e instanceof zw){const{data:{inkLists:c,rect:d,rotation:f,id:m,color:g,opacity:v,borderStyle:{rawWidth:A},popupRef:S},parent:{page:{pageNumber:b}}}=e;a=e={annotationType:kt.INK,color:Array.from(g),thickness:A,opacity:v,paths:{points:c},boxes:null,pageIndex:b-1,rect:d.slice(0),rotation:f,id:m,deleted:!1,popupRef:S}}const l=await super.deserialize(e,n,s);return l.annotationElementId=e.id||null,l._initialData=a,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:s}){this._drawingOptions=Hl.getDefaultDrawingOptions({stroke:mt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s,rect:a}=this.serializeDraw(e),{_drawingOptions:{stroke:l,"stroke-opacity":c,"stroke-width":d}}=this,f={annotationType:kt.INK,color:fe._colorManager.convert(l),opacity:c,thickness:d,paths:{lines:n,points:s},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?f:this.annotationElementId&&!C(this,Fm,rT).call(this,f)?null:(f.id=this.annotationElementId,f)}renderAnnotationElement(e){const{points:n,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n}),null}};Fm=new WeakSet,rT=function(e){const{color:n,thickness:s,opacity:a,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((c,d)=>c!==n[d])||e.thickness!==s||e.opacity!==a||e.pageIndex!==l},wt(Hl,"_type","ink"),wt(Hl,"_editorType",kt.INK),wt(Hl,"_defaultDrawingOptions",null);let V0=Hl;var he,Ye,ho,or,fo,qu,As,xs,ei,Xu,Ht,hh,dh,tm,B0,em,H0,nm,oT;const vh=class vh extends fe{constructor(e){super({...e,name:"stampEditor"});_(this,Ht);_(this,he,null);_(this,Ye,null);_(this,ho,null);_(this,or,null);_(this,fo,null);_(this,qu,"");_(this,As,null);_(this,xs,null);_(this,ei,!1);_(this,Xu,!1);x(this,or,e.bitmapUrl),x(this,fo,e.bitmapFile)}static initialize(e,n){fe.initialize(e,n)}static get supportedTypes(){return Nt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Nt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(kt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:c}=e||this.copyCanvas(null,null,!0).imageData,d=await s.guess({name:"altText",request:{data:a,width:l,height:c,channels:a.length/(l*c)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const f=d.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;u(this,Ye)&&(x(this,he,null),this._uiManager.imageManager.deleteId(u(this,Ye)),(e=u(this,As))==null||e.remove(),x(this,As,null),u(this,xs)&&(clearTimeout(u(this,xs)),x(this,xs,null))),super.remove()}rebuild(){if(!this.parent){u(this,Ye)&&C(this,Ht,tm).call(this);return}super.rebuild(),this.div!==null&&(u(this,Ye)&&u(this,As)===null&&C(this,Ht,tm).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(u(this,ho)||u(this,he)||u(this,or)||u(this,fo)||u(this,Ye))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),u(this,he)?C(this,Ht,B0).call(this):C(this,Ht,tm).call(this),this.width&&!this.annotationElementId){const[s,a]=this.parentDimensions;this.setAt(e*s,n*a,this.width*s,this.height*a)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,xs)!==null&&clearTimeout(u(this,xs)),x(this,xs,setTimeout(()=>{x(this,xs,null),C(this,Ht,H0).call(this)},200))}copyCanvas(e,n,s=!1){var A;e||(e=224);const{width:a,height:l}=u(this,he),c=new jv;let d=u(this,he),f=a,m=l,g=null;if(n){if(a>n||l>n){const U=Math.min(n/a,n/l);f=Math.floor(a*U),m=Math.floor(l*U)}g=document.createElement("canvas");const S=g.width=Math.ceil(f*c.sx),b=g.height=Math.ceil(m*c.sy);u(this,ei)||(d=C(this,Ht,em).call(this,S,b));const T=g.getContext("2d");T.filter=this._uiManager.hcmFilter;let k="white",M="#cfcfd8";this._uiManager.hcmFilter!=="none"?M="black":(A=window.matchMedia)!=null&&A.call(window,"(prefers-color-scheme: dark)").matches&&(k="#8f8f9d",M="#42414d");const L=15,R=L*c.sx,I=L*c.sy,j=new OffscreenCanvas(R*2,I*2),B=j.getContext("2d");B.fillStyle=k,B.fillRect(0,0,R*2,I*2),B.fillStyle=M,B.fillRect(0,0,R,I),B.fillRect(R,I,R,I),T.fillStyle=T.createPattern(j,"repeat"),T.fillRect(0,0,S,b),T.drawImage(d,0,0,d.width,d.height,0,0,S,b)}let v=null;if(s){let S,b;if(c.symmetric&&d.width<e&&d.height<e)S=d.width,b=d.height;else if(d=u(this,he),a>e||l>e){const M=Math.min(e/a,e/l);S=Math.floor(a*M),b=Math.floor(l*M),u(this,ei)||(d=C(this,Ht,em).call(this,S,b))}const k=new OffscreenCanvas(S,b).getContext("2d",{willReadFrequently:!0});k.drawImage(d,0,0,d.width,d.height,0,0,S,b),v={width:S,height:b,data:k.getImageData(0,0,S,b).data}}return{canvas:g,width:f,height:m,imageData:v}}getImageForAltText(){return u(this,As)}static async deserialize(e,n,s){var b;let a=null;if(e instanceof TC){const{data:{rect:T,rotation:k,id:M,structParent:L,popupRef:R},container:I,parent:{page:{pageNumber:j}}}=e,B=I.querySelector("canvas"),U=s.imageManager.getFromCanvas(I.id,B);B.remove();const Q=((b=await n._structTree.getAriaAttributes(`${Lw}${M}`))==null?void 0:b.get("aria-label"))||"";a=e={annotationType:kt.STAMP,bitmapId:U.id,bitmap:U.bitmap,pageIndex:j-1,rect:T.slice(0),rotation:k,id:M,deleted:!1,accessibilityData:{decorative:!1,altText:Q},isSvg:!1,structParent:L,popupRef:R}}const l=await super.deserialize(e,n,s),{rect:c,bitmap:d,bitmapUrl:f,bitmapId:m,isSvg:g,accessibilityData:v}=e;m&&s.imageManager.isValidId(m)?(x(l,Ye,m),d&&x(l,he,d)):x(l,or,f),x(l,ei,g);const[A,S]=l.pageDimensions;return l.width=(c[2]-c[0])/A,l.height=(c[3]-c[1])/S,l.annotationElementId=e.id||null,v&&(l.altTextData=v),l._initialData=a,x(l,Xu,!!a),l}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:kt.STAMP,bitmapId:u(this,Ye),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,ei),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=C(this,Ht,nm).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const d=C(this,Ht,oT).call(this,s);if(d.isSame)return null;d.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const c=u(this,ei)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(u(this,Ye)))n.stamps.set(u(this,Ye),{area:c,serialized:s}),s.bitmap=C(this,Ht,nm).call(this,!1);else if(u(this,ei)){const d=n.stamps.get(u(this,Ye));c>d.area&&(d.area=c,d.serialized.bitmap.close(),d.serialized.bitmap=C(this,Ht,nm).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};he=new WeakMap,Ye=new WeakMap,ho=new WeakMap,or=new WeakMap,fo=new WeakMap,qu=new WeakMap,As=new WeakMap,xs=new WeakMap,ei=new WeakMap,Xu=new WeakMap,Ht=new WeakSet,hh=function(e,n=!1){if(!e){this.remove();return}x(this,he,e.bitmap),n||(x(this,Ye,e.id),x(this,ei,e.isSvg)),e.file&&x(this,qu,e.file.name),C(this,Ht,B0).call(this)},dh=function(){if(x(this,ho,null),this._uiManager.enableWaiting(!1),!!u(this,As)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,he)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,he)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},tm=function(){if(u(this,Ye)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Ye)).then(s=>C(this,Ht,hh).call(this,s,!0)).finally(()=>C(this,Ht,dh).call(this));return}if(u(this,or)){const s=u(this,or);x(this,or,null),this._uiManager.enableWaiting(!0),x(this,ho,this._uiManager.imageManager.getFromUrl(s).then(a=>C(this,Ht,hh).call(this,a)).finally(()=>C(this,Ht,dh).call(this)));return}if(u(this,fo)){const s=u(this,fo);x(this,fo,null),this._uiManager.enableWaiting(!0),x(this,ho,this._uiManager.imageManager.getFromFile(s).then(a=>C(this,Ht,hh).call(this,a)).finally(()=>C(this,Ht,dh).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=vh.supportedTypesStr;const n=this._uiManager._signal;x(this,ho,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,Ht,hh).call(this,a)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>C(this,Ht,dh).call(this))),e.click()},B0=function(){var g;const{div:e}=this;let{width:n,height:s}=u(this,he);const[a,l]=this.pageDimensions,c=.75;if(this.width)n=this.width*a,s=this.height*l;else if(n>c*a||s>c*l){const v=Math.min(c*a/n,c*l/s);n*=v,s*=v}const[d,f]=this.parentDimensions;this.setDims(n*d/a,s*f/l),this._uiManager.enableWaiting(!1);const m=x(this,As,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),this.width=n/a,this.height=s/l,(g=this._initialOptions)!=null&&g.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),C(this,Ht,H0).call(this),u(this,Xu)||(this.parent.addUndoableEditor(this),x(this,Xu,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,qu)&&m.setAttribute("aria-label",u(this,qu))},em=function(e,n){const{width:s,height:a}=u(this,he);let l=s,c=a,d=u(this,he);for(;l>2*e||c>2*n;){const f=l,m=c;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*n&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const g=new OffscreenCanvas(l,c);g.getContext("2d").drawImage(d,0,0,f,m,0,0,l,c),d=g.transferToImageBitmap()}return d},H0=function(){const[e,n]=this.parentDimensions,{width:s,height:a}=this,l=new jv,c=Math.ceil(s*e*l.sx),d=Math.ceil(a*n*l.sy),f=u(this,As);if(!f||f.width===c&&f.height===d)return;f.width=c,f.height=d;const m=u(this,ei)?u(this,he):C(this,Ht,em).call(this,c,d),g=f.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(m,0,0,m.width,m.height,0,0,c,d)},nm=function(e){if(e){if(u(this,ei)){const a=this._uiManager.imageManager.getSvgUrl(u(this,Ye));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,he),n.getContext("2d").drawImage(u(this,he),0,0),n.toDataURL()}if(u(this,ei)){const[n,s]=this.pageDimensions,a=Math.round(this.width*n*xo.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*xo.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,l);return c.getContext("2d").drawImage(u(this,he),0,0,u(this,he).width,u(this,he).height,0,0,a,l),c.transferToImageBitmap()}return structuredClone(u(this,he))},oT=function(e){var c;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,a=e.pageIndex===n,l=(((c=e.accessibilityData)==null?void 0:c.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&l,isSameAltText:l}},wt(vh,"_type","stamp"),wt(vh,"_editorType",kt.STAMP);let z0=vh;var Xa,Ku,Ss,po,ar,bi,mo,Yu,Ka,qi,lr,cn,ur,pt,go,ae,aT,rs,$0,G0,im;const Ni=class Ni{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:a,annotationLayer:l,drawLayer:c,textLayer:d,viewport:f,l10n:m}){_(this,ae);_(this,Xa);_(this,Ku,!1);_(this,Ss,null);_(this,po,null);_(this,ar,null);_(this,bi,new Map);_(this,mo,!1);_(this,Yu,!1);_(this,Ka,!1);_(this,qi,null);_(this,lr,null);_(this,cn,null);_(this,ur,null);_(this,pt);const g=[...u(Ni,go).values()];if(!Ni._initialized){Ni._initialized=!0;for(const v of g)v.initialize(m,t)}t.registerEditorTypes(g),x(this,pt,t),this.pageIndex=e,this.div=n,x(this,Xa,a),x(this,Ss,l),this.viewport=f,x(this,cn,d),this.drawLayer=c,this._structTree=s,u(this,pt).addLayer(this)}get isEmpty(){return u(this,bi).size===0}get isInvisible(){return this.isEmpty&&u(this,pt).getMode()===kt.NONE}updateToolbar(t){u(this,pt).updateToolbar(t)}updateMode(t=u(this,pt).getMode()){switch(C(this,ae,im).call(this),t){case kt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case kt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case kt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of u(Ni,go).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=u(this,cn))==null?void 0:e.div)}setEditingState(t){u(this,pt).setEditingState(t)}addCommands(t){u(this,pt).addCommands(t)}cleanUndoStack(t){u(this,pt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=u(this,Ss))==null||e.div.classList.toggle("disabled",!t)}async enable(){x(this,Ka,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of u(this,bi).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(u(this,pt).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!u(this,Ss)){x(this,Ka,!1);return}const e=u(this,Ss).getEditableAnnotations();for(const n of e){if(n.hide(),u(this,pt).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}x(this,Ka,!1)}disable(){var s;x(this,Yu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const a of u(this,bi).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);(s=this.getEditableAnnotation(a.annotationElementId))==null||s.show(),a.remove()}if(u(this,Ss)){const a=u(this,Ss).getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(u(this,pt).isDeletedAnnotationElement(c))continue;let d=e.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=t.get(c),d&&(u(this,pt).addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}C(this,ae,im).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of u(Ni,go).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,Yu,!1)}getEditableAnnotation(t){var e;return((e=u(this,Ss))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){u(this,pt).getActive()!==t&&u(this,pt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=u(this,cn))!=null&&t.div&&!u(this,ur)){x(this,ur,new AbortController);const e=u(this,pt).combinedSignal(u(this,ur));u(this,cn).div.addEventListener("pointerdown",C(this,ae,aT).bind(this),{signal:e}),u(this,cn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=u(this,cn))!=null&&t.div&&u(this,ur)&&(u(this,ur).abort(),x(this,ur,null),u(this,cn).div.classList.remove("highlighting"))}enableClick(){if(u(this,po))return;x(this,po,new AbortController);const t=u(this,pt).combinedSignal(u(this,po));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=u(this,po))==null||t.abort(),x(this,po,null)}attach(t){u(this,bi).set(t.id,t);const{annotationElementId:e}=t;e&&u(this,pt).isDeletedAnnotationElement(e)&&u(this,pt).removeDeletedAnnotationElement(t)}detach(t){var e;u(this,bi).delete(t.id),(e=u(this,Xa))==null||e.removePointerInTextLayer(t.contentDiv),!u(this,Yu)&&t.annotationElementId&&u(this,pt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),u(this,pt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(u(this,pt).addDeletedAnnotationElement(t.annotationElementId),fe.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),u(this,pt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!u(this,Ka)),u(this,pt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!u(this,ar)&&(t._focusEventsAllowed=!1,x(this,ar,setTimeout(()=>{x(this,ar,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:u(this,pt)._signal}),e.focus())},0))),t._structTreeParentId=(n=u(this,Xa))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return u(this,pt).getId()}combinedSignal(t){return u(this,pt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=u(this,ae,rs))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){u(this,pt).updateToolbar(t),u(this,pt).updateMode(t);const{offsetX:n,offsetY:s}=C(this,ae,G0).call(this),a=this.getNextId(),l=C(this,ae,$0).call(this,{parent:this,id:a,x:n,y:s,uiManager:u(this,pt),isCentered:!0,...e});l&&this.add(l)}async deserialize(t){var e;return await((e=u(Ni,go).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,u(this,pt)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),a=C(this,ae,$0).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:u(this,pt),isCentered:e,...n});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(C(this,ae,G0).call(this),!0)}setSelected(t){u(this,pt).setSelected(t)}toggleSelected(t){u(this,pt).toggleSelected(t)}unselect(t){u(this,pt).unselect(t)}pointerup(t){var n;const{isMac:e}=En.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&u(this,mo)&&(x(this,mo,!1),!((n=u(this,ae,rs))!=null&&n.isDrawer&&u(this,ae,rs).supportMultipleDrawings))){if(!u(this,Ku)){x(this,Ku,!0);return}if(u(this,pt).getMode()===kt.STAMP){u(this,pt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var s;if(u(this,pt).getMode()===kt.HIGHLIGHT&&this.enableTextSelection(),u(this,mo)){x(this,mo,!1);return}const{isMac:e}=En.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(x(this,mo,!0),(s=u(this,ae,rs))!=null&&s.isDrawer){this.startDrawingSession(t);return}const n=u(this,pt).getActive();x(this,Ku,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus(),u(this,qi)){u(this,ae,rs).startDrawing(this,u(this,pt),!1,t);return}u(this,pt).setCurrentDrawingSession(this),x(this,qi,new AbortController);const e=u(this,pt).combinedSignal(u(this,qi));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(x(this,lr,null),this.commitOrRemove())},{signal:e}),u(this,ae,rs).startDrawing(this,u(this,pt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&x(this,lr,e);return}u(this,lr)&&setTimeout(()=>{var e;(e=u(this,lr))==null||e.focus(),x(this,lr,null)},0)}endDrawingSession(t=!1){return u(this,qi)?(u(this,pt).setCurrentDrawingSession(null),u(this,qi).abort(),x(this,qi,null),x(this,lr,null),u(this,ae,rs).endDrawing(t)):null}findNewParent(t,e,n){const s=u(this,pt).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return u(this,qi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,qi)&&u(this,ae,rs).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=u(this,pt).getActive())==null?void 0:t.parent)===this&&(u(this,pt).commitOrRemove(),u(this,pt).setActiveEditor(null)),u(this,ar)&&(clearTimeout(u(this,ar)),x(this,ar,null));for(const n of u(this,bi).values())(e=u(this,Xa))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,bi).clear(),u(this,pt).removeLayer(this)}render({viewport:t}){this.viewport=t,Za(this.div,t);for(const e of u(this,pt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){u(this,pt).commitOrRemove(),C(this,ae,im).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Za(this.div,{rotation:n}),e!==n)for(const s of u(this,bi).values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return u(this,pt).viewParameters.realScale}};Xa=new WeakMap,Ku=new WeakMap,Ss=new WeakMap,po=new WeakMap,ar=new WeakMap,bi=new WeakMap,mo=new WeakMap,Yu=new WeakMap,Ka=new WeakMap,qi=new WeakMap,lr=new WeakMap,cn=new WeakMap,ur=new WeakMap,pt=new WeakMap,go=new WeakMap,ae=new WeakSet,aT=function(t){u(this,pt).unselectAll();const{target:e}=t;if(e===u(this,cn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&u(this,cn).div.contains(e)){const{isMac:n}=En.platform;if(t.button!==0||t.ctrlKey&&n)return;u(this,pt).showAllEditors("highlight",!0,!0),u(this,cn).div.classList.add("free"),this.toggleDrawing(),ym.startHighlighting(this,u(this,pt).direction==="ltr",{target:u(this,cn).div,x:t.x,y:t.y}),u(this,cn).div.addEventListener("pointerup",()=>{u(this,cn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,pt)._signal}),t.preventDefault()}},rs=function(){return u(Ni,go).get(u(this,pt).getMode())},$0=function(t){const e=u(this,ae,rs);return e?new e.prototype.constructor(t):null},G0=function(){const{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,t),l=Math.max(0,e),c=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+s),f=(a+c)/2-t,m=(l+d)/2-e,[g,v]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:g,offsetY:v}},im=function(){for(const t of u(this,bi).values())t.isEmpty()&&t.remove()},wt(Ni,"_initialized",!1),_(Ni,go,new Map([E0,V0,z0,ym].map(t=>[t._editorType,t])));let U0=Ni;var Xi,Qd,bn,Ya,Om,lT,_s,q0,uT,X0;const on=class on{constructor({pageIndex:t}){_(this,_s);_(this,Xi,null);_(this,Qd,0);_(this,bn,new Map);_(this,Ya,new Map);this.pageIndex=t}setParent(t){if(!u(this,Xi)){x(this,Xi,t);return}if(u(this,Xi)!==t){if(u(this,bn).size>0)for(const e of u(this,bn).values())e.remove(),t.append(e);x(this,Xi,t)}}static get _svgFactory(){return Nt(this,"_svgFactory",new Vw)}draw(t,e=!1,n=!1){const s=vn(this,Qd)._++,a=C(this,_s,q0).call(this),l=on._svgFactory.createElement("defs");a.append(l);const c=on._svgFactory.createElement("path");l.append(c);const d=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),e&&u(this,Ya).set(s,c);const f=n?C(this,_s,uT).call(this,l,d):null,m=on._svgFactory.createElement("use");return a.append(m),m.setAttribute("href",`#${d}`),this.updateProperties(a,t),u(this,bn).set(s,a),{id:s,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=vn(this,Qd)._++,s=C(this,_s,q0).call(this),a=on._svgFactory.createElement("defs");s.append(a);const l=on._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const g=on._svgFactory.createElement("mask");a.append(g),d=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const v=on._svgFactory.createElement("rect");g.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const A=on._svgFactory.createElement("use");g.append(A),A.setAttribute("href",`#${c}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=on._svgFactory.createElement("use");s.append(f),f.setAttribute("href",`#${c}`),d&&f.setAttribute("mask",`url(#${d})`);const m=f.cloneNode();return s.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(s,t),u(this,bn).set(n,s),n}finalizeDraw(t,e){u(this,Ya).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var d;if(!e)return;const{root:n,bbox:s,rootClass:a,path:l}=e,c=typeof t=="number"?u(this,bn).get(t):t;if(c){if(n&&C(this,_s,X0).call(this,c,n),s&&C(d=on,Om,lT).call(d,c,s),a){const{classList:f}=c;for(const[m,g]of Object.entries(a))f.toggle(m,g)}if(l){const m=c.firstChild.firstChild;C(this,_s,X0).call(this,m,l)}}}updateParent(t,e){if(e===this)return;const n=u(this,bn).get(t);n&&(u(e,Xi).append(n),u(this,bn).delete(t),u(e,bn).set(t,n))}remove(t){u(this,Ya).delete(t),u(this,Xi)!==null&&(u(this,bn).get(t).remove(),u(this,bn).delete(t))}destroy(){x(this,Xi,null);for(const t of u(this,bn).values())t.remove();u(this,bn).clear(),u(this,Ya).clear()}};Xi=new WeakMap,Qd=new WeakMap,bn=new WeakMap,Ya=new WeakMap,Om=new WeakSet,lT=function(t,[e,n,s,a]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*s}%`,l.height=`${100*a}%`},_s=new WeakSet,q0=function(){const t=on._svgFactory.create(1,1,!0);return u(this,Xi).append(t),t.setAttribute("aria-hidden",!0),t},uT=function(t,e){const n=on._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const a=on._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),s},X0=function(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)},_(on,Om);let W0=on;globalThis.pdfjsTestingUtils={HighlightOutliner:C0};Et.AbortException;Et.AnnotationEditorLayer;Et.AnnotationEditorParamsType;Et.AnnotationEditorType;Et.AnnotationEditorUIManager;Et.AnnotationLayer;Et.AnnotationMode;Et.ColorPicker;Et.DOMSVGFactory;Et.DrawLayer;Et.FeatureTest;var yN=Et.GlobalWorkerOptions;Et.ImageKind;Et.InvalidPDFException;Et.MissingPDFException;Et.OPS;Et.OutputScale;Et.PDFDataRangeTransport;Et.PDFDateString;Et.PDFWorker;Et.PasswordResponses;Et.PermissionFlag;Et.PixelsPerInch;Et.RenderingCancelledException;Et.TextLayer;Et.TouchManager;Et.UnexpectedResponseException;Et.Util;Et.VerbosityLevel;Et.XfaLayer;Et.build;Et.createValidAbsoluteUrl;Et.fetchData;var vN=Et.getDocument;Et.getFilenameFromUrl;Et.getPdfFilenameFromUrl;Et.getXfaPageViewport;Et.isDataScheme;Et.isPdfFile;Et.noContextMenu;Et.normalizeUnicode;Et.setLayerDimensions;Et.shadow;Et.stopEvent;var wN=Et.version;yN.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${wN}/pdf.worker.min.mjs`;async function AN(o){const t=await o.arrayBuffer(),e=await vN({data:t}).promise;let n="";for(let s=1;s<=e.numPages;s++){const c=(await(await e.getPage(s)).getTextContent()).items.map(d=>d.str);n+=c.join(" ")+`
`}return n}async function xN(o,t,e,n,s){if(!t)throw new Error("API Key is required");const a=`
    You are an expert quiz generator. Generate a multiple-choice quiz based on the following text.
    The quiz should have ${n} questions.
    Difficulty level: ${s}.
    
    Return ONLY a JSON object with the following structure:
    {
      "title": "Quiz Title",
      "questions": [
        {
          "question": "Question text?",
          "options": ["Option 1", "Option 2", "Option 3", "Option 4"],
          "correctAnswer": 0,
          "explanation": "Why this is correct"
        }
      ]
    }
    
    Text content:
    ${o.substring(0,8e3)}
  `,c=await(await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json","HTTP-Referer":"https://github.com/mk-knight23/pdf-to-quiz-generator","X-Title":"QuizFlow AI"},body:JSON.stringify({model:e,messages:[{role:"user",content:a}],response_format:{type:"json_object"}})})).json();if(c.error)throw new Error(c.error.message||"AI Generation failed");const d=c.choices[0].message.content;return JSON.parse(d)}function SN(){const{settings:o,addQuiz:t,quizzes:e,removeQuiz:n}=Mw(),[s,a]=et.useState(null),[l,c]=et.useState(!1),[d,f]=et.useState(null),[m,g]=et.useState(null),[v,A]=et.useState({}),[S,b]=et.useState(!1),T=R=>{R.target.files&&R.target.files[0]&&(a(R.target.files[0]),f(null))},k=async()=>{if(s){if(!o.apiKey){f("Please configure your API key in Settings first");return}c(!0),f(null);try{const R=await AN(s),I=await xN(R,o.apiKey,o.model,o.numQuestions,o.difficulty),j={id:Math.random().toString(36).substr(2,9),title:I.title,questions:I.questions.map(B=>({...B,id:Math.random().toString(36).substr(2,9)})),createdAt:new Date().toISOString(),pdfName:s.name};t(j),g(j),A({}),b(!1)}catch(R){f(R.message||"Failed to generate quiz")}finally{c(!1)}}},M=(R,I)=>{S||A(j=>({...j,[R]:I}))},L=m?m.questions.reduce((R,I)=>R+(v[I.id]===I.correctAnswer?1:0),0):0;return z.jsx("div",{className:"max-w-4xl mx-auto space-y-8",children:m?z.jsxs(Ul.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-8 pb-20",children:[z.jsxs("div",{className:"flex items-center justify-between",children:[z.jsx("button",{onClick:()=>g(null),className:"text-slate-500 hover:text-quiz-primary transition-colors flex items-center gap-2",children:" Back to Generator"}),z.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:m.pdfName})]}),z.jsxs("header",{className:"space-y-2",children:[z.jsx("h2",{className:"text-3xl md:text-4xl font-display font-black leading-tight",children:m.title}),z.jsx("p",{className:"text-slate-500",children:"Based on your uploaded document"})]}),z.jsx("div",{className:"space-y-6",children:m.questions.map((R,I)=>z.jsxs("div",{className:"glass p-8 rounded-[2rem] space-y-6",children:[z.jsxs("div",{className:"flex items-start gap-4",children:[z.jsx("span",{className:"bg-quiz-primary text-white w-8 h-8 rounded-lg flex items-center justify-center font-bold shrink-0",children:I+1}),z.jsx("h4",{className:"text-xl font-bold leading-snug",children:R.question})]}),z.jsx("div",{className:"grid gap-3 pl-12",children:R.options.map((j,B)=>{const U=v[R.id]===B,Q=B===R.correctAnswer,ct=S&&Q,ot=S&&U&&!Q;return z.jsxs("button",{onClick:()=>M(R.id,B),className:bN("w-full text-left p-4 rounded-xl border-2 transition-all flex items-center justify-between",!S&&U&&"bg-quiz-primary/10 border-quiz-primary",!S&&!U&&"border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50",ct&&"bg-emerald-500/10 border-emerald-500 text-emerald-600 dark:text-emerald-400",ot&&"bg-red-500/10 border-red-500 text-red-600 dark:text-red-400"),children:[z.jsx("span",{className:"font-medium",children:j}),ct&&z.jsx(pb,{size:18}),ot&&z.jsx(fb,{size:18})]},B)})}),S&&z.jsx(Ul.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"pl-12 pt-4 border-t border-slate-100 dark:border-slate-800",children:z.jsxs("p",{className:"text-sm text-slate-500 italic",children:[z.jsx("span",{className:"font-bold text-quiz-accent uppercase not-italic mr-2",children:"Explanation:"}),R.explanation]})})]},R.id))}),z.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 w-full max-w-lg px-4",children:z.jsx("div",{className:"glass p-4 rounded-2xl shadow-2xl flex items-center justify-between",children:S?z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:"flex items-center gap-4 pl-4",children:[z.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase",children:"Score"}),z.jsxs("span",{className:"text-2xl font-black text-quiz-primary",children:[L,"/",m.questions.length]})]}),z.jsx("button",{onClick:()=>g(null),className:"bg-quiz-dark dark:bg-white dark:text-quiz-dark text-white px-6 py-3 rounded-xl font-bold",children:"Done"})]}):z.jsxs(z.Fragment,{children:[z.jsxs("p",{className:"text-sm text-slate-500 pl-4 font-medium",children:[Object.keys(v).length," of ",m.questions.length," answered"]}),z.jsx("button",{disabled:Object.keys(v).length<m.questions.length,onClick:()=>b(!0),className:"bg-quiz-primary hover:bg-quiz-primary/90 text-white px-8 py-3 rounded-xl font-bold disabled:opacity-50 transition-all",children:"Check Results"})]})})})]}):z.jsxs(Ul.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[z.jsxs("div",{className:"glass p-12 rounded-[2.5rem] border-2 border-dashed border-slate-300 dark:border-slate-700 flex flex-col items-center text-center space-y-6 transition-colors hover:border-quiz-primary/50",children:[z.jsx("div",{className:"p-6 bg-quiz-primary/10 rounded-full text-quiz-primary",children:z.jsx(oD,{size:48})}),z.jsxs("div",{children:[z.jsx("h3",{className:"text-2xl font-display font-bold",children:"Upload PDF"}),z.jsx("p",{className:"text-slate-500 mt-2",children:"Maximum file size: 10MB"})]}),z.jsx("input",{type:"file",accept:".pdf",onChange:T,className:"hidden",id:"pdf-upload"}),z.jsx("label",{htmlFor:"pdf-upload",className:"bg-quiz-primary hover:bg-quiz-primary/90 text-white px-8 py-3 rounded-xl font-bold cursor-pointer transition-all active:scale-95 shadow-lg shadow-quiz-primary/20",children:"Select File"}),s&&z.jsxs("div",{className:"flex items-center gap-2 text-quiz-accent font-medium",children:[z.jsx(pb,{size:18}),s.name]})]}),z.jsxs("button",{onClick:k,disabled:!s||l,className:"w-full bg-quiz-dark dark:bg-white dark:text-quiz-dark text-white p-5 rounded-2xl font-display font-bold text-xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[l?z.jsx(Iv,{className:"animate-spin"}):z.jsx(Iv,{}),l?"GENERATING QUIZ...":"GENERATE QUIZ"]}),d&&z.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 p-4 rounded-xl flex items-start gap-3",children:[z.jsx(fb,{className:"shrink-0"}),z.jsx("p",{className:"text-sm font-medium",children:d})]}),e.length>0&&z.jsxs("div",{className:"space-y-4",children:[z.jsxs("h3",{className:"text-xl font-display font-bold flex items-center gap-2",children:[z.jsx(lD,{className:"w-5 h-5"})," Recent Quizzes"]}),z.jsx("div",{className:"grid gap-4",children:e.map(R=>z.jsxs("div",{className:"glass p-4 rounded-2xl flex items-center justify-between group",children:[z.jsxs("div",{className:"flex items-center gap-4",children:[z.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-xl",children:z.jsx(iD,{className:"text-slate-400"})}),z.jsxs("div",{children:[z.jsx("h4",{className:"font-bold",children:R.title}),z.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-tighter",children:R.pdfName})]})]}),z.jsxs("div",{className:"flex items-center gap-2",children:[z.jsx("button",{onClick:()=>g(R),className:"p-2 hover:bg-quiz-primary/10 text-quiz-primary rounded-lg transition-colors",children:z.jsx(rD,{size:18})}),z.jsx("button",{onClick:()=>n(R.id),className:"p-2 hover:bg-red-500/10 text-red-500 rounded-lg transition-colors",children:z.jsx(gD,{size:18})})]})]},R.id))})]})]})})}function bN(...o){return o.filter(Boolean).join(" ")}const EN=[{id:"minimax/minimax-m2:free",name:"MiniMax M2 (Free)"},{id:"google/gemini-flash-1.5-8b:free",name:"Gemini 1.5 Flash (Free)"},{id:"meta-llama/llama-3.1-8b-instruct:free",name:"Llama 3.1 8B (Free)"},{id:"openai/gpt-4o-mini",name:"GPT-4o Mini (Paid)"}];function _N({onClose:o}){const{settings:t,updateSettings:e,isDarkMode:n,toggleDarkMode:s}=Mw();return z.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[z.jsx(Ul.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:o,className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),z.jsxs(Ul.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full max-w-md bg-white dark:bg-slate-900 rounded-[2.5rem] p-8 shadow-2xl overflow-hidden",children:[z.jsxs("div",{className:"flex items-center justify-between mb-8",children:[z.jsx("h2",{className:"text-2xl font-display font-black tracking-tight",children:"App Settings"}),z.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:z.jsx(yD,{size:20})})]}),z.jsxs("div",{className:"space-y-6",children:[z.jsxs("div",{className:"space-y-2",children:[z.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[z.jsx(uD,{size:14})," OpenRouter API Key"]}),z.jsx("input",{type:"password",value:t.apiKey,onChange:a=>e({apiKey:a.target.value}),className:"w-full bg-slate-100 dark:bg-slate-800 border-none rounded-xl px-4 py-3 focus:ring-2 focus:ring-quiz-primary outline-none transition-all",placeholder:"sk-or-v1-..."}),z.jsxs("p",{className:"text-[10px] text-slate-400",children:["Keys are stored locally in your browser. Get one at ",z.jsx("a",{href:"https://openrouter.ai/keys",target:"_blank",className:"text-quiz-primary underline",children:"openrouter.ai"})]})]}),z.jsxs("div",{className:"space-y-2",children:[z.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[z.jsx(sD,{size:14})," AI Model"]}),z.jsx("select",{value:t.model,onChange:a=>e({model:a.target.value}),className:"w-full bg-slate-100 dark:bg-slate-800 border-none rounded-xl px-4 py-3 focus:ring-2 focus:ring-quiz-primary outline-none transition-all",children:EN.map(a=>z.jsx("option",{value:a.id,children:a.name},a.id))})]}),z.jsxs("div",{className:"space-y-2",children:[z.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[z.jsx(cD,{size:14})," Default Question Count"]}),z.jsx("input",{type:"number",min:"1",max:"20",value:t.numQuestions,onChange:a=>e({numQuestions:parseInt(a.target.value)}),className:"w-full bg-slate-100 dark:bg-slate-800 border-none rounded-xl px-4 py-3 focus:ring-2 focus:ring-quiz-primary outline-none transition-all"})]}),z.jsxs("div",{className:"space-y-2",children:[z.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[z.jsx(nD,{size:14})," Difficulty Level"]}),z.jsx("div",{className:"flex gap-2",children:["easy","medium","hard"].map(a=>z.jsx("button",{onClick:()=>e({difficulty:a}),className:CN("flex-1 py-2 rounded-lg font-bold text-sm uppercase transition-all",t.difficulty===a?"bg-quiz-primary text-white":"bg-slate-100 dark:bg-slate-800 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"),children:a},a))})]}),z.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-800 flex items-center justify-between",children:[z.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"Interface Theme"}),z.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:[n?z.jsx(mD,{size:18}):z.jsx(hD,{size:18}),z.jsx("span",{className:"text-xs font-black uppercase",children:n?"Light":"Dark"})]})]})]}),z.jsxs("div",{className:"mt-10 flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-2xl border border-emerald-100 dark:border-emerald-800",children:[z.jsx(fD,{className:"text-emerald-500 shrink-0"}),z.jsx("p",{className:"text-[10px] font-medium text-emerald-600 dark:text-emerald-400 leading-relaxed",children:"Your privacy is prioritized. All PDF processing and API keys remain within your browser environment."})]})]})]})}function CN(...o){return o.filter(Boolean).join(" ")}function TN(){const{isDarkMode:o}=Mw(),[t,e]=et.useState(!1);return z.jsx("div",{className:`min-h-screen ${o?"dark":""}`,children:z.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[z.jsxs("nav",{className:"flex justify-between items-center mb-16",children:[z.jsxs("div",{className:"flex items-center gap-3",children:[z.jsx("div",{className:"bg-quiz-primary p-2.5 rounded-2xl shadow-lg shadow-quiz-primary/30 rotate-3",children:z.jsx(Iv,{className:"text-white w-7 h-7"})}),z.jsxs("div",{children:[z.jsxs("h1",{className:"text-2xl font-display font-black tracking-tighter",children:["Quiz",z.jsx("span",{className:"text-quiz-primary",children:"Flow"})]}),z.jsxs("div",{className:"flex items-center gap-1",children:[z.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),z.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"AI Enabled"})]})]})]}),z.jsxs("div",{className:"flex items-center gap-2",children:[z.jsx("button",{onClick:()=>e(!0),className:"p-3 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-quiz-primary transition-all",children:z.jsx(dD,{size:20})}),z.jsx("a",{href:"https://github.com/mk-knight23/37-PDF-to-Quiz-Generator",className:"p-3 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-quiz-primary transition-all",children:z.jsx(aD,{size:20})})]})]}),z.jsxs("div",{className:"text-center mb-16 space-y-4",children:[z.jsxs(Ul.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-quiz-secondary/10 text-quiz-secondary text-xs font-black uppercase tracking-widest",children:[z.jsx(pD,{size:14,className:"fill-current"})," Transform Documents Instantly"]}),z.jsxs("h2",{className:"text-5xl md:text-7xl font-display font-black tracking-tight leading-[0.9]",children:["Turn PDFs into ",z.jsx("br",{}),z.jsx("span",{className:"gradient-text italic",children:"Interactive Quizzes"})]}),z.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-xl mx-auto text-lg font-medium",children:"Upload any PDF and let our AI generate a comprehensive quiz for you. Perfect for students, teachers, and lifelong learners."})]}),z.jsx("main",{children:z.jsx(SN,{})}),z.jsx("footer",{className:"mt-32 pb-12 border-t border-slate-200 dark:border-slate-800 pt-12",children:z.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-8 text-sm text-slate-400 font-bold uppercase tracking-widest",children:[z.jsxs("div",{className:"flex items-center gap-6",children:[z.jsx("a",{href:"#",className:"hover:text-quiz-primary transition-colors",children:"Privacy"}),z.jsx("a",{href:"#",className:"hover:text-quiz-primary transition-colors",children:"API"}),z.jsx("a",{href:"#",className:"hover:text-quiz-primary transition-colors",children:"Terms"})]}),z.jsx("p",{children:" 2026 MK-QUILABS"})]})}),z.jsx(SP,{children:t&&z.jsx(_N,{onClose:()=>e(!1)})})]})})}yP.createRoot(document.getElementById("root")).render(z.jsx(qc.StrictMode,{children:z.jsx(TN,{})}));
